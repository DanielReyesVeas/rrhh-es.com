"use strict";var scopeSystem;angular.module("angularjsApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.bootstrap","ui.utils.masks","ngFileUpload","ui-notification","ngStorage","flow","angular-toArrayFilter"]).config(["$routeProvider",function(a){a.when("/login",{templateUrl:"views/comun/login.html?v=2545577777",controller:"LoginCtrl",controllerAs:"login"}).when("/menu",{templateUrl:"views/menu.html",controller:"MenuCtrl",controllerAs:"menu"}).when("/funcionarios",{templateUrl:"views/funcionarios.html",controller:"FuncionariosCtrl",controllerAs:"funcionarios"}).when("/departamentos",{templateUrl:"views/departamentos.html",controller:"DepartamentosCtrl",controllerAs:"departamentos"}).when("/cuentas",{templateUrl:"views/cuentas.html",controller:"CuentasCtrl",controllerAs:"cuentas"}).when("/centros-de-costo",{templateUrl:"views/centros-de-costo.html",controller:"CentrosDeCostoCtrl",controllerAs:"centrosDeCosto"}).when("/bancos",{templateUrl:"views/bancos.html",controller:"BancosCtrl",controllerAs:"bancos"}).when("/areas-de-negocio",{templateUrl:"views/areas-de-negocio.html",controller:"AreasDeNegocioCtrl",controllerAs:"areasDeNegocio"}).when("/tipos-de-comprobante",{templateUrl:"views/tipos-de-comprobante.html",controller:"TiposDeComprobanteCtrl",controllerAs:"tiposDeComprobante"}).when("/tipos-documentos-sii",{templateUrl:"views/tipos-documentos-sii.html",controller:"TiposDocumentosSiiCtrl",controllerAs:"tiposDocumentosSii"}).when("/registro-asientos-contables",{templateUrl:"views/registro-asientos-contables.html",controller:"RegistroAsientosContablesCtrl",controllerAs:"registroAsientosContables"}).when("/perfiles",{templateUrl:"views/perfiles.html",controller:"PerfilesCtrl",controllerAs:"perfiles"}).when("/inicio",{templateUrl:"views/inicio.html",controller:"InicioCtrl",controllerAs:"inicio"}).when("/empresas",{templateUrl:"views/empresas.html",controller:"EmpresasCtrl",controllerAs:"empresas"}).when("/clientes-proveedores",{templateUrl:"views/clientes-proveedores.html",controller:"ClientesProveedoresCtrl",controllerAs:"clientesProveedores"}).when("/parametros-sistema",{templateUrl:"views/parametros-sistema.html",controller:"ParametrosSistemaCtrl",controllerAs:"parametrosSistema"}).when("/apertura-cierre-anual",{templateUrl:"views/apertura-cierre-anual.html",controller:"AperturaCierreAnualCtrl",controllerAs:"aperturaCierreAnual"}).when("/auxiliares",{templateUrl:"views/auxiliares.html",controller:"AuxiliaresCtrl",controllerAs:"auxiliares"}).when("/importacion-libro-compra-xml",{templateUrl:"views/importacion-libro-compra-xml.html",controller:"ImportacionLibroCompraXmlCtrl",controllerAs:"importacionLibroCompraXml"}).when("/importacion-libro-venta-xml",{templateUrl:"views/importacion-libro-venta-xml.html",controller:"ImportacionLibroVentaXmlCtrl",controllerAs:"importacionLibroVentaXml"}).when("/ingreso-boleta-honorarios",{templateUrl:"views/ingreso-boleta-honorarios.html",controller:"IngresoBoletaHonorariosCtrl",controllerAs:"ingresoBoletaHonorarios"}).when("/sii-plan-de-cuentas",{templateUrl:"views/sii-plan-de-cuentas.html",controller:"SiiPlanDeCuentasCtrl",controllerAs:"siiPlanDeCuentas"}).when("/cuentas-ifrs",{templateUrl:"views/cuentas-ifrs.html",controller:"CuentasIfrsCtrl",controllerAs:"cuentasIfrs"}).when("/documentos-directos",{templateUrl:"views/documentos-directos.html",controller:"DocumentosDirectosCtrl",controllerAs:"documentosDirectos"}).when("/sii-control-folios",{templateUrl:"views/sii-control-folios.html",controller:"SiiControlFoliosCtrl",controllerAs:"siiControlFolios"}).when("/importacion-libro-boletas",{templateUrl:"views/importacion-libro-boletas.html",controller:"ImportacionLibroBoletasCtrl",controllerAs:"importacionLibroBoletas"}).when("/pago-documentos",{templateUrl:"views/pago-documentos.html",controller:"PagoDocumentosCtrl",controllerAs:"pagoDocumentos"}).when("/medios-pagos",{templateUrl:"views/medios-pagos.html",controller:"MediosPagosCtrl",controllerAs:"mediosPagos"}).when("/nominas-pagos",{templateUrl:"views/nominas-pagos.html",controller:"NominasPagosCtrl",controllerAs:"nominasPagos"}).when("/pago-anticipos",{templateUrl:"views/pago-anticipos.html",controller:"PagoAnticiposCtrl",controllerAs:"pagoAnticipos"}).when("/activos-fijos",{templateUrl:"views/activos-fijos.html",controller:"ActivosFijosCtrl",controllerAs:"activosFijos"}).when("/activos-fijos-depreciacion-ejercicio",{templateUrl:"views/activos-fijos-depreciacion-ejercicio.html",controller:"ActivosFijosDepreciacionEjercicioCtrl",controllerAs:"activosFijosDepreciacionEjercicio"}).when("/deposito-pagos-clientes",{templateUrl:"views/deposito-pagos-clientes.html",controller:"DepositoPagosClientesCtrl",controllerAs:"depositoPagosClientes"}).otherwise({redirectTo:"/login"})}]).directive("ngSpinnerLoader",["$rootScope",function(a){return{link:function(b,c){c.addClass("hide"),a.$on("$routeChangeStart",function(){c.removeClass("hide")}),a.$on("$routeChangeSuccess",function(){setTimeout(function(){c.addClass("hide")},500),angular.element("html, body").animate({scrollTop:0},500)})}}}]).directive("icheck",["$timeout",function(a){return{require:"ngModel",link:function(b,c,d,e){return a(function(){var a;return a=d.value,b.$watch(d.ngModel,function(){angular.element(c).iCheck("update")}),angular.element(c).iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"}).on("ifChanged",function(f){return"checkbox"===angular.element(c).attr("type")&&d.ngModel&&b.$apply(function(){return e.$setViewValue(f.target.checked)}),"radio"===angular.element(c).attr("type")&&d.ngModel?b.$apply(function(){return e.$setViewValue(a)}):void 0})})}}}]).run(["$rootScope","$location","$localStorage","$http","$timeout","$interval","constantes","Notification","$resource",function(a,b,c,d,e,f,g,h,i){a.globals=c.globals||{},a.globals&&a.globals.currentUser,a.checkVersion=function(){var b=i(g.URL+"inicio/version").get();b.$promise.then(function(b){if(a.habilitarVista=!0,g.version!==b.version){var c=h.info({message:"Existe una nueva versión del sistema (<b>"+b.version+"</b>) disponible para ser cargada. Presione el botón F5 o recargue la página nuevamente para instalarla.",title:"Mensaje del Sistema",delay:""});f.cancel(a.revision),a.revision=f(function(){c.then(function(a){a.kill()}),a.checkVersion()},3e4)}else f.cancel(a.revision),a.revision=f(function(){a.checkVersion()},3e4)})},g.version&&(a.revision=e(function(){a.checkVersion()},1e3)),a.$on("$locationChangeStart",function(){var c=-1===b.path().indexOf("/login");if(a.globals){var d=a.globals.currentUser;if(c&&!d&&b.path("/login"),a.globals.currentUser){var e=a.globals.currentUser.accesos.indexOf(b.path())>=0;e||(a.globals.currentUser["default"]?b.path(a.globals.currentUser["default"]):b.path("/login"))}}})}]).controller("systemCtrl",["$rootScope","$scope","$filter","$timeout","$uibModal","$injector","$route","$location","$localStorage","$window","$http","applicationService","quickViewService","builderService","Notification","pluginsService","login","constantes",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){scopeSystem=b,a.cargando=!1,a.validarVersion=!1,a.revisarVersion=!1,a.versionTime=1e4,b.constantes=r,b.cerrarModals=function(){var a=f.get("$uibModalStack");a.dismissAll()},b.logout=function(){q.ClearCredentials(),h.path("/login")},b.openSoporteOnline=function(){var a=800,b=600,c="http://soporte.easysystems.cl/chat?locale=Es",d=screen.width/2-a/2,e=screen.height/2-b/2;j.open(c,"SOPORTEONLINEEASYSYSTEMSCME","width="+a+",height="+b+",left="+d+",top="+e+", scrollbars=yes")},b.openFormPassword=function(){modalInstance=e.open({animation:b.animationsEnabled,templateUrl:"myModalPassword.html",controller:"ModalFormPasswordCtrl",size:"800"})},b.openContactoComercial=function(){var a=e.open({animation:b.animationsEnabled,templateUrl:"myModalContactoComercial.html",controller:"ModalFormContactoComercialCtrl",size:"700"});a.result.then(function(a){o.success({message:a,title:"Notificación del Sistema"})})},b.cambiarEmpresa=function(b){a.cargando=!0;var c=k({method:"post",url:r.URL+"cambiar-empresa",data:{empresa:b.id,actual:h.path()}});c.success(function(c){c.success?(a.globals.currentUser.empresa=b,a.globals.currentUser.empresa.anioActual=c.anioActual,a.globals.currentUser.menu=c.menu.menu,a.globals.currentUser.accesos=c.menu.secciones,a.globals.currentUser["default"]=c.menu.inicio,i.globals.currentUser.menu=c.menu.menu,i.globals.currentUser.accesos=c.menu.secciones,i.globals.currentUser["default"]=c.menu.inicio,c.recargar?(d(function(){$("#main-menu").smartmenus("refresh")},500),g.reload()):h.path("/inicio")):o.error({message:"Hubo un problema al intentar conectarse a la base de datos",title:"Mensaje del Sistema"}),a.cargando=!1})},b.filtroEmpresa=function(b){return b?b.id!==a.globals.currentUser.empresa.id:!1},b.certificadoHonorarios=function(){e.open({animation:!1,templateUrl:"views/reports/report-certificado-honorarios.html?v="+c("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalReporteCertificadoHonorariosCtrl",size:"700",backdrop:"static"})},b.libroDiario=function(){e.open({animation:!1,templateUrl:"views/reports/report-libro-diario.html?v="+c("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalReporteLibroDiarioCtrl",size:"700",backdrop:"static"})},b.libroMayor=function(){e.open({animation:!1,templateUrl:"views/reports/report-libro-mayor.html?v="+c("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalReporteLibroMayorCtrl",size:"700",backdrop:"static"})},b.balanceTributario=function(){e.open({animation:!1,templateUrl:"views/reports/report-balance-tributario.html?v="+c("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalReporteBalanceTributarioCtrl",size:"700",backdrop:"static"})},b.balanceClasificado=function(){e.open({animation:!1,templateUrl:"views/reports/report-balance-clasificado.html?v="+c("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalReporteBalanceClasificadoCtrl",size:"700",backdrop:"static"})},b.estadoResultado=function(){e.open({animation:!1,templateUrl:"views/reports/report-estado-resultado.html?v="+c("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalReporteEstadoResultadoCtrl",size:"700",backdrop:"static"})},b.aperturaCierreAnual=function(){var a=e.open({animation:b.animationsEnabled,templateUrl:"views/forms/form-apertura-cierre-anual.html?v="+c("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalFormAperturaCierreAnualCtrl",size:"800"});a.result.then(function(a){o.success({message:a,title:"Notificación del Sistema"})})},b.libroHonorarios=function(){e.open({animation:!1,templateUrl:"views/reports/report-libro-honorarios.html?v="+c("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalReporteLibroHonorariosCtrl",size:"700",backdrop:"static"})},b.libroBoletas=function(){e.open({animation:!1,templateUrl:"views/reports/report-libro-boletas.html?v="+c("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalReporteLibroBoletasCtrl",size:"700",backdrop:"static"})},b.libroCompras=function(){e.open({animation:!1,templateUrl:"views/reports/report-libro-compras.html?v="+c("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalReporteLibroComprasCtrl",size:"700",backdrop:"static"})},b.libroVentas=function(){e.open({animation:!1,templateUrl:"views/reports/report-libro-ventas.html?v="+c("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalReporteLibroVentasCtrl",size:"700",backdrop:"static"})},b.declaracionJurada1847=function(){e.open({animation:!1,templateUrl:"views/reports/report-dj-1847.html?v="+c("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalReporteDeclaracionJurada1847Ctrl",size:"700",backdrop:"static"})},b.declaracionJurada1926=function(){e.open({animation:!1,templateUrl:"views/reports/report-dj-1926.html?v="+c("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalReporteDeclaracionJurada1926Ctrl",size:"700",backdrop:"static"})},b.resumenRecuadro2F22=function(){e.open({animation:!1,templateUrl:"views/reports/report-recuadro-2-f22.html?v="+c("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalReporteResumenRecuadro2F22Ctrl",size:"700",backdrop:"static"})},b.informeHonorarios=function(){e.open({animation:!1,templateUrl:"views/reports/report-informe-honorarios.html?v="+c("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalReporteInformeHonorariosCtrl",size:"900",backdrop:"static"})},b.informeCompras=function(){e.open({animation:!1,templateUrl:"views/reports/report-informe-compras.html?v="+c("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalReporteInformeComprasCtrl",size:"900",backdrop:"static"})},b.informeVentas=function(){e.open({animation:!1,templateUrl:"views/reports/report-informe-ventas.html?v="+c("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalReporteInformeVentasCtrl",size:"900",backdrop:"static"})},b.informeAnalisis=function(){e.open({animation:!1,templateUrl:"views/reports/report-informe-analisis.html?v="+c("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalReporteInformeAnalisisCtrl",size:"900",backdrop:"static"})},angular.element(document).ready(function(){l.init(),m.init(),n.init(),p.init()}),b.$on("$viewContentLoaded",function(){if(p.init(),l.customScroll(),l.handlePanelAction(),angular.element(".nav.nav-sidebar .nav-active").removeClass("nav-active active"),angular.element(".nav.nav-sidebar .active:not(.nav-parent)").closest(".nav-parent").addClass("nav-active active"),"/"===h.$$path||"/layout-api"===h.$$path){if(angular.element(".nav.nav-sidebar .nav-parent").removeClass("nav-active active"),angular.element(".nav.nav-sidebar .nav-parent .children").removeClass("nav-active active"),angular.element("body").hasClass("sidebar-collapsed")&&!angular.element("body").hasClass("sidebar-hover"))return;if(angular.element("body").hasClass("submenu-hover"))return;angular.element(".nav.nav-sidebar .nav-parent .children").slideUp(200),angular.element(".nav-sidebar .arrow").removeClass("active")}}),b.isActive=function(a){return a===h.path()}}]).controller("ModalFormPasswordCtrl",["$scope","$rootScope","$uibModalInstance","Notification","funcionario",function(a,b,c,d,e){a.objeto={},b.cargando=!1,a.guardar=function(){b.cargando=!0;var f;f=e.perfil().post({},a.objeto),f.$promise.then(function(e){e.success?c.close(e.mensaje):(d.error({message:e.mensaje,title:"Notificación del Sistema"}),a.objeto={}),b.cargando=!1})},a.cancel=function(){c.dismiss()}}]).controller("ModalFormContactoComercialCtrl",["$scope","$rootScope","$uibModalInstance","Notification",function(a,b,c,d){a.objeto={},a.cancel=function(){c.dismiss()}}]).controller("ModalFormAperturaCierreAnualCtrl",["$scope","$rootScope","$uibModalInstance","Notification","variableSistema",function(a,b,c,d,e){a.objeto={},b.cargando=!1,a.guardar=function(){b.cargando=!0;var c;c=e.datosAperturaCierreAnioEditarAnterior().post({},a.objeto),c.$promise.then(function(a){a.success?d.success({message:a.mensaje,title:"Notificación del Sistema"}):d.error({message:a.mensaje,title:"Notificación del Sistema"}),b.cargando=!1})},a.cambiar=function(){b.cargando=!0;var c;c=e.datosAperturaCierreAnio().post({},a.objeto),c.$promise.then(function(c){c.success?(d.success({message:c.mensaje,title:"Notificación del Sistema"}),a.cargarDatos()):d.error({message:c.mensaje,title:"Notificación del Sistema"}),b.cargando=!1})},a.cancel=function(){c.dismiss()},a.cargarDatos=function(){b.cargando=!0;var c=e.datosAperturaCierreAnio().get();c.$promise.then(function(c){a.objeto=c,b.cargando=!1})},a.cargarDatos()}]).config(["$httpProvider",function(a){a.defaults.withCredentials=!0}]).directive("ngViewClass",["$location",function(a){return{link:function(b,c,d){var e=d.ngViewClass?d.ngViewClass.replace(/ /g,"").split(","):[];setTimeout(function(){if(angular.element(c).hasClass("ng-enter"))for(var b=0;b<e.length;b++){var d=e[b].split(":")[1],f=e[b].split(":")[0];d===a.path()?angular.element(c).addClass(f):angular.element(c).removeClass(f)}})}}}]).directive("confirmationClick",["$uibModal","$sce",function(a,b){return{restrict:"A",link:function(c,d,e){d.bind("click",function(){var d=b.trustAsHtml(e.confirmationNeeded)||"Estas seguro de continuar?",f=a.open({animation:c.animationsEnabled,templateUrl:"views/modal-confirmation.html",controller:"ModalFormDialogCtrl",size:"sm",resolve:{objeto:function(){return{titulo:"Confirmación",mensaje:d}}}});f.result.then(function(){var a=e.confirmClick?e.confirmClick:e.confirmationClick;a&&c.$eval(a)})})}}}]).controller("ModalFormDialogCtrl",["$scope","$uibModalInstance","objeto",function(a,b,c){a.dialog=c,a.aceptar=function(){b.close()},a.cancel=function(){b.dismiss("cancel")}}]).config(["NotificationProvider",function(a){a.setOptions({delay:6e3,startTop:20,startRight:10,verticalSpacing:20,horizontalSpacing:20,positionX:"right",positionY:"bottom"})}]).config(["uibDatepickerConfig",function(a){a.showWeeks=!1}]).factory("redirectInterceptor",["$q","$location","$window","constantes","$rootScope","$interval","$localStorage","$injector",function(a,b,c,d,e,f,g,h){function i(){var a=h.get("$uibModalStack");a.dismissAll()}return{response:function(c){return"string"==typeof c.data&&c.data.indexOf("login-error-status")>-1?(e.globals={},e.menu={},i(),g.$reset(),b.path("/login"),f.cancel(e.revision),e.revision=f(function(){e.checkVersion()},3e4),e.habilitarVista=!1,a.reject(c)):c}}}]).config(["$httpProvider",function(a){a.interceptors.push("redirectInterceptor")}]).filter("percentage",["$filter",function(a){return function(b,c){return a("number")(100*b,c)+"%"}}]).directive("ngEnter",function(){return function(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.ngEnter,{event:b})}),b.preventDefault())})}}).filter("formatofecha",function(){return function(a){return a?(alert("input: "+a),a.replace(/\//g,"-")):void 0}}).directive("regularFecha",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){function e(a){return"string"==typeof a&&(a=a.replace(/\//g,"-")),a}new RegExp(c.awDatepickerPattern);d.$parsers.unshift(e)}}}),angular.module("angularjsApp").controller("LoginCtrl",["$scope","$rootScope","$window","$timeout","$location","login","Notification","empresa","constantes",function(a,b,c,d,e,f,g,h,i){a.alert={},a.username="",a.password="",a.opciones={},a.opciones.empresas=[],a.constantes=i,b.cargando=!1,a.loginBtn=function(){b.habilitarVista=!0,b.cargando=!0,f.Login(a.username,a.password,a.empresa,function(c){c.success?(f.SetCredentials(a.username,a.password,c.usuario,c.menu,c.accesos,c.inicio,c.imagen,c.nombre,c.empresas,c.empresa,c.max,c.uID),e.path(c.inicio),d(function(){$("#main-menu").smartmenus("refresh")},500)):(g.error({message:c.mensaje,title:"Mensaje del Sistema"}),b.cargando=!1,a.cerrarAlert())})},a.cerrarAlert=function(){d(function(){a.alert.mensaje=""},3e3)},f.ClearCredentials(),a.cargarDatos=function(){b.cargando=!0;var c=h.listaSelect().query();c.$promise.then(function(c){a.opciones.empresas=c,b.cargando=!1})},a.cargarDatos()}]),angular.module("angularjsApp").factory("login",["$http","$localStorage","$rootScope","$timeout","constantes",function(a,b,c,d,e){return{Login:function(b,c,d,f){a.post(e.URL+"login",{username:b,password:c,empresa:d}).success(function(a){f(a)})},SetCredentials:function(a,d,e,f,g,h,i,j,k,l,m,n){var o=a;c.globals={currentUser:{username:a,authdata:o,nomUsuario:e,menu:f,imagen:i,nombre:j,accesos:g,"default":h,empresas:k,empresa:l,max:m,uID:n}},b.globals=c.globals},ClearCredentials:function(){c.globals={},c.menu={},b.$reset()}}}]),angular.module("angularjsApp").factory("menu",["constantes","$resource",function(a,b){return{datos:function(){return b(a.URL+"menu/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})},opciones:function(){return b(a.URL+"menu/opciones-formulario/obtener")}}}]),angular.module("angularjsApp").controller("MenuCtrl",["$scope","$rootScope","$filter","$localStorage","$timeout","$uibModal","Notification","menu",function(a,b,c,d,e,f,g,h){a.master={},a.opciones={},a.openForm=function(e){a.menu=e,e.sid?(a.menu.padre=c("filter")(a.opciones.padres,{id:e.padre},!0)[0],a.menu.posicion=c("filter")(a.opciones.posiciones,{id:e.posicion},!0)[0],a.menu.departamento=c("filter")(a.opciones.departamentos,{id:e.departamento},!0)[0],a.menu.tipo=c("filter")(a.opciones.tipos,{id:e.tipo},!0)[0],a.menu.administrador=c("filter")(a.opciones.categorias,{id:e.administrador},!0)[0]):(a.menu.padre=a.opciones.padres.length?a.opciones.padres[0]:"",a.menu.posicion=a.opciones.posiciones[0],a.menu.departamento=a.opciones.departamentos[0],a.menu.tipo=a.opciones.tipos[0],a.menu.administrador=a.opciones.categorias[0]);var h=f.open({animation:a.animationsEnabled,templateUrl:"myModalMenu.html",controller:"ModalFormMenuCtrl",backdrop:"static",resolve:{objeto:function(){return a.menu},opciones:function(){return a.opciones}}});h.result.then(function(c){g.success({message:c.mensaje,title:"Notificación del Sistema"}),b.globals.currentUser.menu=c.menu,d.globals.currentUser.menu=c.menu,a.cargarDatos()})},a.eliminar=function(c){b.cargando=!0,a.result=h.datos()["delete"]({id:c.sid}),a.result.$promise.then(function(b){b.success&&(g.success({message:b.mensaje,title:"Notificación del Sistema"}),a.cargarDatos())})},a.editar=function(c){b.cargando=!0;var d=h.datos().get({id:c.sid});d.$promise.then(function(c){a.openForm(c),b.cargando=!1})},a.cargarDatos=function(){b.cargando=!0;var c=h.datos().get();c.$promise.then(function(c){a.datos=c.datos,a.opciones=c.opciones,b.cargando=!1})},a.cargarDatos()}]).controller("ModalFormMenuCtrl",["$scope","$rootScope","$uibModalInstance","menu","constantes","objeto","opciones",function(a,b,c,d,e,f,g){a.objeto=f,a.opciones=g,a.alert={},f.sid?0===a.objeto.permisos.length&&(a.objeto.permisos={ver:!0,crear:!0,eliminar:!0,modificar:!0}):a.objeto.permisos={ver:!0,crear:!0,eliminar:!0,modificar:!0},a.guardar=function(){b.cargando=!0;var e;e=a.objeto.sid?d.datos().update({id:a.objeto.sid},a.objeto):d.datos().create({},a.objeto),e.$promise.then(function(b){b.success?c.close(b):(a.alert.tipo="danger",a.alert.mensaje=b.mensaje)})},a.cancel=function(){c.dismiss()}}]),angular.module("angularjsApp").factory("funcionario",["$resource","$http","constantes",function(a,b,c){return{datos:function(){return a(c.URL+"usuarios/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})},opciones:function(){return a(c.URL+"usuarios/opciones/formulario")},perfil:function(){return a(c.URL+"misdatos",{},{post:{method:"POST"}})},buscarRut:function(b){return a(c.URL+"usuarios/buscar-rut/"+b)},typeahead:function(a){return b.get(c.URL+"usuarios/buscador/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})},listaProductManager:function(){return a(c.URL+"usuarios/listado-productManager/json")},listaVendedor:function(){return a(c.URL+"usuarios/listado-vendedor/json")},typeaheadVendedor:function(a){return b.get(c.URL+"usuarios/buscar-vendedor/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})},typeaheadProductManager:function(a){return b.get(c.URL+"usuarios/buscar-productManager/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})}}}]),angular.module("angularjsApp").controller("FuncionariosCtrl",["$scope","$sce","$filter","$rootScope","$uibModal","Notification","constantes","funcionario",function(a,b,c,d,e,f,g,h){a.datos=[],a.constantes=g,a.opciones={},a.open=function(b){var d=e.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-usuario.html?v="+c("date")(new Date,"ddMMyyyyHHmmss"),controller:"ModalFuncionarioCtrl",size:"800",backdrop:"static",resolve:{objeto:function(){return b},opciones:function(){return a.opciones}}});d.result.then(function(b){f.success({message:b,title:"Mensaje del Sistema"}),a.cargarDatos(),a.cargarOpciones()})},a.cargarDatos=function(){d.cargando=!0;var b=h.datos().query();b.$promise.then(function(b){a.datos=b,d.cargando=!1})},a.cargarOpciones=function(){d.cargando=!0;var b=h.opciones().get();b.$promise.then(function(b){a.opciones=b,d.cargando=!1})},a.editar=function(b){d.cargando=!0;var c=h.datos().get({id:b.sid});c.$promise.then(function(b){a.open(b),d.cargando=!1})},a.eliminar=function(b){d.cargando=!0;var c=h.datos()["delete"]({id:b.sid});c.$promise.then(function(b){f.success({message:b.mensaje,title:"Mensaje del Sistema"}),d.cargando=!1,a.cargarDatos()})},a.toolTipEdicion=function(a){return"Editar los datos del funcionario <b>"+a+"</b>"},a.cargarDatos(),a.cargarOpciones()}]).controller("ModalFuncionarioCtrl",["$scope","$rootScope","$timeout","$uibModal","$uibModalInstance","Notification","$filter","funcionario","objeto","opciones","constantes",function(a,b,c,d,e,f,g,h,i,j,k){a.deshabilitar=!0,a.creandoImagen=!1,a.creandoImagenFirma=!1,a.valorPB=100,a.valorPBFirma=100,a.opciones=j,a.objeto=i,a.objeto.fotografiaBase64="",a.objeto.firmaBase64="",a.objeto.crearPassword=!0,a.imagen={},a.imagenFirma={},a.erroresDatos=[],i.fotografia?a.fotografia=k.URL+"stories/"+i.fotografia:a.fotografia="images/usuario.1b225641.png",i.firma?a.firma=k.URL+"stories/"+i.firma:a.firma="images/firma.bfa843cd.png",a.objeto.sid?(a.objeto.dependencia=g("filter")(a.opciones.dependencias,{id:a.objeto.departamento},!0)[0],a.objeto.perfil=g("filter")(a.opciones.perfiles,{sid:a.objeto.perfil},!0)[0],a.objeto.crearPassword=!1):(a.objeto.permisos={},a.objeto.doctoFirma={ordenCompra:!1}),a.ocultarProgressBar=function(){a.creandoImagen=!1,a.valorPB=0},a.ocultarProgressBarFirma=function(){a.creandoImagenFirma=!1,a.valorPBFirma=0},a.obtenerImagenB64=function(){a.objeto.fotografiaBase64="",a.creandoImagen=!0,c(function(){var b,d=new FileReader;d.onload=function(d){b=d.target.result,a.objeto.fotografiaBase64=b,c(function(){a.ocultarProgressBar()},250)},d.readAsDataURL(a.imagen.flow.files[0].file)},1e3)},a.obtenerImagenFirmaB64=function(){a.objeto.fotografiaBase64="",a.creandoImagenFirma=!0,c(function(){var b,d=new FileReader;d.onload=function(d){b=d.target.result,a.objeto.firmaBase64=b,c(function(){a.ocultarProgressBarFirma()},250)},d.readAsDataURL(a.imagenFirma.flow.files[0].file)},1e3)},a.guardar=function(){b.cargando=!0;var c;c=a.objeto.sid?h.datos().update({id:a.objeto.sid},a.objeto):h.datos().create({},a.objeto),c.$promise.then(function(c){c.success?e.close(c.mensaje):(a.erroresDatos=c.errores,f.error({message:c.mensaje,title:"Mensaje del Sistema"})),b.cargando=!1})},a.cancel=function(){e.dismiss("cancel")},a.errores=function(b){var c=a.form[b];return c.$invalid&&c.$dirty},a.openPermisosUsuario=function(){var b=d.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-usuario-permisos.html?v="+g("date")(new Date,"ddMMyyyyHHmmss"),controller:"ModalFormPermisosUsuarioCtrl",size:"lg",backdrop:"static",resolve:{objeto:function(){return a.objeto.permisos}}});b.result.then(function(){},function(b){a.objeto.permisos=b,a.objeto.permisos.creando=!0})}}]).controller("ModalFormPermisosUsuarioCtrl",["$scope","$filter","$timeout","$rootScope","$uibModalInstance","Notification","perfil","funcionario","objeto",function(a,b,c,d,e,f,g,h,i){d.cargando=!1,a.opcionesGuardarPerfil=[{id:0,opcion:"No"},{id:1,opcion:"Modificar Perfil Existente"},{id:2,opcion:"Crear Nuevo Perfil"}],a.objeto=i,a.objeto.creando||(a.objeto.editar=!1,a.objeto.modificarAcceso=!1,a.objeto.seleccion={},a.objeto.perfil={},a.objeto.guardarPerfil={},a.objeto.modificarPerfil={},a.guardarPerfil=a.opcionesGuardarPerfil[0]),a.opciones=[],a.checklistEmpresa={},a.empresas=[],a.empresas.push({nRut:"global",razonSocial:"TODAS"}),a.checkmasterEmpresa=[],a.objeto.sid||(a.objeto.accesos=[]),a.agregarOpcionSeleccion=function(b,c,d){a.objeto.seleccion[b][c]?a.objeto.seleccion[b][c][d]||(a.objeto.seleccion[b][c][d]=!0):a.objeto.seleccion[b][c]={},a.objeto.seleccion[b][c][d]=!0},a.quitarOpcionSeleccion=function(b,c,d){a.objeto.seleccion[b][c]&&(delete a.objeto.seleccion[b][c][d],angular.equals({},a.objeto.seleccion[b][c])&&delete a.objeto.seleccion[b][c])},a.cargarOpcionesSeleccion=function(){d.cargando=!0;var b,c=a.menu.datos,e=a.empresas;for(var f in e)for(b in c)c[b].sid&&e[f].nRut&&(a.checklistEmpresa[e[f].nRut][c[b].sid]={crear:!1,editar:!1,eliminar:!1,ver:!1});for(b in c)c[b].sid&&(a.checklistEmpresa.global[c[b].sid]={crear:!1,editar:!1,eliminar:!1,ver:!1});d.cargando=!1},a.generarSeleccionables=function(){a.objeto.seleccion.global={};for(var b in a.empresas)a.empresas[b].nRut&&(a.objeto.seleccion[a.empresas[b].nRut]={})},a.cargarEmpresas=function(){d.cargando=!0;var b=g.empresas().query();b.$promise.then(function(b){a.checkmasterEmpresa.global={crear:!1,editar:!1,eliminar:!1,ver:!1},a.checklistEmpresa.global={},a.objeto.creando&&a.objeto.seleccion.global||(a.objeto.seleccion.global={});for(var c in b)b[c].nRut&&(a.empresas.push(b[c]),a.checkmasterEmpresa[b[c].nRut]={crear:!1,editar:!1,eliminar:!1,ver:!1},a.checklistEmpresa[b[c].nRut]={},a.objeto.creando&&a.objeto.seleccion[b[c].nRut]||(a.objeto.seleccion[b[c].nRut]={}));d.cargando=!1,a.cargarOpcionesSeleccion(),a.cargarListaPerfiles()})},a.cargarSeleccionAnterior=function(){d.cargando=!0;var b=a.menu.datos;for(var c in a.objeto.seleccion)for(var e in b)b[e].sid&&(a.objeto.seleccion[c]?a.objeto.seleccion[c][b[e].sid]&&(a.checklistEmpresa[c][b[e].sid]=a.objeto.seleccion[c][b[e].sid]):a.objeto.seleccion[c]={});d.cargando=!1},a.cargarListaPerfiles=function(){d.cargando=!0;var e=h.opciones().get();e.$promise.then(function(e){a.opciones=e,a.objeto.creando?c(function(){a.objeto.perfil=b("filter")(a.opciones.perfiles,{sid:a.objeto.perfil.sid},!0)[0],a.objeto.guardarPerfil=a.objeto.guardarPerfil?b("filter")(a.opcionesGuardarPerfil,{id:a.objeto.guardarPerfil.id},!0)[0]:"",a.objeto.modificarPerfil=a.objeto.modificarPerfil?b("filter")(a.opciones.perfilesExistentes,{sid:a.objeto.modificarPerfil.sid},!0)[0]:"",a.cargarSeleccionAnterior()},500):a.objeto.perfil=a.opciones.perfiles[0],d.cargando=!1})},a.cargarOpcionesMenu=function(){d.cargando=!0;var b=g.menu().get();b.$promise.then(function(b){a.menu=b,d.cargando=!1,a.cargarEmpresas()})},a.cargarOpcionesMenu(),a.marcarTodosEmpresa=function(b,c){for(var d in a.menu.datos)a.menu.datos[d].sid&&(a.checklistEmpresa[b][a.menu.datos[d].sid][c]=a.checkmasterEmpresa[b][c],a.seleccionarOpcion(b,a.menu.datos[d].sid,c))},a.seleccionarOpcion=function(b,c,d){var e=a.checklistEmpresa[b][c][d];e?a.agregarOpcionSeleccion(b,c,d):a.quitarOpcionSeleccion(b,c,d)},a.cancel=function(){e.dismiss(a.objeto)},a.marcarAccesosPerfil=function(b){for(var c in b.seleccion)for(var d in b.seleccion[c])for(var e in b.seleccion[c][d])a.checklistEmpresa[c][d][e]=b.seleccion[c][d][e],a.seleccionarOpcion(c,d,e);a.objeto.editar=!0},a.cargarPerfil=function(){if("0"!==a.objeto.perfil.sid){delete a.objeto.seleccion,a.objeto.seleccion={},d.cargando=!0;var b=g.datos().get({id:a.objeto.perfil.sid});b.$promise.then(function(b){d.cargando=!1,a.generarSeleccionables(),a.cargarOpcionesSeleccion(),a.marcarAccesosPerfil(b)})}else f.error({message:"Debe seleccionar un Perfil!",title:"Mensaje del Sistema"})}}]),angular.module("angularjsApp").constant("constantes",{URL:"/",MESES:[{id:1,mes:"Enero",abrev:"Ene"},{id:2,mes:"Febrero",abrev:"Feb"},{id:3,mes:"Marzo",abrev:"Mar"},{id:4,mes:"Abril",abrev:"Abr"},{id:5,mes:"Mayo",abrev:"May"},{id:6,mes:"Junio",abrev:"Jun"},{id:7,mes:"Julio",abrev:"Jul"},{id:8,mes:"Agosto",abrev:"Ago"},{id:9,mes:"Septiembre",abrev:"Sep"},{id:10,mes:"Octubre",abrev:"Oct"},{id:11,mes:"Noviembre",abrev:"Nov"},{id:12,mes:"Diciembre",abrev:"Dic"}],version:"1.0.0",versionFecha:"30-01-2017"}),angular.module("angularjsApp").controller("DepartamentosCtrl",["$scope","$rootScope","$timeout","$uibModal","Notification","departamento",function(a,b,c,d,e,f){a.datos=[],a.open=function(b){var c=d.open({animation:a.animationsEnabled,templateUrl:"myModalContent.html",controller:"ModalInstanceCtrl",size:"lg",resolve:{objeto:function(){return b}}});c.result.then(function(b){e.success({message:b,title:"Mensaje del Sistema"}),a.cargarDatos()})},a.cargarDatos=function(){b.cargando=!0;var c=f.datos().query();c.$promise.then(function(c){a.datos=c,b.cargando=!1})},a.editar=function(c){b.cargando=!0;var d=f.datos().get({
id:c.sid});d.$promise.then(function(c){a.open(c),b.cargando=!1})},a.eliminar=function(c){b.cargando=!0,a.result=f.datos()["delete"]({id:c.sid}),a.result.$promise.then(function(b){b.success&&(e.success({message:b.mensaje,title:"Notificación del Sistema"}),a.cargarDatos())})},a.toolTipEdicion=function(a){return"Editar los datos del departamento <b>"+a+"</b>"},a.cargarDatos()}]).controller("ModalInstanceCtrl",["$scope","$rootScope","$uibModalInstance","$filter","Notification","objeto","departamento",function(a,b,c,d,e,f,g){a.opciones={},a.objeto=f,a.actualizarDatos=function(){a.objeto.sid?(a.objeto.dependencia=d("filter")(a.opciones.dependencias,{id:a.objeto.dependencia},!0)[0],a.objeto.tipo=d("filter")(a.opciones.tipos,{id:a.objeto.tipo},!0)[0]):a.objeto.tipo=d("filter")(a.opciones.tipos,{id:1},!0)[0]},a.guardar=function(){b.cargando=!0;var d;d=a.objeto.sid?g.datos().update({id:a.objeto.sid},a.objeto):g.datos().create({},a.objeto),d.$promise.then(function(a){a.success&&(b.cargando=!1,c.close(a.mensaje))})},a.cancel=function(){c.dismiss("cancel")},a.cargarOpciones=function(){b.cargando=!0;var c=g.opciones().get();c.$promise.then(function(c){a.opciones=c,b.cargando=!1,a.actualizarDatos()})},a.cargarOpciones()}]),angular.module("angularjsApp").factory("departamento",["constantes","$resource",function(a,b){return{datos:function(){return b(a.URL+"departamentos/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})},opciones:function(){return b(a.URL+"departamentos/opciones/formulario")}}}]),angular.module("angularjsApp").controller("CuentasCtrl",["$scope","$rootScope","$filter","$http","$timeout","$uibModal","Notification","cuenta","cuentaClasificacion","constantes",function(a,b,c,d,e,f,g,h,i,j){a.datos=[],a.constantes=j,a.open=function(b,d){var e=f.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-cuenta.html?v="+c("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalFormCuentaCtrl",size:"800",backdrop:"static",resolve:{objeto:function(){return b},retorno:function(){return!0},padre:function(){return d}}});e.result.then(function(b){g.success({message:b,title:"Mensaje del Sistema"}),a.cargarDatos()})},a.cargarDatos=function(){b.cargando=!0;var c=h.datos().query();c.$promise.then(function(c){a.datos=c,b.cargando=!1})},a.editarCuenta=function(c){b.cargando=!0;var d=h.datos().get({id:c.id});d.$promise.then(function(c){a.open(c),b.cargando=!1})},a.eliminarCuenta=function(c){b.cargando=!0,a.result=h.datos()["delete"]({id:c.id}),a.result.$promise.then(function(c){b.cargando=!1,c.success?(g.success({message:c.mensaje,title:"Notificación del Sistema"}),a.cargarDatos()):g.error({message:c.mensaje,title:"Notificación del Sistema",delay:1e4})})},a.openClasificacion=function(b,d){var e=f.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-clasificacion-cuenta.html?v="+c("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalFormClasificacionCuentaCtrl",backdrop:"static",size:"700",resolve:{objeto:function(){return b},retorno:function(){return!0},padre:function(){return d}}});e.result.then(function(b){g.success({message:b,title:"Mensaje del Sistema"}),a.cargarDatos()})},a.agregarClasificacion=function(b){a.openClasificacion({},b)},a.editarClasificacion=function(c){b.cargando=!0;var d=i.datos().get({id:c.id});d.$promise.then(function(c){a.openClasificacion(c,!1),b.cargando=!1})},a.eliminarClasificacion=function(c){b.cargando=!0,a.result=i.datos()["delete"]({id:c.id}),a.result.$promise.then(function(c){b.cargando=!1,c.success?(g.success({message:c.mensaje,title:"Notificación del Sistema"}),a.cargarDatos()):g.error({message:c.mensaje,title:"Notificación del Sistema",delay:1e4})})},a.agregarCuenta=function(b){a.open({},b)},a.toolTipEdicionClasificacion=function(a){return"Editar los datos de la Clasificación de Cuenta: <b>"+a+"</b>"},a.toolTipAgregarClasificacion=function(a){return"Agregar una <b>Sub-Clasificación</b> a la Clasificación de Cuenta: <b>"+a+"</b>"},a.toolTipAgregarCuenta=function(a){return"Agregar una <b>Cuenta</b> a la Clasificación de Cuenta: <b>"+a+"</b>"},a.cargarDatos(),a.asociarCuenta=function(b){var c=f.open({animation:a.animationsEnabled,templateUrl:"myModalAsociarCuenta.html",controller:"ModalAsociarCuentaCtrl",size:"900",resolve:{objCuenta:function(){return b}}});c.result.then(function(c){b.cuentaSii=c,a.grabarCuentaSii(b)})}}]).controller("ModalAsociarCuentaCtrl",["$scope","$rootScope","$http","$timeout","constantes","$uibModal","$uibModalInstance","$filter","Notification","cuenta","objCuenta",function(a,b,c,d,e,f,g,h,i,j,k){a.dato=k,a.getCuentasSii=function(a){return c.get(e.URL+"sii-plan-de-cuentas/buscador/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})},a.buscarCuentaSii=function(b){var c=f.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-buscar-cuenta-sii.html?v="+h("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalBuscarCuentaSiiCtrl",size:"700"});c.result.then(function(c){b.cuentaSii=c,a.grabarCuentaSii(b)})},a.grabarCuentaSii=function(a){a.cargando=!0;var b={id:a.cuentaSii.id},c=j.grabarCuentaSII().post({id:a.id},b);c.$promise.then(function(b){b.success&&(a.cuentaSiiSave=!0),a.cargando=!1})},a.removerCuentaSII=function(a){a.cargando=!0;var b={id:0},c=j.grabarCuentaSII().post({id:a.id},b);c.$promise.then(function(b){b.success&&(a.cuentaSiiSave=!1,a.cuentaSii=""),a.cargando=!1})},a.getCuentasIFRS=function(a){return c.get(e.URL+"cuentas-ifrs/buscador/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})},a.buscarCuentaIfrs=function(b){var c=f.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-buscar-cuenta-ifrs.html?v="+h("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalBuscarCuentaIFRSCtrl",size:"700"});c.result.then(function(c){b.cuentaIfrs=c,a.grabarCuentaIfrs(b)})},a.grabarCuentaIfrs=function(a){a.cargandoIFRS=!0;var b={id:a.cuentaIfrs.id},c=j.grabarCuentaIFRS().post({id:a.id},b);c.$promise.then(function(b){b.success&&(a.cuentaIfrsSave=!0),a.cargandoIFRS=!1})},a.removerCuentaIFRS=function(a){a.cargandoIFRS=!0;var b={id:0},c=j.grabarCuentaIFRS().post({id:a.id},b);c.$promise.then(function(b){b.success&&(a.cuentaIfrsSave=!1,a.cuentaIfrs=""),a.cargandoIFRS=!1})},a.getCodigosRecuadroF22=function(a){return c.get(e.URL+"sii-recuadro-f22/buscador/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})},a.buscarCuentaRecuadroF22=function(b){var c=f.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-buscar-recuadro-f22-sii.html?v="+h("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalBuscarCuentaRecuadroF22Ctrl",size:"700"});c.result.then(function(c){b.cuentaRecuadroF22=c,a.grabarCuentaRecuadroF22(b)})},a.grabarCuentaRecuadroF22=function(a){a.cargandoRecuadroF22=!0;var b={id:a.cuentaRecuadroF22.id},c=j.grabarCuentaRecuadroF22().post({id:a.id},b);c.$promise.then(function(b){b.success&&(a.cuentaRecuadroF22Save=!0),a.cargandoRecuadroF22=!1})},a.removerCuentaRecuadroF22=function(a){a.cargandoRecuadroF22=!0;var b={id:0},c=j.grabarCuentaRecuadroF22().post({id:a.id},b);c.$promise.then(function(b){b.success&&(a.cuentaRecuadroF22Save=!1,a.cuentaRecuadroF22=""),a.cargandoRecuadroF22=!1})},a.cancel=function(){g.dismiss()}}]).controller("ModalBuscarCuentaRecuadroF22Ctrl",["$scope","$rootScope","$timeout","$uibModalInstance","$filter","Notification","siiRecuadroF22",function(a,b,c,d,e,f,g){a.datos=[],a.filtro={filtro:""},a.cargarDatos=function(){b.cargando=!0;var c=g.datos().query();c.$promise.then(function(c){a.datos=c,b.cargando=!1})},a.seleccionar=function(a){d.close(a)},a.cancel=function(){d.dismiss()},a.cargarDatos()}]).controller("ModalBuscarCuentaIFRSCtrl",["$scope","$rootScope","$timeout","$uibModalInstance","$filter","Notification","cuentaIfrs",function(a,b,c,d,e,f,g){a.datos=[],a.tiposCuenta=[{id:0,tipo:"Todos"},{id:1,tipo:"Activos"},{id:2,tipo:"Pasivos"},{id:3,tipo:"Perdidas"},{id:4,tipo:"Ganancias"}],a.filtro={filtro:"",tipoCuenta:a.tiposCuenta[0]},a.cargarDatos=function(){b.cargando=!0;var c=g.datos().query();c.$promise.then(function(c){a.datos=c,b.cargando=!1})},a.tipoCodigo=function(b){return a.filtro.tipoCuenta.id>0?0===b.codigo.indexOf(a.filtro.tipoCuenta.id):!0},a.seleccionar=function(a){b.cargando=!0;var c=g.obtenerDatos().get({id:a.id});c.$promise.then(function(a){d.close(a),b.cargando=!1})},a.cancel=function(){d.dismiss()},a.cargarDatos()}]).controller("ModalBuscarCuentaSiiCtrl",["$scope","$rootScope","$timeout","$uibModalInstance","$filter","Notification","siiCuenta",function(a,b,c,d,e,f,g){a.datos=[],a.filtro={filtro:""},a.cargarDatos=function(){b.cargando=!0;var c=g.datos().query();c.$promise.then(function(c){a.datos=c,b.cargando=!1})},a.seleccionar=function(a){d.close(a)},a.cancel=function(){d.dismiss()},a.cargarDatos()}]).controller("ModalFormCuentaCtrl",["$scope","$rootScope","$timeout","$http","$uibModal","$uibModalInstance","$filter","Notification","constantes","objeto","retorno","padre","cuenta",function(a,b,c,d,e,f,g,h,i,j,k,l,m){a.retorno=k,a.padre=l,a.opciones={},a.bloquearFormulario=!1,a.objeto=j,a.correlativo=1,a.largoCodigoSubCuenta=3,a.largoCodigoCuenta=3,a.onlyNumbers=/^\d+$/,a.objeto.subcuentas||(a.objeto.subcuentas=[]),a.objeto.subcuentas.length>0&&j.id?a.objeto.configurarSubCuentas=!0:a.objeto.configurarSubCuentas=!1,a.objeto.id||(a.objeto.configuracion={}),a.actualizarDatos=function(){a.objeto.id||a.padre&&c(function(){a.objeto.clasificacion={id:a.padre.id,clasificacion:a.padre.nombreCompleto,codigo:a.padre.codigo}},250)},a.getClasificaciones=function(a){return d.get(i.URL+"cuentas-clasificacion/buscador/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})},a.openClasificacion=function(){var b=e.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-clasificacion-cuenta.html?v="+g("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalFormClasificacionCuentaCtrl",backdrop:"static",windowClass:"window800",resolve:{objeto:function(){return{}},retorno:function(){return!1},padre:function(){return!1}}});b.result.then(function(){})},a.agregarSubCuenta=function(){var b=1,c=a.objeto.clasificacion;c&&c.id&&(b=c.nivel+2);var d=a.digitosCodigo[b];a.largoCodigoSubCuenta=d,a.objeto.subcuentas.length>0?a.correlativo=parseInt(a.objeto.subcuentas[a.objeto.subcuentas.length-1].codigo)+1:a.correlativo=1;var e=a.formatearCodigo(a.correlativo+"",d);a.objeto.subcuentas.push({codigo:e,nombre:"",configuracion:{}})},a.habilitarSubCuentas=function(){j.configurarSubCuentas&&0==a.objeto.subcuentas.length&&a.agregarSubCuenta()},a.eliminarSubCuenta=function(c){if(c.id){b.cargando=!0;var d=m.comprobarSubCuentaEliminar().post({id:c.id});d.$promise.then(function(d){if(d.success){var e=a.objeto.subcuentas.indexOf(c);a.objeto.subcuentas.splice(e,1)}else h.error({message:d.mensaje,title:"Notificación del Sistema",delay:1e4});b.cargando=!1})}else{var e=a.objeto.subcuentas.indexOf(c);a.objeto.subcuentas.splice(e,1)}},a.guardar=function(){b.cargando=!0;var c;c=a.objeto.id?m.datos().update({id:a.objeto.id},a.objeto):m.datos().create({},a.objeto),c.$promise.then(function(a){a.success&&(b.cargando=!1,f.close(a.mensaje))})},a.cancel=function(){f.dismiss("cancel")},a.openConfiguracionCuenta=function(b,c){var d=e.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-cuenta-configuracion.html?v="+g("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalFormConfiguracionCuentaCtrl",backdrop:"static",windowClass:"window700",resolve:{objeto:function(){return b},tipo:function(){return c}}});d.result.then(function(a){b.configuraciones=a})},a.actualizarDatos(),a.verifyDuplicate=function(){var b,c;for(b=a.objeto.subcuentas.concat().sort(function(a,b){return a.codigo>b.codigo?1:a.codigo<b.codigo?-1:0}),c=0;c<a.objeto.subcuentas.length;c++)b[c].isDuplicate=b[c-1]&&b[c-1].codigo==b[c].codigo||b[c+1]&&b[c+1].codigo==b[c].codigo},a.obtenerCodigoCuenta=function(){if(a.objeto.clasificacion&&!a.objeto.codigo){a.comprobandoCuenta=!0;var b=m.obtenerCodigoCuenta().get({clasificacion:a.objeto.clasificacion.id});b.$promise.then(function(b){a.objeto.codigo=b.codigo,a.comprobandoCuenta=!1,a.formatearDigitoCodigo()})}},a.comprobarCodigoCuenta=function(){if(a.objeto.clasificacion&&a.objeto.codigo){a.comprobandoCuenta=!0;var b=m.comprobarCodigoCuenta().get({codigo:a.objeto.codigo,clasificacion:a.objeto.clasificacion.id,id:a.objeto.id?a.objeto.id:0});b.$promise.then(function(b){b.success?a.bloquearFormulario=!1:(h.error({message:b.mensaje,title:"Notificación del Sistema"}),a.bloquearFormulario=!0),a.comprobandoCuenta=!1})}},a.formatearCodigo=function(a,b){for(;a.length<b;)a="0"+a;return a},a.formatearDigitoCodigo=function(){var b=a.objeto.codigo?a.objeto.codigo+"":"",c=a.objeto.clasificacion,d=1;c&&c.id&&(d=c.nivel+1);var e=a.digitosCodigo[d];a.largoCodigoCuenta=e,a.objeto.codigo=a.formatearCodigo(b,e)},a.cargarDigitosCodigos=function(){b.cargando=!0;var c=m.digitosCodigos().get();c.$promise.then(function(c){a.digitosCodigo=c,b.cargando=!1})},a.cargarDigitosCodigos()}]).controller("ModalFormConfiguracionCuentaCtrl",["$scope","$rootScope","$uibModalInstance","$filter","objeto","tipo","auxiliar",function(a,b,c,d,e,f,g){a.configuracion=e.configuracion,a.opciones={auxiliares:[]},1===f?a.objeto={nombre:e.nombre,codigo:e.clasificacion.codigo+"."+e.codigo}:a.objeto={nombre:e.nombre,codigo:e.codigoCuenta+"."+e.codigo},a.guardar=function(){c.close(a.configuracion)},a.actualizarDatos=function(){a.configuracion.auxiliar&&(a.configuracion.auxiliar=d("filter")(a.opciones.auxiliares,{id:a.configuracion.auxiliar},!0)[0])},a.cargarAuxiliares=function(){b.cargando=!0;var c=g.listado().query();c.$promise.then(function(c){a.opciones.auxiliares=c,a.actualizarDatos(),b.cargando=!1})},a.cargarAuxiliares()}]).controller("ModalFormClasificacionCuentaCtrl",["$scope","$rootScope","$filter","$timeout","$uibModalInstance","Notification","constantes","cuenta","cuentaClasificacion","objeto","retorno","padre",function(a,b,c,d,e,f,g,h,i,j,k,l){a.retorno=k,a.padre=l,a.opciones={},a.objeto=j,a.digitosCodigo=[],a.tipos=[{id:1,tipo:"Activo"},{id:2,tipo:"Pasivo"},{id:3,tipo:"Patrimonio"},{id:4,tipo:"Perdida"},{id:5,tipo:"Ganancia"}],a.actualizarDatos=function(){a.objeto.id?(a.objeto.clasificacion=c("filter")(a.clasificaciones,{id:a.objeto.padreId},!0)[0],a.objeto.tipo=c("filter")(a.tipos,{id:a.objeto.tipo},!0)[0]):a.padre&&d(function(){a.objeto.clasificacion=c("filter")(a.clasificaciones,{id:a.padre.id},!0)[0]},250)},a.guardar=function(){b.cargando=!0;var c;c=a.objeto.id?i.datos().update({id:a.objeto.id},a.objeto):i.datos().create({},a.objeto),c.$promise.then(function(c){c.success?a.retorno?e.close(c.mensaje):(a.objeto={},b.cargando=!1,a.cargarOpciones(),f.success({message:c.mensaje,title:"Mensaje del Sistema"})):f.error({message:c.mensaje,title:"Mensaje del Sistema"})})},a.cancel=function(){e.dismiss()},a.editarClasificacion=function(c){b.cargando=!0;var d=i.datos().get({id:c});d.$promise.then(function(c){a.objeto=c,a.actualizarDatos(),b.cargando=!1})},a.eliminarClasificacion=function(c){b.cargando=!0;var d=i.datos()["delete"]({id:c});d.$promise.then(function(c){c.success&&f.success({message:c.mensaje,title:"Mensaje del Sistema"}),b.cargando=!1,a.cargarOpciones()})},a.formatearDigitoCodigo=function(){var b=a.objeto.codigo?a.objeto.codigo:"",c=a.objeto.clasificacion,d=1;for(c&&c.id&&(d=c.nivel+1);b.length<a.digitosCodigo[d];)b="0"+b;a.objeto.codigo=b},a.cargarDigitosCodigos=function(){b.cargando=!0;var c=h.digitosCodigos().get();c.$promise.then(function(c){a.digitosCodigo=c,a.formatearDigitoCodigo(),b.cargando=!1})},a.cargarOpciones=function(){b.cargando=!0;var c=i.listaNivel().query();c.$promise.then(function(c){a.clasificaciones=c,a.actualizarDatos(),b.cargando=!1})},a.cargarOpciones(),a.cargarDigitosCodigos()}]),angular.module("angularjsApp").controller("CentrosDeCostoCtrl",["$scope","$rootScope","$timeout","$uibModal","Notification","constantes","centroCosto",function(a,b,c,d,e,f,g){a.datos=[],a.constantes=f,a.open=function(b){var c=d.open({animation:a.animationsEnabled,templateUrl:"myModalFormCentroCosto.html",controller:"ModalFormCentroCostoCtrl",size:"700",resolve:{objeto:function(){return b}}});c.result.then(function(b){e.success({message:b,title:"Mensaje del Sistema"}),a.cargarDatos()})},a.cargarDatos=function(){b.cargando=!0;var c=g.datos().query();c.$promise.then(function(c){a.datos=c,b.cargando=!1})},a.editar=function(c){b.cargando=!0;var d=g.datos().get({id:c.id});d.$promise.then(function(c){a.open(c),b.cargando=!1})},a.eliminar=function(c){b.cargando=!0,a.result=g.datos()["delete"]({id:c.id}),a.result.$promise.then(function(b){b.success&&(e.success({message:b.mensaje,title:"Notificación del Sistema"}),a.cargarDatos())})},a.toolTipEdicion=function(a){return"Editar los datos del Centro de Costos: <b>"+a+"</b>"},a.cargarDatos()}]).controller("ModalFormCentroCostoCtrl",["$scope","$rootScope","$uibModalInstance","$filter","Notification","objeto","centroCosto",function(a,b,c,d,e,f,g){a.objeto=f,a.errores={},a.guardar=function(){b.cargando=!0;var d;d=a.objeto.id?g.datos().update({id:a.objeto.id},a.objeto):g.datos().create({},a.objeto),d.$promise.then(function(d){b.cargando=!1,d.success?c.close(d.mensaje):(e.error({message:d.mensaje,title:"Notificación del Sistema"}),a.errores=d.errores)})},a.cancel=function(){c.dismiss("cancel")}}]),angular.module("angularjsApp").factory("cuentaClasificacion",["constantes","$resource",function(a,b){return{datos:function(){return b(a.URL+"cuentas-clasificacion/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})},opciones:function(){return b(a.URL+"cuentas-clasificacion/opciones/formulario")},listaNivel:function(){return b(a.URL+"cuentas-clasificacion/listado/opciones")},comprobarEliminar:function(){return b(a.URL+"cuentas-clasificacion/comprobar/eliminacion/:id",{id:"@id"},{post:{method:"POST"}})}}}]),angular.module("angularjsApp").factory("cuenta",["constantes","$resource",function(a,b){return{datos:function(){return b(a.URL+"cuentas/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})},opciones:function(){return b(a.URL+"cuentas/opciones/formulario")},listaNivel:function(){return b(a.URL+"cuentas/listado/opciones")},obtenerParametros:function(){return b(a.URL+"cuentas/parametros/:id",{id:"@id"})},obtenerDatos:function(){return b(a.URL+"cuentas/obtener/info/:id",{id:"@id"})},comprobarCodigoCuenta:function(){return b(a.URL+"cuentas/comprobar-codigo/:codigo/:clasificacion/:id",{codigo:"@codigo",clasificacion:"@clasificacion",id:"@id"})},comprobarEliminar:function(){return b(a.URL+"cuentas/comprobar/eliminacion/:id",{id:"@id"},{post:{method:"POST"}})},comprobarSubCuentaEliminar:function(){return b(a.URL+"cuentas/comprobar-subcuenta/eliminacion/:id",{id:"@id"},{post:{method:"POST"}})},digitosCodigos:function(){return b(a.URL+"cuentas/digitos-codigos/json")},obtenerCodigoCuenta:function(){return b(a.URL+"cuentas/obtener-codigo/cuenta/:clasificacion",{clasificacion:"@clasificacion"})},obtenerParametrosSubCuenta:function(){return b(a.URL+"cuentas/obtener-parametros/sub-cuenta/:id",{id:"@id"})},grabarCuentaSII:function(){return b(a.URL+"cuentas/asociar-cuenta-sii/:id",{id:"@id"},{post:{method:"POST"}})},grabarCuentaIFRS:function(){return b(a.URL+"cuentas/asociar-cuenta-ifrs/:id",{id:"@id"},{post:{method:"POST"}})},grabarCuentaRecuadroF22:function(){return b(a.URL+"cuentas/asociar-cuenta-recuadro-f22/:id",{id:"@id"},{post:{method:"POST"}})}}}]),angular.module("angularjsApp").factory("centroCosto",["constantes","$resource",function(a,b){return{datos:function(){return b(a.URL+"centros-costos/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})}}}]),angular.module("angularjsApp").controller("BancosCtrl",["$scope","$rootScope","$timeout","$uibModal","Notification","constantes","banco",function(a,b,c,d,e,f,g){a.datos=[],a.constantes=f,a.permisos={},a.open=function(b){var c=d.open({animation:a.animationsEnabled,templateUrl:"myModalFormBanco.html",controller:"ModalFormBancoCtrl",size:"700",resolve:{objeto:function(){return b}}});c.result.then(function(b){e.success({message:b,title:"Mensaje del Sistema"}),a.cargarDatos()})},a.cargarDatos=function(){b.cargando=!0;var c=g.datos().get();c.$promise.then(function(c){a.datos=c.detalles,a.permisos=c.opciones.accesos,b.cargando=!1})},a.editar=function(c){b.cargando=!0;var d=g.datos().get({id:c.id});d.$promise.then(function(c){a.open(c),b.cargando=!1})},a.eliminar=function(c){b.cargando=!0,a.result=g.datos()["delete"]({id:c.id}),a.result.$promise.then(function(b){b.success&&(e.success({message:b.mensaje,title:"Notificación del Sistema"}),a.cargarDatos())})},a.toolTipEdicion=function(a){return"Editar los datos del Banco: <b>"+a+"</b>"},a.cargarDatos()}]).controller("ModalFormBancoCtrl",["$scope","$rootScope","$uibModalInstance","$filter","Notification","objeto","banco",function(a,b,c,d,e,f,g){a.objeto=f,a.errores={},a.guardar=function(){b.cargando=!0;var d;d=a.objeto.id?g.datos().update({id:a.objeto.id},a.objeto):g.datos().create({},a.objeto),d.$promise.then(function(d){b.cargando=!1,d.success?c.close(d.mensaje):(e.error({message:d.mensaje,title:"Notificación del Sistema"}),a.errores=d.errores)})},a.cancel=function(){c.dismiss("cancel")}}]),angular.module("angularjsApp").controller("AreasDeNegocioCtrl",["$scope","$rootScope","$timeout","$uibModal","Notification","constantes","areaNegocio",function(a,b,c,d,e,f,g){a.datos=[],a.constantes=f,a.permisos={},a.open=function(b){var c=d.open({animation:a.animationsEnabled,templateUrl:"myModalFormAreaNegocio.html",controller:"ModalFormAreaNegocioCtrl",size:"700",resolve:{objeto:function(){return b}}});c.result.then(function(b){e.success({message:b,title:"Mensaje del Sistema"}),a.cargarDatos()})},a.cargarDatos=function(){b.cargando=!0;var c=g.datos().get();c.$promise.then(function(c){a.datos=c.detalles,a.permisos=c.opciones.accesos,b.cargando=!1})},a.editar=function(c){b.cargando=!0;var d=g.datos().get({id:c.id});d.$promise.then(function(c){a.open(c),b.cargando=!1})},a.eliminar=function(c){b.cargando=!0,a.result=g.datos()["delete"]({id:c.id}),a.result.$promise.then(function(b){b.success&&(e.success({message:b.mensaje,title:"Notificación del Sistema"}),a.cargarDatos())})},a.toolTipEdicion=function(a){return"Editar los datos del Area de Negocio: <b>"+a+"</b>"},a.cargarDatos()}]).controller("ModalFormAreaNegocioCtrl",["$scope","$rootScope","$uibModalInstance","$filter","Notification","objeto","areaNegocio",function(a,b,c,d,e,f,g){a.objeto=f,a.errores={},a.guardar=function(){b.cargando=!0;var d;d=a.objeto.id?g.datos().update({id:a.objeto.id},a.objeto):g.datos().create({},a.objeto),d.$promise.then(function(d){b.cargando=!1,d.success?c.close(d.mensaje):(e.error({message:d.mensaje,title:"Notificación del Sistema"}),a.errores=d.errores)})},a.cancel=function(){c.dismiss("cancel")}}]),angular.module("angularjsApp").controller("TiposDeComprobanteCtrl",["$scope","$rootScope","$timeout","$uibModal","Notification","constantes","tipoComprobante",function(a,b,c,d,e,f,g){a.datos=[],a.constantes=f,a.open=function(b){var c=d.open({animation:a.animationsEnabled,templateUrl:"myModalFormTipoComprobante.html",controller:"ModalFormTipoComprobanteCtrl",size:"700",resolve:{objeto:function(){return b}}});c.result.then(function(b){e.success({message:b,title:"Mensaje del Sistema"}),a.cargarDatos()})},a.cargarDatos=function(){b.cargando=!0;var c=g.datos().query();c.$promise.then(function(c){a.datos=c,b.cargando=!1})},a.editar=function(c){b.cargando=!0;var d=g.datos().get({id:c.id});d.$promise.then(function(c){a.open(c),b.cargando=!1})},a.eliminar=function(c){b.cargando=!0,a.result=g.datos()["delete"]({id:c.id}),a.result.$promise.then(function(b){b.success&&(e.success({message:b.mensaje,title:"Notificación del Sistema"}),a.cargarDatos())})},a.toolTipEdicion=function(a){return"Editar los datos del Tipo de Comrprobante: <b>"+a+"</b>"},a.cargarDatos()}]).controller("ModalFormTipoComprobanteCtrl",["$scope","$rootScope","$uibModalInstance","$filter","Notification","objeto","tipoComprobante",function(a,b,c,d,e,f,g){a.objeto=f,a.errores={},a.guardar=function(){b.cargando=!0;var d;d=a.objeto.id?g.datos().update({id:a.objeto.id},a.objeto):g.datos().create({},a.objeto),d.$promise.then(function(d){b.cargando=!1,d.success?c.close(d.mensaje):(e.error({message:d.mensaje,title:"Notificación del Sistema"}),a.errores=d.errores)})},a.cancel=function(){c.dismiss("cancel")}}]),angular.module("angularjsApp").controller("TiposDocumentosSiiCtrl",["$scope","$rootScope","$timeout","$uibModal","Notification","constantes","tipoDocumentoSii",function(a,b,c,d,e,f,g){a.datos=[],a.constantes=f,a.open=function(b){var c=d.open({animation:a.animationsEnabled,templateUrl:"myModalFormTipoDocumentoSii.html",controller:"ModalFormTipoDocumentoSiiCtrl",size:"700",resolve:{objeto:function(){return b}}});c.result.then(function(b){e.success({message:b,title:"Mensaje del Sistema"}),a.cargarDatos()})},a.cargarDatos=function(){b.cargando=!0;var c=g.datos().query();c.$promise.then(function(c){a.datos=c,b.cargando=!1})},a.editar=function(c){b.cargando=!0;var d=g.datos().get({id:c.id});d.$promise.then(function(c){a.open(c),b.cargando=!1})},a.eliminar=function(c){b.cargando=!0,a.result=g.datos()["delete"]({id:c.id}),a.result.$promise.then(function(b){b.success&&(e.success({message:b.mensaje,title:"Notificación del Sistema"}),a.cargarDatos())})},a.toolTipEdicion=function(a,b){return"Editar los datos del Documento de SII: <b>"+a+"</b> de Tipo: <b>"+b+"</b>"},a.cargarDatos()}]).controller("ModalFormTipoDocumentoSiiCtrl",["$scope","$rootScope","$http","$uibModal","$uibModalInstance","$filter","Notification","objeto","constantes","tipoDocumentoSii",function(a,b,c,d,e,f,g,h,i,j){a.objeto=h,a.errores={},a.opciones={destinos:[{id:1,destino:"Debe"},{id:2,destino:"Haber"}]},a.guardar=function(){b.cargando=!0;var c;c=a.objeto.id?j.datos().update({id:a.objeto.id},a.objeto):j.datos().create({},a.objeto),c.$promise.then(function(c){b.cargando=!1,c.success?e.close(c.mensaje):(g.error({message:c.mensaje,title:"Notificación del Sistema"}),a.errores=c.errores)})},a.cancel=function(){e.dismiss("cancel")},a.getCuentas=function(a){return c.get(i.URL+"cuentas/buscador/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})},a.buscarCuenta=function(b){var c=d.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-buscar-cuenta.html?v="+f("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalBuscarCuentaCtrl",size:"700"});c.result.then(function(c){a.objeto[b]=c})},a.objeto.id&&(a.objeto.cuentaClienteDestino&&(a.objeto.cuentaClienteDestino=f("filter")(a.opciones.destinos,{id:a.objeto.cuentaClienteDestino},!0)[0]),a.objeto.cuentaProveedorDestino&&(a.objeto.cuentaProveedorDestino=f("filter")(a.opciones.destinos,{id:a.objeto.cuentaProveedorDestino},!0)[0]))}]),angular.module("angularjsApp").controller("ClientesProveedoresCtrl",["$scope","$rootScope","$uibModal","$filter","Notification","clienteProveedor","constantes",function(a,b,c,d,e,f,g){a.datos=[],a.constantes=g,a.permisos={},a.open=function(b){var e=c.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-cliente-proveedor.html?v="+d("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalFormAbastecimientoClienteCtrl",size:"900",backdrop:"static",resolve:{objeto:function(){return b}}});e.result.then(function(b){a.cargarDatos()},function(b){b&&a.cargarDatos()})},a.cargarDatos=function(){b.cargando=!0;var c=f.datos().get();c.$promise.then(function(c){a.datos=c.detalles,a.permisos=c.opciones.accesos,b.cargando=!1})},a.editar=function(c){b.cargando=!0;var d=f.datos().get({id:c.id});d.$promise.then(function(c){a.open(c),b.cargando=!1})},a.cargarDatos()}]).controller("ModalFormAbastecimientoClienteCtrl",["$scope","$rootScope","$http","$timeout","$uibModal","$uibModalInstance","Notification","funciones","$filter","comuna","clienteProveedor","funcionario","objeto","constantes",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){b.cargando=!0;var c=k.opciones().get();c.$promise.then(function(c){a.opciones=c,b.cargando=!1})}a.deshabilitar=!0,a.creandoImagen=!1,a.valorPB=100,a.opciones={},a.objeto=m,a.objeto.fotografiaBase64="",a.objeto.crearPassword=!0,a.actualizar=!1,a.formulario={validar:!1},a.opciones=[],a.imagen={},a.erroresDatos=[],a.objeto.id&&(a.formulario.validar=!0),a.ocultarProgressBar=function(){a.creandoImagen=!1,a.valorPB=0},a.obtenerImagenB64=function(){a.objeto.fotografiaBase64="",a.creandoImagen=!0,d(function(){var b,c=new FileReader;c.onload=function(c){b=c.target.result,a.objeto.fotografiaBase64=b,d(function(){a.ocultarProgressBar()},250)},c.readAsDataURL(a.imagen.flow.files[0].file)},1e3)},a.getComunas=function(a){return j.buscar(a)},a.guardar=function(c){b.cargando=!0;var d;d=a.objeto.id?k.datos().update({id:a.objeto.id},a.objeto):k.datos().create({},a.objeto),d.$promise.then(function(d){d.success?(c?(g.success({message:d.mensaje,title:"Mensaje del Sistema"}),f.close(),a.actualizar=!1):(g.success({message:d.mensaje,title:"Mensaje del Sistema"}),a.actualizar=!0),a.objeto.id||(a.objeto.id=d.id)):(a.erroresDatos=d.errores,g.error({message:d.mensaje,title:"Mensaje del Sistema"})),b.cargando=!1})},a.cancel=function(){f.dismiss(a.actualizar)},a.errores=function(b){var c=a.form[b];return c?c.$invalid&&c.$dirty:void 0},a.formatearRut=function(){a.objeto.rut=a.objeto.rut+" "},a.comprobar=function(){if(!a.objeto.id){var c=!0;if(a.objeto.extranjero||(c=h.verificadorRut(a.objeto.rut)),c){b.cargando=!0;var d=k.buscarRut(a.objeto.rut).get();d.$promise.then(function(c){if(c.success){var d="El Rut ingresado ya se encuentra registrado.¿Desea cargar los datos en el formulario?",f=e.open({animation:a.animationsEnabled,templateUrl:"views/modal-confirmation.html",controller:"ModalFormDialogCtrl",size:"sm",resolve:{objeto:function(){return{titulo:"Confirmación",mensaje:d}}}});f.result.then(function(){b.cargando=!0;var d=k.datos().get({id:c.id});d.$promise.then(function(c){a.objeto=c,b.cargando=!1,a.formulario.validar=!0})})}else a.formulario.validar=!0;b.cargando=!1})}else g.error({message:"El Rut ingresado es incorrecto!",title:"Mensaje del Sistema"})}},a.agregarColumna=function(b){a.objeto[b].push({})},a.quitarColumna=function(b,c){var d=a.objeto[b].indexOf(c);a.objeto[b].splice(d,1)},a.agregarImpuesto=function(b,c){var d=a.objeto[b].indexOf(c);a.objeto[b][d].subcampos||(a.objeto[b][d].subcampos=[]),a.objeto[b][d].subcampos.push({})},a.quitarImpuesto=function(b,c,d){var e=a.objeto[b].indexOf(c),f=a.objeto[b][e].subcampos.indexOf(d);a.objeto[b][e].subcampos.splice(f,1)},a.filtrarColumnasLibro=function(b,c){return function(d){var e;if(["mnt_total","mnt_iva"].indexOf(d.campo)>=0)return!1;for(var f in a.objeto[b])if(e=a.objeto[b][f],e.columna&&e.columna.campo&&e.columna.campo==d.campo&&f!=c)return!1;return!0}},a.getCuentas=function(a){return c.get(n.URL+"cuentas/buscador/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})},a.buscarCuenta=function(b){var c=e.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-buscar-cuenta.html?v="+i("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalBuscarCuentaCtrl",size:"700"});c.result.then(function(a){b.cuenta=a})},o()}]).controller("ModalFormClienteSucursalCtrl",["$scope","$rootScope","$http","$timeout","$uibModal","$uibModalInstance","Notification","$filter","comuna","clienteProveedor","funcionario","parent","objeto","opciones",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){a.objeto=m,a.opciones=n,a.erroresDatos=[],a.objeto.id||(a.objeto.parent=l),a.actualizarOpciones=function(){a.objeto.id&&(a.objeto.condicionPago=h("filter")(a.opciones.condicionesPago,{id:a.objeto.condicionPago},!0)[0],a.objeto.carteraCobranza=h("filter")(a.opciones.carterasCobranza,{id:a.objeto.carteraCobranza},!0)[0])},a.guardar=function(){b.cargando=!0;var c;c=a.objeto.id?j.sucursal().update({id:a.objeto.id},a.objeto):j.sucursal().create({},a.objeto),
c.$promise.then(function(c){c.success?f.close(c.mensaje):(a.erroresDatos=c.errores,g.error({message:c.mensaje,title:"Mensaje del Sistema"})),b.cargando=!1})},a.getComunas=function(a){return i.buscar(a)},a.getVendedor=function(a){return k.typeaheadVendedor(a)},a.cancel=function(){f.dismiss("cancel")},a.errores=function(b){var c=a.form[b];return c?c.$invalid&&c.$dirty:void 0},a.openContacto=function(b){var c=e.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-cliente-proveedor-contacto.html?v="+h("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalFormContactoCtrl",size:"800",backdrop:"static",resolve:{objeto:function(){return b},parent:function(){return a.objeto.id},opciones:function(){return a.opciones},destino:function(){return"sucursal"},tipo:function(){return 1}}});c.result.then(function(b){g.success({message:b,title:"Mensaje del Sistema"}),a.cargarContactos()})},a.editarContacto=function(c){b.cargando=!0;var d=j.sucursalContacto().get({id:c.id});d.$promise.then(function(c){a.openContacto(c),b.cargando=!1})},a.cargarContactos=function(){b.cargando=!0;var c=j.sucursalListaContactos(a.objeto.id).query();c.$promise.then(function(c){a.objeto.contactos=c,b.cargando=!1})},a.actualizarOpciones(),a.openListaVendedores=function(){var b=e.open({animation:a.animationsEnabled,templateUrl:"myModalListaVendedores.html",controller:"ModalListaVendedoresCtrl",size:"800",backdrop:"static"});b.result.then(function(b){a.objeto.vendedor=b})}}]).controller("ModalFormContactoCtrl",["$scope","$rootScope","$http","$timeout","$uibModal","$uibModalInstance","Notification","$filter","comuna","clienteProveedor","funcionario","parent","objeto","opciones","destino","constantes","tipo",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){a.objeto=m,a.opciones=n,a.erroresDatos=[],a.valorPB=100,a.imagen={},a.objeto.fotografiaBase64="",a.objeto.id?a.objeto.tipo=h("filter")(a.opciones.tiposContacto,{id:a.objeto.tipo},!0)[0]:(a.objeto.parent=l,a.objeto.clienteProveedor=q),m.fotografia?a.fotografia=p.URL+"stories/"+m.fotografia:a.fotografia="images/usuario.1b225641.png",a.ocultarProgressBar=function(){a.creandoImagen=!1,a.valorPB=0},a.obtenerImagenB64=function(){a.objeto.fotografiaBase64="",a.creandoImagen=!0,d(function(){var b,c=new FileReader;c.onload=function(c){b=c.target.result,a.objeto.fotografiaBase64=b,d(function(){a.ocultarProgressBar()},250)},c.readAsDataURL(a.imagen.flow.files[0].file)},1e3)},a.guardar=function(){b.cargando=!0;var c;a.objeto.id?"matriz"===o?c=j.contacto().update({id:a.objeto.id},a.objeto):"sucursal"===o&&(c=j.sucursalContacto().update({id:a.objeto.id},a.objeto)):"matriz"===o?c=j.contacto().create({},a.objeto):"sucursal"===o&&(c=j.sucursalContacto().create({},a.objeto)),c.$promise.then(function(c){c.success?f.close(c.mensaje):(a.erroresDatos=c.errores,g.error({message:c.mensaje,title:"Mensaje del Sistema"})),b.cargando=!1})},a.getComunas=function(a){return i.buscar(a)},a.getVendedor=function(a){return k.typeahead(a)},a.cancel=function(){f.dismiss("cancel")},a.errores=function(b){var c=a.form[b];return c?c.$invalid&&c.$dirty:void 0}}]).controller("ModalListaVendedoresCtrl",["$scope","$rootScope","$uibModalInstance","funcionario",function(a,b,c,d){a.vendedores=[],a.seleccionar=function(a){var b={id:a.id,rut:a.rut,nombre:a.funcionario};c.close(b)},a.cancel=function(){c.dismiss("cancel")},a.cargarVendedores=function(){var b=d.listaVendedor().query();b.$promise.then(function(b){a.vendedores=b})},a.cargarVendedores()}]).controller("ModalBuscarProveedorCtrl",["$scope","$rootScope","$timeout","$uibModalInstance","$filter","Notification","clienteProveedor",function(a,b,c,d,e,f,g){a.datos=[],a.filtro={filtro:""},a.cargarDatos=function(){b.cargando=!0;var c=g.listaProveedores().query();c.$promise.then(function(c){a.datos=c,b.cargando=!1})},a.seleccionar=function(a){d.close(a)},a.cancel=function(){d.dismiss()},a.cargarDatos()}]).controller("ModalBuscarClienteCtrl",["$scope","$rootScope","$timeout","$uibModalInstance","$filter","Notification","clienteProveedor",function(a,b,c,d,e,f,g){a.datos=[],a.filtro={filtro:""},a.cargarDatos=function(){b.cargando=!0;var c=g.listaClientes().query();c.$promise.then(function(c){a.datos=c,b.cargando=!1})},a.seleccionar=function(a){d.close(a)},a.cancel=function(){d.dismiss()},a.cargarDatos()}]).controller("ModalFormAdministrarContactoCtrl",["$scope","$rootScope","$http","$timeout","$uibModal","$uibModalInstance","Notification","$filter","comuna","clienteProveedor","funcionario","destino","tipo","parent","constantes",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){a.objeto={},a.opciones=[],a.erroresDatos=[],a.valorPB=100,a.imagen={},a.objeto.fotografiaBase64="",a.editar={},a.listaContactosCliente=[],a.datosModificados=!1,a.objeto.clienteProveedor=m,a.objeto.parent=n,a.actualizarDatos=function(){a.objeto.fotografia?a.fotografia=o.URL+"stories/"+a.objeto.fotografia:a.fotografia="images/usuario.1b225641.png",a.objeto.id&&(a.objeto.tipo=h("filter")(a.opciones.tiposContacto,{id:a.objeto.tipo},!0)[0])},a.editarContacto=function(){if(a.editar.contacto){b.cargando=!0;var c=j.contacto().get({id:a.editar.contacto.id});c.$promise.then(function(c){a.objeto=c,a.actualizarDatos(),b.cargando=!1})}else g.error({message:"Debe seleccionar al Contacto desde la lista",title:"Mensaje del Sistema"})},a.cargarContactos=function(){a.listaContactosCliente=[],b.cargando=!0;var c;1===m?(c=j.listaContactos(n).get(),c.$promise.then(function(c){a.listaContactosCliente=c.contactosCliente,b.cargando=!1})):(c=j.sucursalListaContactos(n).query(),c.$promise.then(function(c){a.listaContactosCliente=c,b.cargando=!1}))},a.eliminarContacto=function(){if(a.editar.contacto){b.cargando=!0;var c;c=1===m?j.contacto()["delete"]({id:a.editar.contacto.id}):j.sucursalContacto()["delete"]({id:a.editar.contacto.id}),c.$promise.then(function(c){c.success&&g.success({message:c.mensaje,title:"Mensaje del Sistema"}),b.cargando=!1,a.cargarContactos(),a.datosModificados=!0})}else g.error({message:"Debe seleccionar al Contacto desde la lista",title:"Mensaje del Sistema"})},a.ocultarProgressBar=function(){a.creandoImagen=!1,a.valorPB=0},a.obtenerImagenB64=function(){a.objeto.fotografiaBase64="",a.creandoImagen=!0,d(function(){var b,c=new FileReader;c.onload=function(c){b=c.target.result,a.objeto.fotografiaBase64=b,d(function(){a.ocultarProgressBar()},250)},c.readAsDataURL(a.imagen.flow.files[0].file)},1e3)},a.guardar=function(){b.cargando=!0;var c;a.objeto.id?"matriz"===l?c=j.contacto().update({id:a.objeto.id},a.objeto):"sucursal"===l&&(c=j.sucursalContacto().update({id:a.objeto.id},a.objeto)):"matriz"===l?c=j.contacto().create({},a.objeto):"sucursal"===l&&(c=j.sucursalContacto().create({},a.objeto)),c.$promise.then(function(c){c.success?f.close(c.mensaje):(a.erroresDatos=c.errores,g.error({message:c.mensaje,title:"Mensaje del Sistema"})),b.cargando=!1})},a.getComunas=function(a){return i.buscar(a)},a.getVendedor=function(a){return k.typeahead(a)},a.cancel=function(){f.dismiss(a.datosModificados)},a.errores=function(b){var c=a.form[b];return c?c.$invalid&&c.$dirty:void 0},a.cargarOpciones=function(){b.cargando=!0;var c=j.listaTiposContacto().get();c.$promise.then(function(c){a.opciones.tiposContacto=c.tiposContacto,b.cargando=!1})},a.cargarOpciones(),a.cargarContactos()}]),angular.module("angularjsApp").factory("clienteProveedor",["$resource","constantes",function(a,b){return{datos:function(){return a(b.URL+"clientes-proveedores/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})},opciones:function(){return a(b.URL+"clientes-proveedores/opciones/formulario")},buscarRut:function(c){return a(b.URL+"clientes-proveedores/buscar-rut/"+c)},sucursal:function(){return a(b.URL+"clientes-proveedores/sucursales/gestionar/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})},listaSucursales:function(c){return a(b.URL+"clientes-proveedores/sucursales/"+c)},contacto:function(){return a(b.URL+"clientes-proveedores/contactos/gestionar/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})},listaContactos:function(c){return a(b.URL+"clientes-proveedores/contactos/"+c)},sucursalContacto:function(){return a(b.URL+"clientes-proveedores/sucursales-contactos/gestionar/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})},sucursalListaContactos:function(c){return a(b.URL+"clientes-proveedores/sucursales-contactos/"+c)},listaProveedores:function(){return a(b.URL+"clientes-proveedores/listado-proveedores/obtener")},listaClientes:function(){return a(b.URL+"clientes-proveedores/listado-clientes/obtener")},obtenerInfo:function(){return a(b.URL+"clientes-proveedores/obtener-info/:id",{id:"@id"})},listaTiposContacto:function(){return a(b.URL+"clientes-proveedores/opciones/lista-tipos-contacto")}}}]),angular.module("angularjsApp").factory("banco",["constantes","$resource",function(a,b){return{datos:function(){return b(a.URL+"bancos/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})}}}]),angular.module("angularjsApp").factory("areaNegocio",["constantes","$resource",function(a,b){return{datos:function(){return b(a.URL+"areas-negocio/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})}}}]),angular.module("angularjsApp").factory("tipoComprobante",["constantes","$resource",function(a,b){return{datos:function(){return b(a.URL+"tipos-comprobante/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})}}}]),angular.module("angularjsApp").factory("tipoDocumentoSii",["constantes","$resource",function(a,b){return{datos:function(){return b(a.URL+"tipos-documento-sii/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})}}}]);var scopeRegistroAsientos;angular.module("angularjsApp").controller("RegistroAsientosContablesCtrl",["$scope","$rootScope","$http","$uibModal","$timeout","$filter","Notification","tipoComprobante","cuenta","contAsiento","constantes",function(a,b,c,d,e,f,g,h,i,j,k){function l(b){var c,d,e=b.date,g=(b.mode,a.opciones.mesesActivos);if(c=f("date")(new Date(e),"yyyy"),d=f("date")(new Date(e),"MM"),g.length>0)for(var h in g)if(parseInt(d)==parseInt(g[h].id)&&parseInt(c)==parseInt(g[h].anio))return!1;return!0}scopeRegistroAsientos=a,a.opcionesCargadas=!1,a.opened=!1,a.vista=!1,a.constantes=k,a.validacion={fechaFueraRango:!1},a.dateOptions={formatYear:"yy",startingDay:1,weekStart:1,dateDisabled:l},a.estados={},a.revisarFecha=function(){a.validacion.fechaFueraRango=!1;var b=a.movimiento.fecha;b&&(b<a.dateOptions.minDate||b>a.dateOptions.maxDate)&&(a.validacion.fechaFueraRango=!0)},a.fechas={fecha:!1},a.open=function(){e(function(){a.fechas.fecha=!0},100)},a.tiposComprobantes=[],a.nuevo=function(){a.movimiento={},a.movimiento.fecha=new Date,a.movimiento.automatico=!1,a.movimiento.asientos=[{opciones:{},cuenta:"",debe:"",haber:"",glosaPersonalizada:!1,glosa:""},{opciones:{},cuenta:"",debe:"",haber:"",glosaPersonalizada:!1,glosa:""}],a.movimiento.totalDebe=0,a.movimiento.totalHaber=0,a.movimiento.diferenciaDebe=0,a.movimiento.diferenciaHaber=0,a.movimiento.estado=1,a.vista=!1},a.nuevo(),a.getCuentas=function(a){return c.get(k.URL+"cuentas/buscador/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})},a.buscarCuenta=function(b){var c=d.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-buscar-cuenta.html?v="+f("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalBuscarCuentaCtrl",size:"700"});c.result.then(function(a){b.cuenta=a})},a.agregarAsiento=function(){a.movimiento.asientos.push({opciones:{},cuenta:"",debe:"",haber:"",glosaPersonalizada:!1,glosa:""})},a.eliminarAsiento=function(b){var c=a.movimiento.asientos.indexOf(b);a.movimiento.asientos.splice(c,1),a.sumarDebe(),a.sumarHaber()},a.cargarDatos=function(){b.cargando=!0;var c=h.datos().query();c.$promise.then(function(c){a.tiposComprobantes=c,b.cargando=!1})},a.sumarDebe=function(){var b=0;if(a.movimiento.asientos.length>0)for(var c in a.movimiento.asientos)a.movimiento.asientos[c].debe&&(b+=parseInt(a.movimiento.asientos[c].debe));a.movimiento.totalDebe=b,a.calcularDiferencia()},a.sumarHaber=function(){var b=0;if(a.movimiento.asientos.length>0)for(var c in a.movimiento.asientos)a.movimiento.asientos[c].haber&&(b+=parseInt(a.movimiento.asientos[c].haber));a.movimiento.totalHaber=b,a.calcularDiferencia()},a.calcularDiferencia=function(){var b=parseInt(a.movimiento.totalDebe),c=parseInt(a.movimiento.totalHaber);c>b?(a.movimiento.diferenciaDebe=c-b,a.movimiento.diferenciaHaber=0):b>c?(a.movimiento.diferenciaDebe=0,a.movimiento.diferenciaHaber=b-c):(a.movimiento.diferenciaDebe=0,a.movimiento.diferenciaHaber=0)},a.openParametro=function(b,c){var e=d.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-asiento-cuenta-parametros.html?v="+f("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalFormRegistroParametroCtrl",size:"700",resolve:{objeto:function(){return b},parametros:function(){return c},monto:function(){return b.debe?b.debe:b.haber}}});e.result.then(function(a){b.configuracion||(b.configuracion={}),b.configuracion=a})},a.editarParametroAsiento=function(b){a.openParametro(b,b.cuenta.parametros)},a.quitarConfiguracionCta=function(a){a.configuracion=null},a.comprobarDebeHaber=function(){return a.movimiento.totalDebe===a.movimiento.totalHaber&&a.movimiento.totalDebe>0},a.guardarNuevo=function(){a.movimiento.estado=1,a.mov=a.movimiento.id,delete a.movimiento.id,a.guardar()},a.guardar=function(c){if(c&&!a.movimiento.modificar)return g.error({message:"El comprobante no puede ser actualizado. El Mes no se encuentra habilitado para Edición",title:"Notificación del Sistema"}),!1;b.cargando=!0,a.movimiento.estado=3,a.vista=!0;var d="";d=a.movimiento.id?j.datos().update({id:a.movimiento.id},a.movimiento):j.datos().create({},a.movimiento),d.$promise.then(function(c){b.cargando=!1,c.success?(g.success({message:c.mensaje,title:"Notificación del Sistema"}),a.movimiento=c.movimiento):(g.error({message:c.mensaje,title:"Notificación del Sistema"}),a.errores=c.errores,a.mov>0&&(a.movimiento.id=a.mov,a.mov=0),a.movimiento.estado=1,a.vista=!1)})},a.cargarComprobante=function(c){b.cargando=!0;var d=j.datos().get({id:c});d.$promise.then(function(c){a.movimiento=c,a.movimiento.fecha=new Date(c.fecha+"T09:00:00"),e(function(){a.movimiento.tipoComprobante=f("filter")(a.tiposComprobantes,{id:c.tipoComprobante.id},!0)[0],b.cargando=!1},1e3),a.sumarDebe(),a.sumarHaber(),a.validacion.fechaFueraRango=!1,3==c.estado&&(a.vista=!0)})},a.openBuscadorAsiento=function(){var c=d.open({animation:a.animationsEnabled,templateUrl:"myModalBuscarAsientoContable.html",controller:"ModalBuscadorAsientoCtrl",size:"900",backdrop:"static"});c.result.then(function(c){b.cargando=!0,a.cargarComprobante(c.id)})},a.openImprimirAsiento=function(){d.open({animation:a.animationsEnabled,templateUrl:"views/reports/report-asiento-contable.html?v="+f("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalImprimirAsientoCtrl",size:"900",resolve:{objeto:function(){return a.movimiento}}})},a.openAnularAsiento=function(c){var e=d.open({animation:a.animationsEnabled,templateUrl:"myModalAnularAsientoContable.html",controller:"ModalAnularAsientoCtrl",size:"900",resolve:{objeto:function(){return c}}});e.result.then(function(b){g.success({message:b,title:"Notificación del Sistema"}),a.nuevo()}),b.cargando=!1},a.anularAsiento=function(){b.cargando=!0;var c=j.datos().get({id:a.movimiento.id});c.$promise.then(function(c){c.modificar?a.openAnularAsiento(c):(g.error({message:"El comprobante no puede ser anulado. El Mes no se encuentra habilitado para Edición",title:"Notificación del Sistema"}),b.cargando=!1)})},a.importarArchivo=function(b){d.open({animation:a.animationsEnabled,templateUrl:"myModalImportarArchivo.html",controller:"ModalImportarArchivoCtrl",size:"800",backdrop:"static"})},a.cargarOpciones=function(){b.cargando=!0;var c=j.opciones().get();c.$promise.then(function(c){a.opciones=c,a.opcionesCargadas=!0,b.cargando=!1})},a.cargarOpciones(),a.cargarDatos(),a.revisarParametrosCuentas=function(){if(a.movimiento.asientos.length>0)for(var b in a.movimiento.asientos){var c=a.movimiento.asientos[b];if(c.cuenta.parametros&&c.cuenta.parametros.length>0&&!c.configuracion)return!1}return!0}}]).controller("ModalImportarArchivoCtrl",["$scope","$rootScope","$uibModalInstance","$timeout","constantes","Notification","Upload","contAsiento",function(a,b,c,d,e,f,g,h){a.error={},a.deshabilitar=!1,a.sumaSubCriterios=0,a.resumen=[],a.confirmar={},a.listaErrores=[],a.dynamic=0,a.alert={},a.objeto={},a.$watch("files",function(){a.upload(a.files)}),a.upload=function(b){if(b){a.listaErrores=[],a.confirmar={},a.resumen=[];var c=b;g.upload({url:e.URL+"contabilidad-registro-asientos/importar-comprobantes/excel",data:{file:c}}).progress(function(b){var c=parseInt(100*b.loaded/b.total);a.dynamic=c}).success(function(b){a.dynamic=0,b.success?a.confirmar=b.resumen:b.errores?(a.listaErrores=b.errores,f.error({message:"Errores en los datos del archivo",title:"Mensaje del Sistema"})):f.error({message:b.mensaje,title:"Mensaje del Sistema"})})}},a.confirmarDatos=function(){b.cargando=!0;var c=h.confirmarImportacion().post({},{archivo:a.confirmar.archivo});c.$promise.then(function(c){a.confirmar={},c.success?(a.resumen=c.resumen,f.success({message:"La Importación de los datos fue realizado correctamente",title:"Notificación del Sistema"})):f.error({message:c.mensaje,title:"Notificación del Sistema"}),b.cargando=!1})},a.cancel=function(){c.dismiss("cancel")},a.errores=function(b){var c=a.form[b];return c.$invalid&&c.$dirty}}]).controller("ModalFormRegistroParametroCtrl",["$scope","$rootScope","$timeout","$http","$uibModalInstance","$filter","Notification","constantes","cuenta","objeto","parametros","monto",function(a,b,c,d,e,f,g,h,i,j,k,l){a.objetoCuenta=j,j.configuracion?(a.objeto=j.configuracion,a.objeto.centrosCostos||(a.objeto.centrosCostos=[]),a.objeto.banco||(a.objeto.banco={})):a.objeto={parametros:k,monto:l,auxiliarTipo:0,auxiliar:"",centrosCostos:[],banco:{},label:""},a.opciones={},a.actualizarOpciones=function(){if(a.objeto.centrosCostos.length>0){for(var b in a.objeto.centrosCostos)a.objeto.centrosCostos[b].centroCosto=f("filter")(a.opciones.centrosCostos,{id:a.objeto.centrosCostos[b].centroCosto.id},!0)[0];a.calcularSumaMontos()}a.objeto.banco.id&&(a.objeto.banco=f("filter")(a.opciones.bancos,{id:a.objeto.banco.id},!0)[0]),a.objeto.auxiliarTipo>0&&a.objeto.auxiliarTipo<1e6&&a.objeto.auxiliar&&(a.objeto.auxiliar=f("filter")(a.opciones.auxiliares,{id:a.objeto.auxiliar.id},!0)[0])};for(var m in a.objeto.parametros){var n=a.objeto.parametros[m];"auxiliar"==n.id&&(a.objeto.auxiliarTipo=n.valor,a.objeto.auxiliarTipo>0&&a.objeto.auxiliarTipo<1e6?a.objeto.auxiliar&&(a.objeto.label=a.objeto.auxiliar.auxiliar):1000001==a.objeto.auxiliarTipo?a.objeto.label=a.objeto.auxiliar.razonSocial:1000002==a.objeto.auxiliarTipo&&(a.objeto.label=a.objeto.auxiliar.razonSocial)),"centro_costo"==n.id&&0==a.objeto.centrosCostos.length&&a.objeto.centrosCostos.push({porcentaje:"",centroCosto:""})}a.asignar=function(){a.objeto.label="";for(var b in a.objeto.parametros){var c=a.objeto.parametros[b];if("auxiliar"==c.id&&(a.objeto.label=a.objeto.auxiliar.auxiliar),"centro_costo"==c.id)for(var b in a.objeto.centrosCostos)a.objeto.label&&(a.objeto.label+=", "),a.objeto.label+=a.objeto.centrosCostos[b].centroCosto.value;"banco"==c.id&&(a.objeto.label=a.objeto.banco.nombre)}e.close(a.objeto)},a.cancel=function(){e.dismiss("cancel")},a.cargarDatos=function(){if(a.objetoCuenta.cuenta.id){b.cargando=!0;var c=i.obtenerParametrosSubCuenta().get({id:a.objetoCuenta.cuenta.id});c.$promise.then(function(c){a.opciones=c,b.cargando=!1,a.objetoCuenta.configuracion&&a.actualizarOpciones()})}},a.cargarDatos(),a.agregarCentroCostos=function(){a.objeto.centrosCostos.push({porcentaje:"",centroCosto:""})},a.quitarCentroCostos=function(b){var c=a.objeto.centrosCostos.indexOf(b);a.objeto.centrosCostos.splice(c,1)},a.getClientes=function(a){return d.get(h.URL+"clientes-proveedores/buscador/json",{params:{termino:a,tipo:0}}).then(function(a){return a.data.map(function(a){return a})})},a.calcularMonto=function(b){var c=a.objeto.monto*b.porcentaje;b.monto=Math.round(c),a.calcularSumaMontos()},a.calcularSumaMontos=function(){var b=0;for(var c in a.objeto.centrosCostos)b+=a.objeto.centrosCostos[c].monto;a.objeto.totalCentrosCostos=b}}]).controller("ModalBuscadorAsientoCtrl",["$scope","$rootScope","$timeout","$uibModalInstance","$filter","Notification","tipoComprobante","contAsiento",function(a,b,c,d,e,f,g,h){a.tiposComprobantes=[],a.resultado=[],a.objeto={fechaInicial:!1,fechaFinal:!1},a.dateOptions={formatYear:"yy",startingDay:1},a.buscarDatos=function(){b.cargando=!0;var c=h.buscar().post(a.objeto);c.$promise.then(function(c){c.resultado.length>0?a.resultado=c.resultado:f.error({message:"No se encontraron Comprobantes con los parametros ingresados",title:"Notificación del Sistema"}),b.cargando=!1})},a.openFechaInicial=function(){c(function(){a.objeto.fechaInicial=!0},400)},a.openFechaFinal=function(){c(function(){a.objeto.fechaFinal=!0},400)},a.cargarDatos=function(){b.cargando=!0;var c=g.datos().query();c.$promise.then(function(c){a.tiposComprobantes=c,b.cargando=!1})},a.cancel=function(){d.dismiss()},a.cargarDatos(),a.seleccionarAsientoContable=function(a){d.close(a)}}]).controller("ModalImprimirAsientoCtrl",["$scope","$rootScope","$uibModalInstance","objeto",function(a,b,c,d){a.movimiento=d,a.cancel=function(){c.close()},a.printDiv=function(a){var b=document.getElementById(a).innerHTML,c=window.open("","_blank","width=300,height=300");c.document.open(),c.document.write('<html><head><link rel="stylesheet" type="text/css" href="style.css" /></head><body onload="window.print()">'+b+"</html>"),c.document.close()}}]).controller("ModalAnularAsientoCtrl",["$scope","$rootScope","$uibModalInstance","contAsiento","objeto",function(a,b,c,d,e){a.objeto=e,a.guardar=function(){b.cargando=!0;var e=d.anular().post({},a.objeto);e.$promise.then(function(a){b.cargando=!1,c.close(a.mensaje)})},a.cancel=function(){c.dismiss()}}]).controller("ModalBuscarCuentaCtrl",["$scope","$rootScope","$timeout","$uibModalInstance","$filter","Notification","cuenta",function(a,b,c,d,e,f,g){a.datos=[],a.tiposCuenta=[{id:0,tipo:"Todos"},{id:1,tipo:"Activos"},{id:2,tipo:"Pasivos"},{id:3,tipo:"Perdidas"},{id:4,tipo:"Ganancias"}],a.filtro={filtro:"",tipoCuenta:a.tiposCuenta[0]},a.cargarDatos=function(){b.cargando=!0;var c=g.datos().query();c.$promise.then(function(c){a.datos=c,b.cargando=!1})},a.tipoCodigo=function(b){return a.filtro.tipoCuenta.id>0?0===b.codigo.indexOf(a.filtro.tipoCuenta.id):!0},a.seleccionar=function(a){b.cargando=!0;var c=g.obtenerDatos().get({id:a.id});c.$promise.then(function(a){d.close(a),b.cargando=!1})},a.cancel=function(){d.dismiss()},a.cargarDatos()}]),angular.module("angularjsApp").factory("contAsiento",["constantes","$resource",function(a,b){return{datos:function(){return b(a.URL+"contabilidad-registro-asientos/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})},opciones:function(){return b(a.URL+"contabilidad-registro-asientos/opciones/formulario")},buscar:function(){return b(a.URL+"contabilidad-registro-asientos/busqueda/parametros",{},{post:{method:"POST"}})},anular:function(){return b(a.URL+"contabilidad-registro-asientos/anular-asiento",{},{post:{method:"POST"}})},confirmarImportacion:function(){return b(a.URL+"contabilidad-registro-asientos/importar-comprobantes/confirmacion",{},{post:{method:"POST"}})},obtenerLibroMayor:function(c){return b(a.URL+"contabilidad-registro-asientos/libro-mayor/vista-previa"+c)},obtenerBalanceTributario:function(c){return b(a.URL+"contabilidad-registro-asientos/balance-tributario/vista-previa"+c)},obtenerBalanceClasificado:function(c){return b(a.URL+"contabilidad-registro-asientos/balance-clasificado/vista-previa"+c)}}}]),angular.module("angularjsApp").controller("PerfilesCtrl",["$scope","$rootScope","$timeout","$uibModal","Notification","constantes","perfil",function(a,b,c,d,e,f,g){a.datos=[],a.opciones=[],a.constantes=f,a.open=function(b){var c=d.open({animation:a.animationsEnabled,templateUrl:"myModalPerfil.html",controller:"ModalFormPerfilCtrl",size:"lg",backdrop:"static",resolve:{objeto:function(){return b},opciones:function(){return a.opciones}}});c.result.then(function(b){e.success({message:b,title:"Notificación del Sistema"}),a.cargarDatos()})},a.eliminar=function(c){b.cargando=!0,a.result=g.datos()["delete"]({id:c.sid}),a.result.$promise.then(function(b){b.success&&(a.cargarDatos(),e.success({message:b.mensaje,title:"Notificación del Sistema"}))})},a.editar=function(c){b.cargando=!0;var d=g.datos().get({id:c.sid});d.$promise.then(function(b){a.open(b)})},a.cargarDatos=function(){b.cargando=!0;var c=g.datos().get();c.$promise.then(function(c){a.datos=c.datos,a.opciones=c.opciones,b.cargando=!1})},a.toolTipEdicion=function(a){return"Editar el Perfil: <b>"+a+"</b>"},a.cargarDatos()}]).controller("ModalFormPerfilCtrl",["$scope","$filter","$timeout","$rootScope","$uibModalInstance","perfil","objeto","opciones",function(a,b,c,d,e,f,g,h){a.objeto=g,a.opciones=h,a.alert={},d.cargando=!1,a.checkmasterEmpresa=[],a.totalSeleccionados={},a.checklistEmpresa={},a.checkboxEmpresas={},a.empresas=[],a.empresas.push({nRut:"global",razonSocial:"TODAS"}),a.objeto.seleccion||(a.objeto.editar=!1,a.objeto.modificarAcceso=!1,a.objeto.creando=!1,a.objeto.seleccion={},a.objeto.empresa=a.empresas[0]),a.objeto.sid&&(a.objeto.creando=!0,a.checkboxEmpresas=a.objeto.seleccion,delete a.objeto.seleccion,a.objeto.seleccion={}),a.checkmasterEmpresa=[],a.objeto.sid||(a.objeto.accesos=[]),a.agregarOpcionSeleccion=function(b,c,d){a.objeto.seleccion[b][c]?a.objeto.seleccion[b][c][d]||(a.objeto.seleccion[b][c][d]=!0):(a.objeto.seleccion[b][c]={},a.totalSeleccionados[b]++),a.objeto.seleccion[b][c][d]=!0},a.quitarOpcionSeleccion=function(b,c,d){a.objeto.seleccion[b][c]&&(delete a.objeto.seleccion[b][c][d],angular.equals({},a.objeto.seleccion[b][c])&&(delete a.objeto.seleccion[b][c],a.totalSeleccionados[b]--))},a.cargarOpcionesSeleccion=function(){d.cargando=!0;var b,c=a.menu.datos,e=a.empresas;for(var f in e)for(b in c)c[b].sid&&e[f].nRut&&(a.checklistEmpresa[e[f].nRut][c[b].sid]={crear:!1,editar:!1,eliminar:!1,ver:!1});for(b in c)c[b].sid&&(a.checklistEmpresa.global[c[b].sid]={crear:!1,editar:!1,eliminar:!1,ver:!1});a.objeto.sid&&a.cargarSeleccionAnterior(),d.cargando=!1},a.generarSeleccionables=function(){a.objeto.seleccion.global={};for(var b in a.empresas)a.empresas[b].nRut&&(a.objeto.seleccion[a.empresas[b].nRut]={})},a.cargarEmpresas=function(){d.cargando=!0;var b=f.empresas().query();b.$promise.then(function(b){a.checkmasterEmpresa.global={crear:!1,editar:!1,eliminar:!1,ver:!1},a.checklistEmpresa.global={},a.objeto.seleccion.global||(a.objeto.seleccion.global={}),a.totalSeleccionados.global=0;for(var c in b)b[c].nRut&&(a.totalSeleccionados[b[c].nRut]=0,a.empresas.push(b[c]),a.checkmasterEmpresa[b[c].nRut]={crear:!1,editar:!1,eliminar:!1,ver:!1},a.checklistEmpresa[b[c].nRut]={},a.objeto.seleccion[b[c].nRut]||(a.objeto.seleccion[b[c].nRut]={}));d.cargando=!1,a.cargarOpcionesSeleccion()})},a.cargarSeleccionAnterior=function(){d.cargando=!0;var b=a.menu.datos;for(var c in a.checkboxEmpresas)for(var e in b)if(b[e].sid&&a.checkboxEmpresas[c]&&a.checkboxEmpresas[c][b[e].sid]){a.totalSeleccionados[c]++,a.checklistEmpresa[c][b[e].sid]=a.checkboxEmpresas[c][b[e].sid];for(var f in a.checkboxEmpresas[c][b[e].sid])a.checkboxEmpresas[c][b[e].sid][f]&&a.seleccionarOpcion(c,b[e].sid,f)}delete a.checkboxEmpresa,a.checkboxEmpresa={},d.cargando=!1},a.cargarOpcionesMenu=function(){d.cargando=!0;var b=f.menu().get();b.$promise.then(function(b){a.menu=b,d.cargando=!1,a.cargarEmpresas()})},a.cargarOpcionesMenu(),a.marcarTodosEmpresa=function(b,c){for(var d in a.menu.datos)a.menu.datos[d].sid&&(a.checklistEmpresa[b][a.menu.datos[d].sid][c]=a.checkmasterEmpresa[b][c],a.seleccionarOpcion(b,a.menu.datos[d].sid,c))},a.seleccionarOpcion=function(b,c,d){var e=a.checklistEmpresa[b][c][d];e?a.agregarOpcionSeleccion(b,c,d):a.quitarOpcionSeleccion(b,c,d)},a.grabar=function(){d.cargando=!0,a.objeto.sid?a.result=f.datos().update({id:a.objeto.sid},a.objeto):a.result=f.datos().create({},a.objeto),a.result.$promise.then(function(b){b.success?(a.estado=!0,e.close(b.mensaje)):(a.alert.tipo="danger",a.alert.mensaje=b.mensaje),d.cargando=!1})},a.cancel=function(){e.dismiss("reload")},a.comprobarSeleccion=function(){for(var b in a.totalSeleccionados)if(a.totalSeleccionados[b]>0)return!0;return!1}}]),angular.module("angularjsApp").factory("perfil",["$rootScope","$resource","constantes",function(a,b,c){return{datos:function(){return b(c.URL+"perfiles/:id",{id:"@id"},{create:{method:"POST"},update:{method:"PUT"},"delete":{method:"DELETE"}})},opciones:function(){return b(c.URL+"perfiles/opciones-formulario/obtener")},menu:function(){return b(c.URL+"menu/perfiles-usuario/obtener")},empresas:function(){return b(c.URL+"empresas")}}}]),angular.module("angularjsApp").directive("rut",function(){function a(a,b,c){var d=a.replace(/ /g,""),e=d.replace(/ /g,"");a.length>=parseInt(b)&&(e=d.substr(0,parseInt(b)-1));var f=e.replace(/\./g,""),g=f.replace(/-/g,"");if(void 0!==d){var h,i,j,k;c?h=g:(h=g.substr(0,g.length-1),k=g.substr(g.length-1,1));var l=[];for(i=0;i<h.length;i++)l[i]=h.charAt(i);l.reverse();var m=[];for(i=0;i<l.length;i++)m.push(l[i]),(i+1)%3===0&&i+1<l.length&&m.push(".");return m.reverse(),j=c?m.join(""):m.join("")+"-"+k.substr(0,1)}return""}return{restrict:"A",require:"?ngModel",scope:{extranjero:"="},link:function(b,c,d,e){e&&(e.$formatters.unshift(function(){var c="";return e.$modelValue&&(c=a(e.$modelValue,d.maxlength,b.extranjero)),c}),e.$parsers.unshift(function(e){var f="",g="";return e&&(g=a(e,d.maxlength,b.extranjero),f=g.replace(/-/g,"").replace(/\./g,"")),c.val(g),f}))}}}),angular.module("angularjsApp").controller("InicioCtrl",["$scope","$rootScope","$uibModal","$timeout","constantes","$resource","$localStorage","$location",function(a,b,c,d,e,f,g,h){b.cargando=!1,a.constantes=e,a.cargarDatos=function(){var a=f(e.URL+"inicio").get();a.$promise.then(function(a){a.success||(b.globals={},b.menu={},g.$reset(),h.path("/login"))})},d(function(){a.cargarDatos()},1e3)}]).controller("ModalReporteCertificadoHonorariosVistaPreviaCtrl",["$scope","$window","$httpParamSerializer","$sce","$rootScope","$http","$timeout","constantes","$uibModalInstance","$filter","boletaHonorarios","Notification","parametros",function(a,b,c,d,e,f,g,h,i,j,k,l,m){e.cargando=!0,a.sinValidar=!0,a.validado=!1,a.idCertificado=0,a.url=d.trustAsResourceUrl(h.URL+"boletas-honorarios/certificado/vista-previa?anio="+m.anio+"&proveedor="+m.proveedor),a.cargarCertificado=function(){a.url=d.trustAsResourceUrl(h.URL+"boletas-honorarios/certificado/pdf/"+a.idCertificado)},a.validar=function(){a.url="",a.validando=!0,e.cargando=!0;var b=k.validar().post({},{anio:m.anio,proveedor:m.proveedor});b.$promise.then(function(b){b.success?(l.success({message:b.mensaje,title:"Notificación del Sistema"}),a.sinValidar=!1,a.validando=!1,a.idCertificado=b.id,a.validado=!0,a.cargarCertificado()):l.error({message:b.mensaje,title:"Notificación del Sistema"}),e.cargando=!1})},a.imprimir=function(){var c=d.trustAsResourceUrl(h.URL+"boletas-honorarios/certificado/pdf/"+a.idCertificado),e=800,f=500,g=screen.width/2-e/2,i=screen.height/2-f/2;b.open(c,"IMPRIMIRCERTIFICADOHONORARIOS","width="+e+",height="+f+",left="+g+",top="+i)},a.cancel=function(){i.close(a.validado)},window.finCargando=function(){a.url&&g(function(){e.cargando=!1},2e3)}}]).controller("ModalReporteCertificadoHonorariosCtrl",["$scope","$httpParamSerializer","$rootScope","$http","$timeout","constantes","$uibModal","$uibModalInstance","$filter","variableSistema",function(a,b,c,d,e,f,g,h,i,j){a.constantes=f;parseInt(i("date")(new Date,"yyyy"));
a.opciones={anios:[]},a.objeto={};var k=function(){a.objeto={tipoPago:2,anio:a.opciones.anios[0],proveedor:""}};a.getProveedores=function(a){return d.get(f.URL+"clientes-proveedores/buscador/json",{params:{termino:a,tipo:2}}).then(function(a){return a.data.map(function(a){return a})})},a.cancel=function(){h.close()},a.rutaInforme=function(){var b="";a.objeto;if(a.objeto.proveedor&&a.objeto.proveedor.id)var b="proveedor="+a.objeto.proveedor.id;return b+="&anio="+a.objeto.anio},a.vistaPreviaCertificadoHonorarios=function(){var b=g.open({animation:!1,templateUrl:"views/reports/report-vista-previa-certificado-honorarios.html?v="+i("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalReporteCertificadoHonorariosVistaPreviaCtrl",size:"800",backdrop:"static",resolve:{parametros:function(){return{anio:a.objeto.anio,proveedor:a.objeto.proveedor.id}}}});b.result.then(function(a){a&&k()},function(){k()})},k(),a.obtenerAnioAnicialRegistros=function(){c.cargando=!0;var b=j.obtenerAnioInicialRegistros().post();b.$promise.then(function(b){for(var d=parseInt(b.anioFinal),e=parseInt(b.anioInicial),f=d;f>=e;f--)a.opciones.anios.push(f);c.cargando=!1})},a.obtenerAnioAnicialRegistros()}]).controller("ModalReporteInformeHonorariosCtrl",["$scope","$httpParamSerializer","$rootScope","$http","$timeout","constantes","$uibModalInstance","$filter","variableSistema",function(a,b,c,d,e,f,g,h,i){function j(){a.objeto={tipoPago:2,anioInicial:a.opciones.anios[0],fechas:1,fecha:new Date,inicio:new Date,fin:new Date,mes:k,anio:a.opciones.anios[0],mesInicial:k,mesFinal:k,anioInicial:a.opciones.anios[0],anioFinal:a.opciones.anios[0]}}a.constantes=f;parseInt(h("date")(new Date,"yyyy"));a.opciones={anios:[]};var k=h("filter")(a.constantes.MESES,{id:parseInt(h("date")(new Date,"MM"))},!0)[0];a.objeto={},a.fechas={fecha:!1,fechaInicial:!1,fechaFinal:!1},a.open=function(b){e(function(){a.fechas[b]=!0},100)},a.getProveedores=function(a){return d.get(f.URL+"clientes-proveedores/buscador/json",{params:{termino:a,tipo:2}}).then(function(a){return a.data.map(function(a){return a})})},a.cancel=function(){g.close()},a.convFecha=function(a){return h("date")(a,"yyyy-MM-dd")},a.rutaInforme=function(){var b="",c=a.objeto;if(a.objeto.proveedor&&a.objeto.proveedor.id)var b="proveedor="+a.objeto.proveedor.id;return b?b+="&tipoPago="+a.objeto.tipoPago:b="proveedor=0&tipoPago="+a.objeto.tipoPago,b+=1==c.fechas?"&fechas=1&fecha="+a.convFecha(c.fecha):2==c.fechas?"&fechas=2&inicio="+a.convFecha(c.inicio)+"&fin="+a.convFecha(c.fin):3==c.fechas?"&fechas=3&mes="+c.mes.id+"&anio="+c.anio.id:4==c.fechas?"&fechas=4&mesInicial="+c.mesInicial.id+"&anioInicial="+c.anioInicial.id+"&mesFinal="+c.mesFinal.id+"&anioFinal="+c.anioFinal.id:"&fechas=0",c.hojas&&(b+="&formato=folio"),b},a.obtenerAnioAnicialRegistros=function(){c.cargando=!0;var b=i.obtenerAnioInicialRegistros().post();b.$promise.then(function(b){for(var d=parseInt(b.anioFinal),e=parseInt(b.anioInicial),f=d;f>=e;f--)a.opciones.anios.push({id:f,value:f});j(),c.cargando=!1})},a.obtenerAnioAnicialRegistros()}]).controller("ModalReporteInformeAnalisisCtrl",["$scope","$httpParamSerializer","$rootScope","$http","$timeout","constantes","$uibModalInstance","$uibModal","$filter","variableSistema",function(a,b,c,d,e,f,g,h,i,j){function k(){a.objeto={tipoAnalisis:2,anioInicial:a.opciones.anios[0],fechas:0,fecha:new Date,inicio:new Date,fin:new Date,mes:l,anio:a.opciones.anios[0],mesInicial:l,mesFinal:l,anioInicial:a.opciones.anios[0],anioFinal:a.opciones.anios[0]}}a.constantes=f;parseInt(i("date")(new Date,"yyyy"));a.opciones={anios:[]};var l=i("filter")(a.constantes.MESES,{id:parseInt(i("date")(new Date,"MM"))},!0)[0];a.tiposAnalisis=[{id:"prov",tipo:"Proveedor"},{id:"rut",tipo:"Rut"},{id:"fecha",tipo:"Fecha"},{id:"saldados",tipo:"Saldados"},{id:"todos",tipo:"Todos"}],a.objeto={tipoAnalisis:2},a.fechas={fecha:!1,fechaInicial:!1,fechaFinal:!1},a.open=function(b){e(function(){a.fechas[b]=!0},100)},a.getProveedores=function(b){return d.get(f.URL+"clientes-proveedores/buscador/json",{params:{termino:b,tipo:a.objeto.tipoAnalisis}}).then(function(a){return a.data.map(function(a){return a})})},a.getCuentas=function(a){return d.get(f.URL+"cuentas/buscador/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})},a.buscarCuenta=function(b){var c=h.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-buscar-cuenta.html?v="+i("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalBuscarCuentaCtrl",size:"700"});c.result.then(function(c){a.objeto[b]=c})},a.cancel=function(){g.close()},a.convFecha=function(a){return i("date")(a,"yyyy-MM-dd")},a.rutaInforme=function(){var b="",c=a.objeto;return a.objeto.proveedor&&a.objeto.proveedor.id&&(b="proveedor="+a.objeto.proveedor.id+"&"),a.objeto.tipoAnalisis&&a.objeto.tipoAnalisis.id&&(b+="tipoAnalisis="+a.objeto.tipoAnalisis.id+"&"),a.objeto.cuentaAnalisis&&a.objeto.cuentaAnalisis.id&&(b+="cuentaAnalisis="+a.objeto.cuentaAnalisis.id+"&"),b+=1==c.fechas?"fechas=1&fecha="+a.convFecha(c.fecha):2==c.fechas?"fechas=2&inicio="+a.convFecha(c.inicio)+"&fin="+a.convFecha(c.fin):3==c.fechas?"fechas=3&mes="+c.mes.id+"&anio="+c.anio.id:4==c.fechas?"fechas=4&mesInicial="+c.mesInicial.id+"&anioInicial="+c.anioInicial.id+"&mesFinal="+c.mesFinal.id+"&anioFinal="+c.anioFinal.id:"fechas=0",c.hojas&&(b+="&formato=folio"),b},a.obtenerAnioAnicialRegistros=function(){c.cargando=!0;var b=j.obtenerAnioInicialRegistros().post();b.$promise.then(function(b){for(var d=parseInt(b.anioFinal),e=parseInt(b.anioInicial),f=d;f>=e;f--)a.opciones.anios.push({id:f,value:f});k(),c.cargando=!1})},a.obtenerAnioAnicialRegistros()}]).controller("ModalReporteInformeComprasCtrl",["$scope","$httpParamSerializer","$rootScope","$http","$timeout","constantes","$uibModalInstance","$filter","variableSistema",function(a,b,c,d,e,f,g,h,i){function j(){a.objeto={tipoPago:2,anioInicial:a.opciones.anios[0],fechas:1,fecha:new Date,inicio:new Date,fin:new Date,mes:k,anio:a.opciones.anios[0],mesInicial:k,mesFinal:k,anioInicial:a.opciones.anios[0],anioFinal:a.opciones.anios[0]}}a.constantes=f;parseInt(h("date")(new Date,"yyyy"));a.opciones={anios:[]};var k=h("filter")(a.constantes.MESES,{id:parseInt(h("date")(new Date,"MM"))},!0)[0];a.objeto={},a.fechas={fecha:!1,fechaInicial:!1,fechaFinal:!1},a.open=function(b){e(function(){a.fechas[b]=!0},100)},a.getProveedores=function(a){return d.get(f.URL+"clientes-proveedores/buscador/json",{params:{termino:a,tipo:2}}).then(function(a){return a.data.map(function(a){return a})})},a.cancel=function(){g.close()},a.convFecha=function(a){return h("date")(a,"yyyy-MM-dd")},a.rutaInforme=function(){var b="",c=a.objeto;if(a.objeto.proveedor&&a.objeto.proveedor.id)var b="proveedor="+a.objeto.proveedor.id;return b?b+="&tipoPago="+a.objeto.tipoPago:b="proveedor=0&tipoPago="+a.objeto.tipoPago,b+=1==c.fechas?"&fechas=1&fecha="+a.convFecha(c.fecha):2==c.fechas?"&fechas=2&inicio="+a.convFecha(c.inicio)+"&fin="+a.convFecha(c.fin):3==c.fechas?"&fechas=3&mes="+c.mes.id+"&anio="+c.anio.id:4==c.fechas?"&fechas=4&mesInicial="+c.mesInicial.id+"&anioInicial="+c.anioInicial.id+"&mesFinal="+c.mesFinal.id+"&anioFinal="+c.anioFinal.id:"&fechas=0",c.hojas&&(b+="&formato=folio"),b},a.obtenerAnioAnicialRegistros=function(){c.cargando=!0;var b=i.obtenerAnioInicialRegistros().post();b.$promise.then(function(b){for(var d=parseInt(b.anioFinal),e=parseInt(b.anioInicial),f=d;f>=e;f--)a.opciones.anios.push({id:f,value:f});j(),c.cargando=!1})},a.obtenerAnioAnicialRegistros()}]).controller("ModalReporteInformeVentasCtrl",["$scope","$httpParamSerializer","$rootScope","$http","$timeout","constantes","$uibModalInstance","$filter","variableSistema",function(a,b,c,d,e,f,g,h,i){function j(){a.objeto={tipoPago:2,anioInicial:a.opciones.anios[0],fechas:1,fecha:new Date,inicio:new Date,fin:new Date,mes:k,anio:a.opciones.anios[0],mesInicial:k,mesFinal:k,anioInicial:a.opciones.anios[0],anioFinal:a.opciones.anios[0]}}a.constantes=f;parseInt(h("date")(new Date,"yyyy"));a.opciones={anios:[]};var k=h("filter")(a.constantes.MESES,{id:parseInt(h("date")(new Date,"MM"))},!0)[0];a.objeto={},a.fechas={fecha:!1,fechaInicial:!1,fechaFinal:!1},a.open=function(b){e(function(){a.fechas[b]=!0},100)},a.getClientes=function(a){return d.get(f.URL+"clientes-proveedores/buscador/json",{params:{termino:a,tipo:1}}).then(function(a){return a.data.map(function(a){return a})})},a.cancel=function(){g.close()},a.convFecha=function(a){return h("date")(a,"yyyy-MM-dd")},a.rutaInforme=function(){var b="",c=a.objeto;if(a.objeto.cliente&&a.objeto.cliente.id)var b="cliente="+a.objeto.cliente.id;return b?b+="&tipoPago="+a.objeto.tipoPago:b="cliente=0&tipoPago="+a.objeto.tipoPago,b+=1==c.fechas?"&fechas=1&fecha="+a.convFecha(c.fecha):2==c.fechas?"&fechas=2&inicio="+a.convFecha(c.inicio)+"&fin="+a.convFecha(c.fin):3==c.fechas?"&fechas=3&mes="+c.mes.id+"&anio="+c.anio.id:4==c.fechas&&c.mesInicial?"&fechas=4&mesInicial="+c.mesInicial.id+"&anioInicial="+c.anioInicial.id+"&mesFinal="+c.mesFinal.id+"&anioFinal="+c.anioFinal.id:"&fechas=0",c.hojas&&(b+="&formato=folio"),b},a.obtenerAnioAnicialRegistros=function(){c.cargando=!0;var b=i.obtenerAnioInicialRegistros().post();b.$promise.then(function(b){for(var d=parseInt(b.anioFinal),e=parseInt(b.anioInicial),f=d;f>=e;f--)a.opciones.anios.push({id:f,value:f});j(),c.cargando=!1})},a.obtenerAnioAnicialRegistros()}]).controller("ModalReporteResumenRecuadro2F22Ctrl",["$scope","$rootScope","$timeout","constantes","$uibModalInstance","$filter","variableSistema",function(a,b,c,d,e,f,g){function h(){a.objeto={anioInicial:a.opciones.anios[0]}}a.constantes=d,a.tiposComprobantes=[],a.resultado=[];parseInt(f("date")(new Date,"yyyy"));a.opciones={anios:[]},a.objeto={},a.cancel=function(){e.close()},a.rutaInforme=function(){var b=a.objeto;if(b.anioInicial)var c="tipo=3&anioinicio="+b.anioInicial.id;else var c="";return c},a.obtenerAnioAnicialRegistros=function(){b.cargando=!0;var c=g.obtenerAnioInicialRegistros().post();c.$promise.then(function(c){for(var d=parseInt(c.anioFinal),e=parseInt(c.anioInicial),f=d;f>=e;f--)a.opciones.anios.push({id:f,value:f});h(),b.cargando=!1})},a.obtenerAnioAnicialRegistros()}]).controller("ModalReporteDeclaracionJurada1926Ctrl",["$scope","$rootScope","$timeout","constantes","$uibModalInstance","$filter","variableSistema",function(a,b,c,d,e,f,g){function h(){a.objeto={anioInicial:a.opciones.anios[0]}}a.constantes=d,a.tiposComprobantes=[],a.resultado=[];parseInt(f("date")(new Date,"yyyy"));a.opciones={anios:[]},a.objeto={},a.cancel=function(){e.close()},a.rutaInforme=function(){var b=a.objeto;if(b.anioInicial)var c="tipo=3&anioinicio="+b.anioInicial.id;else var c="";return c},a.obtenerAnioAnicialRegistros=function(){b.cargando=!0;var c=g.obtenerAnioInicialRegistros().post();c.$promise.then(function(c){for(var d=parseInt(c.anioFinal),e=parseInt(c.anioInicial),f=d;f>=e;f--)a.opciones.anios.push({id:f,value:f});h(),b.cargando=!1})},a.obtenerAnioAnicialRegistros()}]).controller("ModalReporteDeclaracionJurada1847Ctrl",["$scope","$rootScope","$timeout","constantes","$uibModalInstance","$filter","variableSistema",function(a,b,c,d,e,f,g){function h(){a.objeto={anioInicial:a.opciones.anios[0]}}a.constantes=d,a.tiposComprobantes=[],a.resultado=[];parseInt(f("date")(new Date,"yyyy"));a.opciones={anios:[]},a.objeto={},a.cancel=function(){e.close()},a.rutaInforme=function(){var b=a.objeto;if(b.anioInicial)var c="tipo=3&anioinicio="+b.anioInicial.id;else var c="";return c},a.obtenerAnioAnicialRegistros=function(){b.cargando=!0;var c=g.obtenerAnioInicialRegistros().post();c.$promise.then(function(c){for(var d=parseInt(c.anioFinal),e=parseInt(c.anioInicial),f=d;f>=e;f--)a.opciones.anios.push({id:f,value:f});h(),b.cargando=!1})},a.obtenerAnioAnicialRegistros()}]).controller("ModalReporteLibroVentasCtrl",["$scope","$rootScope","$timeout","constantes","$uibModalInstance","$filter","variableSistema",function(a,b,c,d,e,f,g){function h(){a.objeto={mesInicial:d.MESES[parseInt(f("date")(new Date,"MM"))-1],mesFinal:d.MESES[parseInt(f("date")(new Date,"MM"))-1],anioInicial:a.opciones.anios[0],anioFinal:a.opciones.anios[0]}}a.constantes=d;parseInt(f("date")(new Date,"yyyy"));a.opciones={anios:[]},a.objeto={},a.cancel=function(){e.close()},a.rutaInforme=function(){var b=a.objeto;if(b.mesInicial&&b.anioInicial)var c="&inicio="+b.mesInicial.id+"&anioinicio="+b.anioInicial.id;else var c="";return b.hojas&&(c+="&formato=folio"),c},a.obtenerAnioAnicialRegistros=function(){b.cargando=!0;var c=g.obtenerAnioInicialRegistros().post();c.$promise.then(function(c){for(var d=parseInt(c.anioFinal),e=parseInt(c.anioInicial),f=d;f>=e;f--)a.opciones.anios.push({id:f,value:f});h(),b.cargando=!1})},a.obtenerAnioAnicialRegistros()}]).controller("ModalReporteLibroComprasCtrl",["$scope","$rootScope","$timeout","constantes","$uibModalInstance","$filter","variableSistema",function(a,b,c,d,e,f,g){function h(){a.objeto={mesInicial:d.MESES[parseInt(f("date")(new Date,"MM"))-1],mesFinal:d.MESES[parseInt(f("date")(new Date,"MM"))-1],anioInicial:a.opciones.anios[0],anioFinal:a.opciones.anios[0]}}a.constantes=d;parseInt(f("date")(new Date,"yyyy"));a.opciones={anios:[]},a.objeto={},a.cancel=function(){e.close()},a.rutaInforme=function(){var b=a.objeto;if(b.mesInicial&&b.anioInicial)var c="&inicio="+b.mesInicial.id+"&anioinicio="+b.anioInicial.id;else var c="";return b.hojas&&(c+="&formato=folio"),c},a.obtenerAnioAnicialRegistros=function(){b.cargando=!0;var c=g.obtenerAnioInicialRegistros().post();c.$promise.then(function(c){for(var d=parseInt(c.anioFinal),e=parseInt(c.anioInicial),f=d;f>=e;f--)a.opciones.anios.push({id:f,value:f});h(),b.cargando=!1})},a.obtenerAnioAnicialRegistros()}]).controller("ModalReporteLibroBoletasCtrl",["$scope","$rootScope","$timeout","constantes","$uibModalInstance","$filter","variableSistema",function(a,b,c,d,e,f,g){function h(){a.objeto={mesInicial:d.MESES[parseInt(f("date")(new Date,"MM"))-1],mesFinal:d.MESES[parseInt(f("date")(new Date,"MM"))-1],anioInicial:a.opciones.anios[0],anioFinal:a.opciones.anios[0]}}a.constantes=d;parseInt(f("date")(new Date,"yyyy"));a.opciones={anios:[]},a.objeto={},a.cancel=function(){e.close()},a.rutaInforme=function(){var b=a.objeto;if(b.mesInicial&&b.anioInicial)var c="&inicio="+b.mesInicial.id+"&anioinicio="+b.anioInicial.id;else var c="";return b.hojas&&(c+="&formato=folio"),c},a.obtenerAnioAnicialRegistros=function(){b.cargando=!0;var c=g.obtenerAnioInicialRegistros().post();c.$promise.then(function(c){for(var d=parseInt(c.anioFinal),e=parseInt(c.anioInicial),f=d;f>=e;f--)a.opciones.anios.push({id:f,value:f});h(),b.cargando=!1})},a.obtenerAnioAnicialRegistros()}]).controller("ModalReporteLibroDiarioCtrl",["$scope","$rootScope","$timeout","constantes","$uibModalInstance","$filter",function(a,b,c,d,e,f){a.constantes=d,a.tiposComprobantes=[],a.resultado=[],a.objeto={fechaInicial:!1,fechaFinal:!1,inicio:"",fin:""},a.dateOptions={formatYear:"yy",startingDay:1},a.openFechaInicial=function(){c(function(){a.objeto.fechaInicial=!0},100)},a.openFechaFinal=function(){c(function(){a.objeto.fechaFinal=!0},100)},a.cancel=function(){e.close()},a.convFecha=function(a){return f("date")(a,"yyyy-MM-dd")}}]).controller("ModalReporteLibroHonorariosCtrl",["$scope","$rootScope","$timeout","constantes","$uibModalInstance","$filter","Notification","tipoComprobante","boletaHonorarios","variableSistema",function(a,b,c,d,e,f,g,h,i,j){function k(){a.objeto={mesInicial:d.MESES[parseInt(f("date")(new Date,"MM"))-1],mesFinal:d.MESES[parseInt(f("date")(new Date,"MM"))-1],anioInicial:a.opciones.anios[0],anioFinal:a.opciones.anios[0]}}a.constantes=d;parseInt(f("date")(new Date,"yyyy"));a.opciones={anios:[]},a.objeto={},a.cancel=function(){e.close()},a.rutaInforme=function(){var b=a.objeto;if(b.anioInicial)var c="&inicio="+b.mesInicial.id+"&anioinicio="+b.anioInicial.id;else var c="";return c},a.obtenerAnioAnicialRegistros=function(){b.cargando=!0;var c=j.obtenerAnioInicialRegistros().post();c.$promise.then(function(c){for(var d=parseInt(c.anioFinal),e=parseInt(c.anioInicial),f=d;f>=e;f--)a.opciones.anios.push({id:f,value:f});k(),b.cargando=!1})},a.obtenerAnioAnicialRegistros()}]).controller("ModalReporteLibroMayorCtrl",["$scope","$rootScope","$http","$timeout","$uibModal","constantes","$uibModalInstance","$filter","Notification","tipoComprobante","cuenta","variableSistema","contAsiento",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){a.objeto={fechaInicial:!1,fechaFinal:!1,inicio:new Date,fin:new Date,fechas:1,mesInicial:f.MESES[parseInt(h("date")(new Date,"MM"))-1],mesFinal:f.MESES[parseInt(h("date")(new Date,"MM"))-1],cuentas:1,cuentaInicial:null,cuentaFinal:null,anioInicial:a.opciones.anios[0],anioFinal:a.opciones.anios[0]}}a.constantes=f,a.tiposComprobantes=[],a.resultado=[],a.cuentas=[],a.opciones={anios:[]},a.objeto={},a.dateOptions={formatYear:"yy",startingDay:1},a.openFechaInicial=function(){d(function(){a.objeto.fechaInicial=!0},100)},a.openFechaFinal=function(){d(function(){a.objeto.fechaFinal=!0},100)},a.cancel=function(){g.close()},a.convFecha=function(a){return h("date")(a,"yyyy-MM-dd")},a.getCuentas=function(a){return c.get(f.URL+"cuentas/buscador/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})},a.buscarCuenta=function(b){var c=e.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-buscar-cuenta.html?v="+h("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalBuscarCuentaCtrl",size:"700"});c.result.then(function(c){a.objeto[b]=c})};var o={cuentaInicial:{index:-1,nivel:1},cuentaFinal:{index:-1,nivel:1}};a.omitirBlancos=function(b){var c=a.objeto[b];if(c){o[b].index>=0&&(a.cuentas[o[b].index].nivel=o[b].nivel);var d=a.cuentas.indexOf(c);o[b]={index:d,nivel:a.cuentas[d].nivel},a.cuentas[d].nivel=1}},a.filtroCuentaFinal=function(b){return b&&a.objeto.cuentaInicial?b.orden>=a.objeto.cuentaInicial.orden:!1},a.rutaInforme=function(){var b="",c=a.objeto;return 1===c.fechas?b+="tipo=1&inicio="+a.convFecha(c.inicio)+"&fin="+a.convFecha(c.fin):2===c.fechas?b+="&tipo=2&inicio="+c.mesInicial.id+"&anioinicio="+c.anioInicial.id+"&fin="+c.mesFinal.id+"&aniofin="+c.anioFinal.id:3===c.fechas&&c.anioInicial&&(b+="&tipo=3&anioinicio="+c.anioInicial.id),1===c.cuentas?b+="&cuentas=1":c.cuentaInicial&&c.cuentaFinal&&(b+="&cuentas=2&cta-inicial="+c.cuentaInicial.id+"&cta-final="+c.cuentaFinal.id),c.hojas&&(b+="&formato=folio"),b},a.obtenerAnioAnicialRegistros=function(){b.cargando=!0;var c=l.obtenerAnioInicialRegistros().post();c.$promise.then(function(c){for(var d=parseInt(c.anioFinal),e=parseInt(c.anioInicial),f=d;f>=e;f--)a.opciones.anios.push({id:f,value:f});n(),b.cargando=!1})},a.obtenerAnioAnicialRegistros(),a.vistaPrevia=function(){b.cargando=!0;var c=m.obtenerLibroMayor("?"+a.rutaInforme()).get();c.$promise.then(function(c){if(c.success){e.open({animation:a.animationsEnabled,templateUrl:"views/reports/report-libro-mayor-vista-previa.html?v="+h("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalVistaPreviaLibroMayorCtrl",size:"1000",backdrop:"static",resolve:{registros:function(){return c},rutaInforme:function(){return a.rutaInforme()}}})}else i.error({message:"No existen registros asociados a los parámetros ingresados",title:"Notificación del Sistema"});b.cargando=!1})}}]).controller("ModalVistaPreviaLibroMayorCtrl",["$scope","$rootScope","constantes","$uibModalInstance","$uibModal","Notification","$filter","variableSistema","contAsiento","registros","rutaInforme",function(a,b,c,d,e,f,g,h,i,j,k){a.constantes=c,a.tiposComprobantes=[],a.resultado=[],a.registros=j,a.rutaInforme=k,a.cancel=function(){d.close()},a.intervalos=[],a.imprimirContador=function(b){a.intervalos[b]||(a.intervalos[b]=1);var c=a.intervalos[b];return a.intervalos[b]++,c},a.vistaPreviaComprobante=function(c){b.cargando=!0;var d=i.datos().get({id:c});d.$promise.then(function(c){e.open({animation:a.animationsEnabled,templateUrl:"views/reports/report-asiento-contable-vista-previa.html?v="+g("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalVistaPreviaComprobanteCtrl",size:"900",backdrop:"static",resolve:{comprobante:function(){return c}}});b.cargando=!1})}}]).controller("ModalVistaPreviaComprobanteCtrl",["$scope","$rootScope","$window","constantes","$uibModalInstance","$filter","variableSistema","comprobante",function(a,b,c,d,e,f,g,h){a.constantes=d,a.movimiento=h,a.cancel=function(){e.close()},a.editar=function(){c.editarComprobante(""+h.id)}}]).controller("ModalReporteBalanceTributarioCtrl",["$scope","$rootScope","$timeout","$uibModal","constantes","$uibModalInstance","$filter","contAsiento","Notification","variableSistema",function(a,b,c,d,e,f,g,h,i,j){function k(){a.objeto={fechaInicial:!1,fechaFinal:!1,inicio:new Date,fin:new Date,fechas:1,mesInicial:e.MESES[parseInt(g("date")(new Date,"MM"))-1],mesFinal:e.MESES[parseInt(g("date")(new Date,"MM"))-1],anioInicial:a.opciones.anios[0],anioFinal:a.opciones.anios[0]}}a.constantes=e,a.tiposComprobantes=[],a.resultado=[],a.opciones={anios:[]},a.objeto={},a.niveles=[];for(var l=1;5>=l;l++)a.niveles.push(l);a.dateOptions={formatYear:"yy",startingDay:1},a.openFechaInicial=function(){c(function(){a.objeto.fechaInicial=!0},100)},a.openFechaFinal=function(){c(function(){a.objeto.fechaFinal=!0},100)},a.cancel=function(){f.close()},a.convFecha=function(a){return g("date")(a,"yyyy-MM-dd")},a.filtroMesFinal=function(b){return b?b.id>=a.objeto.mesInicial.id:!1},a.rutaInforme=function(){var b=a.objeto,c="nivel="+b.nivel;return 1===b.fechas?c+="&tipo=1&inicio="+a.convFecha(b.inicio)+"&fin="+a.convFecha(b.fin):2===b.fechas?c+="&tipo=2&inicio="+b.mesInicial.id+"&anioinicio="+b.anioInicial.id+"&fin="+b.mesFinal.id+"&aniofin="+b.anioFinal.id:3===b.fechas&&b.anioInicial&&(c+="&tipo=3&anioinicio="+b.anioInicial.id),b.hojas&&(c+="&formato=folio"),b.firma&&(c+="&firmas=ok"),c},a.obtenerAnioAnicialRegistros=function(){b.cargando=!0;var c=j.obtenerAnioInicialRegistros().post();c.$promise.then(function(c){for(var d=parseInt(c.anioFinal),e=parseInt(c.anioInicial),f=d;f>=e;f--)a.opciones.anios.push({id:f,value:f});k(),b.cargando=!1})},a.obtenerAnioAnicialRegistros(),a.vistaPrevia=function(){b.cargando=!0;var c=h.obtenerBalanceTributario("?"+a.rutaInforme()).get();c.$promise.then(function(c){if(c.success){d.open({animation:a.animationsEnabled,templateUrl:"views/reports/report-balance-tributario-vista-previa.html?v="+g("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalVistaPreviaBalanceTributarioCtrl",size:"1000",backdrop:"static",resolve:{registros:function(){return c},rutaInforme:function(){return a.rutaInforme()}}})}else i.error({message:"No existen registros asociados a los parámetros ingresados",title:"Notificación del Sistema"});b.cargando=!1})}}]).controller("ModalVistaPreviaBalanceTributarioCtrl",["$scope","$rootScope","constantes","$uibModalInstance","$uibModal","Notification","$filter","variableSistema","contAsiento","registros","rutaInforme",function(a,b,c,d,e,f,g,h,i,j,k){a.constantes=c,a.tiposComprobantes=[],a.resultado=[],a.registros=j,a.rutaInforme=k,a.cancel=function(){d.close()},a.intervalos=[],a.vistaPreviaLibroMayor=function(c){b.cargando=!0;var d=i.obtenerLibroMayor(c).get();d.$promise.then(function(d){if(d.success){e.open({animation:a.animationsEnabled,templateUrl:"views/reports/report-libro-mayor-vista-previa.html?v="+g("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalVistaPreviaLibroMayorCtrl",size:"1000",backdrop:"static",resolve:{registros:function(){return d},rutaInforme:function(){return c.replace("?","")}}})}else f.error({message:"No existen registros asociados a los parámetros ingresados",title:"Notificación del Sistema"});b.cargando=!1})}}]).controller("ModalReporteBalanceClasificadoCtrl",["$scope","$rootScope","$uibModal","$http","$timeout","contAsiento","constantes","$uibModalInstance","$filter","Notification","tipoComprobante","cuenta","variableSistema",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){a.objeto={fechaInicial:!1,fechaFinal:!1,inicio:new Date,fin:new Date,fechas:1,mesInicial:g.MESES[parseInt(i("date")(new Date,"MM"))-1],mesFinal:g.MESES[parseInt(i("date")(new Date,"MM"))-1],cuentas:1,cuentaInicial:null,cuentaFinal:null,anioInicial:a.opciones.anios[0],anioFinal:a.opciones.anios[0]}}a.constantes=g,a.tiposComprobantes=[],a.resultado=[],a.cuentas=[],a.opciones={anios:[]},a.objeto={},a.dateOptions={formatYear:"yy",startingDay:1},a.openFechaInicial=function(){e(function(){a.objeto.fechaInicial=!0},100)},a.openFechaFinal=function(){e(function(){a.objeto.fechaFinal=!0},100)},a.cancel=function(){h.close()},a.convFecha=function(a){return i("date")(a,"yyyy-MM-dd")},a.getCuentas=function(a){return d.get(g.URL+"cuentas/buscador/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})},a.buscarCuenta=function(b){var d=c.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-buscar-cuenta.html?v="+i("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalBuscarCuentaCtrl",size:"700"});d.result.then(function(c){a.objeto[b]=c})};var o={cuentaInicial:{index:-1,nivel:1},cuentaFinal:{index:-1,nivel:1}};a.omitirBlancos=function(b){var c=a.objeto[b];if(c){o[b].index>=0&&(a.cuentas[o[b].index].nivel=o[b].nivel);var d=a.cuentas.indexOf(c);o[b]={index:d,nivel:a.cuentas[d].nivel},a.cuentas[d].nivel=1}},a.filtroCuentaFinal=function(b){return b&&a.objeto.cuentaInicial?b.orden>=a.objeto.cuentaInicial.orden:!1},a.rutaInforme=function(){var b="",c=a.objeto;return 1===c.fechas?b+="tipo=1&inicio="+a.convFecha(c.inicio)+"&fin="+a.convFecha(c.fin):2===c.fechas?b+="&tipo=2&inicio="+c.mesInicial.id+"&anioinicio="+c.anioInicial.id+"&fin="+c.mesFinal.id+"&aniofin="+c.anioFinal.id:3===c.fechas&&c.anioInicial&&(b+="&tipo=3&anioinicio="+c.anioInicial.id),1===c.cuentas?b+="&cuentas=1":c.cuentaInicial&&c.cuentaFinal&&(b+="&cuentas=2&cta-inicial="+c.cuentaInicial.id+"&cta-final="+c.cuentaFinal.id),c.hojas&&(b+="&formato=folio"),c.firma&&(b+="&firmas=ok"),b},a.obtenerAnioAnicialRegistros=function(){b.cargando=!0;var c=m.obtenerAnioInicialRegistros().post();c.$promise.then(function(c){for(var d=parseInt(c.anioFinal),e=parseInt(c.anioInicial),f=d;f>=e;f--)a.opciones.anios.push({id:f,value:f});n(),b.cargando=!1})},a.obtenerAnioAnicialRegistros(),a.vistaPrevia=function(){b.cargando=!0;var d=f.obtenerBalanceClasificado("?"+a.rutaInforme()).get();d.$promise.then(function(d){if(d.success){c.open({animation:a.animationsEnabled,templateUrl:"views/reports/report-balance-clasificado-vista-previa.html?v="+i("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalVistaPreviaBalanceClasificadoCtrl",size:"1000",backdrop:"static",resolve:{registros:function(){return d},rutaInforme:function(){return a.rutaInforme()}}})}else j.error({message:"No existen registros asociados a los parámetros ingresados",title:"Notificación del Sistema"});b.cargando=!1})}}]).controller("ModalVistaPreviaBalanceClasificadoCtrl",["$scope","$rootScope","constantes","$uibModalInstance","$uibModal","Notification","$filter","variableSistema","contAsiento","registros","rutaInforme",function(a,b,c,d,e,f,g,h,i,j,k){a.constantes=c,a.tiposComprobantes=[],a.resultado=[],a.registros=j,a.rutaInforme=k,a.cancel=function(){d.close()},a.intervalos=[],a.vistaPreviaLibroMayor=function(c){b.cargando=!0;var d=i.obtenerLibroMayor(c).get();d.$promise.then(function(d){if(d.success){e.open({animation:a.animationsEnabled,templateUrl:"views/reports/report-libro-mayor-vista-previa.html?v="+g("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalVistaPreviaLibroMayorCtrl",size:"1000",backdrop:"static",resolve:{registros:function(){return d},rutaInforme:function(){return c.replace("?","")}}})}else f.error({message:"No existen registros asociados a los parámetros ingresados",title:"Notificación del Sistema"});b.cargando=!1})}}]).controller("ModalReporteEstadoResultadoCtrl",["$scope","$rootScope","$timeout","$http","$uibModal","constantes","$uibModalInstance","$filter","Notification","tipoComprobante","cuenta","variableSistema",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){a.objeto={fechaInicial:!1,fechaFinal:!1,inicio:new Date,fin:new Date,fechas:1,mesInicial:f.MESES[parseInt(h("date")(new Date,"MM"))-1],mesFinal:f.MESES[parseInt(h("date")(new Date,"MM"))-1],cuentas:1,cuentaInicial:null,cuentaFinal:null,anioInicial:a.opciones.anios[0],anioFinal:a.opciones.anios[0]}}a.constantes=f,a.tiposComprobantes=[],a.resultado=[],a.cuentas=[],a.opciones={anios:[]},a.objeto={},a.dateOptions={formatYear:"yy",startingDay:1},a.openFechaInicial=function(){c(function(){a.objeto.fechaInicial=!0},100)},a.openFechaFinal=function(){c(function(){a.objeto.fechaFinal=!0},100)},a.cancel=function(){g.close()},a.convFecha=function(a){return h("date")(a,"yyyy-MM-dd")},a.getCuentas=function(a){return d.get(f.URL+"cuentas/buscador/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})},a.buscarCuenta=function(b){var c=e.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-buscar-cuenta.html?v="+h("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalBuscarCuentaCtrl",size:"700"});c.result.then(function(c){a.objeto[b]=c})};var n={cuentaInicial:{index:-1,nivel:1},cuentaFinal:{index:-1,nivel:1}};a.omitirBlancos=function(b){var c=a.objeto[b];if(c){n[b].index>=0&&(a.cuentas[n[b].index].nivel=n[b].nivel);var d=a.cuentas.indexOf(c);n[b]={index:d,nivel:a.cuentas[d].nivel},a.cuentas[d].nivel=1}},a.filtroCuentaFinal=function(b){return b&&a.objeto.cuentaInicial?b.orden>=a.objeto.cuentaInicial.orden:!1},a.rutaInforme=function(){var b="",c=a.objeto;return 1===c.fechas?b+="tipo=1&inicio="+a.convFecha(c.inicio)+"&fin="+a.convFecha(c.fin):2===c.fechas?b+="&tipo=2&inicio="+c.mesInicial.id+"&anioinicio="+c.anioInicial.id+"&fin="+c.mesFinal.id+"&aniofin="+c.anioFinal.id:3===c.fechas&&c.anioInicial&&(b+="&tipo=3&anioinicio="+c.anioInicial.id),1===c.cuentas?b+="&cuentas=1":c.cuentaInicial&&c.cuentaFinal&&(b+="&cuentas=2&cta-inicial="+c.cuentaInicial.id+"&cta-final="+c.cuentaFinal.id),c.hojas&&(b+="&formato=folio"),c.firma&&(b+="&firmas=ok"),b},a.obtenerAnioAnicialRegistros=function(){b.cargando=!0;var c=l.obtenerAnioInicialRegistros().post();c.$promise.then(function(c){for(var d=parseInt(h("date")(new Date,"yyyy")),e=parseInt(c.anioInicial),f=d;f>=e;f--)a.opciones.anios.push({id:f,value:f});m(),b.cargando=!1})},a.obtenerAnioAnicialRegistros()}]),angular.module("angularjsApp").controller("EmpresasCtrl",["$scope","$route","$rootScope","$timeout","$uibModal","Notification","empresa","constantes","$localStorage",function(a,b,c,d,e,f,g,h,i){a.datos=[],a.constantes=h,a.open=function(b){var c=e.open({animation:a.animationsEnabled,templateUrl:"myModalFormEmpresa.html",controller:"ModalFormEmpresaCtrl",size:"800",backdrop:"static",resolve:{objeto:function(){return b}}});c.result.then(function(b){f.success({message:b,title:"Mensaje del Sistema"}),a.cargarDatos()})},a.cargarDatos=function(){c.cargando=!0;var b=!1,d=g.datos().query();d.$promise.then(function(d){a.datos=d,delete i.globals.currentUser.empresas,delete c.globals.currentUser.empresas,i.globals.currentUser.empresas=[],c.globals.currentUser.empresas=[],c.cargando=!0;var e=g.listaSelect().query();e.$promise.then(function(a){if(a.length>0)for(var d in a)a[d].id&&(i.globals.currentUser.empresas.push(a[d]),c.globals.currentUser.empresa.id===a[d].id&&(b=!0));c.cargando=!1})})},a.editar=function(b){c.cargando=!0;var d=g.datos().get({id:b.id});d.$promise.then(function(b){a.open(b),c.cargando=!1})},a.eliminar=function(b){c.cargando=!0,a.result=g.datos()["delete"]({id:b.id}),a.result.$promise.then(function(b){b.success&&(f.success({message:b.mensaje,title:"Notificación del Sistema"}),a.cargarDatos())})},a.toolTipEdicion=function(a){return"Editar los datos de la Empresa: <b>"+a+"</b>"},a.cargarDatos()}]).controller("ModalFormEmpresaCtrl",["$scope","$route","$rootScope","$timeout","$http","$uibModal","$uibModalInstance","$filter","Notification","objeto","empresa","constantes","$localStorage",function(a,b,c,d,e,f,g,h,i,j,k,l,m){a.objeto=j,a.objeto.fotografiaBase64="",a.imagen={},
a.errores={},a.empresas=[{id:1e5,empresa:"Ninguna"}];var n=parseInt(h("date")(new Date,"yyyy"));a.anios=[];for(var o=n;o>=2010;o--)a.anios.push(o);var p=k.listaSelect().query();p.$promise.then(function(b){if(b.length>0)for(var c in b)b[c].id&&a.empresas.push(b[c])}),j.logo?a.logo=l.URL+"stories/"+j.logo:a.logo="images/dashboard/EMPRESAS.0609cf8b.png",a.getComunas=function(a){return e.get(l.URL+"comunas/buscador/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})},a.ocultarProgressBar=function(){a.creandoImagen=!1,a.valorPB=0},a.obtenerImagenB64=function(){a.objeto.fotografiaBase64="",a.creandoImagen=!0,d(function(){var b,c=new FileReader;c.onload=function(c){b=c.target.result,a.objeto.fotografiaBase64=b,d(function(){a.ocultarProgressBar()},250)},c.readAsDataURL(a.imagen.flow.files[0].file)},1e3)},a.guardar=function(){c.cargando=!0;var e;e=a.objeto.id?k.datos().update({id:a.objeto.id},a.objeto):k.datos().create({},a.objeto),e.$promise.then(function(e){c.cargando=!1,e.success?(e.modMenu&&(delete m.globals.currentUser.menu,delete c.globals.currentUser.menu,delete m.globals.currentUser.accesos,delete c.globals.currentUser.accesos,delete m.globals.currentUser["default"],delete c.globals.currentUser["default"],delete m.globals.currentUser.empresa,delete c.globals.currentUser.empresa,m.globals.currentUser.menu=e.menu.menu,c.globals.currentUser.menu=e.menu.menu,m.globals.currentUser.accesos=e.menu.accesos,c.globals.currentUser.accesos=e.menu.accesos,m.globals.currentUser["default"]=e.menu.inicio,c.globals.currentUser["default"]=e.menu.inicio,m.globals.currentUser.empresa=e.menu.empresa,c.globals.currentUser.empresa=e.menu.empresa,d(function(){$("#main-menu").smartmenus("refresh")},500),b.reload()),g.close(e.mensaje)):(i.error({message:e.mensaje,title:"Notificación del Sistema"}),a.errores=e.errores)})},a.cancel=function(){g.dismiss("cancel")},a.errores=function(b){var c=a.form[b];return c.$invalid&&c.$dirty}}]),angular.module("angularjsApp").factory("empresa",["$resource","constantes",function(a,b){return{datos:function(){return a(b.URL+"empresas/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})},listaSelect:function(){return a(b.URL+"empresas/lista-empresas/json")}}}]),angular.module("angularjsApp").directive("abrirVentana",["$window","$sce",function(a,b){function c(a){return b.trustAsResourceUrl(a)}function d(b,d,e,f){var g=c(b),h=screen.width/2-e/2,i=screen.height/2-f/2;a.open(g,d,"width="+e+",height="+f+",left="+h+",top="+i+", scrollbars=yes")}return{restrict:"A",link:function(a,b,c){b.bind("click",function(){d(c.abrirVentana,c.ventanaNombre,c.ventanaAncho,c.ventanaAlto)})}}}]),angular.module("angularjsApp").factory("comuna",["$resource","$http","constantes",function(a,b,c){return{buscar:function(a){return b.get(c.URL+"comunas/buscador/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})}}}]),angular.module("angularjsApp").factory("pais",function(){var a=42;return{someMethod:function(){return a}}}),angular.module("angularjsApp").controller("ParametrosSistemaCtrl",["$scope","$rootScope","$http","constantes","$uibModal","$filter","variableSistema","Notification",function(a,b,c,d,e,f,g,h){a.cantidades=[],a.objeto={},a.anios=[],a.constantes=d,a.panel="plan_cuentas",a.vista={codigo:""},a.opciones={meses:d.MESES,anios:[],aniosConvenios:[]};for(var i=1;5>=i;i++)a.cantidades.push(i);a.niveles=[];for(var i=1;6>=i;i++)a.niveles.push(i);a.digitos=[];for(var i=1;5>=i;i++)a.digitos.push(i);a.crearNiveles=function(){a.objeto.plan.codigos=[];for(var b=1;b<=a.objeto.plan.niveles;b++)a.objeto.plan.codigos.push({nivel:b,digitos:3});a.vistaPreviaCodigo()},a.actualizarDatos=function(){a.objeto.plan.niveles?a.vistaPreviaCodigo():(a.objeto.plan.niveles=3,a.crearNiveles()),a.objeto.controlCierres.anio=parseInt(a.objeto.controlCierres.anio)},a.vistaPreviaCodigo=function(){for(var b="",c=1;c<=a.objeto.plan.niveles;c++)b&&(b+="-"),b+="0".repeat(a.objeto.plan.codigos[c-1].digitos);a.vista.codigo=b},a.guardarPlanCuentas=function(){b.cargando=!0;var c=g.datosPlanCuentas().post({},a.objeto.plan);c.$promise.then(function(a){a.success?h.success({message:a.mensaje,title:"Notificación del Sistema"}):h.error({message:a.mensaje,title:"Notificación del Sistema"}),b.cargando=!1})},a.guardarCuentasClientesProveedores=function(){b.cargando=!0;var c=g.datosCuentasClientesProveedores().post({},a.objeto.cuentasClienteProveedor);c.$promise.then(function(a){a.success?h.success({message:a.mensaje,title:"Notificación del Sistema"}):h.error({message:a.mensaje,title:"Notificación del Sistema"}),b.cargando=!1})},a.guardarCuentasAjustes=function(){b.cargando=!0;var c=g.datosCuentasAjustes().post({},a.objeto.cuentasAjustes);c.$promise.then(function(a){a.success?h.success({message:a.mensaje,title:"Notificación del Sistema"}):h.error({message:a.mensaje,title:"Notificación del Sistema"}),b.cargando=!1})},a.guardarControlCierreMensual=function(){b.cargando=!0;var c=g.datosCierreMensual().post({},a.objeto.controlCierres);c.$promise.then(function(a){a.success?h.success({message:a.mensaje,title:"Notificación del Sistema"}):h.error({message:a.mensaje,title:"Notificación del Sistema"}),b.cargando=!1})},a.guardarCuentasLibroCompra=function(){b.cargando=!0;var c=g.datosCuentasLibroCompra().post({},a.objeto.cuentasLibroCompra);c.$promise.then(function(a){a.success?h.success({message:a.mensaje,title:"Notificación del Sistema"}):h.error({message:a.mensaje,title:"Notificación del Sistema"}),b.cargando=!1})},a.guardarCuentasLibroVenta=function(){b.cargando=!0;var c=g.datosCuentasLibroVenta().post({},a.objeto.cuentasLibroVenta);c.$promise.then(function(a){a.success?h.success({message:a.mensaje,title:"Notificación del Sistema"}):h.error({message:a.mensaje,title:"Notificación del Sistema"}),b.cargando=!1})},a.guardarCuentasBoletaHonorarios=function(){b.cargando=!0;var c=g.datosCuentasBoletaHonorarios().post({},a.objeto.cuentasBoletaHonorarios);c.$promise.then(function(a){a.success?h.success({message:a.mensaje,title:"Notificación del Sistema"}):h.error({message:a.mensaje,title:"Notificación del Sistema"}),b.cargando=!1})},a.guardarCuentasPagoClienteProveedor=function(){b.cargando=!0;var c={clientes:a.objeto.cuentasPagoClientes,proveedores:a.objeto.cuentasPagoProveedores},d=g.datosCuentasPagoClienteProveedor().post({},c);d.$promise.then(function(a){a.success?h.success({message:a.mensaje,title:"Notificación del Sistema"}):h.error({message:a.mensaje,title:"Notificación del Sistema"}),b.cargando=!1})},a.guardarCuentasLibroBoleta=function(){b.cargando=!0;var c=g.datosCuentasLibroBoleta().post({},a.objeto.cuentasLibroBoleta);c.$promise.then(function(a){a.success?h.success({message:a.mensaje,title:"Notificación del Sistema"}):h.error({message:a.mensaje,title:"Notificación del Sistema"}),b.cargando=!1})},a.guardarCuentasActivosFijos=function(){b.cargando=!0;var c=g.datosCuentasActivosFijos().post({},a.objeto.cuentasActivosFijos);c.$promise.then(function(a){a.success?h.success({message:a.mensaje,title:"Notificación del Sistema"}):h.error({message:a.mensaje,title:"Notificación del Sistema"}),b.cargando=!1})},a.guardarCuentasDefectoActivosFijos=function(){b.cargando=!0;var c=g.datosCuentasDefectoActivosFijos().post({},{cuentas:a.objeto.cuentasDefectoActivosFijos});c.$promise.then(function(a){a.success?h.success({message:a.mensaje,title:"Notificación del Sistema"}):h.error({message:a.mensaje,title:"Notificación del Sistema"}),b.cargando=!1})},a.guardarCuentasDepositoPagoCliente=function(){b.cargando=!0;var c=g.datosCuentasDepositoPagoClientes().post({},{cuentas:a.objeto.cuentasDepositoPagoClientes});c.$promise.then(function(a){a.success?h.success({message:a.mensaje,title:"Notificación del Sistema"}):h.error({message:a.mensaje,title:"Notificación del Sistema"}),b.cargando=!1})},a.getCuentas=function(a){return c.get(d.URL+"cuentas/buscador/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})},a.getBancos=function(a){return c.get(d.URL+"bancos/buscador/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})},a.buscarCuenta=function(b,c,d){var g=e.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-buscar-cuenta.html?v="+f("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalBuscarCuentaCtrl",size:"700"});g.result.then(function(e){d===!0?a.objeto[b][c].cuenta=e:a.objeto[b][c]=e})},a.agregarCuenta=function(b){a.objeto[b].push({})},a.quitarCuenta=function(b,c){a.objeto[b].splice(c,1)},a.agregarCuentaCte=function(b){a.objeto[b].push({pagos:!1,depositos:!1,cuenta:"",banco:""})},a.agregarClasificacionBienFijo=function(){a.objeto.cuentasDefectoActivosFijos.push({})},a.quitarClasificacionBienFijo=function(b){a.objeto.cuentasDefectoActivosFijos.splice(b,1)},a.getActivosFijosTabla=function(a){return c.get(d.URL+"activos-fijos/buscador/tabla/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})},a.buscarActivoFijoSII=function(b){var c=e.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-buscar-activo-fijo-tabla.html?v="+f("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalBuscarActivoFijoTablaSIICtrl",size:"1000",backdrop:"static"});c.result.then(function(c){a.objeto.cuentasDefectoActivosFijos[b].activo=c})},a.buscarCuentaBienesFijos=function(b,c){var d=e.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-buscar-cuenta.html?v="+f("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalBuscarCuentaCtrl",size:"700"});d.result.then(function(d){a.objeto.cuentasDefectoActivosFijos[c][b]=d})},a.cargarDatos=function(){b.cargando=!0;var c=g.datos().get();c.$promise.then(function(c){a.objeto=c.datos,a.opciones.anios=c.anios;var d,e=c.datos.anioContable.actual;d=c.datos.anioContable.anterior?parseInt(e)-1:e;for(var f=parseInt(e);f>=d;f--)a.anios.push(f);a.actualizarDatos(),b.cargando=!1})},a.cargarDatos(),a.cargarIPCMensual=function(c){b.cargando=!0;var d=g.datosIPCMensual().query({anio:c});d.$promise.then(function(c){a.objeto.indicadoresEconomicos.ipc=c,b.cargando=!1})},a.grabarIPCMensual=function(){b.cargando=!0;var c=g.datosIPCMensual().post({anio:""},a.objeto.indicadoresEconomicos);c.$promise.then(function(a){a.success?h.success({message:a.mensaje,title:"Notificación del Sistema"}):h.error({message:a.mensaje,title:"Notificación del Sistema"}),b.cargando=!1})},a.cargarCierreMensual=function(){b.cargando=!0;var c=g.datosCierreMensual().get({anio:a.objeto.controlCierres.anio});c.$promise.then(function(c){a.objeto.controlCierres.meses=c.meses,b.cargando=!1})},a.guardarConfiguracionDepreciacion=function(){b.cargando=!0;var c=g.datosConfDepreciacion().post({},a.objeto.configuracionActivosFijos);c.$promise.then(function(a){a.success?h.success({message:a.mensaje,title:"Notificación del Sistema"}):h.error({message:a.mensaje,title:"Notificación del Sistema"}),b.cargando=!1})}}]),angular.module("angularjsApp").factory("funciones",function(){return{verificadorRut:function(a){a=a.replace(/\.|\-/gi,"");var b,c,d=new Array(3,2,7,6,5,4,3,2);a.length<9&&(a="0"+a);for(var e=0;8>e;e++)if(isNaN(parseInt(a.charAt(e))))return!1;for(var f=0,g=0;8>g;)f+=parseInt(d[g])*parseInt(a.charAt(g)),g++;if(b=f%11,c=11-b,c==a.charAt(8))return!0;var h=a.charAt(8);return 10==c&&"k"==h.toLowerCase()?!0:11==c&&0==h}}}),angular.module("angularjsApp").factory("variableSistema",["$rootScope","$resource","constantes",function(a,b,c){return{datos:function(){return b(c.URL+"variables-sistema/:id",{id:"@id"},{create:{method:"POST"},update:{method:"PUT"},"delete":{method:"DELETE"}})},datosPlanCuentas:function(){return b(c.URL+"variables-sistema/plan-cuentas/grabar",{},{post:{method:"POST"}})},datosCuentasAjustes:function(){return b(c.URL+"variables-sistema/cuentas-ajustes/grabar",{},{post:{method:"POST"}})},datosCuentasLibroCompra:function(){return b(c.URL+"variables-sistema/cuentas-libro-compra/grabar",{},{post:{method:"POST"}})},datosCuentasLibroVenta:function(){return b(c.URL+"variables-sistema/cuentas-libro-venta/grabar",{},{post:{method:"POST"}})},datosCuentasClientesProveedores:function(){return b(c.URL+"variables-sistema/cuentas-clientes-proveedores/grabar",{},{post:{method:"POST"}})},datosCuentasBoletaHonorarios:function(){return b(c.URL+"variables-sistema/cuentas-boleta-honorarios/grabar",{},{post:{method:"POST"}})},datosAperturaCierreAnio:function(){return b(c.URL+"variables-sistema/apertura-cierre/anio",{},{post:{method:"POST"}})},datosAperturaCierreAnioEditarAnterior:function(){return b(c.URL+"variables-sistema/apertura-cierre/editar-anterior",{},{post:{method:"POST"}})},obtenerAnioInicialRegistros:function(){return b(c.URL+"variables-sistema/apertura-cierre/anio-inicial/obtener",{},{post:{method:"POST"}})},datosCuentasPagoClienteProveedor:function(){return b(c.URL+"variables-sistema/cuentas-pago-clientes-proveedores/grabar",{},{post:{method:"POST"}})},datosCuentasDepositoPagoClientes:function(){return b(c.URL+"variables-sistema/cuentas-deposito-pago-clientes/grabar",{},{post:{method:"POST"}})},datosCuentasLibroBoleta:function(){return b(c.URL+"variables-sistema/cuentas-libro-boletas/grabar",{},{post:{method:"POST"}})},datosCuentasActivosFijos:function(){return b(c.URL+"variables-sistema/cuentas-activos-fijos/grabar",{},{post:{method:"POST"}})},datosCuentasDefectoActivosFijos:function(){return b(c.URL+"variables-sistema/cuentas-defecto-activos-fijos/grabar",{},{post:{method:"POST"}})},datosIPCMensual:function(){return b(c.URL+"variables-sistema/indicadores-economicos-ipc-mensual/gestionar/:anio",{anio:"@anio"},{post:{method:"POST"}})},datosConfDepreciacion:function(){return b(c.URL+"variables-sistema/configuracion-depreciacion/grabar",{},{post:{method:"POST"}})},datosCierreMensual:function(){return b(c.URL+"variables-sistema/cierre-mensual/gestionar/:anio",{anio:"@anio"},{post:{method:"POST"}})}}}]),angular.module("angularjsApp").directive("subirArchivo",function(){return{restrict:"A",scope:!0,link:function(a,b,c){a.$watch(c.modeloFile,function(){a.upload(a.$eval(c.modeloFile),a.$eval(c.modelo),c.modeloDestino,c.nombreArchivo)})}}}),angular.module("angularjsApp").filter("split",function(){return function(a,b,c){return a.split(b)[c]}}),angular.module("angularjsApp").controller("AperturaCierreAnualCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("angularjsApp").factory("auxiliar",["constantes","$resource",function(a,b){return{datos:function(){return b(a.URL+"auxiliares/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})},listado:function(){return b(a.URL+"auxiliares/listado/json")}}}]),angular.module("angularjsApp").controller("AuxiliaresCtrl",["$scope","$rootScope","$timeout","$uibModal","Notification","constantes","auxiliar",function(a,b,c,d,e,f,g){a.datos=[],a.constantes=f,a.permisos={},a.open=function(b){var c=d.open({animation:a.animationsEnabled,templateUrl:"myModalFormAuxiliar.html",controller:"ModalFormAuxiliarCtrl",size:"700",resolve:{objeto:function(){return b}}});c.result.then(function(b){e.success({message:b,title:"Mensaje del Sistema"}),a.cargarDatos()})},a.cargarDatos=function(){b.cargando=!0;var c=g.datos().get();c.$promise.then(function(c){a.datos=c.detalles,a.permisos=c.opciones.accesos,b.cargando=!1})},a.editar=function(c){b.cargando=!0;var d=g.datos().get({id:c.id});d.$promise.then(function(c){a.open(c),b.cargando=!1})},a.eliminar=function(c){b.cargando=!0,a.result=g.datos()["delete"]({id:c.id}),a.result.$promise.then(function(b){b.success&&(e.success({message:b.mensaje,title:"Notificación del Sistema"}),a.cargarDatos())})},a.toolTipEdicion=function(a){return"Editar los datos del Auxiliar: <b>"+a+"</b>"},a.cargarDatos()}]).controller("ModalFormAuxiliarCtrl",["$scope","$rootScope","$uibModalInstance","$filter","Notification","objeto","auxiliar",function(a,b,c,d,e,f,g){a.objeto=f,a.errores={},a.objeto.id||(a.objeto.imputaciones=[]),a.agregarImputacion=function(){a.objeto.imputaciones.push({codigo:"",nombre:""})},a.quitarImputacion=function(b){var c=a.objeto.imputaciones.indexOf(b);a.objeto.imputaciones.splice(c,1)},a.guardar=function(){b.cargando=!0;var d;d=a.objeto.id?g.datos().update({id:a.objeto.id},a.objeto):g.datos().create({},a.objeto),d.$promise.then(function(d){b.cargando=!1,d.success?c.close(d.mensaje):(e.error({message:d.mensaje,title:"Notificación del Sistema"}),a.errores=d.errores)})},a.cancel=function(){c.dismiss("cancel")}}]),angular.module("angularjsApp").controller("ImportacionLibroCompraXmlCtrl",["$scope","$timeout","$rootScope","$http","$uibModal","$filter","Upload","constantes","Notification","libroCompra",function(a,b,c,d,e,f,g,h,i,j){function k(b){var c=b.date,d=(b.mode,f("date")(c,"yyyy")),e=f("date")(c,"MM"),g=a.objeto.mesesActivos;if(g.length>0)for(var h in g)if(parseInt(e)==g[h].id&&parseInt(d)==g[h].anio)return!1;return!0}a.mostrarForm=!1,a.errores=[],a.constantes=h,a.vistaColumnas={},a.columnas=[],a.codigosImpuestos=[],a.tiposDocumentos=[],a.permisos={},a.miPyme=!1,a.opciones={meses:h.MESES},a.archivoImp={errores:[]},a.iniciarColumnasVisibles=function(){a.vistaColumnas={}},a.resumenes={resumentesPorCuenta:{},total:0},a.gestionarArchivo=function(){a.archivo={file:"",porc:0,mostrar:!1,loading:!1},a.objeto={},a.mostrarForm=!0,a.resumenes={resumentesPorCuenta:{}},a.miPyme||(a.objeto.periodoAnio=f("date")(new Date,"yyyy"),a.objeto.periodoMes=f("filter")(a.opciones.meses,{id:parseInt(f("date")(new Date,"MM"))},!0)[0])},a.filtros={itemsFiltrados:[],mostrarIncompletos:!1},a.filtro={},a.cuentasGlobales={cuentaMntNeto:""},a.archivo={file:"",porc:0,mostrar:!1,loading:!1},a.fechas={fecha:!1},a.open=function(){b(function(){a.fechas.fecha=!0},100)},a.omitirErrores=function(){c.cargando=!0;var b=j.omitirErrores().post({},{archivo:a.archivoImp.archivo,periodo:a.objeto.periodoMes});b.$promise.then(function(b){if(b.success){var d={id:b.id};a.gestionarLibro(d)}else i.error({message:b.mensaje,title:"Notificación del Sistema"});c.cargando=!1})},a.filtrarIncompletos=function(b){var c,d;if(a.filtros.mostrarIncompletos){var e=!0;for(var f in a.vistaColumnas)if(a.vistaColumnas[f])if(c=f.substr(3,100),["OtrosImp","IVANoRec"].indexOf(c)<0)b[c]>0&&(b["cuenta"+c]?b["cuenta"+c].id||(e=!1):e=!1);else for(var g in b[c])d=b[c][g],d.monto>0&&(b["cuenta"+c]&&b["cuenta"+c]["A"+d.codigo]?b["cuenta"+c]["A"+d.codigo].id||(e=!1):e=!1);return!e}return!0},a.cargarDatos=function(){c.cargando=!0;var b=j.datos().get();b.$promise.then(function(b){a.datos=b.datos,a.miPyme=b.miPyme,a.codigosImpuestos=b.codigosImpuestos,a.tiposDocumentos=b.tiposDocumentos,a.columnas=b.columnas,c.cargando=!1})},a.cargarDatos(),a.guardar=function(){c.cargando=!0;var b=j.datos().update({id:a.objeto.id},a.objeto);b.$promise.then(function(b){b.success?(i.success({message:b.mensaje,title:"Notificación del Sistema"}),a.objeto.cuentasGeneradas=b.cuentasGeneradas):i.error({message:b.mensaje,title:"Notificación del Sistema"}),c.cargando=!1})},a.eliminarLibro=function(b){c.cargando=!0;var d=j.datos()["delete"]({id:b});d.$promise.then(function(b){b.success?(c.cargando=!1,i.success({message:b.mensaje,title:"Notificación del Sistema"}),a.objeto={},a.volverIndex()):(i.error({message:b.mensaje,title:"Notificación del Sistema"}),c.cargando=!1)})},a.generarComprobante=function(){c.cargando=!0;var b=j.generarComprobante().post({id:a.objeto.id},{tipoGeneracion:a.objeto.comprobante.tipo});b.$promise.then(function(b){b.success?(i.success({message:b.mensaje,title:"Notificación del Sistema"}),a.objeto.comprobantes=b.comprobantes):(i.error({message:b.mensaje,title:"Notificación del Sistema"}),b.errores&&(a.errores=b.errores)),c.cargando=!1})},a.volverIndex=function(){a.mostrarForm=!1,a.cargarDatos()},a.$watch("archivo.file",function(){a.upload("archivo")}),a.revisarFiltro=function(b,c){var d=a.filtro[b];if(void 0!=c)var d=a.filtro[b][c];""==d&&delete a.filtro[b]},a.getCuentas=function(a){return d.get(h.URL+"cuentas/buscador/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})},a.buscarCuenta=function(b,c,d,g){var h=e.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-buscar-cuenta.html?v="+f("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalBuscarCuentaCtrl",size:"700"});h.result.then(function(e){var h=f("filter")(a.objeto.detalle,{id:d},!0)[0];["cuentaOtrosImp","cuentaIVANoRec"].indexOf(b)<0?(h[b]=e,a.analisisConfiguracion(d,b,c)):(h[b][g]=e,a.analisisConfiguracion(d,b,c,g)),a.resumenAsignacionCuenta()})},a.upload=function(b){a.archivoImp.errores=[],a.archivoImp.advertencias=[];var c=a.archivo,d=c.file;d&&!c.mostrar&&(c.mostrar=!0,g.upload({url:h.URL+"importacion-libro-compra/archivo-xml",file:d,data:a.objeto}).progress(function(a){var b=parseInt(100*a.loaded/a.total);c.porc=b}).success(function(b){if(b.success){var d={id:b.id};a.gestionarLibro(d),c.porc=0}else i.error({message:b.mensaje,title:"Mensaje del Sistema"}),b.errores&&(a.archivoImp.errores=b.errores,a.archivoImp.archivo=b.archivo),b.advertencias&&(a.archivoImp.advertencias=b.advertencias),c.porc=0;c.mostrar=!1}))},a.analizarColumnasVisibles=function(){a.iniciarColumnasVisibles();var b;for(var c in a.objeto.resumen.totales.TotalesPeriodo)b=a.objeto.resumen.totales.TotalesPeriodo[c],b.TotMntExe>0&&(a.vistaColumnas.TotMntExe=!0),b.TotMntNeto>0&&(a.vistaColumnas.TotMntNeto=!0),b.TotOpIVARec>0&&(a.vistaColumnas.TotOpIVARec=!0),b.TotMntIVA>0&&(a.vistaColumnas.TotMntIVA=!0),b.TotOpActivoFijo>0&&(a.vistaColumnas.TotOpActivoFijo=!0),b.TotMntActivoFijo>0&&(a.vistaColumnas.TotMntActivoFijo=!0),b.TotMntIVAActivoFijo>0&&(a.vistaColumnas.TotMntIVAActivoFijo=!0),b.TotIVANoRec&&(b.TotIVANoRec.TotMntIVANoRec?b.TotIVANoRec.TotMntIVANoRec>0&&(a.vistaColumnas.TotIVANoRec=!0):b.TotIVANoRec.length>1&&(a.vistaColumnas.TotIVANoRec=!0)),b.TotOpIVAUsoComun>0&&(a.vistaColumnas.TotOpIVAUsoComun=!0),b.TotIVAUsoComun>0&&(a.vistaColumnas.TotIVAUsoComun=!0),b.TotOtrosImp&&(b.TotOtrosImp.TotMntImp?b.TotOtrosImp.TotMntImp>0&&(a.vistaColumnas.TotOtrosImp=!0):b.TotOtrosImp.length>1&&(a.vistaColumnas.TotOtrosImp=!0)),b.TotImpSinCredito>0&&(a.vistaColumnas.TotMntSinCred=!0),b.TotMntTotal>0&&(a.vistaColumnas.TotMntTotal=!0),b.TotIVANoRetenido>0&&(a.vistaColumnas.TotIVANoRetenido=!0),b.TotTabPuros>0&&(a.vistaColumnas.TotTabPuros=!0),b.TotTabCigarrillos>0&&(a.vistaColumnas.TotTabCigarrillos=!0),b.TotTabElaborado>0&&(a.vistaColumnas.TotTabElaborado=!0)},a.gestionarLibro=function(b){c.cargando=!0;var d=j.datos().get({id:b.id});d.$promise.then(function(b){a.gestionarArchivo(),a.objeto=b,a.objeto.comprobante={},c.cargando=!1,a.resumenAsignacionCuenta(),a.dateOptions={formatYear:"yy",startingDay:1,weekStart:1,minDate:new Date(a.objeto.fechaMin+"T09:00:00"),maxDate:new Date(a.objeto.fechaMax+"T09:00:00"),dateDisabled:k},a.objeto.comprobante.fecha=new Date(a.objeto.fechaMax+"T09:00:00"),a.objeto.comprobantes&&1!=a.objeto.comprobantes?a.objeto.comprobante.tipo=2:a.objeto.comprobante.tipo=1,a.analizarColumnasVisibles()})},a.asignarCtaMasiva=function(b,c){var d,e=a.cuentasGlobales[b];if(e.codigo)for(var f in a.filtros.itemsFiltrados){var g=a.filtros.itemsFiltrados[f],h=a.objeto.detalle.indexOf(g);if(["cuentaOtrosImp","cuentaIVANoRec"].indexOf(b)<0)a.objeto.detalle[h][b]=e,a.analisisConfiguracion(a.objeto.detalle[h].id,b,c);else for(var f in a.objeto.detalle[h][c])a.objeto.detalle[h][b]||(a.objeto.detalle[h][b]={}),d="A"+a.objeto.detalle[h][c][f].codigo,a.objeto.detalle[h][b][d]=e,a.analisisConfiguracion(a.objeto.detalle[h].id,b,c,d)}a.resumenAsignacionCuenta()},a.openAsignacionCtaMasiva=function(b,c,d){var f=e.open({animation:a.animationsEnabled,templateUrl:"myModalAsignacionMasivaCuenta.html",controller:"ModalAsignacionMasivaCuenta",size:"800",backdrop:"static",resolve:{columna:function(){return d}}});f.result.then(function(d){a.cuentasGlobales[b]=d,a.asignarCtaMasiva(b,c)})},a.analisisConfiguracion=function(b,c,d,e){var g=f("filter")(a.objeto.detalle,{id:b},!0)[0];if(g.configuracion||(g.configuracion={}),["cuentaOtrosImp","cuentaIVANoRec"].indexOf(c)<0){if(delete g.configuracion[d],g.configuracion[d]={},g[c].parametros.length)for(var h in g[c].parametros){var i=g[c].parametros[h];"auxiliar"==i.id&&1000001==i.valor?g.configuracion[d]={ingresado:!0,label:g.RznSoc,auto:!0,auxiliar:{id:g.proveedorId,rut:g.RUTSoc,razonSocial:g.RznSoc}}:"activos_fijos"==i.id&&(g.configuracion[d]={ingresado:!0,label:"Activos Fijos",auto:!0})}}else if(e.indexOf("A")<0&&(e="A"+e),g.configuracion[d]||(g.configuracion[d]={}),g.configuracion[d][e]={},g[c][e].parametros.length)for(var h in g[c][e].parametros){var i=g[c][e].parametros[h];"auxiliar"==i.id&&1000001==i.valor&&(g.configuracion[d][e]={ingresado:!0,label:g.RznSoc,auto:!0,auxiliar:{id:g.proveedorId,rut:g.RUTSoc,razonSocial:g.RznSoc}})}},a.resumenAsignacionCuenta=function(){a.resumenes.totalMontoTotal=0,a.resumenes.totalMontoCtasTotal=0,a.resumenes.totalMontoCtasAsignadas=0,a.resumenes.resumentesPorCuenta={},a.resumenes.total=0;var b,c,d,e=0;for(var g in a.objeto.detalle){var h=a.objeto.detalle[g];a.resumenes.totalMontoTotal+=parseInt(h.MntTotal);for(b in a.columnas){var i=a.columnas[b];if("ImpSinCredito"==i&&(i="MntSinCred"),h["cuenta"+i]){if(["OtrosImp","IVANoRec"].indexOf(i)<0)a.resumenes.resumentesPorCuenta[h["cuenta"+i].cuenta]?a.resumenes.resumentesPorCuenta[h["cuenta"+i].cuenta].total+=parseInt(h[i]):a.resumenes.resumentesPorCuenta[h["cuenta"+i].cuenta]={total:parseInt(h[i]),cuenta:h["cuenta"+i].cuenta},a.resumenes.total+=parseInt(h[i]),e=parseInt(h[i]);else if(e=0,h[i]&&h[i].length>0)for(var j in h["cuenta"+i]){var k=h["cuenta"+i][j];c=parseInt(j.substr(1,100)),k&&(a.resumenes.resumentesPorCuenta[h["cuenta"+i][j].cuenta]?(d=f("filter")(h[i],{codigo:c},!0)[0],d&&(a.resumenes.resumentesPorCuenta[h["cuenta"+i][j].cuenta].total+=parseInt(d.monto))):(d=f("filter")(h[i],{codigo:c},!0)[0],d&&(a.resumenes.resumentesPorCuenta[h["cuenta"+i][j].cuenta]={total:parseInt(d.monto),cuenta:h["cuenta"+i][j].cuenta})),d&&(a.resumenes.total+=parseInt(d.monto),e+=parseInt(d.monto)))}"MntTotal"!=i&&(a.resumenes.totalMontoCtasAsignadas+=parseInt(e))}}h.cuentaMntTotal&&(a.resumenes.totalMontoCtasTotal+=parseInt(h.MntTotal))}},a.openGestionParametro=function(b,c,d,g,h,i){var j=f("filter")(a.objeto.detalle,{id:b},!0)[0];"undefined"==typeof i&&(i=0);var k=e.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-cuenta-parametros-asignacion.html?v="+f("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalGestionarParametrosCuenta",size:"800",backdrop:"static",resolve:{columna:function(){return g},parametros:function(){return c},cuentaId:function(){return d},monto:function(){return h},codigo:function(){return i},configuracion:function(){return i?j.configuracion&&j.configuracion[g]?j.configuracion[g][i]:null:j.configuracion?j.configuracion[g]:null}}});k.result.then(function(c){var d=f("filter")(a.objeto.detalle,{id:b},!0)[0];d.configuracion||(d.configuracion={}),i?(d.configuracion[g]||(d.configuracion[g]={}),d.configuracion[g][i]=c):d.configuracion[g]=c})}}]).controller("ModalAsignacionMasivaCuenta",["$scope","$rootScope","$uibModal","$uibModalInstance","$http","$filter","funcionario","columna","constantes",function(a,b,c,d,e,f,g,h,i){a.objeto={columna:h},a.getCuentas=function(a){return e.get(i.URL+"cuentas/buscador/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})},a.buscarCuenta=function(){var b=c.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-buscar-cuenta.html?v="+f("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalBuscarCuentaCtrl",size:"700"});b.result.then(function(b){a.objeto.cuenta=b})},a.asignar=function(){d.close(a.objeto.cuenta)},a.cancel=function(){d.dismiss("cancel")}}]).controller("ModalGestionarParametrosCuenta",["$scope","$rootScope","$uibModalInstance","$http","$filter","cuenta","columna","parametros","cuentaId","monto","configuracion","codigo","constantes",function(a,b,c,d,e,f,g,h,i,j,k,l,m){k||(k={}),k.label?(a.objeto=k,a.objeto.centrosCostos||(a.objeto.centrosCostos=[{}]),a.objeto.banco||(a.objeto.banco={})):a.objeto={cuentaId:i,columna:g,parametros:h,monto:j,auxiliarTipo:0,auxiliar:"",centrosCostos:[],banco:{},label:""},a.opciones={},a.actualizarOpciones=function(){if(a.objeto.centrosCostos.length>0){for(var b in a.objeto.centrosCostos)a.objeto.centrosCostos[b].centroCosto=e("filter")(a.opciones.centrosCostos,{id:a.objeto.centrosCostos[b].centroCosto.id},!0)[0];a.calcularSumaMontos()}a.objeto.banco.id&&(a.objeto.banco=e("filter")(a.opciones.bancos,{id:a.objeto.banco.id},!0)[0]),a.objeto.auxiliarTipo>0&&a.objeto.auxiliarTipo<1e6&&a.objeto.auxiliar&&(a.objeto.auxiliar=e("filter")(a.opciones.auxiliares,{id:a.objeto.auxiliar.id},!0)[0])},a.calcularSumaMontos=function(){var b=0;for(var c in a.objeto.centrosCostos)b+=a.objeto.centrosCostos[c].monto;a.objeto.totalCentrosCostos=b};for(var n in a.objeto.parametros){var o=a.objeto.parametros[n];"auxiliar"==o.id&&(a.objeto.auxiliarTipo=o.valor,a.objeto.auxiliarTipo>0&&a.objeto.auxiliarTipo<1e6?a.objeto.auxiliar&&(a.objeto.label=a.objeto.auxiliar.auxiliar):1000001==a.objeto.auxiliarTipo?a.objeto.label=a.objeto.auxiliar.razonSocial:1000002==a.objeto.auxiliarTipo&&(a.objeto.label=a.objeto.auxiliar.razonSocial)),"centro_costo"==o.id&&0==a.objeto.centrosCostos.length&&(a.objeto.centrosCostos.push({porcentaje:"1",centroCosto:"",monto:j}),a.calcularSumaMontos())}a.asignar=function(){a.objeto.label="";for(var b in a.objeto.parametros){var d=a.objeto.parametros[b];if("auxiliar"==d.id&&(a.objeto.label=a.objeto.auxiliar.auxiliar),"centro_costo"==d.id)for(var b in a.objeto.centrosCostos)a.objeto.label&&(a.objeto.label+=", "),a.objeto.label+=a.objeto.centrosCostos[b].centroCosto.value;"banco"==d.id&&(a.objeto.label=a.objeto.banco.nombre)}c.close(a.objeto)},a.cancel=function(){c.dismiss("cancel")},a.cargarDatos=function(){if(a.objeto.cuentaId){b.cargando=!0;var c=f.obtenerParametrosSubCuenta().get({id:a.objeto.cuentaId});c.$promise.then(function(c){a.opciones=c,b.cargando=!1,k&&a.actualizarOpciones()})}},a.cargarDatos(),a.agregarCentroCostos=function(){a.objeto.centrosCostos.push({porcentaje:"",centroCosto:""})},a.quitarCentroCostos=function(b){var c=a.objeto.centrosCostos.indexOf(b);a.objeto.centrosCostos.splice(c,1)},a.getClientes=function(a){return d.get(m.URL+"clientes-proveedores/buscador/json",{params:{termino:a,tipo:2}}).then(function(a){return a.data.map(function(a){return a})})},a.calcularMonto=function(b){var c=a.objeto.monto*b.porcentaje;b.monto=Math.round(c),a.calcularSumaMontos()}}]),angular.module("angularjsApp").controller("ImportacionLibroVentaXmlCtrl",["$scope","$timeout","$rootScope","$http","$uibModal","$filter","Upload","constantes","Notification","libroVenta",function(a,b,c,d,e,f,g,h,i,j){function k(b){var c=b.date,d=(b.mode,f("date")(c,"yyyy")),e=f("date")(c,"MM"),g=a.objeto.mesesActivos;if(g.length>0)for(var h in g)if(parseInt(e)==g[h].id&&parseInt(d)==g[h].anio)return!1;return!0}a.mostrarForm=!1,a.errores=[],a.columnas=[],a.constantes=h,a.miPyme=!1,a.opciones={meses:h.MESES},a.archivoImp={errores:[]},a.vistaColumnas={},a.iniciarColumnasVisibles=function(){a.vistaColumnas={}},a.resumenes={resumentesPorCuenta:{},total:0},a.gestionarArchivo=function(){a.archivo={file:"",porc:0,mostrar:!1,loading:!1},a.objeto={},a.mostrarForm=!0,a.resumenes={resumentesPorCuenta:{}},a.miPyme||(a.objeto.periodoAnio=f("date")(new Date,"yyyy"),a.objeto.periodoMes=f("filter")(a.opciones.meses,{id:parseInt(f("date")(new Date,"MM"))},!0)[0])},a.filtros={itemsFiltrados:[],itemsFiltrados2:[],mostrarIncompletos:!1},a.filtrarIncompletos=function(b){var c,d;if(a.filtros.mostrarIncompletos){var e=!0;for(var f in a.vistaColumnas)if(a.vistaColumnas[f])if(c=f.substr(3,100),["OtrosImp","IVANoRec"].indexOf(c)<0)b[c]>0&&(b["cuenta"+c]?b["cuenta"+c].id||(e=!1):e=!1);else for(var g in b[c])d=b[c][g],d.monto>0&&(b["cuenta"+c]&&b["cuenta"+c]["A"+d.codigo]?b["cuenta"+c]["A"+d.codigo].id||(e=!1):e=!1);return!e}return!0},a.filtro={},a.cuentasGlobales={cuentaMntNeto:""},a.archivo={file:"",
porc:0,mostrar:!1,loading:!1},a.fechas={fecha:!1},a.open=function(){b(function(){a.fechas.fecha=!0},100)},a.guardar=function(){c.cargando=!0;var b=j.datos().update({id:a.objeto.id},a.objeto);b.$promise.then(function(b){b.success?(i.success({message:b.mensaje,title:"Notificación del Sistema"}),a.objeto.cuentasGeneradas=b.cuentasGeneradas):i.error({message:b.mensaje,title:"Notificación del Sistema"}),c.cargando=!1})},a.generarComprobante=function(){c.cargando=!0;var b=j.generarComprobante().post({id:a.objeto.id},{tipoGeneracion:a.objeto.comprobante.tipo});b.$promise.then(function(b){b.success?(i.success({message:b.mensaje,title:"Notificación del Sistema"}),a.objeto.comprobantes=b.comprobantes):(i.error({message:b.mensaje,title:"Notificación del Sistema"}),b.errores&&(a.errores=b.errores)),c.cargando=!1})},a.volverIndex=function(){a.mostrarForm=!1,a.cargarDatos()},a.$watch("archivo.file",function(){a.upload("archivo")}),a.revisarFiltro=function(b,c){var d=a.filtro[b];if(void 0!=c)var d=a.filtro[b][c];""==d&&delete a.filtro[b]},a.getCuentas=function(a){return d.get(h.URL+"cuentas/buscador/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})},a.buscarCuenta=function(b,c,d){var g=e.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-buscar-cuenta.html?v="+f("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalBuscarCuentaCtrl",size:"700"});g.result.then(function(e){var g=f("filter")(a.objeto.detalle,{id:d},!0)[0];g[b]=e,a.analisisConfiguracion(d,b,c),a.resumenAsignacionCuenta()})},a.upload=function(b){a.archivoImp.errores=[];var c=a.archivo,d=c.file;d&&!c.mostrar&&(c.mostrar=!0,g.upload({url:h.URL+"importacion-libro-venta/archivo-xml",file:d,data:a.objeto}).progress(function(a){var b=parseInt(100*a.loaded/a.total);c.porc=b}).success(function(b){if(b.success){var d={id:b.id};a.gestionarLibro(d),c.porc=0}else i.error({message:b.mensaje,title:"Mensaje del Sistema"}),b.errores&&(a.archivoImp.errores=b.errores),c.porc=0;c.mostrar=!1}))},a.eliminarLibro=function(b){c.cargando=!0;var d=j.datos()["delete"]({id:b});d.$promise.then(function(b){b.success?(c.cargando=!1,i.success({message:b.mensaje,title:"Notificación del Sistema"}),a.objeto={},a.volverIndex()):(i.error({message:b.mensaje,title:"Notificación del Sistema"}),c.cargando=!1)})},a.analizarColumnasVisibles=function(){a.iniciarColumnasVisibles();var b;for(var c in a.objeto.resumen.totales.TotalesPeriodo)b=a.objeto.resumen.totales.TotalesPeriodo[c],b.TotMntExe>0&&(a.vistaColumnas.TotMntExe=!0),b.TotMntNeto>0&&(a.vistaColumnas.TotMntNeto=!0),b.TotMntIVA>0&&(a.vistaColumnas.TotMntIVA=!0),b.TotIVAFueraPlazo>0&&(a.vistaColumnas.TotIVAFueraPlazo=!0),b.TotIVAPropio>0&&(a.vistaColumnas.TotIVAPropio=!0),b.TotIVATerceros>0&&(a.vistaColumnas.TotIVATerceros=!0),b.TotLey18211>0&&(a.vistaColumnas.TotLey18211=!0),b.TotOtrosImp&&(b.TotOtrosImp.TotMntImp?b.TotOtrosImp.TotMntImp>0&&(a.vistaColumnas.TotOtrosImp=!0):b.TotOtrosImp.length>1&&(a.vistaColumnas.TotOtrosImp=!0)),b.TotOpIVARetTotal>0&&(a.vistaColumnas.TotOpIVARetTotal=!0),b.TotIVARetTotal>0&&(a.vistaColumnas.TotIVARetTotal=!0),b.TotOpIVARetParcial>0&&(a.vistaColumnas.TotOpIVARetParcial=!0),b.TotIVARetParcial>0&&(a.vistaColumnas.TotIVARetParcial=!0),b.TotCredEC>0&&(a.vistaColumnas.TotCredEC=!0),b.TotDepEnvase>0&&(a.vistaColumnas.TotDepEnvase=!0),b.TotMntTotal>0&&(a.vistaColumnas.TotMntTotal=!0),b.TotOpIVANoRetenido>0&&(a.vistaColumnas.TotOpIVANoRetenido=!0),b.TotIVANoRetenido>0&&(a.vistaColumnas.TotIVANoRetenido=!0),b.TotMntNoFact>0&&(a.vistaColumnas.TotMntNoFact=!0),b.TotMntPeriodo>0&&(a.vistaColumnas.TotMntPeriodo=!0),b.TotPsjNac>0&&(a.vistaColumnas.TotPsjNac=!0),b.TotPsjInt>0&&(a.vistaColumnas.TotPsjInt=!0)},a.gestionarLibro=function(b){c.cargando=!0;var d=j.datos().get({id:b.id});d.$promise.then(function(b){a.gestionarArchivo(),a.objeto=b,a.objeto.comprobante={},c.cargando=!1,a.resumenAsignacionCuenta(),a.dateOptions={formatYear:"yy",startingDay:1,weekStart:1,minDate:new Date(a.objeto.fechaMin+"T09:00:00"),maxDate:new Date(a.objeto.fechaMax+"T09:00:00"),dateDisabled:k},a.objeto.comprobante.fecha=new Date(a.objeto.fechaMax+"T09:00:00"),a.objeto.comprobantes&&1!=a.objeto.comprobantes?a.objeto.comprobante.tipo=2:a.objeto.comprobante.tipo=1,a.analizarColumnasVisibles()})},a.cargarDatos=function(){c.cargando=!0;var b=j.datos().get();b.$promise.then(function(b){a.datos=b.datos,a.miPyme=b.miPyme,a.codigosImpuestos=b.codigosImpuestos,a.tiposDocumentos=b.tiposDocumentos,a.columnas=b.columnas,c.cargando=!1})},a.cargarDatos(),a.asignarCtaMasiva=function(b,c){var d,e=a.cuentasGlobales[b];if(e.codigo)for(var f in a.filtros.itemsFiltrados){var g=a.filtros.itemsFiltrados[f],h=a.objeto.detalle.indexOf(g);if(["cuentaOtrosImp","cuentaIVANoRec"].indexOf(b)<0)a.objeto.detalle[h][b]=e,a.analisisConfiguracion(a.objeto.detalle[h].id,b,c);else for(var f in a.objeto.detalle[h][c])a.objeto.detalle[h][b]||(a.objeto.detalle[h][b]={}),d="A"+a.objeto.detalle[h][c][f].codigo,a.objeto.detalle[h][b][d]=e,a.analisisConfiguracion(a.objeto.detalle[h].id,b,c,d)}a.resumenAsignacionCuenta()},a.openAsignacionCtaMasiva=function(b,c,d){var f=e.open({animation:a.animationsEnabled,templateUrl:"myModalAsignacionMasivaCuenta.html",controller:"ModalAsignacionMasivaCuenta",size:"800",backdrop:"static",resolve:{columna:function(){return d}}});f.result.then(function(d){a.cuentasGlobales[b]=d,a.asignarCtaMasiva(b,c)})},a.analisisConfiguracion=function(b,c,d,e){var g=f("filter")(a.objeto.detalle,{id:b},!0)[0];if(g.configuracion||(g.configuracion={}),["cuentaOtrosImp","cuentaIVANoRec"].indexOf(c)<0){if(delete g.configuracion[d],g.configuracion[d]={},g[c].parametros.length)for(var h in g[c].parametros){var i=g[c].parametros[h];"auxiliar"==i.id&&1000001==i.valor&&(g.configuracion[d]={ingresado:!0,label:g.RznSoc,auto:!0,auxiliar:{id:g.proveedorId,rut:g.RUTSoc,razonSocial:g.RznSoc}})}}else if(e.indexOf("A")<0&&(e="A"+e),g.configuracion[d]||(g.configuracion[d]={}),g.configuracion[d][e]={},g[c][e].parametros.length)for(var h in g[c][e].parametros){var i=g[c][e].parametros[h];"auxiliar"==i.id&&1000001==i.valor&&(g.configuracion[d][e]={ingresado:!0,label:g.RznSoc,auto:!0,auxiliar:{id:g.proveedorId,rut:g.RUTSoc,razonSocial:g.RznSoc}})}},a.resumenAsignacionCuenta=function(){a.resumenes.totalMontoTotal=0,a.resumenes.totalMontoCtasTotal=0,a.resumenes.totalMontoCtasAsignadas=0,a.resumenes.resumentesPorCuenta={},a.resumenes.total=0;var b,c,d,e=0;for(var g in a.objeto.detalle){var h=a.objeto.detalle[g];a.resumenes.totalMontoTotal+=parseInt(h.MntTotal);for(b in a.columnas){var i=a.columnas[b];if(h["cuenta"+i]){if(["OtrosImp","IVANoRec"].indexOf(i)<0)a.resumenes.resumentesPorCuenta[h["cuenta"+i].cuenta]?a.resumenes.resumentesPorCuenta[h["cuenta"+i].cuenta].total+=parseInt(h[i]):a.resumenes.resumentesPorCuenta[h["cuenta"+i].cuenta]={total:parseInt(h[i]),cuenta:h["cuenta"+i].cuenta},a.resumenes.total+=parseInt(h[i]),e=parseInt(h[i]);else if(e=0,h[i]&&h[i].length>0)for(var j in h["cuenta"+i]){var k=h["cuenta"+i][j];c=parseInt(j.substr(1,100)),k&&(a.resumenes.resumentesPorCuenta[h["cuenta"+i][j].cuenta]?(d=f("filter")(h[i],{codigo:c},!0)[0],d&&(a.resumenes.resumentesPorCuenta[h["cuenta"+i][j].cuenta].total+=parseInt(d.monto))):(d=f("filter")(h[i],{codigo:c},!0)[0],d&&(a.resumenes.resumentesPorCuenta[h["cuenta"+i][j].cuenta]={total:parseInt(d.monto),cuenta:h["cuenta"+i][j].cuenta})),d&&(a.resumenes.total+=parseInt(d.monto),e+=parseInt(d.monto)))}"MntTotal"!=i&&(a.resumenes.totalMontoCtasAsignadas+=parseInt(e))}}h.cuentaMntTotal&&(a.resumenes.totalMontoCtasTotal+=parseInt(h.MntTotal))}},a.openGestionParametro=function(b,c,d,g,h,i){var j=f("filter")(a.objeto.detalle,{id:b},!0)[0];"undefined"==typeof i&&(i=0);var k=e.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-cuenta-parametros-asignacion.html?v="+f("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalGestionarParametrosCuenta",size:"800",backdrop:"static",resolve:{columna:function(){return g},parametros:function(){return c},cuentaId:function(){return d},monto:function(){return h},codigo:function(){return i},configuracion:function(){return i?j.configuracion&&j.configuracion[g]?j.configuracion[g][i]:null:j.configuracion?j.configuracion[g]:null}}});k.result.then(function(c){var d=f("filter")(a.objeto.detalle,{id:b},!0)[0];d.configuracion||(d.configuracion={}),i?(d.configuracion[g]||(d.configuracion[g]={}),d.configuracion[g][i]=c):d.configuracion[g]=c})}}]),angular.module("angularjsApp").factory("libroCompra",["constantes","$resource",function(a,b){return{datos:function(){return b(a.URL+"importacion-libro-compra/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})},generarComprobante:function(){return b(a.URL+"importacion-libro-compra/generar-comprobante/:id",{id:"@id"},{post:{method:"POST"}})},omitirErrores:function(){return b(a.URL+"importacion-libro-compra/omitir-errores/documentos",{},{post:{method:"POST"}})}}}]),angular.module("angularjsApp").factory("libroVenta",["constantes","$resource",function(a,b){return{datos:function(){return b(a.URL+"importacion-libro-venta/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})},generarComprobante:function(){return b(a.URL+"importacion-libro-venta/generar-comprobante/:id",{id:"@id"},{post:{method:"POST"}})}}}]),angular.module("angularjsApp").controller("IngresoBoletaHonorariosCtrl",["$scope","$rootScope","$http","$uibModal","$timeout","$filter","Notification","cuenta","boletaHonorarios","constantes",function(a,b,c,d,e,f,g,h,i,j){scopeRegistroAsientos=a,a.opened=!1,a.vista=!1,a.constantes=j,a.validacion={fechaFueraRango:!1},a.filtro={visible:1},a.dateOptions={formatYear:"yy",startingDay:1,weekStart:1},a.estados={},a.revisarFecha=function(){a.validacion.fechaFueraRango=!1;var b=a.boleta.fechaComprobante;b&&(b<a.dateOptions.minDate||b>a.dateOptions.maxDate)&&(a.validacion.fechaFueraRango=!0)},a.fechas={fecha:!1,fechaComprobante:!1},a.open=function(b){e(function(){a.fechas[b]=!0},100)},a.tiposComprobantes=[],a.nuevo=function(){a.boleta={},a.boleta.fecha=new Date,a.boleta.fechaComprobante=new Date,a.boleta.automatico=!1,a.boleta.asientos=[],a.boleta.totalDebe=0,a.boleta.totalHaber=0,a.boleta.estado=1,a.vista=!1},a.nuevo(),a.getProveedores=function(a){return c.get(j.URL+"clientes-proveedores/buscador/json",{params:{termino:a,tipo:2}}).then(function(a){return a.data.map(function(a){return a})})},a.getCuentas=function(a){return c.get(j.URL+"cuentas/buscador/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})},a.buscarCuenta=function(b){var c=d.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-buscar-cuenta.html?v="+f("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalBuscarCuentaCtrl",size:"700"});c.result.then(function(a){b.cuenta=a})},a.administrarProveedores=function(){d.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-cliente-proveedor.html?v="+f("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalFormAbastecimientoClienteCtrl",size:"700",resolve:{objeto:function(){return{}}}})},a.agregarAsiento=function(){a.boleta.asientos.push({opciones:{},cuenta:"",debe:"",haber:"",glosaPersonalizada:!1,glosa:""})},a.eliminarAsiento=function(b){var c=a.boleta.asientos.indexOf(b);a.boleta.asientos.splice(c,1),a.sumarDebe(),a.sumarHaber()},a.sumarDebe=function(){var b=0;if(a.boleta.asientos.length>0)for(var c in a.boleta.asientos)a.boleta.asientos[c].debe&&(b+=parseInt(a.boleta.asientos[c].debe));a.boleta.totalDebe=b},a.sumarHaber=function(){var b=0;if(a.boleta.asientos.length>0)for(var c in a.boleta.asientos)a.boleta.asientos[c].haber&&(b+=parseInt(a.boleta.asientos[c].haber));a.boleta.totalHaber=b},a.openParametro=function(b,c){var e=d.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-asiento-cuenta-parametros.html",controller:"ModalFormRegistroParametroCtrl",size:"700",resolve:{objeto:function(){return b},parametros:function(){return c}}});e.result.then(function(c){var d=a.boleta.asientos.indexOf(b);a.boleta.asientos[d].opciones=c})},a.editarParametroAsiento=function(b){var c=h.obtenerParametros().get({id:b.cuenta.id});c.$promise.then(function(c){c.success&&a.openParametro(b,c.parametros)})},a.comprobarDebeHaber=function(){return a.boleta.totalDebe===a.boleta.totalHaber&&a.boleta.totalDebe>0},a.guardarNuevo=function(){a.boleta.estado=1,a.mov=a.boleta.id,delete a.boleta.id,a.guardar()},a.guardar=function(){b.cargando=!0;var c;c=a.boleta.id?i.datos().update({id:a.boleta.id},a.boleta):i.datos().create({},a.boleta),c.$promise.then(function(c){c.success?(g.success({message:c.mensaje,title:"Notificación del Sistema"}),a.nuevo()):(g.error({message:c.mensaje,title:"Notificación del Sistema"}),a.errores=c.errores),b.cargando=!1})},a.openBuscadorAsiento=function(){var c=d.open({animation:a.animationsEnabled,templateUrl:"myModalBuscarAsientoContable.html",controller:"ModalBuscadorAsientoCtrl",size:"900",backdrop:"static"});c.result.then(function(c){b.cargando=!0,a.cargarComprobante(c.id)})},a.openImprimirAsiento=function(){d.open({animation:a.animationsEnabled,templateUrl:"views/reports/report-asiento-contable.html?v="+f("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalImprimirAsientoCtrl",size:"900",resolve:{objeto:function(){return a.boleta}}})},a.importarBoletas=function(b){d.open({animation:a.animationsEnabled,templateUrl:"myModalImportarBoletas.html",controller:"ModalImportarBoletasCtrl",size:"800",backdrop:"static",resolve:{opciones:function(){return a.opciones}}})},a.cambiarFechaComprobante=function(){a.boleta.fechaComprobante=a.boleta.fecha},a.cargarOpciones=function(){b.cargando=!0;var c=i.opciones().get();c.$promise.then(function(c){a.opciones=c,b.cargando=!1,a.dateOptions.maxDate=new Date(c.anioActivo+"-12-31T23:59:59"),a.dateOptions.minDate=new Date(c.anioDesde+"-01-01T09:00:01")})},a.cargarOpciones(),a.generarAsientos=function(){if(a.boleta.retencion=0,a.boleta.liquido=0,a.boleta.tipoBoleta&&a.boleta.total>0){var b,c,d;if(a.boleta.tipoBoleta.retencion?(b=parseInt(a.boleta.total),c=0,d=0,b>0&&(c=Math.round(.1*b),d=b-c)):(b=parseInt(a.boleta.total),d=b),0==a.boleta.asientos.length)for(var e,f,g,h,i=0;3>i;i++)e="",f=0,g=0,h=!1,0==i?(e=a.opciones.cuentas.liquido,g=d,h=!0,a.boleta.liquido=d):1==i?(e=a.opciones.cuentas.retencion,g=c,a.boleta.tipoBoleta.retencion&&(h=!0,a.boleta.retencion=c)):2==i&&(e=a.opciones.cuentas.total,f=b,h=!0),a.boleta.asientos.push({opciones:{},visible:h?1:0,cuenta:e,debe:f,haber:g,glosaPersonalizada:!1,glosa:""});else for(var e,f,g,h,i=0;3>i;i++)e="",f=0,g=0,h=!1,0==i?(e=a.opciones.cuentas.liquido,g=d,h=!0,a.boleta.liquido=d):1==i?(e=a.opciones.cuentas.retencion,g=c,a.boleta.tipoBoleta.retencion&&(h=!0,a.boleta.retencion=c)):2==i&&(e=a.opciones.cuentas.total,f=b,h=!0),a.boleta.asientos[i].debe=f,a.boleta.asientos[i].haber=g,a.boleta.asientos[i].visible=h?1:0;a.sumarDebe(),a.sumarHaber()}}}]).controller("ModalImportarBoletasCtrl",["$scope","$rootScope","$uibModalInstance","$timeout","constantes","Notification","Upload","boletaHonorarios","opciones",function(a,b,c,d,e,f,g,h,i){a.error={},a.deshabilitar=!1,a.sumaSubCriterios=0,a.resumen=[],a.confirmar={},a.listaErrores=[],a.dynamic=0,a.validacion={},a.alert={},a.opciones=i,a.objeto={},a.objeto.fechaComprobante=new Date,a.$watch("files",function(){a.upload(a.files)}),a.dateOptions={formatYear:"yy",startingDay:1,weekStart:1},a.revisarFecha=function(){a.validacion.fechaFueraRango=!1;var b=a.boleta.fechaComprobante;b&&(b<a.dateOptions.minDate||b>a.dateOptions.maxDate)&&(a.validacion.fechaFueraRango=!0)},a.fechas={fecha:!1,fechaComprobante:!1},a.open=function(b){d(function(){a.fechas[b]=!0},100)},a.upload=function(b){if(b){a.listaErrores=[],a.confirmar={},a.resumen=[];var c=b;g.upload({url:e.URL+"boletas-honorarios/importar-boletas/excel",data:{file:c,detalles:a.objeto}}).progress(function(b){var c=parseInt(100*b.loaded/b.total);a.dynamic=c}).success(function(b){a.dynamic=0,b.success?a.confirmar=b.resumen:b.errores?(a.listaErrores=b.errores,f.error({message:"Errores en los datos del archivo",title:"Mensaje del Sistema"})):f.error({message:b.mensaje,title:"Mensaje del Sistema"})})}},a.confirmarDatos=function(){b.cargando=!0;var c=h.confirmarImportacion().post({},{archivo:a.confirmar.archivo,detalles:a.confirmar});c.$promise.then(function(c){a.confirmar={},c.success?(a.resumen=c.resumen,f.success({message:"La Importación de los datos fue realizado correctamente",title:"Notificación del Sistema"})):f.error({message:c.mensaje,title:"Notificación del Sistema"}),b.cargando=!1})},a.cancel=function(){c.dismiss("cancel")},a.errores=function(b){var c=a.form[b];return c.$invalid&&c.$dirty}}]),angular.module("angularjsApp").factory("boletaHonorarios",["constantes","$resource",function(a,b){return{datos:function(){return b(a.URL+"boletas-honorarios/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})},opciones:function(){return b(a.URL+"boletas-honorarios/opciones-formulario/obtener")},confirmarImportacion:function(){return b(a.URL+"boletas-honorarios/importar-boletas/confirmacion",{},{post:{method:"POST"}})},validar:function(){return b(a.URL+"boletas-honorarios/certificado/validar",{},{post:{method:"POST"}})}}}]),angular.module("angularjsApp").controller("SiiPlanDeCuentasCtrl",["$scope","$rootScope","$timeout","$uibModal","Notification","siiCuenta","constantes",function(a,b,c,d,e,f,g){a.datos=[],a.constantes=g,a.cargarDatos=function(){b.cargando=!0;var c=f.datos().query();c.$promise.then(function(c){a.datos=c,b.cargando=!1})},a.cargarDatos()}]),angular.module("angularjsApp").factory("siiCuenta",["constantes","$resource",function(a,b){return{datos:function(){return b(a.URL+"sii-plan-de-cuentas/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})}}}]),angular.module("angularjsApp").factory("cuentaIfrs",["constantes","$resource",function(a,b){return{datos:function(){return b(a.URL+"cuentas-ifrs/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})},opciones:function(){return b(a.URL+"cuentas-ifrs/opciones/formulario")},listaNivel:function(){return b(a.URL+"cuentas-ifrs/listado/opciones")},obtenerParametros:function(){return b(a.URL+"cuentas-ifrs/parametros/:id",{id:"@id"})},obtenerDatos:function(){return b(a.URL+"cuentas-ifrs/obtener/info/:id",{id:"@id"})},comprobarCodigoCuenta:function(){return b(a.URL+"cuentas-ifrs/comprobar-codigo/:codigo/:clasificacion/:id",{codigo:"@codigo",clasificacion:"@clasificacion",id:"@id"})},comprobarEliminar:function(){return b(a.URL+"cuentas-ifrs/comprobar/eliminacion/:id",{id:"@id"},{post:{method:"POST"}})},comprobarSubCuentaEliminar:function(){return b(a.URL+"cuentas-ifrs/comprobar-subcuenta/eliminacion/:id",{id:"@id"},{post:{method:"POST"}})},digitosCodigos:function(){return b(a.URL+"cuentas-ifrs/digitos-codigos/json")},obtenerCodigoCuenta:function(){return b(a.URL+"cuentas-ifrs/obtener-codigo/cuenta/:clasificacion",{clasificacion:"@clasificacion"})},obtenerParametrosSubCuenta:function(){return b(a.URL+"cuentas-ifrs/obtener-parametros/sub-cuenta/:id",{id:"@id"})}}}]),angular.module("angularjsApp").controller("CuentasIfrsCtrl",["$scope","$rootScope","$filter","$http","$timeout","$uibModal","Notification","cuentaIfrs","cuentaIfrsClasificacion","constantes",function(a,b,c,d,e,f,g,h,i,j){a.datos=[],a.constantes=j,a.open=function(b,d){var e=f.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-cuenta-ifrs.html?v="+c("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalFormCuentaIfrsCtrl",size:"800",backdrop:"static",resolve:{objeto:function(){return b},retorno:function(){return!0},padre:function(){return d}}});e.result.then(function(b){g.success({message:b,title:"Mensaje del Sistema"}),a.cargarDatos()})},a.cargarDatos=function(){b.cargando=!0;var c=h.datos().query();c.$promise.then(function(c){a.datos=c,b.cargando=!1})},a.editarCuenta=function(c){b.cargando=!0;var d=h.datos().get({id:c.id});d.$promise.then(function(c){a.open(c),b.cargando=!1})},a.eliminarCuenta=function(c){b.cargando=!0,a.result=h.datos()["delete"]({id:c.id}),a.result.$promise.then(function(c){b.cargando=!1,c.success?(g.success({message:c.mensaje,title:"Notificación del Sistema"}),a.cargarDatos()):g.error({message:c.mensaje,title:"Notificación del Sistema",delay:1e4})})},a.openClasificacion=function(b,d){var e=f.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-clasificacion-cuenta-ifrs.html?v="+c("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalFormClasificacionCuentaIfrsCtrl",backdrop:"static",size:"700",resolve:{objeto:function(){return b},retorno:function(){return!0},padre:function(){return d}}});e.result.then(function(b){g.success({message:b,title:"Mensaje del Sistema"}),a.cargarDatos()})},a.agregarClasificacion=function(b){a.openClasificacion({},b)},a.editarClasificacion=function(c){b.cargando=!0;var d=i.datos().get({id:c.id});d.$promise.then(function(c){a.openClasificacion(c,!1),b.cargando=!1})},a.eliminarClasificacion=function(c){b.cargando=!0,a.result=i.datos()["delete"]({id:c.id}),a.result.$promise.then(function(c){b.cargando=!1,c.success?(g.success({message:c.mensaje,title:"Notificación del Sistema"}),a.cargarDatos()):g.error({message:c.mensaje,title:"Notificación del Sistema",delay:1e4})})},a.agregarCuenta=function(b){a.open({},b)},a.toolTipEdicionClasificacion=function(a){return"Editar los datos de la Clasificación de Cuenta: <b>"+a+"</b>"},a.toolTipAgregarClasificacion=function(a){return"Agregar una <b>Sub-Clasificación</b> a la Clasificación de Cuenta: <b>"+a+"</b>"},a.toolTipAgregarCuenta=function(a){return"Agregar una <b>Cuenta</b> a la Clasificación de Cuenta: <b>"+a+"</b>"},a.cargarDatos()}]).controller("ModalFormCuentaIfrsCtrl",["$scope","$rootScope","$timeout","$http","$uibModal","$uibModalInstance","$filter","Notification","constantes","objeto","retorno","padre","cuentaIfrs",function(a,b,c,d,e,f,g,h,i,j,k,l,m){a.retorno=k,a.padre=l,a.opciones={},a.bloquearFormulario=!1,a.objeto=j,a.correlativo=1,a.largoCodigoSubCuenta=3,a.largoCodigoCuenta=3,a.onlyNumbers=/^\d+$/,a.objeto.subcuentas||(a.objeto.subcuentas=[]),a.objeto.subcuentas.length>0&&j.id?a.objeto.configurarSubCuentas=!0:a.objeto.configurarSubCuentas=!1,a.objeto.id||(a.objeto.configuracion={}),a.actualizarDatos=function(){a.objeto.id||a.padre&&c(function(){a.objeto.clasificacion={id:a.padre.id,clasificacion:a.padre.nombreCompleto,codigo:a.padre.codigo}},250)},a.getClasificaciones=function(a){return d.get(i.URL+"cuentas-ifrs-clasificacion/buscador/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})},a.openClasificacion=function(){var b=e.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-clasificacion-cuenta-ifrs.html?v="+g("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalFormClasificacionCuentaIfrsCtrl",backdrop:"static",windowClass:"window800",resolve:{objeto:function(){return{}},retorno:function(){return!1},padre:function(){return!1}}});b.result.then(function(){})},a.agregarSubCuenta=function(){var b=1,c=a.objeto.clasificacion;c&&c.id&&(b=c.nivel+2);var d=a.digitosCodigo[b];a.largoCodigoSubCuenta=d,a.objeto.subcuentas.length>0?a.correlativo=parseInt(a.objeto.subcuentas[a.objeto.subcuentas.length-1].codigo)+1:a.correlativo=1;var e=a.formatearCodigo(a.correlativo+"",d);a.objeto.subcuentas.push({codigo:e,nombre:"",configuracion:{}})},a.habilitarSubCuentas=function(){j.configurarSubCuentas&&0==a.objeto.subcuentas.length&&a.agregarSubCuenta()},a.eliminarSubCuenta=function(c){if(c.id){b.cargando=!0;var d=m.comprobarSubCuentaEliminar().post({id:c.id});d.$promise.then(function(d){if(d.success){var e=a.objeto.subcuentas.indexOf(c);a.objeto.subcuentas.splice(e,1)}else h.error({message:d.mensaje,title:"Notificación del Sistema",delay:1e4});b.cargando=!1})}else{var e=a.objeto.subcuentas.indexOf(c);a.objeto.subcuentas.splice(e,1)}},a.guardar=function(){b.cargando=!0;var c;c=a.objeto.id?m.datos().update({id:a.objeto.id},a.objeto):m.datos().create({},a.objeto),c.$promise.then(function(a){a.success&&(b.cargando=!1,f.close(a.mensaje))})},a.cancel=function(){f.dismiss("cancel")},a.openConfiguracionCuenta=function(b,c){var d=e.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-cuenta-ifrs-configuracion.html?v="+g("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalFormConfiguracionCuentaIfrsCtrl",backdrop:"static",windowClass:"window700",resolve:{objeto:function(){return b},tipo:function(){return c}}});d.result.then(function(a){m.configuraciones=a})},a.actualizarDatos(),a.verifyDuplicate=function(){var b,c;for(b=a.objeto.subcuentas.concat().sort(function(a,b){return a.codigo>b.codigo?1:a.codigo<b.codigo?-1:0}),c=0;c<a.objeto.subcuentas.length;c++)b[c].isDuplicate=b[c-1]&&b[c-1].codigo==b[c].codigo||b[c+1]&&b[c+1].codigo==b[c].codigo},a.obtenerCodigoCuenta=function(){if(a.objeto.clasificacion&&!a.objeto.codigo){a.comprobandoCuenta=!0;var b=m.obtenerCodigoCuenta().get({clasificacion:a.objeto.clasificacion.id});b.$promise.then(function(b){a.objeto.codigo=b.codigo,a.comprobandoCuenta=!1,a.formatearDigitoCodigo()})}},a.comprobarCodigoCuenta=function(){if(a.objeto.clasificacion&&a.objeto.codigo){a.comprobandoCuenta=!0;var b=m.comprobarCodigoCuenta().get({codigo:a.objeto.codigo,clasificacion:a.objeto.clasificacion.id,id:a.objeto.id?a.objeto.id:0});b.$promise.then(function(b){b.success?a.bloquearFormulario=!1:(h.error({message:b.mensaje,title:"Notificación del Sistema"}),a.bloquearFormulario=!0),a.comprobandoCuenta=!1})}},a.formatearCodigo=function(a,b){for(;a.length<b;)a="0"+a;return a},a.formatearDigitoCodigo=function(){var b=a.objeto.codigo?a.objeto.codigo+"":"",c=a.objeto.clasificacion,d=1;c&&c.id&&(d=c.nivel+1);var e=a.digitosCodigo[d];a.largoCodigoCuenta=e,a.objeto.codigo=a.formatearCodigo(b,e)},a.cargarDigitosCodigos=function(){b.cargando=!0;var c=m.digitosCodigos().get();c.$promise.then(function(c){a.digitosCodigo=c,b.cargando=!1})},a.cargarDigitosCodigos()}]).controller("ModalFormConfiguracionCuentaIfrsCtrl",["$scope","$rootScope","$uibModalInstance","$filter","objeto","tipo","auxiliar",function(a,b,c,d,e,f,g){a.configuracion=e.configuracion,a.opciones={auxiliares:[]},1===f?a.objeto={nombre:e.nombre,codigo:e.clasificacion.codigo+"."+e.codigo}:a.objeto={nombre:e.nombre,codigo:e.codigoCuenta+"."+e.codigo},a.guardar=function(){c.close(a.configuracion)},a.actualizarDatos=function(){a.configuracion.auxiliar&&(a.configuracion.auxiliar=d("filter")(a.opciones.auxiliares,{id:a.configuracion.auxiliar},!0)[0])},a.cargarAuxiliares=function(){b.cargando=!0;var c=g.listado().query();c.$promise.then(function(c){a.opciones.auxiliares=c,a.actualizarDatos(),b.cargando=!1})},a.cargarAuxiliares()}]).controller("ModalFormClasificacionCuentaIfrsCtrl",["$scope","$rootScope","$filter","$timeout","$uibModalInstance","Notification","constantes","cuentaIfrs","cuentaIfrsClasificacion","objeto","retorno","padre",function(a,b,c,d,e,f,g,h,i,j,k,l){a.retorno=k,a.padre=l,a.opciones={},a.objeto=j,a.digitosCodigo=[],a.tipos=[{id:1,tipo:"Activo"},{id:2,tipo:"Pasivo"},{id:3,tipo:"Patrimonio"},{id:4,tipo:"Perdida"},{id:5,tipo:"Ganancia"}],a.actualizarDatos=function(){a.objeto.id?(a.objeto.clasificacion=c("filter")(a.clasificaciones,{id:a.objeto.padreId},!0)[0],a.objeto.tipo=c("filter")(a.tipos,{id:a.objeto.tipo},!0)[0]):a.padre&&d(function(){a.objeto.clasificacion=c("filter")(a.clasificaciones,{id:a.padre.id},!0)[0]},250)},a.guardar=function(){b.cargando=!0;var c;c=a.objeto.id?i.datos().update({id:a.objeto.id},a.objeto):i.datos().create({},a.objeto),c.$promise.then(function(c){c.success?a.retorno?e.close(c.mensaje):(a.objeto={},b.cargando=!1,a.cargarOpciones(),f.success({message:c.mensaje,title:"Mensaje del Sistema"})):f.error({message:c.mensaje,title:"Mensaje del Sistema"})})},a.cancel=function(){e.dismiss()},a.editarClasificacion=function(c){b.cargando=!0;var d=i.datos().get({id:c});d.$promise.then(function(c){a.objeto=c,a.actualizarDatos(),b.cargando=!1})},a.eliminarClasificacion=function(c){b.cargando=!0;var d=i.datos()["delete"]({id:c});d.$promise.then(function(c){c.success&&f.success({message:c.mensaje,title:"Mensaje del Sistema"}),b.cargando=!1,a.cargarOpciones()})},a.formatearDigitoCodigo=function(){var b=a.objeto.codigo?a.objeto.codigo:"",c=a.objeto.clasificacion,d=1;for(c&&c.id&&(d=c.nivel+1);b.length<a.digitosCodigo[d];)b="0"+b;a.objeto.codigo=b},a.cargarDigitosCodigos=function(){b.cargando=!0;var c=h.digitosCodigos().get();c.$promise.then(function(c){a.digitosCodigo=c,a.formatearDigitoCodigo(),b.cargando=!1})},a.cargarOpciones=function(){b.cargando=!0;var c=i.listaNivel().query();c.$promise.then(function(c){a.clasificaciones=c,a.actualizarDatos(),b.cargando=!1})},a.cargarOpciones(),a.cargarDigitosCodigos()}]),angular.module("angularjsApp").factory("cuentaIfrsClasificacion",["constantes","$resource",function(a,b){return{datos:function(){return b(a.URL+"cuentas-ifrs-clasificacion/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})},opciones:function(){return b(a.URL+"cuentas-ifrs-clasificacion/opciones/formulario")},listaNivel:function(){return b(a.URL+"cuentas-ifrs-clasificacion/listado/opciones")},comprobarEliminar:function(){return b(a.URL+"cuentas-ifrs-clasificacion/comprobar/eliminacion/:id",{id:"@id"},{post:{method:"POST"}})}}}]),angular.module("angularjsApp").factory("siiRecuadroF22",["constantes","$resource",function(a,b){return{datos:function(){return b(a.URL+"sii-recuadro-f22/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})}}}]),angular.module("angularjsApp").controller("DocumentosDirectosCtrl",["$scope","$timeout","$rootScope","$http","$uibModal","$filter","Upload","constantes","Notification","libroCompra",function(a,b,c,d,e,f,g,h,i,j){a.mostrarForm=!1,a.errores=[],a.constantes=h,a.vistaColumnas={},a.objeto={},a.iniciarColumnasVisibles=function(){a.vistaColumnas={}},a.resumenes={resumentesPorCuenta:{},total:0},a.gestionarArchivo=function(){a.mostrarForm=!0,a.resumenes={resumentesPorCuenta:{}}},a.filtros={itemsFiltrados:[]},a.filtro={},a.cuentasGlobales={cuentaMntNeto:""},a.archivo={file:"",porc:0,mostrar:!1,loading:!1},a.fechas={fecha:!1},a.open=function(){b(function(){a.fechas.fecha=!0},100)},a.guardar=function(){c.cargando=!0;var b=j.datos().update({id:a.objeto.id},a.objeto);b.$promise.then(function(a){a.success?i.success({message:a.mensaje,title:"Notificación del Sistema"}):i.error({message:a.mensaje,title:"Notificación del Sistema"}),c.cargando=!1})},a.generarComprobante=function(){c.cargando=!0;var b=j.generarComprobante().post({id:a.objeto.id});b.$promise.then(function(b){b.success?(i.success({message:b.mensaje,title:"Notificación del Sistema"}),a.objeto.comprobanteId=b.comprobanteId):(i.error({message:b.mensaje,title:"Notificación del Sistema"}),b.errores&&(a.errores=b.errores)),c.cargando=!1})},a.volverIndex=function(){a.mostrarForm=!1,a.cargarDatos()},a.$watch("archivo.file",function(){a.upload("archivo")}),a.revisarFiltro=function(b,c){var d=a.filtro[b];if(void 0!=c)var d=a.filtro[b][c];""==d&&delete a.filtro[b]},a.getCuentas=function(a){return d.get(h.URL+"cuentas/buscador/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})},a.buscarCuenta=function(b,c,d){var g=e.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-buscar-cuenta.html?v="+f("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalBuscarCuentaCtrl",size:"700"});g.result.then(function(e){var g=f("filter")(a.objeto.detalle,{id:d},!0)[0];g[b]=e,a.analisisConfiguracion(d,b,c),a.resumenAsignacionCuenta()})},a.upload=function(b){var c=a.archivo,d=c.file;d&&!c.mostrar&&(c.mostrar=!0,g.upload({url:h.URL+"importacion-libro-compra/archivo-xml",file:d,data:{operacion:a.objeto.tipoOperacion}}).progress(function(a){var b=parseInt(100*a.loaded/a.total);c.porc=b}).success(function(b){if(b.success){var d={id:b.id};a.gestionarLibro(d),c.porc=0}else i.error({message:b.mensaje,title:"Mensaje del Sistema"
}),c.porc=0;c.mostrar=!1}))},a.analizarColumnasVisibles=function(){a.iniciarColumnasVisibles();var b;for(var c in a.objeto.resumen.totales.TotalesPeriodo)b=a.objeto.resumen.totales.TotalesPeriodo[c],b.TotMntExe>0&&(a.vistaColumnas.TotMntExe=!0),b.TotMntNeto>0&&(a.vistaColumnas.TotMntNeto=!0),b.TotOpIVARec>0&&(a.vistaColumnas.TotOpIVARec=!0),b.TotMntIVA>0&&(a.vistaColumnas.TotMntIVA=!0),b.TotOpActivoFijo>0&&(a.vistaColumnas.TotOpActivoFijo=!0),b.TotMntActivoFijo>0&&(a.vistaColumnas.TotMntActivoFijo=!0),b.TotMntIVAActivoFijo>0&&(a.vistaColumnas.TotMntIVAActivoFijo=!0),b.TotIVANoRec&&b.TotIVANoRec.TotMntIVANoRec>0&&(a.vistaColumnas.TotIVANoRec=!0),b.TotOpIVAUsoComun>0&&(a.vistaColumnas.TotOpIVAUsoComun=!0),b.TotIVAUsoComun>0&&(a.vistaColumnas.TotIVAUsoComun=!0),b.TotOtrosImp&&b.TotOtrosImp.TotMntImp>0&&(a.vistaColumnas.TotOtrosImp=!0),b.TotImpSinCredito>0&&(a.vistaColumnas.TotImpSinCredito=!0),b.TotMntTotal>0&&(a.vistaColumnas.TotMntTotal=!0),b.TotIVANoRetenido>0&&(a.vistaColumnas.TotIVANoRetenido=!0),b.TotTabPuros>0&&(a.vistaColumnas.TotTabPuros=!0),b.TotTabCigarrillos>0&&(a.vistaColumnas.TotTabCigarrillos=!0),b.TotTabElaborado>0&&(a.vistaColumnas.TotTabElaborado=!0)},a.gestionarLibro=function(b){c.cargando=!0;var d=j.datos().get({id:b.id});d.$promise.then(function(b){a.objeto=b,a.objeto.comprobante={},c.cargando=!1,a.gestionarArchivo(),a.resumenAsignacionCuenta(),a.dateOptions={formatYear:"yy",startingDay:1,weekStart:1,minDate:new Date(a.objeto.fechaMin+"T09:00:00"),maxDate:new Date(a.objeto.fechaMax+"T09:00:00")},a.objeto.comprobante.fecha=new Date(a.objeto.fechaMax+"T09:00:00"),a.analizarColumnasVisibles()})},a.cargarDatos=function(){c.cargando=!0;var b=j.datos().query();b.$promise.then(function(b){a.datos=b,c.cargando=!1})},a.cargarDatos(),a.asignarCtaMasiva=function(b,c){var d=a.cuentasGlobales[b];if(d.codigo)for(var e in a.filtros.itemsFiltrados){var f=a.filtros.itemsFiltrados[e],g=a.objeto.detalle.indexOf(f);a.objeto.detalle[g][b]=d,a.analisisConfiguracion(a.objeto.detalle[g].id,b,c)}a.resumenAsignacionCuenta()},a.openAsignacionCtaMasiva=function(b,c,d){var f=e.open({animation:a.animationsEnabled,templateUrl:"myModalAsignacionMasivaCuenta.html",controller:"ModalAsignacionMasivaCuenta",size:"800",backdrop:"static",resolve:{columna:function(){return d}}});f.result.then(function(d){a.cuentasGlobales[b]=d,a.asignarCtaMasiva(b,c)})},a.analisisConfiguracion=function(b,c,d){var e=f("filter")(a.objeto.detalle,{id:b},!0)[0];if(e[c].parametros.length)for(var g in e[c].parametros){var h=e[c].parametros[g];"auxiliar"==h.id&&1000001==h.valor&&(e.configuracion||(e.configuracion={}),e.configuracion[d]={label:e.RznSoc,auto:!0,auxiliar:{id:e.proveedorId,rut:e.RUTSoc,razonSocial:e.RznSoc}})}},a.resumenAsignacionCuenta=function(){a.resumenes.resumentesPorCuenta={},a.resumenes.total=0;for(var b in a.objeto.detalle){var c=a.objeto.detalle[b];c.cuentaMntExe&&(a.resumenes.resumentesPorCuenta[c.cuentaMntExe.cuenta]?a.resumenes.resumentesPorCuenta[c.cuentaMntExe.cuenta].total+=parseInt(c.MntExe):a.resumenes.resumentesPorCuenta[c.cuentaMntExe.cuenta]={total:parseInt(c.MntExe),cuenta:c.cuentaMntExe.cuenta},a.resumenes.total+=parseInt(c.MntExe)),c.cuentaMntNeto&&(a.resumenes.resumentesPorCuenta[c.cuentaMntNeto.cuenta]?a.resumenes.resumentesPorCuenta[c.cuentaMntNeto.cuenta].total+=parseInt(c.MntNeto):a.resumenes.resumentesPorCuenta[c.cuentaMntNeto.cuenta]={total:parseInt(c.MntNeto),cuenta:c.cuentaMntNeto.cuenta},a.resumenes.total+=parseInt(c.MntNeto)),c.cuentaMntIVA&&(a.resumenes.resumentesPorCuenta[c.cuentaMntIVA.cuenta]?a.resumenes.resumentesPorCuenta[c.cuentaMntIVA.cuenta].total+=parseInt(c.MntIVA):a.resumenes.resumentesPorCuenta[c.cuentaMntIVA.cuenta]={total:parseInt(c.MntIVA),cuenta:c.cuentaMntIVA.cuenta},a.resumenes.total+=parseInt(c.MntIVA)),c.cuentaOtrosImp&&(c.cuentaOtrosImp&&(a.resumenes.resumentesPorCuenta[c.cuentaOtrosImp.cuenta]?a.resumenes.resumentesPorCuenta[c.cuentaOtrosImp.cuenta].total+=parseInt(c.OtrosImp):a.resumenes.resumentesPorCuenta[c.cuentaOtrosImp.cuenta]={total:parseInt(c.OtrosImp),cuenta:c.cuentaOtrosImp.cuenta}),a.resumenes.total+=parseInt(c.OtrosImp)),c.cuentaMntSinCred&&(a.resumenes.resumentesPorCuenta[c.cuentaMntSinCred.cuenta]?a.resumenes.resumentesPorCuenta[c.cuentaMntSinCred.cuenta].total+=parseInt(c.MntSinCred):a.resumenes.resumentesPorCuenta[c.cuentaMntSinCred.cuenta]={total:parseInt(c.MntSinCred),cuenta:c.cuentaMntSinCred.cuenta},a.resumenes.total+=parseInt(c.MntSinCred)),c.cuentaMntTotal&&(a.resumenes.resumentesPorCuenta[c.cuentaMntTotal.cuenta]?a.resumenes.resumentesPorCuenta[c.cuentaMntTotal.cuenta].total+=parseInt(c.MntTotal):a.resumenes.resumentesPorCuenta[c.cuentaMntTotal.cuenta]={total:parseInt(c.MntTotal),cuenta:c.cuentaMntTotal.cuenta},a.resumenes.total+=parseInt(c.MntTotal))}},a.openGestionParametro=function(b,c,d,g,h){var i=f("filter")(a.objeto.detalle,{id:b},!0)[0],j=e.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-cuenta-parametros-asignacion.html?v="+f("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalGestionarParametrosCuenta",size:"800",backdrop:"static",resolve:{columna:function(){return g},parametros:function(){return c},cuentaId:function(){return d},monto:function(){return h},configuracion:function(){return i.configuracion?i.configuracion[g]:null}}});j.result.then(function(c){var d=f("filter")(a.objeto.detalle,{id:b},!0)[0];d.configuracion||(d.configuracion={}),d.configuracion[g]=c})}}]),angular.module("angularjsApp").factory("documentoDirecto",["constantes","$resource",function(a,b){return{datos:function(){return b(a.URL+"documentos-directos/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})}}}]),angular.module("angularjsApp").controller("SiiControlFoliosCtrl",["$scope","$rootScope","$filter","$uibModal","Notification","siiControlFolio","constantes",function(a,b,c,d,e,f,g){a.datos=[],a.constantes=g,a.open=function(b){var e=d.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-sii-control-folios.html?v="+c("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalFormSiiControlFoliosCtrl",size:"700",backdrop:"static",resolve:{objeto:function(){return b}}});e.result.then(function(){},function(b){b&&a.cargarDatos()})},a.editar=function(c){b.cargando=!0;var d=f.datos().get({id:c.id});d.$promise.then(function(c){a.open(c),b.cargando=!1})},a.cargarDatos=function(){b.cargando=!0;var c=f.datos().query();c.$promise.then(function(c){a.datos=c,b.cargando=!1})},a.cargarDatos()}]).controller("ModalFormSiiControlFoliosCtrl",["$scope","$rootScope","$uibModalInstance","$filter","Notification","Upload","objeto","constantes","siiControlFolio",function(a,b,c,d,e,f,g,h,i){a.objeto=g,a.constantes=h,a.opciones={},a.errores={},a.bloquearFormulario=!1,a.actualizar=!1,a.anteriorActivo=!1,a.objeto.id||(a.objeto.usoFolios=[]),a.archivo={file:"",porc:0,mostrar:!1,loading:!1},a.$watch("archivo.file",function(){a.upload("archivo")}),a.upload=function(b){var c=a.archivo,d=c.file;d&&!c.mostrar&&(c.mostrar=!0,f.upload({url:h.URL+"sii-control-folios/archivo-formulario",file:d}).progress(function(a){var b=parseInt(100*a.loaded/a.total);c.porc=b}).success(function(b){b.success?(a.objeto.archivo=b.archivo,a.objeto.archivoNombre=b.nombreReal,a.objeto.archivoRuta=b.ruta,a.objeto.archivoId=b.archivoId,c.porc=0):(e.error({message:b.mensaje,title:"Mensaje del Sistema"}),c.porc=0),c.mostrar=!1}))},a.quitarArchivo=function(){a.objeto.archivo="",a.objeto.archivoNombre="",a.objeto.archivoRuta=""},a.guardar=function(){b.cargando=!0;var c,d=!1;a.objeto.id?(d=!0,c=i.datos().update({id:a.objeto.id},a.objeto)):c=i.datos().create({},a.objeto),c.$promise.then(function(c){b.cargando=!1,c.success?(e.success({message:c.mensaje,title:"Notificación del Sistema"}),a.objeto.id=c.id,a.objeto.sid=c.sid,d&&(a.bloquearFormulario=!0),a.actualizar=!0):(e.error({message:c.mensaje,title:"Notificación del Sistema"}),a.errores=c.errores)})},a.cancel=function(){c.dismiss(a.actualizar)},a.cargarOpciones=function(){b.cargando=!0;var c=i.opciones().get();c.$promise.then(function(c){a.opciones=c,c.autorizado?(a.objeto.ultimoAutorizado=c.autorizado,a.objeto.desde=c.ultimo+1,a.objeto.hasta=a.objeto.desde+(c.autorizado-c.desdeAutorizado)):(a.objeto.desde=1,a.objeto.hasta=50),c.block&&(a.bloquearFormulario=!0,a.anteriorActivo=!0),b.cargando=!1})},a.objeto.id?a.objeto.autorizado&&(a.bloquearFormulario=!0):a.cargarOpciones(),a.agregarUso=function(){a.objeto.usoFolios.push({})},a.quitarUso=function(b){a.objeto.usoFolios.splice(b,1)}}]),angular.module("angularjsApp").factory("siiControlFolio",["constantes","$resource",function(a,b){return{datos:function(){return b(a.URL+"sii-control-folios/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})},opciones:function(){return b(a.URL+"sii-control-folios/opciones/formulario")}}}]),angular.module("angularjsApp").controller("ImportacionLibroBoletasCtrl",["$scope","$timeout","$rootScope","$http","$uibModal","$filter","Upload","constantes","Notification","libroBoleta",function(a,b,c,d,e,f,g,h,i,j){a.mostrarForm=!1,a.errores=[],a.constantes=h,a.vistaColumnas={},a.columnas=[],a.codigosImpuestos=[],a.tiposDocumentos=[],a.permisos={},a.miPyme=!1,a.opciones={meses:h.MESES},a.archivoImp={errores:[]},a.iniciarColumnasVisibles=function(){a.vistaColumnas={}},a.resumenes={resumentesPorCuenta:{},total:0},a.gestionarArchivo=function(){a.archivo={file:"",porc:0,mostrar:!1,loading:!1},a.objeto={},a.mostrarForm=!0,a.resumenes={resumentesPorCuenta:{}},a.miPyme||(a.objeto.periodoAnio=f("date")(new Date,"yyyy"),a.objeto.periodoMes=f("filter")(a.opciones.meses,{id:parseInt(f("date")(new Date,"MM"))},!0)[0])},a.filtros={itemsFiltrados:[]},a.filtro={},a.cuentasGlobales={cuentaMntNeto:""},a.archivo={file:"",porc:0,mostrar:!1,loading:!1},a.fechas={fecha:!1},a.open=function(){b(function(){a.fechas.fecha=!0},100)},a.cargarDatos=function(){c.cargando=!0;var b=j.datos().get();b.$promise.then(function(b){a.datos=b.datos,a.miPyme=b.miPyme,a.codigosImpuestos=b.codigosImpuestos,a.tiposDocumentos=b.tiposDocumentos,a.columnas=b.columnas,c.cargando=!1})},a.cargarDatos(),a.guardar=function(){c.cargando=!0;var b=j.datos().update({id:a.objeto.id},a.objeto);b.$promise.then(function(b){b.success?(i.success({message:b.mensaje,title:"Notificación del Sistema"}),a.objeto.cuentasGeneradas=b.cuentasGeneradas):i.error({message:b.mensaje,title:"Notificación del Sistema"}),c.cargando=!1})},a.eliminarLibro=function(b){c.cargando=!0;var d=j.datos()["delete"]({id:b});d.$promise.then(function(b){b.success?(c.cargando=!1,i.success({message:b.mensaje,title:"Notificación del Sistema"}),a.objeto={},a.volverIndex()):(i.error({message:b.mensaje,title:"Notificación del Sistema"}),c.cargando=!1)})},a.generarComprobante=function(){c.cargando=!0;var b=j.generarComprobante().post({id:a.objeto.id},{tipoGeneracion:a.objeto.comprobante.tipo});b.$promise.then(function(b){b.success?(i.success({message:b.mensaje,title:"Notificación del Sistema"}),a.objeto.comprobantes=b.comprobantes,a.errores=[]):(i.error({message:b.mensaje,title:"Notificación del Sistema"}),b.errores&&(a.errores=b.errores)),c.cargando=!1})},a.volverIndex=function(){a.mostrarForm=!1,a.cargarDatos()},a.$watch("archivo.file",function(){a.upload("archivo")}),a.revisarFiltro=function(b,c){var d=a.filtro[b];if(void 0!=c)var d=a.filtro[b][c];""==d&&delete a.filtro[b]},a.getCuentas=function(a){return d.get(h.URL+"cuentas/buscador/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})},a.buscarCuenta=function(b,c,d,g){var h=e.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-buscar-cuenta.html?v="+f("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalBuscarCuentaCtrl",size:"700"});h.result.then(function(e){var g=f("filter")(a.objeto.detalle,{id:d},!0)[0];g[b]=e,a.analisisConfiguracion(d,b,c),a.resumenAsignacionCuenta()})},a.upload=function(b){a.archivoImp.errores=[];var c=a.archivo,d=c.file;d&&!c.mostrar&&(c.mostrar=!0,g.upload({url:h.URL+"importacion-libro-boleta/archivo-csv",file:d,data:a.objeto}).progress(function(a){var b=parseInt(100*a.loaded/a.total);c.porc=b}).success(function(b){if(b.success){var d={id:b.id};a.gestionarLibro(d),c.porc=0}else i.error({message:b.mensaje,title:"Mensaje del Sistema"}),b.errores&&(a.archivoImp.errores=b.errores),c.porc=0;c.mostrar=!1}))},a.mayorQue=function(a,b){return function(c){return c[a]>b}},a.analizarColumnasVisibles=function(){a.iniciarColumnasVisibles();var b;for(var c in a.objeto.resumen.totales.TotalesPeriodo)b=a.objeto.resumen.totales.TotalesPeriodo[c],b.TotMntExe>0&&(a.vistaColumnas.TotMntExe=!0),b.TotMntNeto>0&&(a.vistaColumnas.TotMntNeto=!0),b.TotMntIVA>0&&(a.vistaColumnas.TotMntIVA=!0),b.TotMntTotal>0&&(a.vistaColumnas.TotMntTotal=!0)},a.gestionarLibro=function(b){c.cargando=!0;var d=j.datos().get({id:b.id});d.$promise.then(function(b){a.gestionarArchivo(),a.objeto=b,a.objeto.comprobante={},c.cargando=!1,a.resumenAsignacionCuenta(),a.dateOptions={formatYear:"yy",startingDay:1,weekStart:1,minDate:new Date(a.objeto.fechaMin+"T09:00:00"),maxDate:new Date(a.objeto.fechaMax+"T09:00:00")},a.objeto.comprobante.fecha=new Date(a.objeto.fechaMax+"T09:00:00"),a.objeto.comprobantes&&1!=a.objeto.comprobantes?a.objeto.comprobante.tipo=2:a.objeto.comprobante.tipo=1,a.analizarColumnasVisibles()})},a.asignarCtaMasiva=function(b,c){var d=a.cuentasGlobales[b];if(d.codigo)for(var e in a.filtros.itemsFiltrados){var f=a.filtros.itemsFiltrados[e],g=a.objeto.detalle.indexOf(f);a.objeto.detalle[g][b]=d,a.analisisConfiguracion(a.objeto.detalle[g].id,b,c)}a.resumenAsignacionCuenta()},a.openAsignacionCtaMasiva=function(b,c,d){var f=e.open({animation:a.animationsEnabled,templateUrl:"myModalAsignacionMasivaCuenta.html",controller:"ModalAsignacionMasivaCuenta",size:"800",backdrop:"static",resolve:{columna:function(){return d}}});f.result.then(function(d){a.cuentasGlobales[b]=d,a.asignarCtaMasiva(b,c)})},a.analisisConfiguracion=function(b,c,d,e){var g=f("filter")(a.objeto.detalle,{id:b},!0)[0];if(g.configuracion||(g.configuracion={}),delete g.configuracion[d],g.configuracion[d]={},g[c].parametros.length)for(var h in g[c].parametros){var i=g[c].parametros[h];"auxiliar"==i.id&&1000001==i.valor&&(g.configuracion[d]={ingresado:!0,label:g.RznSoc,auto:!0,auxiliar:{id:g.proveedorId,rut:g.RUTSoc,razonSocial:g.RznSoc}})}},a.resumenAsignacionCuenta=function(){a.resumenes.totalMontoTotal=0,a.resumenes.totalMontoCtasTotal=0,a.resumenes.totalMontoCtasAsignadas=0,a.resumenes.resumentesPorCuenta={},a.resumenes.total=0;var b,c=0;for(var d in a.objeto.detalle){var e=a.objeto.detalle[d];a.resumenes.totalMontoTotal+=parseInt(e.MntTotal);for(b in a.columnas){var f=a.columnas[b];e["cuenta"+f]&&(a.resumenes.resumentesPorCuenta[e["cuenta"+f].cuenta]?a.resumenes.resumentesPorCuenta[e["cuenta"+f].cuenta].total+=parseInt(e[f]):a.resumenes.resumentesPorCuenta[e["cuenta"+f].cuenta]={total:parseInt(e[f]),cuenta:e["cuenta"+f].cuenta},a.resumenes.total+=parseInt(e[f]),c=e[f],"MntTotal"!=f&&(a.resumenes.totalMontoCtasAsignadas+=parseInt(c)))}e.cuentaMntTotal&&(a.resumenes.totalMontoCtasTotal+=parseInt(e.MntTotal))}},a.openGestionParametro=function(b,c,d,g,h){var i=f("filter")(a.objeto.detalle,{id:b},!0)[0],j=e.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-cuenta-parametros-asignacion.html?v="+f("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalGestionarParametrosCuenta",size:"800",backdrop:"static",resolve:{columna:function(){return g},parametros:function(){return c},cuentaId:function(){return d},monto:function(){return h},configuracion:function(){return i.configuracion?i.configuracion[g]:null}}});j.result.then(function(c){var d=f("filter")(a.objeto.detalle,{id:b},!0)[0];d.configuracion||(d.configuracion={}),d.configuracion[g]=c})}}]).controller("ModalAsignacionMasivaCuenta",["$scope","$rootScope","$uibModal","$uibModalInstance","$http","$filter","funcionario","columna","constantes",function(a,b,c,d,e,f,g,h,i){a.objeto={columna:h},a.getCuentas=function(a){return e.get(i.URL+"cuentas/buscador/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})},a.buscarCuenta=function(){var b=c.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-buscar-cuenta.html?v="+f("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalBuscarCuentaCtrl",size:"700"});b.result.then(function(b){a.objeto.cuenta=b})},a.asignar=function(){d.close(a.objeto.cuenta)},a.cancel=function(){d.dismiss("cancel")}}]),angular.module("angularjsApp").factory("libroBoleta",["constantes","$resource",function(a,b){return{datos:function(){return b(a.URL+"importacion-libro-boleta/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})},generarComprobante:function(){return b(a.URL+"importacion-libro-boleta/generar-comprobante/:id",{id:"@id"},{post:{method:"POST"}})}}}]),angular.module("angularjsApp").controller("PagoDocumentosCtrl",["$scope","$rootScope","$timeout","$uibModal","constantes","$filter","$http","Notification","pagoDocumento","variableSistema",function(a,b,c,d,e,f,g,h,i,j){function k(b){m=b,a.opciones={anios:[{id:m,value:m},{id:m-1,value:m-1}]},l=m<parseInt(f("date")(new Date,"yyyy"))?f("filter")(a.constantes.MESES,{id:12},!0)[0]:f("filter")(a.constantes.MESES,{id:parseInt(f("date")(new Date,"MM"))},!0)[0],a.limpiarFormulario()}a.constantes=e,a.tiposComprobantes=[],a.resultado=[],a.sinResultados=!1,a.opciones={},a.resumen={},a.filtro={},a.mostrarBuscador=!0;var l,m;a.revisarFiltro=function(b){a.filtro[b]&&"undefined"!=typeof a.filtro[b]||(a.filtro[b]="")},a.fechas={fecha:!1,fechaInicial:!1,fechaFinal:!1},a.open=function(b){c(function(){a.fechas[b]=!0},100)},a.nuevaBusqueda=function(){a.sinResultados=!1,a.mostrarBuscador=!0,a.resultado=[]},a.limpiarFormulario=function(){a.objeto={tipoPago:2,anioInicial:a.opciones.anios[0],fechas:1,fecha:new Date,inicio:new Date,proveedor:"",fin:new Date,mes:l,anio:a.opciones.anios[0],mesInicial:l,mesFinal:l,anioInicial:a.opciones.anios[0],anioFinal:a.opciones.anios[0]},a.nuevaBusqueda()},a.getProveedores=function(b){return g.get(e.URL+"clientes-proveedores/buscador/json",{params:{termino:b,tipo:a.objeto.tipoPago}}).then(function(a){return a.data.map(function(a){return a})})},a.buscarDocumentos=function(){a.sinResultados=!1,b.cargando=!0;var c=i.buscarDocumentos().post(a.objeto);c.$promise.then(function(c){a.resultado=c.detalles,0==c.detalles.length?a.sinResultados=!0:a.mostrarBuscador=!1,b.cargando=!1,a.calcularTotalesOperacion(),a.calcularMediosPagosSeleccion(),a.filtro={}})},a.openGestionPago=function(){var b,c=[];for(var e in a.resultado)b=a.resultado[e],[1,2].indexOf(b.pagar)>=0&&c.push(b);if(c.length>0){var g=d.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-gestion-pago-documentos.html?v="+f("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalFormGestionMedioPagoCtrl",size:"1000",backdrop:"static",resolve:{documentos:function(){return c},mediosHabilitados:function(){return a.resumen.mediosPago},mismoClienteProv:function(){return a.resumen.mismoClienteProv}}});g.result.then(function(){a.buscarDocumentos()})}else h.error({message:"Debe seleccionar al menos un documento para realizar el proceso de pago",title:"Mensaje del Sistema"})},a.calcularMediosPagosSeleccion=function(){var b,c,d,e=!0,f=[];for(var g in a.resultado)d=a.resultado[g],[1,2].indexOf(d.pagar)>=0&&(c=d.tipo,b||(b=d.rut),b!=d.rut&&(e=!1));e?(f.push({id:1,medio:"Efectivo"}),f.push({id:2,medio:"Cheque / Vale Vista"}),f.push({id:4,medio:"Transferencia"}),f.push({id:5,medio:"Nómina"})):2==c||3==c?(f.push({id:1,medio:"Efectivo"}),f.push({id:5,medio:"Nómina"})):(f.push({id:1,medio:"Efectivo"}),f.push({id:2,medio:"Cheque / Vale Vista"}),f.push({id:4,medio:"Transferencia"})),a.resumen.mediosPago=f,a.resumen.mismoClienteProv=e},a.calcularTotalesOperacion=function(){var b,c=0,d=0;for(var e in a.resultado)b=a.resultado[e],1==b.pagar?c+=parseInt(b.total):2==b.pagar&&b.abono&&(d+=parseInt(b.abono));a.resumen.totalPagar=c>0?c:0,a.resumen.totalAbonar=d},a.marcarTodos=function(b){for(var c in a.resultado)a.resultado[c].pagar=b;a.calcularMediosPagosSeleccion(),a.calcularTotalesOperacion()},a.obtenerAnioAnicialRegistros=function(){b.cargando=!0;var a=j.obtenerAnioInicialRegistros().post();a.$promise.then(function(a){b.cargando=!1,k(a.anioFinal)})},a.obtenerAnioAnicialRegistros()}]).controller("ModalFormGestionMedioPagoCtrl",["$scope","$rootScope","$uibModalInstance","constantes","$timeout","$uibModal","$http","$filter","Notification","documentos","mediosHabilitados","mismoClienteProv","medioPago","pagoDocumento","pagoAnticipo","formatofechaFilter",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(){a.resumenes={};var b;for(var c in a.documentos)b=a.documentos[c],a.resumenes[b.tipoDoc]||(a.resumenes[b.tipoDoc]={tipoDoc:b.tipoDoc,totalPagar:0,totalAbonar:0,totalDoctos:0}),1==b.pagar?a.resumenes[b.tipoDoc].totalPagar+=parseInt(b.total-b.totalNotaCredito):a.resumenes[b.tipoDoc].totalAbonar+=parseInt(b.abono),a.resumenes[b.tipoDoc].totalDoctos++}function r(b){var c,d;c=2==a.objeto.tipo||3==a.objeto.tipo?a.opciones.mediosPagoProveedores:a.opciones.mediosPagoClientes;for(var f in c){d=c[f].tipo;var g=h("filter")(a.mediosHabilitados,{id:d},!0);if(g.length>0){var i=a.objeto.pagos[b];2==a.objeto.tipo||3==a.objeto.tipo?i.medio=a.opciones.mediosPagoProveedores[f]:i.medio=a.opciones.mediosPagoClientes[f],a.totalNotasCreditoDebito(),e(function(){a.seleccionarCtaDefecto(i)},500);break}}}function s(b){var c;for(var d in a.documentos)c=a.documentos[d],c.totalNotaCredito=0;var e,f,g=0;for(var d in a.listaNotasDebCred)if(f=a.listaNotasDebCred[d],f.documentosAsociados.length>0)for(var h in f.documentosAsociados)e=f.documentosAsociados[h],e.documentoAsoc&&e.documentoAsoc.id&&e.monto&&("undefined"!=typeof b&&b!=e.documentoAsoc.rut||(g+=e.monto,e.documentoAsoc.totalNotaCredito+=e.monto));return q(),g}a.opciones={},a.constantes=d,a.listaPagosAnticipos=[],a.fechas={},a.mismoClienteProv=l,a.documentos=[],a.mediosHabilitados=[],a.listaNotasDebCred=[],a.objeto={pagos:[],tipo:j[0].tipo,total:0},a.errorValidacionAnticipo=!1,a.errorValidacionSumaAnticipo=!1,a.errorValidacionNotasCredito=!1,a.datoGrabado=!1,a.dateOptionsPago={maxDate:new Date},a.objeto.fechaPago=new Date,a.parent={fechaPago:""},angular.copy(j,a.documentos),angular.copy(k,a.mediosHabilitados),a.resumenes={};var t;for(var u in a.documentos)t=a.documentos[u],a.resumenes[t.tipoDoc]||(a.resumenes[t.tipoDoc]={tipoDoc:t.tipoDoc,totalPagar:0,totalAbonar:0,totalDoctos:0}),1==t.pagar?(a.resumenes[t.tipoDoc].totalPagar+=parseInt(t.total),a.objeto.total+=parseInt(t.total)):(a.resumenes[t.tipoDoc].totalAbonar+=parseInt(t.abono),a.objeto.total+=parseInt(t.abono)),a.resumenes[t.tipoDoc].totalDoctos++,a.objeto.subTotal=a.objeto.total;a.objeto.pagos.push({medio:"",cuenta:"",datosMedio:"",monto:a.objeto.total}),a.guardar=function(){a.datoGrabado=!1,b.cargando=!0;var c={documentos:a.documentos,gestion:a.objeto,anticipos:a.listaPagosAnticipos,notasCredito:a.listaNotasDebCred},d=n.datos().create({},c);d.$promise.then(function(c){c.success?(b.cargando=!1,a.objeto.comprobanteId=c.comprobanteId,i.success({message:c.mensaje,title:"Notificación del Sistema"}),a.datoGrabado=!0):(i.error({message:c.mensaje,title:"Notificación del Sistema"}),a.errores=c.errores)})},a.cancel=function(){c.dismiss("cancel")},a.cerrar=function(){c.close()},a.cargarAnticiposProveedor=function(){var c,d=[];for(var e in a.documentos)c=a.documentos[e],c&&d.push(c.clienteProvId);if(d.length>0){b.cargando=!0;var f=o.buscarAnticipos().post({},{clientesProveedores:d,tipo:a.objeto.tipo});f.$promise.then(function(c){a.listaPagosAnticipos=c.anticipos,b.cargando=!1})}a.cargarNotasDebitoCreditoProveedor()},a.cargarNotasDebitoCreditoProveedor=function(){a.listaNotasDebCred=[];var c,d=[];for(var e in a.documentos)c=a.documentos[e],c&&d.push(c.clienteProvId);if(d.length>0){b.cargando=!0;var f=n.buscarNotasCreditoDebito().post({},{clientesProveedores:d,tipo:a.objeto.tipo});f.$promise.then(function(c){a.listaNotasDebCred=c.documentos,b.cargando=!1})}},a.cargarOpciones=function(){b.cargando=!0;var c=n.opciones().get();c.$promise.then(function(c){a.opciones.cuentasPagoProveedores=c.cuentasPagoProveedores,a.opciones.cuentasPagoClientes=c.cuentasPagoClientes,a.opciones.mediosPagoProveedores=c.mediosPagoProveedores,a.opciones.mediosPagoClientes=c.mediosPagoClientes,a.opciones.bancos=c.bancos,a.opciones.nominas=c.nominas,2==a.objeto.tipo||3==a.objeto.tipo?a.opciones.cuentasDepositos=c.cuentasDepositosPagos:a.opciones.cuentasDepositos=c.cuentasDepositosCobros,b.cargando=!1,e(function(){r(0)},500)}),a.cargarAnticiposProveedor()},a.cargarOpciones(),a.agregarDocumento=function(a){a.documentosAsociados.push({})},a.quitarDocumento=function(a,b){var c=a.documentosAsociados.indexOf(b);a.documentosAsociados.splice(c,1)},a.calcularTotalAnticipado=function(b){var c=0;a.errorValidacionSumaAnticipo=!1;for(var d in a.documentos)if(a.documentos[d].clienteProvId==b.clienteProvId){var e="A"+a.documentos[d].id;b[e]&&b[e].montoAnticipo&&(c+=parseInt(b[e].montoAnticipo)),a.comprobarMontoAnticipoDocumento(a.documentos[d])}b.totalAnticipos=c,a.totalPagoAnticipos(),b.total<b.totalAnticipos&&(a.errorValidacionSumaAnticipo=!0),a.generarVistaComprobante()},a.agregarMedioPago=function(){a.objeto.pagos.push({medio:null,cuenta:null,datosMedio:"",monto:""})},a.quitarMedioPago=function(b){a.objeto.pagos.splice(b,1),a.totalNotasCreditoDebito()},a.openFecha=function(b){e(function(){a.fechas[b]=!0},100)},a.filtrarMedio=function(b){var c=h("filter")(a.mediosHabilitados,{id:b.tipo},!0);return c.length>0},a.totalPagoAnticipos=function(){var b,c=0;for(var d in a.listaPagosAnticipos)b=a.listaPagosAnticipos[d],b.totalAnticipos&&(c+=b.totalAnticipos);a.objeto.totalAnticipos=c,a.objeto.total=a.objeto.subTotal-c},a.totalNotasCreditoDebito=function(){var b=s();a.objeto.totalNotasCreditoDebito=b,a.objeto.total=a.objeto.subTotal-b,a.corregirTotalMedioPago()},a.comprobarMontoAnticipoDocumento=function(b){var c,d,e=0;for(var f in a.listaPagosAnticipos)c=a.listaPagosAnticipos[f],d=c["A"+b.id],d&&(e+=parseInt(d.montoAnticipo));a.errorValidacionAnticipo=!1,e>b.total&&(b.errorAnticipo=!0,a.errorValidacionAnticipo=!0)},a.seleccionarCtaDefecto=function(b){b.medio.cuentas.length>0&&(b.cuenta=b.medio.cuentas[0].cuenta,a.generarVistaComprobante())},a.corregirTotalMedioPago=function(){if(1==a.objeto.pagos.length){var b=a.objeto.pagos[0];b.monto=a.objeto.total,a.sumarMontos()}},a.generarVistaComprobante=function(){a.objeto.comprobanteContable=[];var b,c,d,e,f,g,h,i,j=(a.objeto.tipo,[]),k={};for(var l in a.documentos){g=a.documentos[l],k[g.rut]?k[g.rut][g.tipoDoc]||(k[g.rut][g.tipoDoc]={razonSocial:g.razonSocial,tipoDoc:g.tipoDoc,tipoDocCod:g.tipoDocCod,cuentaTotal:g.cuentaTotal,cuentasTotales:g.cuentasTotales,cuentaId:g.cuentaTotal?g.cuentaTotal.id:"",foliosPagos:[],foliosAbonos:[],pagar:g.pagar,abono:g.abono,total:0,totalAnticipos:0,totalNotasCreditoDebito:0},j[g.rut]++):(k[g.rut]={},k[g.rut][g.tipoDoc]={razonSocial:g.razonSocial,tipoDoc:g.tipoDoc,tipoDocCod:g.tipoDocCod,cuentaTotal:g.cuentaTotal,cuentasTotales:g.cuentasTotales,cuentaId:g.cuentaTotal?g.cuentaTotal.id:"",foliosPagos:[],foliosAbonos:[],pagar:g.pagar,abono:g.abono,total:0,totalAnticipos:0,totalNotasCreditoDebito:0},i=0,j[g.rut]=1),1==g.pagar?(k[g.rut][g.tipoDoc].total+=parseInt(g.total),k[g.rut][g.tipoDoc].foliosPagos.push(g.numero),k[g.rut][g.tipoDoc].pagar=1):(k[g.rut][g.tipoDoc].total+=parseInt(g.abono),k[g.rut][g.tipoDoc].abonar=1,k[g.rut][g.tipoDoc].foliosAbonos.push(g.numero));var m,n,o=0;for(var p in a.listaPagosAnticipos)m=a.listaPagosAnticipos[p],n=m["A"+g.id],n&&(o+=parseInt(n.montoAnticipo));o&&(k[g.rut][g.tipoDoc].totalAnticipos+=o);var o=s(g.rut);o&&(k[g.rut][g.tipoDoc].totalNotasCreditoDebito=o)}f=0;var q,r;for(var t in k){r=j[t]>1;for(var u in k[t])if(q=k[t][u],q.totalAnticipos&&(q.total=q.total-q.totalAnticipos),q.totalNotasCreditoDebito&&(q.total=q.total-q.totalNotasCreditoDebito),3==a.objeto.tipo){var v=q.cuentasTotales;if(v.length>0){for(var p in v)b=v[p].cuenta,b.id&&(c=q.total,d=0,1==q.pagar?(e="PAGO Prestador de Servicios : "+q.razonSocial+", "+q.tipoDoc+" N° "+q.foliosPagos.join(", "),1==q.abonar&&(e+=" y ABONO "+q.tipoDoc+" N° "+q.foliosAbonos.join(", "))):(c=q.abono,e="ABONO Prestador de Servicios : "+q.razonSocial+", "+q.tipoDoc+" N° "+q.foliosAbonos.join(", ")),a.objeto.comprobanteContable.push({cuentaId:b.id,cuenta:b.cuenta,codigo:b.codigo,glosa:e,debe:c,haber:d}));for(var p in a.objeto.pagos)f=a.objeto.pagos[p],f.cuenta&&f.monto&&(h=a.mismoClienteProv?1==q.pagar?r?q.total:f.monto:q.abono:1==q.pagar?q.total:q.abono,c=0,d=h,1==q.pagar?(e="PAGO Prestador de Servicios: "+q.razonSocial+", "+q.tipoDoc+" N° "+q.foliosPagos.join(", "),1==q.abonar&&(e+=" y ABONO "+q.tipoDoc+" N° "+q.foliosAbonos.join(", "))):e="ABONO Prestador de Servicios: "+q.razonSocial+", "+q.tipoDoc+" N° "+q.foliosAbonos.join(", "),a.objeto.comprobanteContable.push({cuentaId:f.cuenta.id,cuenta:f.cuenta.cuenta,codigo:f.cuenta.codigo,glosa:e,debe:c,haber:d}))}}else if(b=q.cuentaTotal,b.id){2==a.objeto.tipo||3==a.objeto.tipo?(c=q.total,d=0,1==q.pagar?(e="PAGO Proveedor : "+q.razonSocial+", "+q.tipoDoc+" N° "+q.foliosPagos.join(", "),1==q.abonar&&(e+=" y ABONO "+q.tipoDoc+" N° "+q.foliosAbonos.join(", "))):e="ABONO Proveedor : "+q.razonSocial+", "+q.tipoDoc+" N° "+q.foliosAbonos.join(", ")):(c=0,d=q.total,1==q.pagar?(e="PAGO Cliente : "+q.razonSocial+", "+q.tipoDoc+" N° "+q.foliosPagos.join(", "),1==q.abonar&&(e+=" y ABONO "+q.tipoDoc+" N° "+q.foliosAbonos.join(", "))):e="ABONO Cliente : "+q.razonSocial+", "+q.tipoDoc+" N° "+q.foliosAbonos.join(", ")),a.objeto.comprobanteContable.push({cuentaId:b.id,cuenta:b.cuenta,codigo:b.codigo,glosa:e,debe:c,haber:d});for(var p in a.objeto.pagos)f=a.objeto.pagos[p],f.cuenta&&f.monto&&(h=a.mismoClienteProv?1==q.pagar?r?q.total:f.monto:q.abono:1==q.pagar?q.total:q.abono,2==a.objeto.tipo||3==a.objeto.tipo?(c=0,d=h,1==q.pagar?(e="PAGO Proveedor : "+q.razonSocial+", "+q.tipoDoc+" N° "+q.foliosPagos.join(", "),1==q.abonar&&(e+=" y ABONO "+q.tipoDoc+" N° "+q.foliosAbonos.join(", "))):e="ABONO Proveedor : "+q.razonSocial+", "+q.tipoDoc+" N° "+q.foliosAbonos.join(", ")):(c=h,d=0,1==q.pagar?(e="PAGO Cliente : "+q.razonSocial+", "+q.tipoDoc+" N° "+q.foliosPagos.join(", "),1==q.abonar&&(e+=" y ABONO "+q.tipoDoc+" N° "+q.foliosAbonos.join(", "))):e="ABONO Cliente : "+q.razonSocial+", "+q.tipoDoc+" N° "+q.foliosAbonos.join(", ")),a.objeto.comprobanteContable.push({cuentaId:f.cuenta.id,cuenta:f.cuenta.cuenta,codigo:f.cuenta.codigo,glosa:e,debe:c,haber:d}))}}a.objeto.totalDebe=0,a.objeto.totalHaber=0;for(var w in a.objeto.comprobanteContable)q=a.objeto.comprobanteContable[w],q.debe>0&&(a.objeto.totalDebe+=parseInt(q.debe)),q.haber>0&&(a.objeto.totalHaber+=parseInt(q.haber))},a.sumarMontos=function(){a.objeto.totalMonto=0;for(var b in a.objeto.pagos){var c=a.objeto.pagos[b].monto;c&&(a.objeto.totalMonto+=parseInt(c))}a.generarVistaComprobante()},a.sumarMontos(),a.agregarDocumentosAsociados=function(a){var b={};0==a.documentosAsociados.length&&(b.monto=a.total),a.documentosAsociados.push(b)},a.quitarDocumentosAsociados=function(b,c){var d=b.documentosAsociados.indexOf(c);b.documentosAsociados.splice(d,1),a.totalNotasCreditoDebito()},a.sumarMontosDocumentosAsociados=function(b){b.saldoInvalido=!1,b.montoInvalido=!1;var c=0;for(var d in b.documentosAsociados){var e=b.documentosAsociados[d].monto;e&&(c+=parseInt(e),e>b.documentosAsociados[d].documentoAsoc.total&&(b.montoInvalido=!0,a.errorValidacionNotasCredito=!0))}b.totalDocumentosAsociados=c,b.total-c<0&&(b.saldoInvalido=!0,a.errorValidacionNotasCredito=!0)},a.filtrarDoctosSeleccionados=function(a,b){return function(c){var d;if(c.clienteProvId!=a.clienteProvId)return!1;for(var e in a.documentosAsociados)if(d=a.documentosAsociados[e],d.documentoAsoc&&d.documentoAsoc.id&&d.documentoAsoc.id==c.id&&e!=b)return!1;return!0}},a.comprobarMontoFacturaNotaCredito=function(b,c){
var d,e,f,g;f=0;for(var h in a.listaNotasDebCred)if(d=a.listaNotasDebCred[h],d.documentosAsociados.length>0)for(var h in d.documentosAsociados)e=d.documentosAsociados[h],e.documentoAsoc&&e.documentoAsoc.id==c&&(g=e.documentoAsoc.total,f+=e.monto);f>g?(b.montoSuperiorFactura=!0,a.errorValidacionNotasCredito=!0):b.montoSuperiorFactura=!1},a.fechaTemp="",a.formatarFecha=function(){alert(a.fechaPago)}}]),angular.module("angularjsApp").factory("pagoDocumento",["constantes","$resource",function(a,b){return{datos:function(){return b(a.URL+"pago-documentos/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})},buscarDocumentos:function(){return b(a.URL+"pago-documentos/buscar-documentos",{},{post:{method:"POST"}})},opciones:function(){return b(a.URL+"pago-documentos/opciones/formulario")},buscarNotasCreditoDebito:function(){return b(a.URL+"pago-documentos/buscar-notas-cred-deb",{},{post:{method:"POST"}})}}}]),angular.module("angularjsApp").controller("MediosPagosCtrl",["$scope","$rootScope","$timeout","$uibModal","Notification","medioPago",function(a,b,c,d,e,f){a.datos=[],a.open=function(b){var c=d.open({animation:a.animationsEnabled,templateUrl:"myModalContent.html",controller:"ModalFormMedioPagoCtrl",size:"lg",backdrop:"static",resolve:{objeto:function(){return b}}});c.result.then(function(b){e.success({message:b,title:"Mensaje del Sistema"}),a.cargarDatos()})},a.cargarDatos=function(){b.cargando=!0;var c=f.datos().query();c.$promise.then(function(c){a.datos=c,b.cargando=!1})},a.editar=function(c){b.cargando=!0;var d=f.datos().get({id:c.id});d.$promise.then(function(c){a.open(c),b.cargando=!1})},a.eliminar=function(c){b.cargando=!0,a.result=f.datos()["delete"]({id:c.id}),a.result.$promise.then(function(b){b.success&&(e.success({message:b.mensaje,title:"Notificación del Sistema"}),a.cargarDatos())})},a.toolTipEdicion=function(a){return"Editar los datos del Medio de Pago <b>"+a+"</b>"},a.toolTipCuentas=function(a){var b=[];for(var c in a)b.push(a[c].cuenta.codigo+" | "+a[c].cuenta.cuenta);var d=b.join("</b></li><li><b>");return"<ul><li><b>"+d+"</b></li></ul>"},a.cargarDatos()}]).controller("ModalFormMedioPagoCtrl",["$scope","$rootScope","$uibModalInstance","constantes","$uibModal","$http","$filter","Notification","objeto","medioPago",function(a,b,c,d,e,f,g,h,i,j){a.opciones={},a.errores={},a.objeto=i,a.actualizarDatos=function(){a.objeto.id?a.objeto.tipoPago=g("filter")(a.opciones.tiposPagos,{id:a.objeto.tipoPago},!0)[0]:(a.objeto.tipoPago=a.opciones.tiposPagos[0],a.objeto.cuentasPagoProveedores=[],a.objeto.cuentasPagoClientes=[])},a.guardar=function(){b.cargando=!0;var d;d=a.objeto.id?j.datos().update({id:a.objeto.id},a.objeto):j.datos().create({},a.objeto),d.$promise.then(function(d){d.success?(b.cargando=!1,c.close(d.mensaje)):(h.error({message:d.mensaje,title:"Notificación del Sistema"}),a.errores=d.errores)})},a.cancel=function(){c.dismiss("cancel")},a.cargarOpciones=function(){b.cargando=!0;var c=j.opciones().get();c.$promise.then(function(c){a.opciones=c,b.cargando=!1,a.actualizarDatos()})},a.cargarOpciones(),a.getCuentas=function(a){return f.get(d.URL+"cuentas/buscador/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})},a.buscarCuenta=function(b,c,d){var f=e.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-buscar-cuenta.html?v="+g("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalBuscarCuentaCtrl",size:"700"});f.result.then(function(e){d===!0?a.objeto[b][c].cuenta=e:a.objeto[b][c]=e})},a.agregarCuenta=function(b){a.objeto[b].push({})},a.quitarCuenta=function(b,c){a.objeto[b].splice(c,1)}}]),angular.module("angularjsApp").factory("medioPago",["constantes","$resource",function(a,b){return{datos:function(){return b(a.URL+"medios-pagos/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})},opciones:function(){return b(a.URL+"medios-pagos/opciones/formulario")}}}]),angular.module("angularjsApp").filter("html",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]),angular.module("angularjsApp").controller("NominasPagosCtrl",["$scope","$rootScope","$timeout","$uibModal","Notification","nominaPago",function(a,b,c,d,e,f){a.datos=[],a.open=function(b){var c=d.open({animation:a.animationsEnabled,templateUrl:"myModalContent.html",controller:"ModalFormNominaPagoCtrl",size:"lg",backdrop:"static",resolve:{objeto:function(){return b}}});c.result.then(function(b){e.success({message:b,title:"Mensaje del Sistema"}),a.cargarDatos()})},a.cargarDatos=function(){b.cargando=!0;var c=f.datos().query();c.$promise.then(function(c){a.datos=c,b.cargando=!1})},a.editar=function(c){b.cargando=!0;var d=f.datos().get({id:c.id});d.$promise.then(function(c){a.open(c),b.cargando=!1})},a.eliminar=function(c){b.cargando=!0,a.result=f.datos()["delete"]({id:c.id}),a.result.$promise.then(function(b){b.success&&(e.success({message:b.mensaje,title:"Notificación del Sistema"}),a.cargarDatos())})},a.toolTipEdicion=function(a){return"Editar los datos de la Nómina de Pago <b>"+a+"</b>"},a.cargarDatos()}]).controller("ModalFormNominaPagoCtrl",["$scope","$rootScope","$timeout","$uibModalInstance","constantes","$uibModal","$http","$filter","Notification","objeto","nominaPago",function(a,b,c,d,e,f,g,h,i,j,k){a.opciones={},a.errores={},a.objeto=j,a.fechas={},a.actualizarDatos=function(){a.objeto.id&&(a.objeto.banco=h("filter")(a.opciones.bancos,{id:a.objeto.banco},!0)[0])},a.openFecha=function(b){c(function(){a.fechas[b]=!0},100)},a.guardar=function(){b.cargando=!0;var c;c=a.objeto.id?k.datos().update({id:a.objeto.id},a.objeto):k.datos().create({},a.objeto),c.$promise.then(function(c){c.success?(b.cargando=!1,d.close(c.mensaje)):(i.error({message:c.mensaje,title:"Notificación del Sistema"}),a.errores=c.errores)})},a.cancel=function(){d.dismiss("cancel")},a.cargarOpciones=function(){b.cargando=!0;var c=k.opciones().get();c.$promise.then(function(c){a.opciones=c,b.cargando=!1,a.actualizarDatos()})},a.cargarOpciones()}]),angular.module("angularjsApp").factory("nominaPago",["constantes","$resource",function(a,b){return{datos:function(){return b(a.URL+"nominas-pagos/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})},opciones:function(){return b(a.URL+"nominas-pagos/opciones/formulario")}}}]),angular.module("angularjsApp").controller("PagoAnticiposCtrl",["$scope","$rootScope","$timeout","$uibModal","Notification","pagoAnticipo",function(a,b,c,d,e,f){a.datos=[],a.permisos={},a.open=function(b){var c=d.open({animation:a.animationsEnabled,templateUrl:"myModalContent.html",controller:"ModalFormRegistroPagoAnticipoCtrl",size:"lg",backdrop:"static",resolve:{objeto:function(){return b}}});c.result.then(function(b){e.success({message:b,title:"Mensaje del Sistema"}),a.cargarDatos()})},a.cargarDatos=function(){b.cargando=!0;var c=f.datos().get();c.$promise.then(function(c){a.datos=c.detalles,a.permisos=c.opciones.accesos,b.cargando=!1})},a.editar=function(c){b.cargando=!0;var d=f.datos().get({id:c.id});d.$promise.then(function(c){a.open(c),b.cargando=!1})},a.eliminar=function(c){b.cargando=!0,a.result=f.datos()["delete"]({id:c.id}),a.result.$promise.then(function(b){b.success&&(e.success({message:b.mensaje,title:"Notificación del Sistema"}),a.cargarDatos())})},a.toolTipEdicion=function(a){return"Editar los datos del Medio de Pago <b>"+a+"</b>"},a.toolTipCuentas=function(a){var b=[];for(var c in a)b.push(a[c].cuenta.codigo+" | "+a[c].cuenta.cuenta);var d=b.join("</b></li><li><b>");return"<ul><li><b>"+d+"</b></li></ul>"},a.cargarDatos()}]).controller("ModalFormRegistroPagoAnticipoCtrl",["$scope","$rootScope","$timeout","$uibModalInstance","constantes","$uibModal","$http","$filter","Notification","objeto","pagoAnticipo",function(a,b,c,d,e,f,g,h,i,j,k){if(a.opciones={},a.errores={},a.fechas={fecha:!1},j.id){var l=j.fecha;a.objeto=j,a.objeto.fecha=null,a.objeto.fecha=new Date(l+"T09:30:30")}else a.objeto={pagos:[],tipoPago:1,tipo:2,total:0},a.objeto.fecha=new Date,a.objeto.pagos.push({medio:"",cuenta:"",datosMedio:"",monto:a.objeto.total});a.actualizarOpciones=function(){if(a.objeto.id)for(var b in a.objeto.pagos)2==a.objeto.tipo?a.objeto.pagos[b].medio=h("filter")(a.opciones.mediosPagoProveedores,{id:a.objeto.pagos[b].medio},!0)[0]:1==a.objeto.tipo&&(a.objeto.pagos[b].medio=h("filter")(a.opciones.mediosPagoClientes,{id:a.objeto.pagos[b].medio},!0)[0]),a.objeto.pagos[b].cuenta=h("filter")(a.objeto.pagos[b].medio.cuentas,{id:a.objeto.pagos[b].cuenta},!0)[0],a.objeto.pagos[b].datosMedio.banco&&(a.objeto.pagos[b].datosMedio.banco=h("filter")(a.opciones.bancos,{id:a.objeto.pagos[b].datosMedio.banco},!0)[0]),a.objeto.pagos[b].datosMedio.nomina&&(a.objeto.pagos[b].datosMedio.nomina=h("filter")(a.opciones.nominas,{id:a.objeto.pagos[b].datosMedio.nomina},!0)[0]),a.objeto.pagos[b].datosMedio.fecha&&(a.objeto.pagos[b].datosMedio.fecha=new Date(a.objeto.pagos[b].datosMedio.fecha+"T09:30:30"));a.generarVistaComprobante()},a.traspasarMontoTotal=function(){a.objeto.pagos[0].monto||(a.objeto.pagos[0].monto=a.objeto.total,a.sumarMontos())},a.guardar=function(){b.cargando=!0;var c;c=a.objeto.id?k.datos().update({id:a.objeto.id},a.objeto):k.datos().create({},a.objeto),c.$promise.then(function(c){c.success?(b.cargando=!1,d.close(c.mensaje)):(i.error({message:c.mensaje,title:"Notificación del Sistema"}),a.errores=c.errores)})},a.getProveedores=function(b){return g.get(e.URL+"clientes-proveedores/buscador/json",{params:{termino:b,tipo:a.objeto.tipo}}).then(function(a){return a.data.map(function(a){return a})})},a.cancel=function(){d.dismiss("cancel")},a.agregarMedioPago=function(){a.objeto.pagos.push({medio:null,cuenta:null,datosMedio:"",monto:""})},a.quitarMedioPago=function(b){a.objeto.pagos.splice(b,1)},a.openFecha=function(b){c(function(){a.fechas[b]=!0},100)},a.cargarOpciones=function(){b.cargando=!0;var c=k.opciones().get();c.$promise.then(function(c){a.opciones.cuentasPagoProveedores=c.cuentasPagoProveedores,a.opciones.cuentasPagoClientes=c.cuentasPagoClientes,a.opciones.mediosPagoProveedores=c.mediosPagoProveedores,a.opciones.mediosPagoClientes=c.mediosPagoClientes,a.opciones.bancos=c.bancos,a.opciones.nominas=c.nominas,a.opciones.cuentaProveedorAnticipo=c.cuentaProveedorAnticipo,a.opciones.cuentaClienteAnticipo=c.cuentaClienteAnticipo,b.cargando=!1,a.actualizarOpciones()})},a.cargarOpciones(),a.sumarMontos=function(){a.objeto.totalMonto=0;for(var b in a.objeto.pagos){var c=a.objeto.pagos[b].monto;c&&(a.objeto.totalMonto+=parseInt(c))}},a.sumarMontos(),a.generarVistaComprobante=function(){a.objeto.comprobanteContable=[];var b,c,d,e,f,g,h,i=a.objeto.tipo;b=2==i?a.opciones.cuentaProveedorAnticipo:a.opciones.cuentaClienteAnticipo,f=0,a.objeto.totalHaber=0,a.objeto.totalDebe=0,h="Pago Anticipo";var j=a.objeto.proveedor,k=a.objeto.total;if(j&&k>0&&b&&b.id){2==i?(c=k,d=0,e=h+" Proveedor : "+j.razonSocial):(c=0,d=k,e=h+" Cliente : "+j.razonSocial),a.objeto.comprobanteContable.push({cuenta:b.cuenta,codigo:b.codigo,glosa:e,debe:c,haber:d}),a.objeto.totalDebe=c,a.objeto.totalHaber=d;for(var l in a.objeto.pagos)f=a.objeto.pagos[l],f.cuenta&&f.monto&&(g=f.monto,2==i?(c=0,d=g,e=h+" Proveedor : "+j.razonSocial):(c=g,d=0,e=h+" Cliente : "+j.razonSocial),a.objeto.comprobanteContable.push({cuenta:f.cuenta.cuenta,codigo:f.cuenta.codigo,glosa:e,debe:c,haber:d}),a.objeto.totalHaber+=d,a.objeto.totalDebe+=c)}},a.resetForm=function(){for(var b in a.objeto.pagos)a.objeto.pagos[b].cuenta="",a.objeto.pagos[b].medio="";a.generarVistaComprobante()}}]),angular.module("angularjsApp").factory("pagoAnticipo",["constantes","$resource",function(a,b){return{datos:function(){return b(a.URL+"pago-anticipos/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})},buscarAnticipos:function(){return b(a.URL+"pago-anticipos/buscar-anticipos/clientes-proveedores",{},{post:{method:"POST"}})},opciones:function(){return b(a.URL+"pago-anticipos/opciones/formulario")}}}]),angular.module("angularjsApp").controller("ActivosFijosCtrl",["$scope","$rootScope","$filter","$timeout","$uibModal","Notification","activoFijo",function(a,b,c,d,e,f,g){a.datos=[],a.activosFijos=[],a.filtro={},a.open=function(){var b=e.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-gestion-activos-fijos-documento.html?v="+c("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalFormIngresoActivoFijoDocumentoCtrl",size:"1000",backdrop:"static",resolve:{objeto:function(){return{id:0,origen:2,activosFijos:[]}}}});b.result.then(function(b){f.success({message:b,title:"Mensaje del Sistema"}),a.cargarDatos()})},a.gestionarDocumento=function(b){var d=e.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-gestion-activos-fijos-documento.html?v="+c("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalFormIngresoActivoFijoDocumentoCtrl",size:"1000",backdrop:"static",resolve:{objeto:function(){return b}}});d.result.then(function(b){f.success({message:b,title:"Mensaje del Sistema"}),a.cargarDatos()})},a.cargarDatos=function(){b.cargando=!0;var c=g.datos().get();c.$promise.then(function(c){a.datos=c.detalles,a.activosFijos=c.activosFijos,a.permisos=c.opciones.accesos,b.cargando=!1})},a.editar=function(c){b.cargando=!0;var d=g.datos().get({id:c.id});d.$promise.then(function(c){a.open(c),b.cargando=!1})},a.eliminar=function(c){b.cargando=!0,a.result=g.datos()["delete"]({id:c.id}),a.result.$promise.then(function(b){b.success&&(f.success({message:b.mensaje,title:"Notificación del Sistema"}),a.cargarDatos())})},a.toolTipEdicion=function(a){return"Gestionar los <b>Activos Fijos</b> asociados al Documento <b>"+a+"</b>"},a.toolTipCuentas=function(a){var b=[];for(var c in a)b.push(a[c].cuenta.codigo+" | "+a[c].cuenta.cuenta);var d=b.join("</b></li><li><b>");return"<ul><li><b>"+d+"</b></li></ul>"},a.cargarDatos()}]).controller("ModalFormIngresoActivoFijoDocumentoCtrl",["$scope","$http","$timeout","$rootScope","$uibModal","$uibModalInstance","$filter","Notification","constantes","objeto","activoFijo",function(a,b,c,d,e,f,g,h,i,j,k){a.documento=j,a.gestion={documentoId:j.id,origen:j.origen,activosFijos:j.activosFijos},a.fechas={},a.dateOptions={datepickerMode:"month",minMode:"month"},a.openFecha=function(b){c(function(){a.fechas[b]=!0},100)},a.guardar=function(b){d.cargando=!0,a.gestion.finalizar=b;var c=k.datos().create({},a.gestion);c.$promise.then(function(b){d.cargando=!1,b.success?f.close(b.mensaje):(h.error({message:b.mensaje,title:"Notificación del Sistema"}),a.errores=b.errores)})},a.cerrar=function(){f.dismiss("cancel")},a.agregarActivoFijo=function(){a.gestion.activosFijos.push({})},a.quitarActivoFijo=function(b){var c=a.gestion.activosFijos.indexOf(b);a.gestion.activosFijos.splice(c,1)},a.getActivosFijosTabla=function(a){return b.get(i.URL+"activos-fijos/buscador/tabla/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})},a.establecerAnioDep=function(a){a.anios=12*a.activo.vidaUtilNormal},a.buscarActivoFijoSII=function(b){var c=e.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-buscar-activo-fijo-tabla.html?v="+g("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalBuscarActivoFijoTablaSIICtrl",size:"1000",backdrop:"static"});c.result.then(function(c){a.gestion.activosFijos[b].activo=c,a.gestion.activosFijos[b].anios=12*c.vidaUtilNormal})},a.copiarActivoFijo=function(b){if(b.activo){var c=e.open({animation:a.animationsEnabled,templateUrl:"myModalFormCopiarActivoFijo.html",controller:"ModalCopiarActivoFijoCtrl",size:"700",backdrop:"static",resolve:{objeto:function(){return b}}});c.result.then(function(b){if(b.length>0)for(var c in b)a.gestion.activosFijos.push(b[c])})}else h.error({message:"Debe seleccionar un Activo Fijo",title:"Notificación del Sistema"})},a.crearActivoFijo=function(b){var c=e.open({animation:a.animationsEnabled,templateUrl:"myModalFormCrearActivoFijo.html",controller:"ModalFormCrearActivoFijoCtrl",size:"900",backdrop:"static",resolve:{objeto:function(){return b},documento:function(){return a.documento}}});c.result.then(function(b){var c;if(a.gestion.activosFijos.push(b.activoFijo),b.copias>0)for(var d=0;d<b.copias;d++)c={},angular.copy(b.activoFijo,c),a.gestion.activosFijos.push(c)})}}]).controller("ModalFormCrearActivoFijoCtrl",["$scope","$http","$timeout","$rootScope","$uibModal","$uibModalInstance","$filter","Notification","constantes","objeto","activoFijo","documento",function(a,b,c,d,e,f,g,h,i,j,k,l){a.editando=!1,j.activo&&(a.editando=!0,a.original={},angular.copy(j,a.original)),a.activoFijo=j,a.documento=l,l.id&&!j.fechaCompra&&(a.activoFijo.fechaCompra=l.fecha),a.fechas={},a.gestion={copias:0},a.dateOptions={datepickerMode:"month",minMode:"month"},a.openFecha=function(b){c(function(){a.fechas[b]=!0},100)},a.agregar=function(){var b={activoFijo:a.activoFijo,copias:a.gestion.copias};f.close(b)},a.actualizar=function(){f.dismiss()},a.cancel=function(){a.editando&&angular.copy(a.original,a.activoFijo),f.dismiss()},a.getActivosFijosTabla=function(a){return b.get(i.URL+"activos-fijos/buscador/tabla/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})},a.getCuentas=function(a){return b.get(i.URL+"cuentas/buscador/json",{params:{termino:a}}).then(function(a){return a.data.map(function(a){return a})})},a.buscarCuenta=function(b){var c=e.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-buscar-cuenta.html?v="+g("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalBuscarCuentaCtrl",size:"700"});c.result.then(function(c){a.activoFijo[b]=c})},a.establecerAnioDep=function(a){a.anios=12*a.activo.vidaUtilNormal,a.cuentaActivoFijo=a.activo.cuenta,a.cuentaDepAcum=a.activo.cuentaDepAcum,a.cuentaDepEjercicio=a.activo.cuentaDepEjercicio},a.buscarActivoFijoSII=function(b){var c=e.open({animation:a.animationsEnabled,templateUrl:"views/forms/form-buscar-activo-fijo-tabla.html?v="+g("date")(new Date,"yyyyMMddHHmmss"),controller:"ModalBuscarActivoFijoTablaSIICtrl",size:"1000",backdrop:"static"});c.result.then(function(b){a.activoFijo.activo=b,a.activoFijo.anios=12*b.vidaUtilNormal,a.activoFijo.cuentaActivoFijo=b.cuenta,a.activoFijo.cuentaDepAcum=b.cuentaDepAcum,a.activoFijo.cuentaDepEjercicio=b.cuentaDepEjercicio})},a.borrarActivoFijo=function(){a.activoFijo.activo="",a.activoFijo.anios="",a.activoFijo.cuentaActivoFijo="",a.activoFijo.cuentaDepAcum="",a.activoFijo.cuentaDepEjercicio=""}}]).controller("ModalBuscarActivoFijoTablaSIICtrl",["$scope","$rootScope","$timeout","$uibModalInstance","$filter","Notification","activoFijo",function(a,b,c,d,e,f,g){a.datos=[],a.filtro={filtro:""},a.cargarDatos=function(){b.cargando=!0;var c=g.listado().query();c.$promise.then(function(c){a.datos=c,b.cargando=!1})},a.seleccionar=function(a){d.close(a)},a.cancel=function(){d.dismiss()},a.cargarDatos()}]).controller("ModalCopiarActivoFijoCtrl",["$scope","$rootScope","$timeout","$uibModalInstance","$filter","Notification","activoFijo","objeto",function(a,b,c,d,e,f,g,h){a.objeto={},angular.copy(h,a.objeto),a.objeto.id=0,a.gestion={copias:1},a.copiar=function(){for(var b=[],c={},e=0;e<a.gestion.copias;e++)c={},angular.copy(a.objeto,c),b.push(c);d.close(b)},a.cancel=function(){d.dismiss()}}]),angular.module("angularjsApp").factory("activoFijo",["constantes","$resource",function(a,b){return{datos:function(){return b(a.URL+"activos-fijos/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})},listado:function(){return b(a.URL+"activos-fijos/listado/json")},opciones:function(){return b(a.URL+"activos-fijos/opciones/formulario")},depreciacion:function(){return b(a.URL+"activos-fijos/depreciacion/gestion",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})}}}]),angular.module("angularjsApp").controller("ActivosFijosDepreciacionEjercicioCtrl",["$scope","$rootScope","$filter","$timeout","$uibModal","Notification","activoFijo","constantes",function(a,b,c,d,e,f,g,h){a.datos=[],a.constantes=h,a.activosFijos=[],a.ultimaDep="",a.IPCActual,a.permitirDep=!1,a.filtro={},a.cuentasCM={},a.gestion={fecha:new Date,depreciacion:[],registros:[]},a.cargarDatos=function(){b.cargando=!0;var d=g.depreciacion().get();d.$promise.then(function(d){if(a.activosFijos=d.activosFijos,a.ultimaDep=d.ultimaDep,a.IPCActual=d.ipc,a.cuentasCM={deudor:d.cuentaCMDeudor,acreedor:d.cuentaCMAcreedor},a.permisos=d.opciones.accesos,b.cargando=!1,d.ultimaDep){var e=c("filter")(d.ultimaDep+"T09:30:30","MM-yyyy"),f=c("date")(new Date,"MM-yyyy");f!=e&&(a.permitirDep=!0)}})},a.ultimoDiaMes=function(){var b=new Date,c=new Date(b.getFullYear(),b.getMonth()+1,0);a.gestion.fecha=c},a.ultimoDiaMes(),a.cargarDatos(),a.calcularDepreciacion=function(){a.gestion.comprobanteContable=[],a.gestion.depreciacion=[];var b,d,e,f,g,h,i,j,k,l;for(var m in a.activosFijos)b=a.activosFijos[m],b.depreciar&&b.cuentaActivoFijo&&b.vidaUtilRestante>0&&(j=b.ipc,e=b.valorLibroActual,f=Math.round(e*(j/100)),g=f+b.cMLibroAcum,i=0,b.depAcum>0&&(i=Math.round(b.depAcum*(j/100))),1==b.tipoDepreciacion?(k=e+f,b.depAcum>0&&(k-=b.depAcum+i),d=Math.round(k/b.vidaUtilRestante)):(k=e+f,b.depAcum>0&&(k-=b.depAcum+i),d=Math.round(k/Math.round(b.vidaUtilRestante/3))),b.depAcum>0&&(d+=b.depAcum),a.gestion.registros.push({valorAct:e,CMValorAct:f,DepAcum:b.depAcum,CMDepAcum:i,VidaUtilRest:b.vidaUtilRestante,VidaUtilDescontada:b.vidaUtil,Depreciacion:d}),a.gestion.depreciacion.push({id:b.id,depreciacion:d,cMValorLibro:f,cMDepAcum:i}),l="Registra Depreciación : "+b.activoFijo+(b.codigo?", "+b.codigo:"")+", Mes: "+c("date")(new Date,"MMMM")+"/"+c("date")(new Date,"yyyy"),a.gestion.comprobanteContable.push({activoId:b.id,cuentaId:b.cuentaActivoFijo.id,cuenta:b.cuentaActivoFijo.cuenta,codigo:b.cuentaActivoFijo.codigo,glosa:l,debe:g,haber:0}),b.depAcum>0?(h=g-i,h>0?a.gestion.comprobanteContable.push({activoId:b.id,cuentaId:a.cuentasCM.acreedor.id,cuenta:a.cuentasCM.acreedor.cuenta,codigo:a.cuentasCM.acreedor.codigo,glosa:l,debe:0,haber:h}):0>h&&a.gestion.comprobanteContable.push({activoId:b.id,cuentaId:a.cuentasCM.deudor.id,cuenta:a.cuentasCM.deudor.cuenta,codigo:a.cuentasCM.deudor.codigo,glosa:l,debe:-1*h,haber:0}),a.gestion.comprobanteContable.push({activoId:b.id,cuentaId:b.cuentaDepAcum.id,cuenta:b.cuentaDepAcum.cuenta,codigo:b.cuentaDepAcum.codigo,glosa:l,debe:0,haber:i})):a.gestion.comprobanteContable.push({activoId:b.id,cuentaId:a.cuentasCM.acreedor.id,cuenta:a.cuentasCM.acreedor.cuenta,codigo:a.cuentasCM.acreedor.codigo,glosa:l,debe:0,haber:f}),a.gestion.comprobanteContable.push({activoId:b.id,cuentaId:b.cuentaDepEjercicio.id,cuenta:b.cuentaDepEjercicio.cuenta,codigo:b.cuentaDepEjercicio.codigo,glosa:l,debe:d,haber:0}),a.gestion.comprobanteContable.push({activoId:b.id,cuentaId:b.cuentaDepAcum.id,cuenta:b.cuentaDepAcum.cuenta,codigo:b.cuentaDepAcum.codigo,glosa:l,debe:0,haber:d}));a.calcularTotales()},a.calcularTotales=function(){var b,c=0,d=0;for(var e in a.gestion.comprobanteContable)b=a.gestion.comprobanteContable[e],b.debe&&(c+=parseInt(b.debe)),b.haber&&(d+=parseInt(b.haber));a.gestion.totalDebe=c,a.gestion.totalHaber=d},a.grabar=function(){b.cargando=!0,a.gestion.ipc=a.IPCActual;var c=g.depreciacion().create({},a.gestion);c.$promise.then(function(c){c.success?(a.gestion.comprobanteId=c.comprobanteId,f.success({message:c.mensaje,title:"Notificación del Sistema"}),a.cargarDatos()):(f.error({message:c.mensaje,title:"Notificación del Sistema"}),a.errores=c.errores),b.cargando=!1})}}]),angular.module("angularjsApp").controller("DepositoPagosClientesCtrl",["$scope","$rootScope","$timeout","$uibModal","constantes","$filter","$http","Notification","depositoPago",function(a,b,c,d,e,f,g,h,i){function j(){b.cargando=!0;var c=i.opciones().get();c.$promise.then(function(c){a.opciones=c,b.cargando=!1})}a.constantes=e,a.tiposComprobantes=[],a.resultado=[],a.cuentasDeposito=[],a.resumenes={},a.sinResultados=!1,a.mostrarResumen=!1,a.opciones={},a.filtro={},a.mostrarBuscador=!0,a.cuentaDeposito={},a.sel={seleccionar:!1,cuentaDeposito:{}};var k=parseInt(f("date")(new Date,"yyyy"));a.opciones={anios:[{id:k,value:k},{id:k-1,value:k-1}]};var l=f("filter")(a.constantes.MESES,{id:parseInt(f("date")(new Date,"MM"))},!0)[0];a.revisarFiltro=function(b){a.filtro[b]&&"undefined"!=typeof a.filtro[b]||(a.filtro[b]="")},a.guardar=function(){var c=[];if(a.resultado.length>0){for(var d in a.resultado)docto=a.resultado[d],docto.cuentaDeposito&&c.push(docto);b.cargando=!0;var e=i.datos().create({},{documentos:c});e.$promise.then(function(c){c.success?(h.success({message:c.mensaje,title:"Notificación del Sistema"}),a.buscarDocumentos()):h.error({message:c.mensaje,title:"Notificación del Sistema"}),b.cargando=!1})}},a.fechas={fecha:!1,fechaInicial:!1,fechaFinal:!1},a.open=function(b){c(function(){a.fechas[b]=!0},100)},a.nuevaBusqueda=function(){a.sinResultados=!1,a.mostrarBuscador=!0,a.resultado=[]},a.limpiarFormulario=function(){a.objeto={anioInicial:a.opciones.anios[0],fechas:0,fecha:new Date,inicio:new Date,cliente:"",fin:new Date,mes:l,anio:a.opciones.anios[0],mesInicial:l,mesFinal:l,anioInicial:a.opciones.anios[0],anioFinal:a.opciones.anios[0]},a.nuevaBusqueda()},a.limpiarFormulario(),a.getProveedores=function(a){return g.get(e.URL+"clientes-proveedores/buscador/json",{params:{termino:a,tipo:1}}).then(function(a){return a.data.map(function(a){return a})})},a.buscarDocumentos=function(){a.sinResultados=!1,b.cargando=!0;var c=i.buscarDocumentos().post(a.objeto);c.$promise.then(function(c){a.resultado=c.detalles,a.cuentasDeposito=c.cuentasDeposito,0==c.detalles.length?a.sinResultados=!0:a.mostrarBuscador=!1,b.cargando=!1,a.filtro={}})},a.marcarTodos=function(){c(function(){for(var b in a.resultado)a.resultado[b].seleccionar=a.sel.seleccionar},50)},j(),a.calcularResumenes=function(){a.resumenes={},a.mostrarResumen=!1;var b;if(a.resultado.length>0)for(var c in a.resultado)b=a.resultado[c],b.cuentaDeposito&&b.cuentaDeposito.id&&(a.mostrarResumen=!0,a.resumenes[b.cuentaDeposito.codigo]||(a.resumenes[b.cuentaDeposito.codigo]={destino:b.cuentaDeposito.cuenta,documentos:0,monto:0}),a.resumenes[b.cuentaDeposito.codigo].documentos++,a.resumenes[b.cuentaDeposito.codigo].monto+=parseInt(b.total))},a.asignarDestinoSeleccion=function(){var b;if(a.sel.cuentaDeposito.id&&a.resultado.length>0)for(var c in a.resultado)b=a.resultado[c],b.seleccionar&&(b.cuentaDeposito=f("filter")(a.cuentasDeposito,{id:a.sel.cuentaDeposito.id},!0)[0]);a.calcularResumenes()}}]),angular.module("angularjsApp").factory("depositoPago",["constantes","$resource",function(a,b){return{datos:function(){return b(a.URL+"depositos-pagos/:id",{id:"@id"},{update:{method:"PUT"},"delete":{method:"DELETE"},create:{method:"POST"}})},buscarDocumentos:function(){return b(a.URL+"depositos-pagos/buscar-documentos",{},{post:{method:"POST"}})},opciones:function(){return b(a.URL+"depositos-pagos/opciones/formulario")}}}]),angular.module("angularjsApp").run(["$templateCache",function(a){a.put("views/activos-fijos-depreciacion-ejercicio.html",'<div class="header">\n    <h2>Activos Fijos <b>Depreciación del Ejercicio</b></h2>\n</div>\n<!-- /.row -->\n<div class="row">\n    <div class="col-md-12">        \n        <div class="form-group">\n            <label for="orden" class="control-label col-md-1">\n                Ordenar:\n            </label>\n            <div class="col-md-3">\n                <select ng-model="orden" id="orden" class="form-control form-white">\n                    <option value=""></option>\n                    <option value="categoria">Categoria</option>\n                    <option value="activoFijo">Descripcion</option>\n                    <option value="codigo">Codigo Int</option>\n                    <option value="anio">Vida Util Original</option>\n                    <option value="inicioDep">Inicio Depreciación</option>\n                </select>\n            </div>\n            \n            <div class="col-md-8" style="text-align:right; padding-right:0px">\n              \n            </div>\n        </div>        \n    </div>\n</div>\n\n<div class="row">\n    <div class="panel panel-default">\n        <div class="panel-heading">Activos Fijos</div>\n        <div class="panel-body">\n            <table class="table table-striped table-bordered">\n                <tr>\n                    <th style="padding: 1px">\n                        <div class="prepend-icon col-sm-12">\n                            <input type="text" ng-model="filtro.categoria" class="form-control form-white">\n                            <i class="fa fa-filter"></i>\n                        </div>\n                    </th>\n                    <th style="padding: 1px">\n                        <div class="prepend-icon col-sm-12">\n                            <input type="text" ng-model="filtro.activoFijo" class="form-control form-white">\n                            <i class="fa fa-filter"></i>\n                        </div>\n                    </th>\n                    <th style="padding: 1px">\n                        <div class="prepend-icon col-sm-12">\n                            <input type="text" ng-model="filtro.codigo" class="form-control form-white">\n                            <i class="fa fa-filter"></i>\n                        </div>\n                    </th>\n                    <th style="padding: 1px">\n                        <div class="prepend-icon col-sm-12">\n                            <input type="text" ng-model="filtro.fechaCompra" class="form-control form-white">\n                            <i class="fa fa-filter"></i>\n                        </div>\n                    </th>\n                    <th style="padding: 1px">\n                        <div class="prepend-icon col-sm-12">\n                            <input type="text" ng-model="filtro.anios" class="form-control form-white">\n                            <i class="fa fa-filter"></i>\n                        </div>\n                    </th>\n                    <th style="padding: 1px">\n                        <div class="prepend-icon col-sm-12">\n                            <input type="text" ng-model="filtro.inicioDep" class="form-control form-white">\n                            <i class="fa fa-filter"></i>\n                        </div>\n                    </th>\n\n                    <th style="padding: 1px">\n                        <div class="prepend-icon col-sm-12">\n                            <input type="text" ng-model="filtro.ultimaDep" class="form-control form-white">\n                            <i class="fa fa-filter"></i>\n                        </div>\n                    </th>\n                    <th style="padding: 1px">\n                        <div class="prepend-icon col-sm-12">\n                            <input type="text" ng-model="filtro.vidaUtilRestante" class="form-control form-white">\n                            <i class="fa fa-filter"></i>\n                        </div>\n                    </th>\n                    <th style="padding: 1px">\n                        <div class="prepend-icon col-sm-12">\n                            <input type="text" ng-model="filtro.ipc" class="form-control form-white">\n                            <i class="fa fa-filter"></i>\n                        </div>\n                    </th>\n                    <th style="padding: 1px">\n                        <div class="prepend-icon col-sm-12">\n                            <input type="text" ng-model="filtro.valor" class="form-control form-white">\n                            <i class="fa fa-filter"></i>\n                        </div>\n                    </th>\n                    <th style="padding: 1px">\n                        <div class="prepend-icon col-sm-12">\n                            <input type="text" ng-model="filtro.depAcum" class="form-control form-white">\n                            <i class="fa fa-filter"></i>\n                        </div>\n                    </th>\n                </tr>\n                <tr>\n                    <th class="col-xs-2">Clasificacion Activo Fijo</th>                        \n                    <th class="col-xs-2">Descripción</th>\n                    <th class="col-xs-1">Código Int</th>\n                    <th class="col-xs-1">Fecha Compra</th>\n                    <th class="col-xs-1">Vida Util Original</th>\n                    <th class="col-xs-1">Inicio Depreciacion</th>\n                    <th class="col-xs-1">Última Depreciacion</th>\n                    <th class="col-xs-1">Vida Util Actual</th>\n                    <th class="col-xs-1">IPC Actual</th>\n                    <th class="col-xs-1">Monto Inicial</th>\n                    <th class="col-xs-1">Dep. Acumulada</th>\n                </tr>\n                <tr ng-repeat="activo in activosFijos | toArray:false  | filter : filtro | orderBy:orden">\n                    <td style="padding-left:{{  ((activo.nivel-1) * 25)+5 }}px" ng-class="{\'text-primary\' : activo.activos}">\n                        <span ng-show="activo.categoria.length > 25" uib-tooltip-html="\'{{ activo.categoria }}\'">{{ activo.categoria | limitTo:25  }}...</span>\n                        <span ng-show="activo.categoria.length <= 25">{{ activo.categoria }}</span>\n                    </td>\n                    <td>\n                        {{ activo.activoFijo }}\n                    </td>\n                    <td>{{ activo.codigo }}</td>\n                    <td>\n                        {{ activo.fechaCompra | date:"MMMM-yyyy" }} \n                    </td>\n                    <td>\n                        <span ng-show="activo.anios > 0">\n                            {{ activo.anios }} Meses\n                        </span>                        \n                    </td>\n                    <td>\n                        {{ activo.inicioDep | date:"MMMM-yyyy" }} \n                    </td>\n                    <td>\n                        <span ng-if="activo.ultimaDep">\n                            {{ activo.ultimaDep | date:"MMMM-yyyy" }} \n                        </span>\n                    </td>\n                    <td>\n                        <span ng-show="activo.vidaUtilRestante > 0">\n                            {{ activo.vidaUtilRestante }} Meses\n                        </span>                        \n                    </td>\n                    <td>\n                        <span ng-show="activo.ipc >= 0">\n                            {{ activo.ipc | number:1 }}%\n                        </span>                        \n                    </td>\n                    <td style="text-align: right">\n                        {{ activo.valor | currency:"$":0 }}\n                    </td>\n                    <td style="text-align: right">\n                        {{ activo.depAcum | currency:"$":0 }}\n                    </td>\n                </tr>\n            </table>                       \n        </div>\n    </div>\n</div>\n\n<div class="row">\n    <div class="panel panel-primary">\n        <div class="panel-heading">Depreciación del Ejercicio</div>\n        <div class="panel-body form-horizontal">\n            <div ng-if="!ultimaDep || permitirDep">\n\n                <div class="form-group form-group-md" ng-if="ultimaDep">\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Ultima Depreciación Registrada:</label>\n                    <div class="col-sm-6 text-primary">\n                        <strong>\n                        {{ ultimaDep | date:\'MM-yyyy\' }}\n                        </strong>\n                    </div>\n                </div>\n\n                <div class="form-group form-group-md">\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Periodo Depreciación:</label>\n                    <div class="col-sm-6">\n                        MENSUAL\n                    </div>\n                </div>\n                <div class="form-group form-group-md">\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Tipo Depreciación:</label>\n                    <div class="col-sm-6">\n                        NORMAL\n                    </div>\n                </div>\n                <div class="form-group form-group-md">\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Tipo Comprobante:</label>\n                    <div class="col-sm-6">\n                        Traspaso\n                    </div>\n                </div>\n\n                <div class="form-group form-group-md">\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Fecha Comprobante:</label>\n                    <div class="col-sm-6">\n                        {{ gestion.fecha | date:\'dd-MM-yyyy\' }}\n                    </div>\n                </div>\n\n                <div class="form-group form-group-md">\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Número:</label>\n                    <div class="col-sm-6">\n                        Automático\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <div class="col-sm-8">\n                        <table class="table table-striped table-bordered">\n                            <tr>\n                                <th class="col-xs-2">Cuenta</th>\n                                <th class="col-xs-2">Codigo</th>\n                                <th class="col-xs-4">Glosa</th>\n                                <th class="col-xs-2">Debe</th>\n                                <th class="col-xs-2">Haber</th>\n                            </tr>\n                            <tr ng-repeat="asiento in gestion.comprobanteContable">\n                                <td>{{ asiento.cuenta }}</td>\n                                <td>{{ asiento.codigo }}</td>\n                                <td>{{ asiento.glosa }}</td>\n                                <td class="text-right">{{ asiento.debe | currency:"$":0 }}</td>\n                                <td class="text-right">{{ asiento.haber | currency:"$":0 }}</td>\n                            </tr>\n                            <tr>\n                                <td colspan="3">&nbsp;</td>\n                                <td style="text-align: right" ng-class="{\'success\' : gestion.totalDebe == gestion.totalHaber, \'danger\' : gestion.totalDebe != gestion.totalHaber }">\n                                <strong>{{ gestion.totalDebe | currency:"$":0 }}</strong></td>\n                                <td style="text-align: right" ng-class="{\'success\' : gestion.totalDebe == gestion.totalHaber, \'danger\' : gestion.totalDebe != gestion.totalHaber }">\n                                <strong>{{ gestion.totalHaber | currency:"$":0 }}</strong></td>\n                            </tr>\n                        </table>\n                    </div>\n                </div>\n<!--\n                <div class="form-control">\n                    <div class="col-sm-12">\n                        <table class="table table-striped">\n                            <tr>\n                                <th>VAlor Libro</th>\n                                <th>CM VAlor Libro</th>\n                                <th>Dep Acumulada</th>\n                                <th>CM Dep Acumulada</th>\n                                <th>Vida Util Restante</th>\n                                <th>Vida Util Descontada</th>\n                                <th>Depreciacion</th>\n                            </tr>\n                            <tr ng-repeat="act in gestion.registros">\n                                <td>{{ act.valorAct }}</td>\n                                <td>{{ act.CMValorAct }}</td>\n                                <td>{{ act.DepAcum }}</td>\n                                <td>{{ act.CMDepAcum }}</td>\n                                <td>{{ act.VidaUtilRest }}</td>\n                                <td>{{ act.VidaUtilDescontada }}</td>\n                                <td>{{ act.Depreciacion }}</td>\n                            </tr>\n                        </table>\n                    </div>\n                </div>\n-->\n                <div class="form-group" style="text-align: right">\n                    <button class="btn btn-success btn-md" ng-show="!gestion.comprobanteId" ng-click="calcularDepreciacion();">\n                        Calcular Depreciación\n                    </button>\n                    <button class="btn btn-primary btn-md" ng-show="!gestion.comprobanteId" ng-click="grabar();" ng-if="gestion.comprobanteContable.length > 0">\n                        Grabar y Generar Comprobante\n                    </button>\n                   \n                    <a class="btn btn-primary" ng-if="gestion.comprobanteId" abrir-ventana="{{ constantes.URL+\'contabilidad-registro-asientos/imprimir-asiento/\' + gestion.comprobanteId }}" ventana-nombre="IMPRIMIRASIENTOCONTABLE" ventana-ancho="750" ventana-alto="600">Ver Comprobante</a>\n                </div> \n            </div>\n        </div>\n    </div>\n</div>'),
a.put("views/activos-fijos.html",'<div class="header">\n    <h2>Ingreso de <b>Activos Fijos</b></h2>\n</div>\n<!-- /.row -->\n<div class="row">\n    <div class="col-md-12">        \n        <div class="form-group">\n            <label for="orden" class="control-label col-md-1">\n                Ordenar:\n            </label>\n            <div class="col-md-3">\n                <select ng-model="orden" ng-init="orden=\'codigo\'" id="orden" class="form-control form-white">\n                    <option value="codigo">Código</option>\n                    <option value="nombre">Nombre</option>\n                </select>\n            </div>\n            <label for="filtro" class="col-md-1 control-label">Filtrar:</label>\n            <div class="col-md-4">\n              <input id="filtro" type="text" class="form-control form-white" ng-model="filtroDoc">\n            </div>\n            <div class="col-md-3" style="text-align:right; padding-right:0px">\n                <button ng-if="permisos.crear" class="btn btn-primary btn-md" ng-click="open({}, false);">\n                    <i class="fa fa-plus"></i> Nuevo Activo Fijo S/Doc\n                </button>\n\n              \n            </div>\n        </div>        \n    </div>\n</div>\n<div class="row">\n    <div class="panel panel-success">\n        <div class="panel-heading">Documentos con Activos Fijos por registrar</div>\n        <div class="panel-body">\n            <table class="table table-striped table-hover">\n                <thead>\n                    <tr>\n                        <th>#</th>\n                        <th class="col-sm-2">Tipo Documento</th>\n                        <th class="col-sm-1">Fecha</th>                                \n                        <th class="col-sm-1">Folio</th>\n                        <th class="col-sm-1">Rut</th>\n                        <th class="col-sm-3">Proveedor</th>\n                        <th class="col-sm-1">Activos</th>\n                        <th class="col-sm-2">Acciones</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="dato in datos | orderBy:orden | filter:filtroDoc">\n                        <td>{{ $index + 1 }}</td>\n                        <td>{{ dato.tipoDoc }}</td>\n                        <td>{{ dato.fecha | date:\'dd-MM-yyyy\' }}</td>                                    \n                        <td>{{ dato.numero }}</td>\n                        <td>{{ dato.rut }}</td>\n                        <td>{{ dato.razonSocial }}</td>  \n                        <td>{{ dato.activosFijos.length }}</td>  \n                        <td>\n                            <a class="btn-acciones btn btn-default" href="javascript:void(0);" ng-click="gestionarDocumento(dato);" uib-tooltip-html="toolTipEdicion(dato.tipoDoc+ \' \' + dato.numero )">\n                                <i class="fa fa-pencil"></i>\n                            </a>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>\n<div class="row">\n    <div class="panel panel-primary">\n        <div class="panel-heading">Activos Fijos</div>\n        <div class="panel-body">\n            <table class="table table-striped table-bordered">\n                <tr>\n                    <th style="padding: 1px">\n                        <div class="prepend-icon col-sm-12">\n                            <input type="text" ng-model="filtro.categoria" class="form-control form-white">\n                            <i class="fa fa-filter"></i>\n                        </div>\n                    </th>\n                    <th style="padding: 1px">\n                        <div class="prepend-icon col-sm-12">\n                            <input type="text" ng-model="filtro.activoFijo" class="form-control form-white">\n                            <i class="fa fa-filter"></i>\n                        </div>\n                    </th>\n                    <th style="padding: 1px">\n                        <div class="prepend-icon col-sm-12">\n                            <input type="text" ng-model="filtro.codigo" class="form-control form-white">\n                            <i class="fa fa-filter"></i>\n                        </div>\n                    </th>\n                    <th style="padding: 1px">\n                        <div class="prepend-icon col-sm-12">\n                            <input type="text" ng-model="filtro.fechaCompra" class="form-control form-white">\n                            <i class="fa fa-filter"></i>\n                        </div>\n                    </th>\n                    <th style="padding: 1px">\n                        <div class="prepend-icon col-sm-12">\n                            <input type="text" ng-model="filtro.anios" class="form-control form-white">\n                            <i class="fa fa-filter"></i>\n                        </div>\n                    </th>\n                    <th style="padding: 1px">\n                        <div class="prepend-icon col-sm-12">\n                            <input type="text" ng-model="filtro.inicioDep" class="form-control form-white">\n                            <i class="fa fa-filter"></i>\n                        </div>\n                    </th>\n                    <th style="padding: 1px">\n                        <div class="prepend-icon col-sm-12">\n                            <input type="text" ng-model="filtro.documento" class="form-control form-white">\n                            <i class="fa fa-filter"></i>\n                        </div>\n                    </th>\n                    <th></th>\n                </tr>\n                <tr>\n                    <th class="col-xs-3">Clasificacion Activo Fijo</th>                        \n                    <th class="col-xs-2">Descripción</th>\n                    <th class="col-xs-1">Código Int</th>\n                    <th class="col-xs-1">Fecha Compra</th>\n                    <th class="col-xs-1">Meses Vida Util</th>\n                    <th class="col-xs-1">Inicio Depreciacion</th>\n                    <th class="col-xs-2">Documento Asoc.</th>\n                    <th class="col-xs-1">Monto Inicial</th>\n                </tr>\n                <tr ng-repeat="activo in activosFijos | toArray:false  | filter : filtro">\n                    <td style="padding-left:{{  ((activo.nivel-1) * 25)+5 }}px" ng-class="{\'text-primary\' : activo.activos}">\n                        <span ng-show="activo.categoria.length > 45" uib-tooltip-html="\'{{ activo.categoria }}\'">{{ activo.categoria | limitTo:45  }}...</span>\n                        <span ng-show="activo.categoria.length <= 45">{{ activo.categoria }}</span>\n                    </td>\n                    <td>\n                        {{ activo.activoFijo }}\n                    </td>\n                    <td>{{ activo.codigo }}</td>\n                    <td>{{ activo.fechaCompra | date:"MMMM-yyyy" }}</td>\n                    <td>{{ activo.anios }}</td>\n                    <td>\n                        {{ activo.inicioDep | date:"MMMM-yyyy" }} \n                    </td>\n                    <td>{{ activo.documento }}</td>\n                    <td style="text-align: center">\n                        {{ activo.valor | currency:"$":0 }}\n                    </td>\n                </tr>\n            </table>\n        </div>\n    </div>\n</div>\n\n\n\n<script type="text/ng-template" id="myModalFormCopiarActivoFijo.html">\n    <div class="modal-header">\n        <h3 class="modal-title">Copiar Activo Fijo</h3>\n    </div>\n    <div class="modal-body">\n        <form class="form-horizontal" name="form" novalidate >\n            <div class="panel panel-success">\n                <div class="panel-heading">Datos del Activo Fijo</div>\n                <div class="panel-body">\n                    <div class="form-group">\n                        <label class="col-sm-3 control-label" for="nombre">Activo Fijo:</label>\n                        <div class="col-sm-9">\n                            {{ objeto.activo.activoFijo }}\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label class="col-sm-3 control-label" for="nombre">Descripción:</label>\n                        <div class="col-sm-9">\n                            {{ objeto.descripcion }}\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label class="col-sm-3 control-label" for="nombre">Código Int:</label>\n                        <div class="col-sm-9">\n                            {{ objeto.codigo }}\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label class="col-sm-3 control-label" for="nombre">Fecha de Compra:</label>\n                        <div class="col-sm-9">\n                            {{ objeto.fechaCompra | date:"MMMM-yyyy" }}\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label class="col-sm-3 control-label" for="nombre">Meses Vida Util:</label>\n                        <div class="col-sm-9">\n                            {{ objeto.anios }}\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label class="col-sm-3 control-label" for="nombre">Mes Inicio Depreciacion:</label>\n                        <div class="col-sm-9">\n                            {{ objeto.inicioDep | date:"MMMM-yyyy" }}\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label class="col-sm-3 control-label" for="copias">Número de Copias:</label>\n                        <div class="col-sm-2">\n                            <input ype="text"  ng-model="gestion.copias" id="copias" class="form-control form-white" placeholder="N de Copias" ui-number-mask="0" required />                            \n                        </div>\n                    </div>\n                </div>\n            </div>\n        </form>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" ng-click="cancel()">Cancelar</button>\n        <button class="btn btn-primary" ng-disabled="form.$invalid" ng-click="copiar()">Copiar</button>\n    </div>\n</script>\n\n\n\n<script type="text/ng-template" id="customTemplate.html">\n    <a style="cursor: pointer;">\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\n    </a>\n</script>\n\n\n<script type="text/ng-template" id="myModalFormCrearActivoFijo.html">\n    <div class="modal-header">\n        <h3 class="modal-title">Activo Fijo</h3>\n    </div>\n    <div class="modal-body">\n        <form class="form-horizontal" name="form" novalidate >\n            <div class="panel panel-default">\n                <div class="panel-heading">Datos del Activo Fijo</div>\n                <div class="panel-body">\n                    <div class="form-group required">\n                        <label class="col-sm-3 control-label" for="nombre">Activo Fijo:</label>\n                        <div class="col-sm-9">\n                            <div class="col-sm-9" style="padding:0px;" ng-if="!activoFijo.activo.id">\n                                <input type="text" ng-model="activoFijo.activo" placeholder="Buscar Clasificación Activo Fijo" uib-typeahead="act as act.activoFijo for act in getActivosFijosTabla($viewValue)" typeahead-loading="tablaActivoFijo" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-on-select="establecerAnioDep(activoFijo)" typeahead-append-to-body="true" required  />\n                            </div>\n                            <div class="col-sm-3" ng-if="!activoFijo.activo.id">\n                                <i ng-show="tablaActivoFijo" class="glyphicon glyphicon-refresh"></i>\n                                <button class="btn btn-xs btn-primary" ng-click="buscarActivoFijoSII($index)" tooltip="Buscar Activo Fijo en Tabla SII"><i class="fa fa-search"></i></button>\n                            </div>\n                            <div ng-if="activoFijo.activo.id">\n                                {{\n                                    activoFijo.activo.activoFijo\n                                }}\n                                <a href="javascript:void(0);" ng-click="borrarActivoFijo();" class="text-danger">\n                                    <i class="fa fa-remove"></i>\n                                </a><br/>\n                                <span class="text-primary">Vida Util Normal: <strong>{{ activoFijo.activo.vidaUtilNormal }} Años</strong></span><br/>\n                                <span class="text-danger">Depreciación Acelerada: <strong>{{ activoFijo.activo.depreciacionAcelerada }} Años</strong></span>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="form-group required">\n                        <label class="col-sm-3 control-label" for="nombre">Descripción:</label>\n                        <div class="col-sm-8">\n                            <input type="text" ng-model="activoFijo.descripcion" class="form-control form-white" required />\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label class="col-sm-3 control-label" for="nombre">Código Int:</label>\n                        <div class="col-sm-4">\n                            <input type="text" ng-model="activoFijo.codigo" class="form-control form-white" />\n                        </div>\n                    </div>\n\n                    <div class="form-group required">\n                        <label class="col-sm-3 control-label" for="nombre">Fecha de Compra:</label>\n                        <div class="col-sm-3">\n                            <p class="input-group" style="margin:0px; padding:0px;" ng-if="!activoFijo.fechaCompra && !documento.id">\n                                <input type="text"  uib-datepicker-popup="dd-MM-yyyy" name="activoFijoFechaCompra{{ $index }}" ng-model="activoFijo.fechaCompra" is-open="fechas[\'fechaCompra\' + $index ]" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" required/>\n                                <span class="input-group-btn ">\n                                    <button type="button" class="btn btn-primary" ng-click="openFecha(\'fechaCompra\' + $index )"><i class="glyphicon glyphicon-calendar"></i></button>\n                                </span>\n                            </p>\n                            <span ng-if="activoFijo.fechaCompra">\n                                {{ activoFijo.fechaCompra | date:"MMMM-yyyy" }} \n                                <a ng-if="!documento.id" href="javascript:void(0);" ng-click="activoFijo.fechaCompra=\'\'" class="text-danger">\n                                    <i class="fa fa-remove"></i>\n                                </a>\n                            </span>\n                        </div>\n                    </div>\n\n                    <div class="form-group required">\n                        <label class="col-sm-3 control-label" for="nombre">Meses Vida Util:</label>\n                        <div class="col-sm-2">\n                            <input type="text" ng-model="activoFijo.anios" class="form-control form-white" ui-number-mask="0" required />\n                        </div>\n                    </div>\n                    <div class="form-group required">\n                        <label class="col-sm-3 control-label" for="nombre">Valor:</label>\n                        <div class="col-sm-3">\n                            <input type="text" ng-model="activoFijo.valor" class="form-control form-white" ui-money-mask="0" required />\n                        </div>\n                    </div>\n\n                    <div class="form-group required">\n                        <label class="col-sm-3 control-label" for="nombre">Tipo Depreciación:</label>\n                        <div class="col-sm-9">\n                            <label>\n                                <input type="radio" ng-model="activoFijo.tipoDepreciacion" ng-value="1" icheck /> \n                                Normal\n                            </label>\n                            <label>\n                                <input type="radio" ng-model="activoFijo.tipoDepreciacion" ng-value="2" icheck /> \n                                Acelerada\n                            </label>\n                        </div>\n                    </div>\n\n                    <div class="form-group required">\n                        <label class="col-sm-3 control-label" for="nombre">Mes Inicio Depreciacion:</label>\n                        <div class="col-sm-3">\n                            <p class="input-group" style="margin:0px; padding:0px;" ng-if="!activoFijo.inicioDep">\n                                <input type="text"  uib-datepicker-popup="dd-MM-yyyy" name="activoFijoFechaPago{{ $index }}" ng-model="activoFijo.inicioDep" is-open="fechas[\'fechaInicioDep\' + $index ]" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" required/>\n                                <span class="input-group-btn ">\n                                    <button type="button" class="btn btn-primary" ng-click="openFecha(\'fechaInicioDep\' + $index )"><i class="glyphicon glyphicon-calendar"></i></button>\n                                </span>\n                            </p>\n                            <span ng-if="activoFijo.inicioDep">\n                                {{ activoFijo.inicioDep | date:"MMMM-yyyy" }} \n                                <a href="javascript:void(0);" ng-click="activoFijo.inicioDep=\'\'" class="text-danger">\n                                    <i class="fa fa-remove"></i>\n                                </a>\n                            </span>\n                        </div>\n                    </div>\n                    <div class="form-group required">\n                        <label class="col-sm-3 control-label" for="copias">Cuenta Activo Fijo:</label>\n                        <div class="col-sm-9">\n                            <div class="col-sm-9" style="padding:0px;">\n                                <input type="text" ng-model="activoFijo.cuentaActivoFijo" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="cuentaActivoFijo" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required  />\n                            </div>\n                            <div class="col-sm-3">\n                                <i ng-show="cuentaActivoFijo" class="glyphicon glyphicon-refresh"></i>\n                                <i ng-show="activoFijo.cuentaActivoFijo.codigo" class="fa fa-check" style="color: #0a0;"></i>\n                                <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentaActivoFijo\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                            </div>         \n                        </div>\n                    </div>\n                    <div class="form-group required">\n                        <label class="col-sm-3 control-label" for="copias">Cuenta Dep. Acumulada:</label>\n                        <div class="col-sm-9">\n                              <div class="col-sm-9" style="padding:0px;">\n                                <input type="text" ng-model="activoFijo.cuentaDepAcum" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="cuentaDepAcum" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required  />\n                            </div>\n                            <div class="col-sm-3">\n                                <i ng-show="cuentaDepAcum" class="glyphicon glyphicon-refresh"></i>\n                                <i ng-show="activoFijo.cuentaDepAcum.codigo" class="fa fa-check" style="color: #0a0;"></i>\n                                <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentaDepAcum\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="form-group required">\n                        <label class="col-sm-3 control-label" for="copias">Cuenta Dep. del Ejercicio:</label>\n                        <div class="col-sm-9">\n                              <div class="col-sm-9" style="padding:0px;">\n                                <input type="text" ng-model="activoFijo.cuentaDepEjercicio" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="cuentaDepEjercicio" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required  />\n                            </div>\n                            <div class="col-sm-3">\n                                <i ng-show="cuentaDepEjercicio" class="glyphicon glyphicon-refresh"></i>\n                                <i ng-show="activoFijo.cuentaDepEjercicio.codigo" class="fa fa-check" style="color: #0a0;"></i>\n                                <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentaDepEjercicio\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="form-group" ng-if="!editando">\n                        <label class="col-sm-3 control-label" for="copias">Copias Adicionales:</label>\n                        <div class="col-sm-1">\n                            <input ype="text"  ng-model="gestion.copias" id="copias" class="form-control form-white" placeholder="N de Copias" ui-number-mask="0" required />                            \n                        </div>\n                    </div>\n                </div>\n            </div>\n        </form>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" ng-click="cancel()">Cancelar</button>\n        <button class="btn btn-primary" ng-disabled="form.$invalid" ng-click="agregar()" ng-if="!editando">Agregar</button>\n        <button class="btn btn-primary" ng-disabled="form.$invalid" ng-click="actualizar()" ng-if="editando">Actualizar</button>\n    </div>\n</script>'),a.put("views/apertura-cierre-anual.html","<p>This is the apertura-cierre-anual view.</p>"),a.put("views/areas-de-negocio.html",'<div class="header">\n    <h2>Administración de <b>Áreas de Negocio</b></h2>\n</div>\n<!-- /.row -->\n<div class="row">\n    <div class="col-md-12">        \n        <div class="form-group">\n            <label for="orden" class="control-label col-md-1">\n                Ordenar:\n            </label>\n            <div class="col-md-3">\n                <select ng-model="orden" ng-init="orden=\'codigo\'" id="orden" class="form-control form-white">\n                    <option value="codigo">Código</option>\n                    <option value="nombre">Nombre</option>\n                </select>\n            </div>\n            <label for="filtro" class="col-md-1 control-label">Filtrar:</label>\n            <div class="col-md-4">\n              <input id="filtro" type="text" class="form-control form-white" ng-model="filtro">\n            </div>\n            <div class="col-md-3" style="text-align:right; padding-right:0px">\n                <button ng-if="permisos.crear" class="btn btn-primary btn-md" ng-click="open({}, false);">\n                    <i class="fa fa-plus"></i> Nuevo\n                </button>\n\n                <div class="btn-group">\n	            	<button class="btn btn-dark btn-md" type="button" data-toggle="dropdown" aria-expanded="false">\n	                    <i class="fa fa-wrench"></i> Herramientas <span class="caret"></span>\n	                </button>\n	                <ul class="dropdown-menu dropdown-menu-sm" role="menu">\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'areas-negocio/exportar/excel/2007\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 2007 (.xlsx)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'areas-negocio/exportar/excel/97\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 97/2003 (.xls)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'areas-negocio/exportar/pdf\' }}">\n	                            <i class="fa fa-file-pdf-o"></i> Exportar PDF (.pdf)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a href="javascript:void(0);">\n	                            <i class="fa fa-print"></i> Imprimir\n	                        </a>\n	                    </li>\n	                </ul>\n                </div>\n            </div>\n        </div>\n        <div class="form-group">\n            <table class="table table-striped table-hover">\n                <thead>\n                    <tr>\n                        <th>#</th>\n                        <th class="col-sm-2">Código</th>\n                        <th class="col-sm-8">Área de Negocio</th>\n                        <th class="col-sm-2">Acciones</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="dato in datos | orderBy:orden | filter:filtro">\n                        <td>{{ $index + 1 }}</td>\n                        <td>{{ dato.codigo }}</td>\n                        <td>{{ dato.nombre }}</td>\n                        <td>\n                            <a ng-if="permisos.editar" class="btn-acciones btn btn-default" href="javascript:void(0);" ng-click="editar(dato);" uib-tooltip-html="toolTipEdicion(dato.nombre)">\n                                <i class="fa fa-pencil"></i>\n                            </a>\n                            <a ng-if="permisos.eliminar" class="btn-acciones btn btn-danger" href="javascript:void(0);" confirmation-click="eliminar( dato );" confirmation-needed="El Área de Negocio: <b>{{ dato.nombre }}</b> será eliminado.Desea continuar?">\n                                <i class="fa fa-remove"></i>\n                            </a>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>\n\n<script type="text/ng-template" id="myModalFormAreaNegocio.html">\n    <div class="modal-header">\n        <h3 class="modal-title">Administración de Área de Negocio</h3>\n    </div>\n    <div class="modal-body">\n        <form class="form-horizontal" name="form" novalidate >\n            <div class="panel panel-default">\n                <div class="panel-heading">Datos del Área de Negocio</div>\n                <div class="panel-body">\n                    <div class="form-group" ng-class="{\'has-error\' : errores.nombre.length }">\n                        <label class="col-sm-3 control-label" for="nombre">Nombre:</label>\n                        <div class="col-sm-6">\n                            <input type="text" ng-model="objeto.nombre" id="nombre" class="form-control form-white" placeholder="Nombre del Area de Negocio" />\n                        </div>\n                        <span ng-if="errores.nombre.length" class="text-danger">{{ errores.nombre[0] }}</span>\n                    </div>\n                    <div class="form-group" ng-class="{\'has-error\' : errores.codigo.length }">\n                        <label class="col-sm-3 control-label" for="codigo">Código:</label>\n                        <div class="col-sm-3">\n                            <input ype="text"  ng-model="objeto.codigo" id="codigo" class="form-control form-white" placeholder="Codigo" required>                            \n                        </div>\n                        <span ng-if="errores.codigo.length" class="text-danger">{{ errores.codigo[0] }}</span>\n                    </div>\n                </div>\n            </div>\n        </form>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" ng-click="cancel()">Cancelar</button>\n        <button class="btn btn-primary" ng-disabled="form.$invalid" ng-click="guardar()">Guardar</button>\n    </div>\n</script>'),a.put("views/auxiliares.html",'<div class="header">\n    <h2>Administración de <b>Auxiliares</b></h2>\n</div>\n<!-- /.row -->\n<div class="row">\n    <div class="col-md-12">        \n        <div class="form-group">\n            <label for="orden" class="control-label col-md-1">\n                Ordenar:\n            </label>\n            <div class="col-md-3">\n                <select ng-model="orden" ng-init="orden=\'auxiliar\'" id="orden" class="form-control form-white">\n                    <option value="auxiliar">Auxiliar</option>\n                </select>\n            </div>\n            <label for="filtro" class="col-md-1 control-label">Filtrar:</label>\n            <div class="col-md-4">\n              <input id="filtro" type="text" class="form-control form-white" ng-model="filtro">\n            </div>\n            <div class="col-md-3" style="text-right padding-right:0px">            	\n                <button ng-if="permisos.crear" class="btn btn-primary btn-md" ng-click="open({}, false);">\n                    <i class="fa fa-plus"></i> Nuevo\n                </button>\n\n                <div class="btn-group">\n	            	<button class="btn btn-dark btn-md" type="button" data-toggle="dropdown" aria-expanded="false">\n	                    <i class="fa fa-wrench"></i> Herramientas <span class="caret"></span>\n	                </button>\n	                <ul class="dropdown-menu dropdown-menu-sm" role="menu">\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'auxiliares/exportar/excel/2007\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 2007 (.xlsx)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'auxiliares/exportar/excel/97\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 97/2003 (.xls)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'auxiliares/exportar/pdf\' }}">\n	                            <i class="fa fa-file-pdf-o"></i> Exportar PDF (.pdf)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a href="javascript:void(0);">\n	                            <i class="fa fa-print"></i> Imprimir\n	                        </a>\n	                    </li>\n	                </ul>\n                </div>\n            </div>\n        </div>\n        <div class="form-group">\n            <table class="table table-striped table-hover">\n                <thead>\n                    <tr>\n                        <th class="col-sm-2">Código</th>\n                        <th class="col-sm-8">Auxiliar</th>\n                        <th class="col-sm-2">Acciones</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="dato in datos | orderBy:orden | filter:filtro">\n                        <td>{{ dato.codigo }}</td>\n                        <td style="padding-left: {{ (dato.nivel - 1) * 50  }}px" ng-class="{\'text-primary\' : dato.nivel==1}">{{ dato.auxiliar }}</td>\n                        <td>\n                            <a ng-if="permisos.editar && dato.nivel == 1" class="btn-acciones btn btn-default" href="javascript:void(0);" ng-click="editar(dato);" uib-tooltip-html="toolTipEdicion(dato.auxiliar)">\n                                <i class="fa fa-pencil"></i>\n                            </a>\n                            <a ng-if="permisos.eliminar && dato.nivel == 1" class="btn-acciones btn btn-danger" href="javascript:void(0);" confirmation-click="eliminar( dato );" confirmation-needed="El Auxiliar {{ dato.auxiliar }} será eliminado.Desea continuar?">\n                                <i class="fa fa-remove"></i>\n                            </a>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>\n\n<script type="text/ng-template" id="myModalFormAuxiliar.html">\n    <div class="modal-header">\n        <h3 class="modal-title">Administración de Auxiliares</h3>\n    </div>\n    <div class="modal-body">\n        <form class="form-horizontal" name="form" novalidate >\n            <div class="panel panel-default">\n                <div class="panel-heading">Datos del Auxiliar</div>\n                <div class="panel-body">\n\n                    <div class="form-group" ng-class="{\'has-error\' : errores.codigo.length }">\n                        <label class="col-sm-3 control-label" for="codigo">Código Auxiliar:</label>\n                        <div class="col-sm-6">\n                            <input type="text" ng-model="objeto.codigo" id="codigo" class="form-control form-white" placeholder="Codigo del Auxiliar" required />\n                        </div>\n                        <span ng-if="errores.codigo.length" class="text-danger">{{ errores.codigo[0] }}</span>\n                    </div>\n\n                    <div class="form-group" ng-class="{\'has-error\' : errores.auxiliar.length }">\n                        <label class="col-sm-3 control-label" for="auxiliar">Nombre Auxiliar:</label>\n                        <div class="col-sm-6">\n                            <input type="text" ng-model="objeto.auxiliar" id="auxiliar" class="form-control form-white" placeholder="Nombre del Auxiliar" required />\n                        </div>\n                        <span ng-if="errores.auxiliar.length" class="text-danger">{{ errores.auxiliar[0] }}</span>\n                    </div>\n\n                    \n\n                    <div class="form-group" ng-class="{\'has-error\' : errores.auxiliar.length }">\n                        <label class="col-sm-3 control-label" for="auxiliar">Imputación:</label>\n                        <div class="col-sm-9">\n                            <table class="table table-striped">\n                                <tr>\n                                    <td>#</td>\n                                    <th class="col-sm-3">Código</th>\n                                    <th class="col-sm-8">Nombre</th>\n                                    <th class="col-sm-1">&nbsp;</th>\n                                </tr>\n\n                                <tr ng-repeat="imputacion in objeto.imputaciones">\n                                    <td>{{ $index+1 }}</td>\n                                    <td>\n                                        <input type="text" ng-model="imputacion.codigo" class="form-control form-white" />\n                                    </td>\n                                    <td>\n                                        <input type="text" ng-model="imputacion.auxiliar" class="form-control form-white" />\n                                    </td>\n                                    <td>\n                                        <a href="javascript:void(0);" ng-click="quitarImputacion( imputacion )" class="btn btn-sm btn-danger">\n                                            <i class="fa fa-remove"></i>\n                                        </a>\n                                    </td>\n                                </tr>\n                            </table>\n                            <button class="btn btn-success btn-sm" ng-click="agregarImputacion()"><i class="fa fa-plus"></i> Agregar</button>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        </form>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" ng-click="cancel()">Cancelar</button>\n        <button class="btn btn-primary" ng-disabled="form.$invalid" ng-click="guardar()">Guardar</button>\n    </div>\n</script>'),
a.put("views/bancos.html",'<div class="header">\n    <h2>Administración de <b>Bancos</b></h2>\n</div>\n<!-- /.row -->\n<div class="row">\n    <div class="col-md-12">        \n        <div class="form-group">\n            <label for="orden" class="control-label col-md-1">\n                Ordenar:\n            </label>\n            <div class="col-md-3">\n                <select ng-model="orden" ng-init="orden=\'codigo\'" id="orden" class="form-control form-white">\n                    <option value="codigo">Código</option>\n                    <option value="nombre">Nombre</option>\n                </select>\n            </div>\n            <label for="filtro" class="col-md-1 control-label">Filtrar:</label>\n            <div class="col-md-4">\n              <input id="filtro" type="text" class="form-control form-white" ng-model="filtro">\n            </div>\n            <div class="col-md-3" style="text-right padding-right:0px">            	\n                <button ng-if="permisos.crear" class="btn btn-primary btn-md" ng-click="open({}, false);">\n                    <i class="fa fa-plus"></i> Nuevo\n                </button>\n\n                <div class="btn-group">\n	            	<button class="btn btn-dark btn-md" type="button" data-toggle="dropdown" aria-expanded="false">\n	                    <i class="fa fa-wrench"></i> Herramientas <span class="caret"></span>\n	                </button>\n	                <ul class="dropdown-menu dropdown-menu-sm" role="menu">\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'bancos/exportar/excel/2007\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 2007 (.xlsx)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'bancos/exportar/excel/97\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 97/2003 (.xls)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'bancos/exportar/pdf\' }}">\n	                            <i class="fa fa-file-pdf-o"></i> Exportar PDF (.pdf)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a href="javascript:void(0);">\n	                            <i class="fa fa-print"></i> Imprimir\n	                        </a>\n	                    </li>\n	                </ul>\n                </div>\n            </div>\n        </div>\n        <div class="form-group">\n            <table class="table table-striped table-hover">\n                <thead>\n                    <tr>\n                        <th>#</th>\n                        <th class="col-xs-2">Código</th>\n                        <th class="col-xs-8">Banco</th>\n                        <th class="col-xs-2">Acciones</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="dato in datos | orderBy:orden | filter:filtro">\n                        <td>{{ $index + 1 }}</td>\n                        <td>{{ dato.codigo }}</td>\n                        <td>{{ dato.nombre }}</td>\n                        <td>\n                            <a ng-if="permisos.editar" class="btn-acciones btn btn-default" href="javascript:void(0);" ng-click="editar(dato);" uib-tooltip-html="toolTipEdicion(dato.nombre)">\n                                <i class="fa fa-pencil"></i>\n                            </a>\n                            <a ng-if="permisos.eliminar" class="btn-acciones btn btn-danger" href="javascript:void(0);" confirmation-click="eliminar( dato );" confirmation-needed="El Banco {{ dato.nombre }} será eliminado.Desea continuar?">\n                                <i class="fa fa-remove"></i>\n                            </a>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>\n\n<script type="text/ng-template" id="myModalFormBanco.html">\n    <div class="modal-header">\n        <h3 class="modal-title">Administración de Banco</h3>\n    </div>\n    <div class="modal-body">\n        <form class="form-horizontal" name="form" novalidate >\n            <div class="panel panel-default">\n                <div class="panel-heading">Datos del Banco</div>\n                <div class="panel-body">\n                    <div class="form-group" ng-class="{\'has-error\' : errores.nombre.length }">\n                        <label class="col-sm-3 control-label" for="nombre">Nombre:</label>\n                        <div class="col-sm-6">\n                            <input type="text" ng-model="objeto.nombre" id="nombre" class="form-control form-white" placeholder="Nombre del Banco" />\n                        </div>\n                        <span ng-if="errores.nombre.length" class="text-danger">{{ errores.nombre[0] }}</span>\n                    </div>\n                    <div class="form-group" ng-class="{\'has-error\' : errores.codigo.length }">\n                        <label class="col-sm-3 control-label" for="codigo">Código:</label>\n                        <div class="col-sm-3">\n                            <input ype="text"  ng-model="objeto.codigo" id="codigo" class="form-control form-white" placeholder="Codigo" required>                            \n                        </div>\n                        <span ng-if="errores.codigo.length" class="text-danger">{{ errores.codigo[0] }}</span>\n                    </div>\n                </div>\n            </div>\n        </form>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" ng-click="cancel()">Cancelar</button>\n        <button class="btn btn-primary" ng-disabled="form.$invalid" ng-click="guardar()">Guardar</button>\n    </div>\n</script>'),a.put("views/centros-de-costo.html",'<div class="header">\n    <h2>Administración de <b>Centros de Costo</b></h2>\n</div>\n<!-- /.row -->\n<div class="row">\n    <div class="col-md-12">        \n        <div class="form-group">\n            <label for="orden" class="control-label col-md-1">\n                Ordenar:\n            </label>\n            <div class="col-md-3">\n                <select ng-model="orden" ng-init="orden=\'codigo\'" id="orden" class="form-control form-white">\n                    <option value="codigo">Código</option>\n                    <option value="nombre">Nombre</option>\n                </select>\n            </div>\n            <label for="filtro" class="col-md-1 control-label">Filtrar:</label>\n            <div class="col-md-4">\n              <input id="filtro" type="text" class="form-control form-white" ng-model="filtro">\n            </div>\n            <div class="col-md-3" style="text-align:right; padding-right:0px">\n                <button class="btn btn-primary btn-md" ng-click="open({}, false);">\n                    <i class="fa fa-plus"></i> Nuevo\n                </button>\n\n                <div class="btn-group">\n	            	<button class="btn btn-dark btn-md" type="button" data-toggle="dropdown" aria-expanded="false">\n	                    <i class="fa fa-wrench"></i> Herramientas <span class="caret"></span>\n	                </button>\n	                <ul class="dropdown-menu dropdown-menu-sm" role="menu">\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'centros-costos/exportar/excel/2007\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 2007 (.xlsx)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'centros-costos/exportar/excel/97\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 97/2003 (.xls)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'centros-costos/exportar/pdf\' }}">\n	                            <i class="fa fa-file-pdf-o"></i> Exportar PDF (.pdf)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a href="javascript:void(0);">\n	                            <i class="fa fa-print"></i> Imprimir\n	                        </a>\n	                    </li>\n	                </ul>\n                </div>\n            </div>\n        </div>\n        <div class="form-group">\n            <table class="table table-striped table-hover">\n                <thead>\n                    <tr>\n                        <th>#</th>\n                        <th class="col-sm-2">Código</th>\n                        <th class="col-sm-8">Centro de Costo</th>\n                        <th class="col-sm-2">Acciones</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="dato in datos | orderBy:orden | filter:filtro">\n                        <td>{{ $index + 1 }}</td>\n                        <td>{{ dato.codigo }}</td>\n                        <td>{{ dato.nombre }}</td>\n                        <td>\n                            <a class="btn-acciones btn btn-default" href="javascript:void(0);" ng-click="editar(dato);" uib-tooltip-html="toolTipEdicion(dato.nombre)">\n                                <i class="fa fa-pencil"></i>\n                            </a>\n                            <a class="btn-acciones btn btn-danger" href="javascript:void(0);" confirmation-click="eliminar( dato );" confirmation-needed="El Centro de Costos: <b>{{ dato.nombre }}</b> será eliminado.Desea continuar?">\n                                <i class="fa fa-remove"></i>\n                            </a>\n\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>\n\n<script type="text/ng-template" id="myModalFormCentroCosto.html">\n    <div class="modal-header">\n        <h3 class="modal-title">Administración de Centro de Costo</h3>\n    </div>\n    <div class="modal-body">\n        <form class="form-horizontal" name="form" novalidate >\n            <div class="panel panel-default">\n                <div class="panel-heading">Datos del Centro de Costo</div>\n                <div class="panel-body">\n                    <div class="form-group" ng-class="{\'has-error\' : errores.nombre.length }">\n                        <label class="col-sm-3 control-label" for="nombre">Nombre:</label>\n                        <div class="col-sm-6">\n                            <input type="text" ng-model="objeto.nombre" id="nombre" class="form-control form-white" placeholder="Nombre del Centro de Costos" />\n                        </div>\n                        <span ng-if="errores.nombre.length" class="text-danger">{{ errores.nombre[0] }}</span>\n                    </div>\n                    <div class="form-group" ng-class="{\'has-error\' : errores.codigo.length }">\n                        <label class="col-sm-3 control-label" for="codigo">Código:</label>\n                        <div class="col-sm-3">\n                            <input ype="text"  ng-model="objeto.codigo" id="codigo" class="form-control form-white" placeholder="Codigo" required>                            \n                        </div>\n                        <span ng-if="errores.codigo.length" class="text-danger">{{ errores.codigo[0] }}</span>\n                    </div>\n                </div>\n            </div>\n        </form>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" ng-click="cancel()">Cancelar</button>\n        <button class="btn btn-primary" ng-disabled="form.$invalid" ng-click="guardar()">Guardar</button>\n    </div>\n</script>'),a.put("views/clientes-proveedores.html",'<div class="header">\n    <h2>Administración de <b>Clientes / Proveedores</b></h2>\n</div>\n<!-- /.row -->\n<div class="row">\n    <div class="col-md-12" style="mix-height:300px">        \n        <div class="form-group">\n            <label for="orden" class="control-label col-md-1">\n                Ordenar:\n            </label>\n            <div class="col-md-3">\n                <select ng-model="orden" id="orden" ng-init="orden=\'tipo\'" class="form-control form-white">\n                    <option value="tipo">Tipo</option>\n                    <option value="rut">Rut</option>\n                    <option value="razonSocial">Razon Social</option>\n                </select>\n            </div>\n            <label for="filtro" class="col-md-1 control-label">Filtrar:</label>\n            <div class="col-md-4">\n              <input id="filtro" type="text" class="form-control form-white" ng-model="filtro">\n            </div>\n            <div class="col-md-3" style="text-align:right; padding-right:0px">\n                <button ng-if="permisos.crear" class="btn btn-primary btn-md" ng-click="open({});">\n                    <i class="fa fa-plus"></i> Nuevo\n                </button>\n\n                <div class="btn-group">\n	            	<button class="btn btn-dark btn-md" type="button" data-toggle="dropdown" aria-expanded="false">\n	                    <i class="fa fa-wrench"></i> Herramientas <span class="caret"></span>\n	                </button>\n	                <ul class="dropdown-menu dropdown-menu-sm" role="menu">\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'clientes-proveedores/exportar/excel/2007\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 2007 (.xlsx)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'clientes-proveedores/exportar/excel/97\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 97/2003 (.xls)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'clientes-proveedores/exportar/pdf\' }}">\n	                            <i class="fa fa-file-pdf-o"></i> Exportar PDF (.pdf)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a href="javascript:void(0);" ng-click="eliminarClasificacion(dato)">\n	                            <i class="fa fa-print"></i> Imprimir\n	                        </a>\n	                    </li>\n	                </ul>\n                </div>\n            </div>\n        </div>\n        <div class="form-group">\n            <table class="table table-striped table-hover">\n                <thead>\n                <tr>\n                    <th>#</th>\n                    <th class="col-sm-1">Tipo</th>\n                    <th class="col-sm-2">Rut</th>\n                    <th class="col-sm-7">Razon Social</th>\n                    <th class="col-sm-2">Acciones</th>\n                </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="dato in datos | orderBy:orden | filter: filtro">\n                        <td>{{ $index + 1 }}</td>\n                        <td>{{ dato.tipo }}</td>\n                        <td>{{ dato.rut }}</td>\n                        <td>{{ dato.razonSocial }}</td>\n                        <td>\n                        	<a ng-if="permisos.editar" class="btn-acciones btn btn-default" href="javascript:void(0);" ng-click="editar(dato);" uib-tooltip-html="toolTipEdicion(dato.razonSocial)">\n                                <i class="fa fa-pencil"></i>\n                            </a>\n                            <a ng-if="permisos.eliminar" class="btn-acciones btn btn-danger" href="javascript:void(0);" confirmation-click="eliminar( dato );" confirmation-needed="El Cliente/Proveedor: <b>{{ dato.razonSocial }}</b> será eliminado.Desea continuar?">\n                                <i class="fa fa-remove"></i>\n                            </a>\n\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>'),a.put("views/comun/cargando.html","cargando documento"),a.put("views/comun/login.html",'<style type="text/css">\r\n            @CHARSET "UTF-8";\r\n            \r\n            .titulo{\r\n                font-size:18px;\r\n                font-weight: bold;\r\n                font-family: Arial;\r\n                color:#555;\r\n                text-align: center;\r\n            }\r\n            \r\n            /*\r\n            over-ride "Weak" message, show font in dark grey\r\n            */\r\n            \r\n            .progress-bar {\r\n                color: #333;\r\n            } \r\n            \r\n            \r\n            /*\r\n            Reference:\r\n            http://www.bootstrapzen.com/item/135/simple-login-form-logo/\r\n            */\r\n            \r\n            *{\r\n                -webkit-box-sizing: border-box;\r\n        	    -moz-box-sizing: border-box;\r\n   	            box-sizing: border-box;\r\n            	outline: none;\r\n            }\r\n            \r\n            .form-control {\r\n        	  position: relative;\r\n        	  font-size: 16px;\r\n        	  height: auto;\r\n        	  padding: 10px;\r\n        		@include box-sizing(border-box);        \r\n        		&:focus {\r\n        		  z-index: 2;\r\n        		}\r\n        	}\r\n            \r\n            body {\r\n            	background-color: #fff;\r\n                background-image: url(\'images/accesocme.c5ea9165.png?v=20150530\');\r\n                background-position: center center;\r\n                background-repeat: no-repeat;\r\n            }\r\n            \r\n            .login-form {\r\n            	max-width: 300px;\r\n            }\r\n            \r\n            form[role=loginForm] {\r\n            	color: #5d5d5d;\r\n         \r\n            	padding: 26px;\r\n            	border-radius: 10px;\r\n            	-moz-border-radius: 10px;\r\n            	-webkit-border-radius: 10px;\r\n            }\r\n        	form[role=loginForm] img {\r\n        		display: block;\r\n        		margin: 0 auto;\r\n        		margin-bottom: 5px;\r\n        	}\r\n        	form[role=loginForm] input,\r\n        	form[role=loginForm] button {\r\n        		font-size: 14px;\r\n        		margin: 10px 0;\r\n        	}\r\n        	form[role=loginForm] > div {\r\n        		text-align: center;\r\n        	}\r\n            	\r\n            .form-links {\r\n            	text-align: center;\r\n            	margin-top: 1em;\r\n            	margin-bottom: 50px;\r\n            }\r\n        	.form-links a {\r\n        		color: #fff;\r\n        	}\r\n            .capacentrar{\r\n                position: absolute;\r\n                left: 50%;\r\n                top : 50%;\r\n\r\n                width: 480px;\r\n                height: 510px;\r\n            \r\n                text-align: center;\r\n                \r\n                margin-left: -240px;\r\n                margin-top: -250px;\r\n\r\n            }\r\n            button:enabled{\r\n                background: #1a8cff !important;\r\n            }\r\n\r\n        </style>\r\n\r\n\r\n\r\n     \r\n        <div class="capacentrar">\r\n            <center>\r\n                <section class="login-form">                \r\n               \r\n                    <form name="form" role="loginForm">\r\n                        <p>&nbsp;</p>\r\n                        <p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p>\r\n                        <p class="titulo">\r\n                            <small style="font-size:10px;color:#FFF;font-weight:bold">Versión: {{ constantes.version }} {{ constantes.versionFecha }}</small>\r\n                        </p>\r\n                          <input name="username" ng-model="username" placeholder="Nombre de Usuario" required class="form-control form-white input-lg" type="text">\r\n                          <input name="password" ng-model="password" class="form-control form-white input-lg" id="password" placeholder="Contraseña" required type="password">\r\n                          <select ng-model="empresa" class="form-control form-white input-lg" placeholder="Empresa" ng-options="emp as emp.empresa for emp in opciones.empresas">\r\n                              <option value="" disabled selected>Empresa</option>\r\n                          </select>\r\n                          \r\n                          \r\n                          <div ng-show="cargando" value="100" type="primary" class="progress-striped active progress">\r\n  <div style="width: 100%" class="progress-bar progress-bar-primary" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="100%" aria-labelledby="progressbar"></div>\r\n</div>\r\n\r\n                            <button disabled ng-show="!cargando" ng-click="loginBtn();" ng-disabled="form.$invalid || dataLoading" name="go" class="btn btn-lg btn-primary btn-block">Ingresar</button>\r\n                            \r\n                    </form>   \r\n\r\n                </section>  \r\n            </center>\r\n            <a href="http://www.easysystems.cl" target="_black" style="width: 100%"><div style="width: 100% !important">&nbsp;</div></a>\r\n        </div>'),a.put("views/cuentas-ifrs.html",'<div class="header">\n    <h2>Administración de <b>Plan de Cuentas IFRS</b></h2>\n</div>\n<!-- /.row -->\n<script type="text/ng-template" id="customTemplate.html">\n    <a style="cursor: pointer;">\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\n    </a>\n</script>\n\n<div class="row">\n    <div class="col-md-12">        \n        <div class="form-group">\n\n        	<label for="orden" class="control-label col-md-1">\n                Ordenar:\n            </label>\n            <div class="col-md-3">\n                <select ng-model="orden" ng-init="orden=\'codigo\'" id="orden" class="form-control form-white">\n                    <option value="codigo">Código</option>\n                    <option value="nombre">Clasificación/Cuenta</option>\n                </select>\n            </div>\n\n\n            <label for="orden" class="control-label col-md-1">\n                Filtrar:\n            </label>\n            <div class="col-md-3">\n                <input id="filtro" type="text" class="form-control form-white" ng-model="filtro">\n            </div>      \n\n\n            <div class="col-md-4" style="text-align:right; padding-right:0px">\n                <button class="btn btn-success btn-md" ng-click="openClasificacion({}, false);">\n                    <i class="fa fa-plus"></i> Clasificación\n                </button>\n                <button class="btn btn-primary btn-md" ng-click="open({}, false);">\n                    <i class="fa fa-plus"></i> Cuenta\n                </button> \n\n                <div class="btn-group">\n	            	<button class="btn btn-dark btn-md" type="button" data-toggle="dropdown" aria-expanded="false">\n	                    <i class="fa fa-wrench"></i> Herramientas <span class="caret"></span>\n	                </button>\n	                <ul class="dropdown-menu dropdown-menu-sm" role="menu">\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'cuentas-ifrs/exportar/excel/2007\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 2007 (.xlsx)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'cuentas-ifrs/exportar/excel/97\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 97/2003 (.xls)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'cuentas-ifrs/exportar/pdf\' }}">\n	                            <i class="fa fa-file-pdf-o"></i> Exportar PDF (.pdf)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a href="javascript:void(0);">\n	                            <i class="fa fa-print"></i> Imprimir\n	                        </a>\n	                    </li>\n	                </ul>\n                </div>\n            </div>\n        </div>\n        \n        <div class="form-group">\n            <table class="table table-striped table-hover filter-head">\n                <thead>\n                    <tr>\n                        <th class="col-md-1">Código</th>\n                        <th class="col-md-9">Clasificación/Cuenta</th>\n                        <th class="col-md-2">Acciones</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="dato in datos | orderBy:orden | filter:filtro">\n                        <td>{{ dato.codigo }}</td>\n                        <td style="padding-left:{{ (dato.nivel - 1) *15 }}px">\n                            <span ng-if="!dato.cuenta">{{ dato.nombre }}</span>\n                            <span ng-if="dato.cuenta" class="text-primary"><strong>{{ dato.nombre }}</strong></span>\n                        </td>\n                        <td>\n                            <span ng-show="dato.tipo==1">\n	                            <a class="btn-acciones btn btn-default" href="javascript:void(0);" ng-click="editarClasificacion(dato);" uib-tooltip-html="toolTipEdicionClasificacion(dato.nombre)">\n	                                <i class="fa fa-pencil"></i>\n	                            </a>\n	                            <a class="btn-acciones btn btn-success" href="javascript:void(0);" ng-click="agregarClasificacion(dato);" uib-tooltip-html="toolTipAgregarClasificacion(dato.nombre)">\n	                                <i class="fa fa-plus"></i>\n	                            </a>\n	                            <a class="btn-acciones btn btn-primary" href="javascript:void(0);" ng-click="agregarCuenta(dato);" uib-tooltip-html="toolTipAgregarCuenta(dato.nombre)">\n	                                <i class="fa fa-plus"></i>\n	                            </a>\n	                            <a class="btn-acciones btn btn-danger" href="javascript:void(0);" confirmation-click="eliminarClasificacion( dato );" confirmation-needed="La Clasificación de Cuenta: <b>{{ dato.nombre }}</b> y sus Sub Clasificaciones, Cuentas y Sub-Cuentas serán eliminadas.Desea continuar?">\n	                                <i class="fa fa-remove"></i>\n	                            </a>\n                            </span>\n\n\n                            <span ng-show="dato.tipo==2">\n	                            <a class="btn-acciones btn btn-default" href="javascript:void(0);" ng-click="editarCuenta(dato);" uib-tooltip-html="toolTipEdicionCuenta(dato.nombre)">\n	                                <i class="fa fa-pencil"></i>\n	                            </a>\n	                            <a class="btn-acciones btn btn-danger" href="javascript:void(0);" confirmation-click="eliminarCuenta( dato );" confirmation-needed="La Cuenta: <b>{{ dato.nombre }}</b> y sus Sub-Cuentas serán eliminadas.Desea continuar?">\n	                                <i class="fa fa-remove"></i>\n	                            </a>\n                            </span>\n\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>'),a.put("views/cuentas.html",'<div class="header">\n    <h2>Administración de <b>Plan de Cuentas</b></h2>\n</div>\n<!-- /.row -->\n<script type="text/ng-template" id="customTemplate.html">\n    <a style="cursor: pointer;">\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\n    </a>\n</script>\n\n<div class="row">\n    <div class="col-md-12">        \n        <div class="form-group">\n\n        	<label for="orden" class="control-label col-md-1">\n                Ordenar:\n            </label>\n            <div class="col-md-3">\n                <select ng-model="orden" ng-init="orden=\'codigo\'" id="orden" class="form-control form-white">\n                    <option value="codigo">Código</option>\n                    <option value="nombre">Clasificación/Cuenta</option>\n                </select>\n            </div>\n\n\n            <label for="orden" class="control-label col-md-1">\n                Filtrar:\n            </label>\n            <div class="col-md-3">\n                <input id="filtro" type="text" class="form-control form-white" ng-model="filtro">\n            </div>      \n\n\n            <div class="col-md-4" style="text-align:right; padding-right:0px">\n                <button class="btn btn-success btn-md" ng-click="openClasificacion({}, false);">\n                    <i class="fa fa-plus"></i> Clasificación\n                </button>\n                <button class="btn btn-primary btn-md" ng-click="open({}, false);">\n                    <i class="fa fa-plus"></i> Cuenta\n                </button> \n\n                <div class="btn-group">\n	            	<button class="btn btn-dark btn-md" type="button" data-toggle="dropdown" aria-expanded="false">\n	                    <i class="fa fa-wrench"></i> Herramientas <span class="caret"></span>\n	                </button>\n	                <ul class="dropdown-menu dropdown-menu-sm" role="menu">\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'cuentas/exportar/excel/2007\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 2007 (.xlsx)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'cuentas/exportar/excel/97\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 97/2003 (.xls)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'cuentas/exportar/pdf\' }}">\n	                            <i class="fa fa-file-pdf-o"></i> Exportar PDF (.pdf)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a href="javascript:void(0);" ng-click="eliminarClasificacion(dato)">\n	                            <i class="fa fa-print"></i> Imprimir\n	                        </a>\n	                    </li>\n	                </ul>\n                </div>\n            </div>\n        </div>\n        \n        <div class="form-group">\n            <table class="table table-striped table-hover filter-head">\n                <thead>\n                    <tr>\n                        <th class="col-md-1">Código</th>\n                        <th class="col-md-3">Clasificación/Cuenta</th>\n                        <th class="col-md-2">Cta SII Asociada</th>\n                        <th class="col-md-2">Recuadro F22 Asociada</th>\n                        <th class="col-md-2">Cta IFRS Asociada</th>\n                        <th class="col-md-2">Acciones</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="dato in datos | orderBy:orden | filter:filtro">\n                        <td>{{ dato.codigo }}</td>\n                        <td style="padding-left:{{ (dato.nivel - 1) *15 }}px">\n                            <span ng-show="!dato.cuenta">{{ dato.nombre }}</span>\n                            <span ng-show="dato.cuenta" class="text-primary"><strong>{{ dato.nombre }}</strong></span>\n                        </td>\n                        <td>\n                            <div ng-show="dato.tipo==3 && dato.cuentaSii.cuenta">\n                                {{ dato.cuentaSii.cuenta }}\n                            </div>                          \n                        </td>\n                        <td>\n                            <div ng-show="dato.tipo==3 && dato.cuentaRecuadroF22.codigo">\n                                {{ \'(\' + dato.cuentaRecuadroF22.codigo + \') \' + dato.cuentaRecuadroF22.recuadro }} \n                            </div>  \n                        </td>\n                        <td>\n                            <div ng-show="dato.tipo==3 && dato.cuentaIfrs.cuenta">\n                                {{ dato.cuentaIfrs.cuenta }} \n                            </div>  \n                        </td>\n                        <td>\n                            <span ng-show="dato.tipo==1">\n	                            <a class="btn-acciones btn btn-default" href="javascript:void(0);" ng-click="editarClasificacion(dato);" uib-tooltip-html="toolTipEdicionClasificacion(dato.nombre)">\n	                                <i class="fa fa-pencil"></i>\n	                            </a>\n	                            <a class="btn-acciones btn btn-success" href="javascript:void(0);" ng-click="agregarClasificacion(dato);" uib-tooltip-html="toolTipAgregarClasificacion(dato.nombre)">\n	                                <i class="fa fa-plus"></i>\n	                            </a>\n	                            <a class="btn-acciones btn btn-primary" href="javascript:void(0);" ng-click="agregarCuenta(dato);" uib-tooltip-html="toolTipAgregarCuenta(dato.nombre)">\n	                                <i class="fa fa-plus"></i>\n	                            </a>\n	                            <a class="btn-acciones btn btn-danger" href="javascript:void(0);" confirmation-click="eliminarClasificacion( dato );" confirmation-needed="La Clasificación de Cuenta: <b>{{ dato.nombre }}</b> y sus Sub Clasificaciones, Cuentas y Sub-Cuentas serán eliminadas.Desea continuar?">\n	                                <i class="fa fa-remove"></i>\n	                            </a>\n                            </span>\n\n                            <span ng-show="dato.tipo==2">\n	                            <a class="btn-acciones btn btn-default" href="javascript:void(0);" ng-click="editarCuenta(dato);" uib-tooltip-html="toolTipEdicionCuenta(dato.nombre)">\n	                                <i class="fa fa-pencil"></i>\n	                            </a>\n	                            <a class="btn-acciones btn btn-danger" href="javascript:void(0);" confirmation-click="eliminarCuenta( dato );" confirmation-needed="La Cuenta: <b>{{ dato.nombre }}</b> y sus Sub-Cuentas serán eliminadas.Desea continuar?">\n	                                <i class="fa fa-remove"></i>\n	                            </a>\n                            </span>\n\n                            <span ng-show="dato.tipo==3">\n                                <a class="btn btn-dark" href="javascript:void(0);" ng-click="asociarCuenta(dato);">\n                                    <i class="fa fa-globe"></i> Asociar\n                                </a>\n                            </span>\n\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>\n\n\n\n<script type="text/ng-template" id="myModalAsociarCuenta.html">\n    <div class="modal-header">\n        <h3 class="modal-title">Administración de Plan de Cuentas</h3>\n    </div>\n    <div class="modal-body">\n        <form class="form-horizontal" name="form" novalidate >\n            <div class="panel panel-default">\n                <div class="panel-heading">Asociar Cuenta</div>\n                <div class="panel-body">\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Cuenta:</label>\n                        <div class="col-sm-3">\n                             {{ dato.nombre }}\n                        </div>\n                    </div>\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Cta SII Asociada:</label>\n                        <div class="col-sm-7" style="padding:0px;" ng-if="!dato.cuentaSiiSave">\n                            <input type="text" ng-model="dato.cuentaSii" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentasSii($viewValue)" typeahead-loading="cuentaSII" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-on-select="grabarCuentaSii(dato)" typeahead-append-to-body="true" required  />\n                        </div>\n                        <div class="col-sm-2" ng-if="!dato.cuentaSiiSave">\n                            <i ng-show="cuentaSII" class="glyphicon glyphicon-refresh"></i>\n                            <i ng-show="dato.cuentaSii.codigo" class="fa fa-check" style="color: #0a0;"></i>\n                            <button class="btn btn-sm btn-primary" style="margin:0px;" ng-click="buscarCuentaSii(dato)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                            <img src="images/cargando.37ead0fc.gif" ng-show="dato.cargando" />\n                        </div>\n                        <div ng-show="dato.cuentaSii.id && dato.cuentaSiiSave" class="col-sm-8">\n                            {{ dato.cuentaSii.cuenta }} \n                            <a href="javascript:void(0);" class="text-danger" ng-click="removerCuentaSII(dato)">\n                                <i class="fa fa-remove"></i>\n                            </a>\n                            <img src="images/cargando.37ead0fc.gif" ng-show="dato.cargando" />\n                        </div>\n                    </div>\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Recuadro F22 Asociada:</label>\n                        <div class="col-sm-7" style="padding:0px;" ng-if="!dato.cuentaRecuadroF22Save">\n                            <input type="text" ng-model="dato.cuentaRecuadroF22" placeholder="Buscar Codigo Recuadro N°2 F22" uib-typeahead="cuenta as \'(\'+ cuenta.codigo + \')\' + cuenta.recuadro for cuenta in getCodigosRecuadroF22($viewValue)" typeahead-loading="estadosRecuadroF22" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-on-select="grabarCuentaRecuadroF22(dato)" typeahead-append-to-body="true" required  />\n                        </div>\n                        <div class="col-sm-2" ng-if="!dato.cuentaRecuadroF22Save">\n                            <i ng-show="estadosRecuadroF22" class="glyphicon glyphicon-refresh"></i>\n                            <i ng-show="dato.cuentaRecuadroF22.codigo" class="fa fa-check" style="color: #0a0;"></i>\n                            <button class="btn btn-sm btn-primary" style="margin:0px;" ng-click="buscarCuentaRecuadroF22(dato)" tooltip="Buscar Codigo Formulario F22"><i class="fa fa-search"></i></button>\n                            <img src="images/cargando.37ead0fc.gif" ng-show="dato.cargandoRecuadroF22" />\n                        </div>\n\n                        <div ng-show="dato.cuentaRecuadroF22.id && dato.cuentaRecuadroF22Save" class="col-sm-8">\n                            {{ \'(\' + dato.cuentaRecuadroF22.codigo + \') \' + dato.cuentaRecuadroF22.recuadro }} \n                            <a href="javascript:void(0);" class="text-danger" ng-click="removerCuentaRecuadroF22(dato)">\n                                <i class="fa fa-remove"></i>\n                            </a>\n                            <img src="images/cargando.37ead0fc.gif" ng-show="dato.cargandoRecuadroF22" />\n                        </div>\n\n                    </div>\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Cta IFRS Asociada:</label>\n                        <div class="col-sm-7" style="padding:0px;" ng-if="!dato.cuentaIfrsSave">\n                            <input type="text" ng-model="dato.cuentaIfrs" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentasIFRS($viewValue)" typeahead-loading="estadosIFRS" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-on-select="grabarCuentaIfrs(dato)" typeahead-append-to-body="true" required  />\n                        </div>\n                        <div class="col-sm-2" ng-if="!dato.cuentaIfrsSave">\n                            <i ng-show="estadosIFRS" class="glyphicon glyphicon-refresh"></i>\n                            <i ng-show="dato.cuentaIfrs.codigo" class="fa fa-check" style="color: #0a0;"></i>\n                            <button class="btn btn-sm btn-primary" style="margin:0px;" ng-click="buscarCuentaIfrs(dato)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                            <img src="images/cargando.37ead0fc.gif" ng-show="dato.cargandoIFRS" />\n                        </div>\n                        <div ng-show="dato.cuentaIfrsSave && dato.cuentaIfrs.id" class="col-sm-8">\n                            {{ dato.cuentaIfrs.cuenta }} \n                            <a href="javascript:void(0);" class="text-danger" ng-click="removerCuentaIFRS(dato)">\n                                <i class="fa fa-remove"></i>\n                            </a>\n                            <img src="images/cargando.37ead0fc.gif" ng-show="dato.cargandoIFRS" />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </form>\n    </div>\n    <div class="modal-footer">        \n        <button class="btn btn-default" ng-click="cancel()">Cerrar</button>\n    </div>\n</script>'),
a.put("views/departamentos.html",'<div class="header">\n    <h2>Administración de <b>Departamentos</b></h2>\n</div>\n<!-- /.row -->\n<div class="row">\n    <div class="col-md-12">\n        <div class="form-group">\n            \n            <label for="orden" class="control-label col-md-1">\n                Ordenar por:\n            </label>\n            <div class="col-md-3">\n                <select ng-model="orden" ng-init="orden=\'tipo\'" id="orden" class="form-control form-white">\n                    <option value="tipo">Tipo</option>\n                    <option value="codigo">Codigo</option>\n                    <option value="departamento">Departamento</option>\n                    <option value="institucion">Dependencia</option>\n                </select>\n            </div>\n        \n            <label for="filtro" class="col-md-1 control-label">Filtrar:</label>\n            <div class="col-md-4">\n              <input id="filtro" type="text" class="form-control form-white" ng-model="filtro">\n            </div>\n            \n            <div class="col-md-3" style="text-align:right; padding-right:0px">\n                <button class="btn btn-primary btn-md" ng-click="open({});">\n                    <i class="fa fa-plus"></i> Nuevo\n                </button>\n\n                <div class="btn-group">\n	            	<button class="btn btn-dark btn-md" type="button" data-toggle="dropdown" aria-expanded="false">\n	                    <i class="fa fa-wrench"></i> Herramientas <span class="caret"></span>\n	                </button>\n	                <ul class="dropdown-menu dropdown-menu-sm" role="menu">\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'cuentas/exportar/excel/2007\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 2007 (.xlsx)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'cuentas/exportar/excel/97\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 97/2003 (.xls)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'cuentas/exportar/pdf\' }}">\n	                            <i class="fa fa-file-pdf-o"></i> Exportar PDF (.pdf)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a href="javascript:void(0);" ng-click="eliminarClasificacion(dato)">\n	                            <i class="fa fa-print"></i> Imprimir\n	                        </a>\n	                    </li>\n	                </ul>\n                </div>\n            </div>\n        </div>\n\n        <div class="form-group">\n\n	        <table class="table table-striped table-hover">\n	            <thead>\n	                <tr>\n	                    <th>#</th>\n	                    <th class="col-sm-1">Tipo</th>\n	                    <th class="col-sm-2">Codigo</th>\n	                    <th class="col-sm-4">Departamento</th>\n	                    <th class="col-sm-3">Dependencia</th>\n	                    <th class="col-sm-2">Acciones</th>\n	                </tr>\n	            </thead>\n	            <tbody>\n	                <tr ng-repeat="dato in datos | orderBy:orden">\n	                    <td>{{ $index + 1 }}</td>\n	                    <td>{{ dato.tipo }}</td>\n	                    <td>{{ dato.codigo }}</td>\n	                    <td>{{ dato.departamento }}</td>\n	                    <td>{{ dato.institucion }}</td>\n	                    <td>\n	                        <a class="btn-acciones btn btn-default" href="javascript:void(0);" ng-click="editar(dato)" uib-tooltip-html="toolTipEdicion(dato.departamento)">\n	                            <i class="fa fa-pencil"></i>\n	                        </a>\n	                        <a class="btn-acciones btn btn-danger" href="javascript:void(0);" confirmation-click="eliminar(dato)" confirmation-needed="El Departamento será eliminado.Desea continuar?">\n	                            <i class="fa fa-remove"></i>\n	                        </a>\n\n	                    </td>\n	                </tr>\n	            </tbody>\n	        </table>\n        </div>\n    </div>\n</div>\n\n<script type="text/ng-template" id="myModalContent.html">\n    <div class="modal-header">\n        <h3 class="modal-title">Administración de Departamentos</h3>\n    </div>\n    <div class="modal-body">\n        <form class="form-horizontal" name="form" novalidate >\n            <div class="panel panel-default">\n                <div class="panel-heading">Datos del Departamento</div>\n                <div class="panel-body">\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Tipo:</label>\n                        <div class="col-sm-3">\n                            <select class="form-control form-white" name="tipo" ng-model="objeto.tipo" placeholder="Tipo" ng-options="tipo as tipo.value for tipo in opciones.tipos" required ></select>\n                        </div>\n                    </div>\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Departamento:</label>\n                        <div class="col-sm-5">\n                            <input class="form-control form-white" type="text"  ng-model="objeto.departamento" placeholder="Departamento" required>\n                        </div>\n                    </div>\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Dependencia:</label>\n                        <div class="col-sm-5">\n                            <select class="form-control form-white" ng-model="objeto.dependencia" placeholder="Dependencia" ng-options="dependencia as dependencia.departamento group by dependencia.institucion for dependencia in opciones.dependencias"></select>\n                        </div>\n                    </div>\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Codigo:</label>\n                        <div class="col-sm-5">\n                            <input class="form-control form-white" type="text"  ng-model="objeto.codigo" placeholder="Codigo" required>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </form>\n    </div>\n    <div class="modal-footer">        \n        <button class="btn btn-default" ng-click="cancel()">Cancelar</button>\n        <button class="btn btn-primary" ng-disabled="form.$invalid" ng-click="guardar()">Guardar</button>\n    </div>\n</script>'),a.put("views/deposito-pagos-clientes.html",'<div class="header">\n    <h2>Registro de <b>Depósitos - Pago Clientes</b></h2>\n</div>\n<script type="text/ng-template" id="customTemplate.html">\n    <a style="cursor: pointer;">\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\n    </a>\n</script>\n<div class="row">\n    <div class="col-md-12">     \n        <div class="row col-md-12">\n            <form class="form-horizontal" name="form" novalidate autocomplete="Off">\n                \n                <div class="panel panel-primary" ng-if="mostrarBuscador">\n                    <div class="panel-heading">\n                        Parámetros de Busqueda de Cheques / Vale Vista\n                    </div>\n                    <div class="panel-body">\n                        <div class="form-group">\n                            <label class="col-sm-3 control-label">Cliente:</label>\n                            <div class="col-sm-6">\n                                <input type="text" ng-show="!objeto.cliente.id" ng-model="objeto.cliente" placeholder="Buscar Cliente" uib-typeahead="prov as prov.razonSocial for prov in getProveedores($viewValue)" typeahead-loading="cliente" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" ng-class="{\'inputLoading\' : cliente}">\n                                <b ng-show="objeto.cliente.id">\n                                    {{ objeto.cliente.razonSocial }}\n                                    <a href="javascript:void(0);" class="text-danger" ng-click="objeto.cliente=\'\';">\n                                        <i class="fa fa-remove"></i>\n                                    </a>\n                                </b>\n                            </div>\n                            <div class="col-sm-3">\n                                * Dejar en blanco para buscar todos\n                            </div>                            \n                        </div>\n\n                        <div class="form-group">\n                            <label class="col-sm-3 control-label">Número Cheque/Vale Vista:</label>\n                            <div class="col-sm-2">\n                                 <input class="form-control form-white" type="text" ng-model="objeto.numero" ui-number-mask="0"> \n                            </div>\n                            <div class="col-sm-7">\n                                * Dejar en blanco para buscar todos\n                            </div> \n                        </div>\n\n                        <div class="form-group">\n                            <label class="col-sm-3 control-label">Banco Cheque/Vale Vista:</label>\n                            <div class="col-sm-4">\n                                 <select class="form-control form-white" ng-model="objeto.banco" ng-options="ban as ban.banco for ban in opciones.bancos">\n                                 	<option value="">Todos</option>\n                                 </select> \n                            </div>\n                        </div>\n\n\n                        <div class="form-group">\n                            <label class="col-sm-3 control-label">Establecer Periodo:</label>\n                            <div class="col-sm-5">\n                            	<label>\n                                    <input type="radio" ng-model="objeto.fechas" ng-value="0" icheck>\n                                    Todos\n                                </label>\n                                <label>\n                                    <input type="radio" ng-model="objeto.fechas" ng-value="1" icheck>\n                                    Fecha\n                                </label>&nbsp;&nbsp;&nbsp;&nbsp;\n                                <label>\n                                    <input type="radio" ng-model="objeto.fechas" ng-value="2" icheck>\n                                    Rango Fechas\n                                </label>&nbsp;&nbsp;&nbsp;&nbsp;\n                                <label>\n                                    <input type="radio" ng-model="objeto.fechas" ng-value="3" icheck>\n                                    Mes\n                                </label>&nbsp;&nbsp;&nbsp;&nbsp;\n                                <label>\n                                    <input type="radio" ng-model="objeto.fechas" ng-value="4" icheck>\n                                    Rango Meses\n                                </label>                                \n                            </div>\n                        </div>\n                        \n\n                        <div class="form-group required" ng-if="objeto.fechas == 1">\n                            <label class="col-sm-3 control-label">Fecha:</label>\n                            <div class="col-sm-2">\n                                <p class="input-group" style="margin-bottom:0px">\n                                  <input type="text" name="fecha" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.fecha" is-open="fechas.fecha" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" regular-fecha required>\n                                  <span class="input-group-btn">\n                                    <button type="button" class="btn btn-primary" ng-click="open(\'fecha\')" style="margin-bottom:0px"><i class="glyphicon glyphicon-calendar"></i></button>\n                                  </span>\n                                </p>\n\n                            </div>\n                            <div class="col-sm-5 text-danger" ng-show="form[\'fecha\'].$error.date">\n                                Fecha no Válida\n                            </div>\n                        </div>\n\n\n\n                        <div class="form-group required" ng-if="objeto.fechas == 2">\n                            <label class="col-sm-3 control-label">Fecha Inicial:</label>\n                            <div class="col-sm-2">\n                                <p class="input-group" style="margin:0px; padding:0px">\n                                  <input type="text" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.inicio" is-open="fechas.fechaInicial" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" regular-fecha required>\n                                  <span class="input-group-btn">\n                                    <button type="button" class="btn btn-primary" ng-click="open(\'fechaInicial\')"><i class="glyphicon glyphicon-calendar"></i></button>\n                                  </span>\n                                </p>\n                            </div>\n                        </div>\n                        <div class="form-group required" ng-if="objeto.fechas == 2">\n                            <label class="col-sm-3 control-label">Fecha Final:</label>\n                            <div class="col-sm-2">\n                                <p class="input-group" style="margin:0px; padding:0px">\n                                  <input type="text" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.fin" is-open="fechas.fechaFinal" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" regular-fecha required>\n                                  <span class="input-group-btn">\n                                    <button type="button" class="btn btn-primary" ng-click="open(\'fechaFinal\')"><i class="glyphicon glyphicon-calendar"></i></button>\n                                  </span>\n                                </p>\n                            </div>\n                        </div>\n\n                        <div class="form-group required" ng-if="objeto.fechas == 3">\n                            <label class="col-sm-3 control-label">Mes:</label>\n                            <div class="col-sm-2">\n                                <select ng-model="objeto.mes" ng-options="mes as mes.mes for mes in constantes.MESES | filter:filtroMesFinal" class="form-control form-white" required>\n                                </select>\n                            </div>\n                            <div class="col-sm-1">\n                                <select ng-model="objeto.anio" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\n                                </select>\n                            </div>\n                        </div>\n\n                        <div class="form-group required" ng-if="objeto.fechas == 4">\n                            <label class="col-sm-3 control-label">Mes Inicial:</label>\n                            <div class="col-sm-2">\n                                <select ng-model="objeto.mesInicial" ng-options="mes as mes.mes for mes in constantes.MESES" class="form-control form-white" required>\n                                </select>\n                            </div>\n                            <div class="col-sm-1">\n                                <select ng-model="objeto.anioInicial" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\n                                </select>\n                            </div>\n                        </div>\n\n                        <div class="form-group required" ng-if="objeto.fechas == 4">\n                            <label class="col-sm-3 control-label">Mes Final:</label>\n                            <div class="col-sm-2">\n                                <select ng-model="objeto.mesFinal" ng-options="mes as mes.mes for mes in constantes.MESES | filter:filtroMesFinal" class="form-control form-white" required>\n                                </select>\n                            </div>\n                            <div class="col-sm-1">\n                                <select ng-model="objeto.anioFinal" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\n                                </select>\n                            </div>\n                        </div>\n\n                        <div class="form-group">\n                            <div class="col-sm-12" style="text-align:right">\n                                <button class="btn btn-default btn-md" ng-click="limpiarFormulario();">\n                                    <i class="fa fa-trash-o"></i> Limpiar\n                                </button>\n                                <button class="btn btn-primary btn-md" ng-click="buscarDocumentos();">\n                                    <i class="fa fa-search"></i> Buscar\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div ng-if="sinResultados">\n                    <div class="col-sm-12 text-danger" style="text-align: center">\n                        <big class="label label-danger" style="font-size: 15px">\n                        No se encontraron resultados con los parámetros ingresados.</big>\n\n                        <button ng-show="!mostrarBuscador" class="btn btn-default" ng-click="nuevaBusqueda();">\n                            <i class="fa fa-search"></i>\n                            Nueva Búsqueda\n                        </button>\n\n                    </div>\n                </div>\n\n                <div class="panel panel-success" ng-if="resultado.length > 0">\n                    <div class="panel-heading">\n                        <div class="row" style="margin: 0px">\n                            <div class="col-sm-8" style="margin: 0px; padding: 0px">Resultado de la Búsqueda</div>\n                            <div class="col-sm-4" style="margin: 0px; padding: 0px; text-align: right">\n                                <button class="btn btn-success btn-sm" ng-click="nuevaBusqueda();" style="margin-bottom: 0px">\n                                    <i class="fa fa-search"></i>\n                                    Nueva Búsqueda\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="panel-body">\n                        <span onclick="bajar()" class="ir-abajo icon-arrow-down"></span>\n                        <span onclick="subir()" class="ir-arriba icon-arrow-up"></span>\n\n                        <table class="table table-striped table-hover">\n                            <thead>\n                            <tr>\n                                <th>&nbsp;</th>\n\n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.rut" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.razonSocial" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n\n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.banco" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.fecha" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.numero" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                \n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.total" class="form-control form-white" ui-money-mask="0" ng-change="revisarFiltro(\'total\');">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th>\n                                    &nbsp;\n                                </th>\n                            </tr>\n                            <tr>\n                                <th>#</th>\n                                <th class="col-sm-1">Rut</th>\n                                <th class="col-sm-2">Razón Social</th>   \n                                <th class="col-sm-2">Banco</th>\n                                <th class="col-sm-1">Fecha</th>                                \n                                <th class="col-sm-1">Numero</th>                                                             \n                                <th class="col-sm-2">Monto</th>\n                                \n                                <th class="col-sm-2">Destino Depósito</th>\n                                <th class="col-sm-1" style="text-align: center">Seleccionar\n                                	<input type="checkbox" ng-model="sel.seleccionar" ng-change="marcarTodos();" icheck>\n                                </th>\n                            </tr>\n                            </thead>\n                            <tbody>\n                                <tr ng-repeat="dato in resultado | filter:filtro">\n                                    <td>{{ $index + 1 }}</td>\n                                    <td>{{ dato.rut }}</td>\n                                    <td>{{ dato.razonSocial }}</td>\n                                    <td>{{ dato.banco }}</td>\n                                    <td>{{ dato.fecha | date:\'dd-MM-yyyy\' }}</td>                                    \n                                    <td>{{ dato.numero }}</td>                                                                        \n                                    <td>{{ dato.total  | currency:"$":0  }}</td>\n                                    \n                                    <td>\n                                    	<div ng-show="!dato.cuentaDeposito.id">\n	                                        <select ng-model="dato.cuentaDeposito" class="form-control form-white" ng-options="cta as cta.cuenta for cta in cuentasDeposito" ng-change="calcularResumenes();">\n	                                        	<option value=""></option>\n	                                        </select>\n                                        </div>\n                                        <div ng-show="dato.cuentaDeposito.id">\n                                        	{{ dato.cuentaDeposito.codigo }} | {{ dato.cuentaDeposito.cuenta }}\n                                        	<a href="javascript:void(0);" ng-click="dato.cuentaDeposito=\'\'; calcularResumenes();" class="text-danger">\n                                        		<i class="fa fa-remove"></i>\n                                        	</a>\n                                        </div>\n                                    </td>\n                                    <td style="text-align: center">\n                                    	<input type="checkbox" ng-model="dato.seleccionar" icheck>\n                                    </td>\n                                </tr>\n                              \n                            </tbody>\n                        </table>\n                        <div class="row">\n	                        <div class="col-sm-12">\n	                        	<div class="form-group bg-warning">\n	                        		<label class="col-sm-3" style="text-align: right; padding-top: 7px">Para los Documentos seleccionados:</label>\n	                        		<div class="col-sm-3">\n	                    				<select ng-model="sel.cuentaDeposito" class="form-control form-white" ng-options="cta as cta.cuenta for cta in cuentasDeposito">\n	                                    	<option value=""></option>\n	                                    </select>\n	                        		</div>\n	                        		<div class="col-sm-1" style="padding-top: 4px">\n	                        			<button class="btn btn-warning btn-sm" ng-click="asignarDestinoSeleccion();" style="margin-bottom: 0px">\n	                        				Asignar Destino\n	                        			</button>\n	                        		</div>\n	                        	</div>\n	                        </div>\n                        </div>\n                        <div class="col-sm-12" ng-show="mostrarResumen">	  \n                        	<div class="col-sm-5">                      \n	                        	Resumen de Depósitos a Registrar\n	                        	<table class="table table-striped table-bordered">\n	                        		<tr>\n	                        			<th class="col-sm-8">Destino</th>\n	                        			<th class="col-sm-2">Documentos</th>\n	                        			<th class="col-sm-2">Monto</th>\n	                        		</tr>\n	                        		<tr ng-repeat="resumen in resumenes">\n	                        			<td>{{ resumen.destino }}</td>\n	                        			<td style="text-align: right">{{ resumen.documentos }}</td>\n	                        			<td style="text-align: right">{{ resumen.monto | currency:"$":0 }}</td>\n	                        		</tr>\n	                        	</table>\n                        	</div>	                        \n                        </div>\n\n                        <div class="col-sm-12">\n                        	&nbsp;\n                        </div>\n                        \n                        <button class="btn btn-default" ng-click="nuevaBusqueda();">\n                            <i class="fa fa-search"></i>\n                            Nueva Búsqueda\n                        </button>\n\n                        <button class="btn btn-primary" ng-show="mostrarResumen" ng-click="openGestionPago()" id="scrollToHere">\n                            <i class="fa fa-wrench"></i> Registrar Depósito\n                        </button>\n\n                    </div>\n                </div>\n\n            </form>\n        </div>\n    </div>\n</div>\n<script type="text/javascript">\n    function bajar(){\n        $(\'html,body\').animate({\n            scrollTop: $("#scrollToHere").offset().top\n        }, 500);\n    }\n\n    function subir(){\n        $(\'html,body\').animate({\n            scrollTop: \'0px\'\n        }, 500);\n    }\n\n    $(window).scroll(function () {\n        if ($(this).scrollTop() > 200) {\n            $(\'.ir-arriba\').fadeIn();\n        }\n        else {\n            $(\'.ir-arriba\').fadeOut();\n        }\n\n        if ($(this).scrollTop() < $(document).height()-$(window).height() ) {\n            $(\'.ir-abajo\').fadeIn();\n        }\n        else {\n            $(\'.ir-abajo\').fadeOut();\n        }\n    });\n    $(\'.ir-arriba\').fadeOut();\n</script>'),a.put("views/documentos-directos.html",'<p>This is the documentos-directos view.</p>\n<div class="header">\n    <h2>Documentos <b>Directos</b></h2>\n</div>\n\n<script type="text/ng-template" id="customTemplate.html">\n    <a style="cursor: pointer;">\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\n    </a>\n</script>\n\n\n<div class="row" ng-if="!mostrarForm">\n    <div class="col-md-12">        \n        <div class="form-group">\n            <label for="orden" class="control-label col-md-1">\n                Ordenar:\n            </label>\n            <div class="col-md-3">\n                <select ng-model="orden" id="orden" ng-init="orden=\'rut\'" class="form-control form-white">\n                    <option value="rut">Rut</option>\n                </select>\n            </div>\n            <label for="filtro" class="col-md-1 control-label">Filtrar:</label>\n            <div class="col-md-4">\n              <input id="filtro" type="text" class="form-control form-white form-white" ng-model="filtroIndex">\n            </div>\n            <div class="col-md-3" style="text-align:right; padding-right:0px">\n                <button class="btn btn-primary btn-md" ng-click="gestionarArchivo({});">\n                    <i class="fa fa-plus"></i> Nuevo\n                </button>\n\n                <div class="btn-group">\n	            	<button class="btn btn-dark btn-md" type="button" data-toggle="dropdown" aria-expanded="false">\n	                    <i class="fa fa-wrench"></i> Herramientas <span class="caret"></span>\n	                </button>\n	                <ul class="dropdown-menu dropdown-menu-sm" role="menu">\n	                    <li>\n	                        <a href="javascript:void(0)" ng-click="gestionarArchivo()">\n	                            <i class="fa fa-file-excel-o"></i> Importar Documentos (.csv)\n	                        </a>\n	                    </li>\n	                </ul>\n                </div>\n            </div>\n        </div>\n        <div class="form-group">\n            <table class="table table-striped table-hover">\n                <thead>\n                <tr>\n                    <th>#</th>\n                    <th class="col-sm-2">Tipo Documento</th>\n                    <th class="col-sm-2">Operación</th>\n                    <th class="col-sm-2">Número</th>\n                    <th class="col-sm-4">Cliente / Proveedor</th>\n                    <th class="col-sm-2">Fecha</th>                    \n                    <th class="col-sm-2">Acciones</th>\n                </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="dato in datos | orderBy:orden | filter: filtroIndex">\n                        <td>{{ $index + 1 }}</td>\n                        <td>{{ dato.archivo }}</td>\n                        <td>{{ dato.responsable }}</td>\n                        <td>{{ dato.fechaImportacion }}</td>\n                        <td>{{ dato.documentos }}</td>\n                        <td>\n                            <a class="btn-acciones btn btn-default" href="javascript:void(0);" ng-click="gestionarLibro(dato);" uib-tooltip-html="toolTipEdicion(dato.archivo)">\n                                <i class="fa fa-pencil"></i>\n                            </a>\n                            <a class="btn-acciones btn btn-danger" href="javascript:void(0);" confirmation-click="eliminar( dato );" confirmation-needed="El Libro de Compra: <b>{{ dato.archivo }}</b> será eliminado.Desea continuar?">\n                                <i class="fa fa-remove"></i>\n                            </a>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>\n\n\n\n\n\n<div class="row" ng-if="mostrarForm">\n    <form class="form-horizontal" name="form" novalidate autocomplete="Off">\n        <div class="col-md-12">\n            <div class="panel panel-default">\n                <div class="panel-heading">Datos del Libro</div>\n                <div class="panel-body">\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Tipo de Operación:</label>\n                        <div class="col-sm-5">\n                            <label>\n                                <input type="checkbox" ng-model="objeto.tipoOperacion" ng-value="1"> \n                                Compra\n                            </label>&nbsp;&nbsp;&nbsp;&nbsp;\n                            <label>\n                                <input type="checkbox" ng-model="objeto.tipoOperacion" ng-value="2"> \n                                Venta\n                            </label>\n                        </div>\n                    </div>\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Archivo:</label>\n                        <div class="col-sm-9">\n                            <button ng-show="!objeto.archivo && !archivo.mostrar" type="button" ngf-select ng-model="archivo.file" class="btn btn-xs btn-warning" subir-archivo modelo-file="archivo.file" modelo="archivo" modelo-destino="objeto.archivo" nombre-archivo="archivo">\n                                Seleccionar\n                            </button>\n                            <uib-progressbar ng-show="archivo.mostrar" class="progress-striped active" value="archivo.porc" type="success"><strong>{{ archivo.porc + "%" }}</strong></uib-progressbar>\n                            <span ng-if="objeto.archivo && !archivo.loading" class="text-success">\n                                <strong>\n                                    {{ objeto.archivo }}\n                                </strong>\n                            </span>\n                            <img ng-if="archivo.loading" src="images/cargando.37ead0fc.gif" style="height: 20px">\n                        </div>\n                    </div>\n\n                    <div ng-if="objeto.archivo">\n                       \n                        <div class="form-group form-group-md">\n                            <label class="col-sm-3 control-label" for="formGroupInputLarge">Periodo Tributario:</label>\n                            <div class="col-sm-3">\n                                \n                            </div>\n                        </div>\n\n                        <div class="form-group form-group-md">\n                            <label class="col-sm-3 control-label" for="formGroupInputLarge">Tipo de Operación:</label>\n                            <div class="col-sm-5">\n                                {{ objeto.tipoOperacion }}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="panel panel-default" ng-if="objeto.archivo">\n                <div class="panel-heading">Resumen del Periodo</div>\n                <div class="panel-body">\n                    <div class="form-group form-group-md">\n                        <table class="table table-striped">\n                            <tr>\n                                <th class="col-xs-1">Tipo Documento</th>                            \n                                <th>Total Documentos</th>\n                                <th ng-if="vistaColumnas.TotMntExe">Total Monto Exento</th>\n                                <th ng-if="vistaColumnas.TotMntNeto">Total Monto Neto</th>\n                                <th ng-if="vistaColumnas.TotOpIVARec">OPERACIONES CON IVA RECUPERABLE</th>\n                                <th ng-if="vistaColumnas.TotMntIVA">TOTAL MONTO IVA (recuperable)</th>\n\n                                <th ng-if="vistaColumnas.TotOpActivoFijo">OPERACIONES ACTIVO FIJO</th>\n                                <th ng-if="vistaColumnas.TotMntActivoFijo">MONTO NETO ACTIVO FIJO</th>\n                                <th ng-if="vistaColumnas.TotMntIVAActivoFijo">TOTAL MONTO IVA ACTIVO FIJO</th>\n                                <th ng-if="vistaColumnas.TotIVANoRec">IVA no recuperable</th>\n\n                                <th ng-if="vistaColumnas.TotOpIVAUsoComun">OPERACIONES CON IVA USO COMUN</th>\n                                <th ng-if="vistaColumnas.TotIVAUsoComun">IVA USO COMUN</th>\n                                <th ng-if="vistaColumnas.TotOtrosImp">Impuesto o recargo</th>\n                                <th ng-if="vistaColumnas.TotImpSinCredito">Impuesto sin Derecho a crédito</th>\n                                <th ng-if="vistaColumnas.TotMntTotal">TOTAL MONTO TOTAL</th>          \n\n                                <th ng-if="vistaColumnas.TotIVANoRetenido">IVA no retenido</th>          \n                                <th ng-if="vistaColumnas.TotTabPuros">TABACOS MANUFACTURADOS (Cigarros puros)</th> \n                                <th ng-if="vistaColumnas.TotTabCigarrillos">TABACOS MANUFACTURADOS (Cigarrillos)</th> \n                                <th ng-if="vistaColumnas.TotTabElaborado">TABACOS MANUFACTURADOS (Tabaco elaborado)</th>\n                                <th ng-if="vistaColumnas.TotImpVehiculo">Impuesto a Los Vehículos Automóviles</th>\n                            </tr>\n\n                            <tr ng-repeat="total in objeto.resumen.totales.TotalesPeriodo">\n                                <td>{{ total.TpoDoc }}</td>                            \n                                <td>{{ total.TotDoc }}</td>\n                                <td ng-if="vistaColumnas.TotMntExe">{{ total.TotMntExe | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotMntNeto">{{ total.TotMntNeto | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotOpIVARec">{{ total.TotOpIVARec }}</td>\n                                <td ng-if="vistaColumnas.TotMntIVA">{{ total.TotMntIVA | currency:"$":0 }}</td>\n\n\n                                <td ng-if="vistaColumnas.TotOpActivoFijo">{{ total.TotOpActivoFijo | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotMntActivoFijo">{{ total.TotMntActivoFijo | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotMntIVAActivoFijo">{{ total.TotMntIVAActivoFijo | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotIVANoRec">{{ total.TotIVANoRec.TotMntIVANoRec | currency:"$":0 }}</td>\n\n\n                                <td ng-if="vistaColumnas.TotOpIVAUsoComun">{{ total.TotOpIVAUsoComun }}</td>\n                                <td ng-if="vistaColumnas.TotIVAUsoComun">{{ total.TotIVAUsoComun | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotOtrosImp">{{ total.TotOtrosImp.TotMntImp | currency:"$":0 }}</td>                            \n                                <td ng-if="vistaColumnas.TotImpSinCredito">{{ total.TotImpSinCredito | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotMntTotal">{{ total.TotMntTotal | currency:"$":0 }}</td>\n\n                                <td ng-if="vistaColumnas.TotIVANoRetenido">{{ total.TotIVANoRetenido | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotTabPuros">{{ total.TotTabPuros | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotTabCigarrillos">{{ total.TotTabCigarrillos | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotTabElaborado">{{ total.TotTabElaborado | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotImpVehiculo">{{ total.TotImpVehiculo | currency:"$":0 }}</td>\n                            </tr>\n                        </table>\n                    </div>\n                </div>\n            </div>\n\n            <div class="panel panel-default" ng-if="objeto.archivo">\n                <div class="panel-heading">Detalle del Libro</div>\n                <div class="panel-body">\n                    <div class="table-responsive">\n                        <table class="table table-striped table-bordered">\n                            <tr>\n                                <th></th>\n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.TpoDoc" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.NroDoc" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                          \n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.FchDoc" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.RUTDoc" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.RznSoc" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotMntExe">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.MntExe" ng-change="revisarFiltro(\'MntExe\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotMntNeto">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.MntNeto" ng-change="revisarFiltro(\'MntNeto\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotMntIVA">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.MntIVA" ng-change="revisarFiltro(\'MntIVA\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotMntActivoFijo">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.MntActivoFijo" ng-change="revisarFiltro(\'MntActivoFijo\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotMntIVAActivoFijo">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.MntIVAActivoFijo" ng-change="revisarFiltro(\'MntIVAActivoFijo\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotIVANoRec">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.IVANoRec" ng-change="revisarFiltro(\'IVANoRec\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotCredIVAUsoComun">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.IVAUsoComun" ng-change="revisarFiltro(\'IVAUsoComun\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotOtrosImp">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.OtrosImp" ng-change="revisarFiltro(\'OtrosImp\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotImpSinCredito">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.MntSinCred" ng-change="revisarFiltro(\'MntSinCred\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotMntTotal">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.MntTotal" ng-change="revisarFiltro(\'MntTotal\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotIVANoRetenido">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.IVANoRetenido" ng-change="revisarFiltro(\'IVANoRetenido\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotTabPuros">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.TabPuros" ng-change="revisarFiltro(\'TabPuros\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotTabCigarrillos">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.TabCigarrillos" ng-change="revisarFiltro(\'TabCigarrillos\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotTabElaborado">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.TabElaborado" ng-change="revisarFiltro(\'TabElaborado\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotImpVehiculo">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.ImpVehiculo" ng-change="revisarFiltro(\'ImpVehiculo\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                            </tr>\n                            <tr class="bg-success">\n                                <th>#</th>\n                                <th>Tipo Dcto</th>\n                                <th>N° Dcto</th>\n                                <th>Fecha Dcto</th>\n                                <th>Rut</th>\n                                <th>Razón Social</th>\n                                <th ng-if="vistaColumnas.TotMntExe">Monto Exento\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaMntExe\', \'MntExe\', \'Monto Exento\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n                                <th ng-if="vistaColumnas.TotMntNeto">\n                                    Monto Neto\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaMntNeto\', \'MntNeto\', \'Monto Neto\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n                                <th ng-if="vistaColumnas.TotMntIVA">\n                                    Monto IVA\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaMntIVA\', \'MntIVA\', \'Monto IVA\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>       \n                                <th ng-if="vistaColumnas.TotMntActivoFijo">\n                                    Monto Activo Fijo\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaMntActivoFijo\', \'MntActivoFijo\', \'Monto Activo Fijo\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>   \n                                <th ng-if="vistaColumnas.TotMntIVAActivoFijo">\n                                    IVA Activo Fijo\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaMntIVAActivoFijo\', \'MntIVAActivoFijo\', \'IVA Activo Fijo\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>   \n                                <th ng-if="vistaColumnas.TotIVANoRec">\n                                    IVA No Recuperable\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaIVANoRec\', \'IVANoRec\', \'IVA No Recuperable\')">\n                                        Cta Masiva\n                                    </button>\n                                </th> \n                                <th ng-if="vistaColumnas.TotIVAUsoComun">\n                                    IVA USO COMUN\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaIVAUsoComun\', \'IVAUsoComun\', \'IVA USO COMUN\')">\n                                        Cta Masiva\n                                    </button>\n                                </th> \n                                <th ng-if="vistaColumnas.TotOtrosImp">\n                                    Otros Imp.\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaOtrosImp\', \'OtrosImp\', \'Otros Imp.\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n                                <th ng-if="vistaColumnas.TotMntSinCred">\n                                    Monto Sin Credito\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva( \'cuentaMntSinCred\' , \'MntSinCred\', \'Monto Sin Credito\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n                                <th ng-if="vistaColumnas.TotMntTotal">\n                                    Monto Total\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaMntTotal\', \'MntTotal\', \'Monto Total\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n\n\n                                <th ng-if="vistaColumnas.TotIVANoRetenido">\n                                    IVA no retenido\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaIVANoRetenido\', \'IVANoRetenido\', \'IVA no retenido\')">\n                                        Cta Masiva\n                                    </button>\n                                </th> \n\n                                <th ng-if="vistaColumnas.TotTabPuros">\n                                    TABACOS (Cigarros puros)\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaTabPuros\', \'TabPuros\', \'TABACOS (Cigarros puros)\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n                                \n                                <th ng-if="vistaColumnas.TotTabCigarrillos">\n                                    TABACOS (Cigarrillos)\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaTabCigarrillos\', \'TabCigarrillos\', \'TABACOS (Cigarrillos)\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n\n                                <th ng-if="vistaColumnas.TotTabElaborado">\n                                    TABACOS (Tabaco elaborado)\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaTabElaborado\', \'TabElaborado\', \'TABACOS (Tabaco elaborado)\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n                                <th ng-if="vistaColumnas.TotImpVehiculo">\n                                    Impuesto a Los Vehículos Automóviles\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaImpVehiculo\', \'ImpVehiculo\', \'Impuesto a Los Vehículos Automóviles\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n\n                            </tr>\n                            <tr ng-repeat="detalle in ( filtros.itemsFiltrados = ( objeto.detalle | filter : filtro ) )">\n                                <td>{{ $index + 1 }}</td>\n                                <td>{{ \'(\'+detalle.TpoDoc+\') \'+detalle.NombreDoc }}</td>\n                                <td>{{ detalle.NroDoc }}</td>                        \n                                <td>{{ detalle.FchDoc | date : "dd-MM-yyyy" }}</td>\n                                <td>{{ detalle.RUTDoc }}</td>\n                                <td>{{ detalle.RznSoc }}</td>\n                                <td ng-if="vistaColumnas.TotMntExe" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.MntExe}">\n                                    {{ detalle.MntExe ? detalle.MntExe : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.MntExe > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaMntExe">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaMntExe" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosMntNeto[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaMntExe\', \'MntExe\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosMntNeto[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaMntExe.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaMntExe\', \'MntExe\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaMntExe.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaMntExe.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaMntExe=\'\'; detalle.configuracion.MntExe=\'\';" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.MntExe.label }}\n                                            <a ng-if="detalle.cuentaMntExe.parametros.length > 0 && !detalle.configuracion.MntExe.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaMntExe.parametros, detalle.cuentaMntExe.id, \'MntExe\', detalle.MntExe);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.MntExe, \'btn-warning\' : !detalle.configuracion.MntExe }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>\n                                <td ng-if="vistaColumnas.TotMntNeto" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.MntNeto}">\n                                    {{ detalle.MntNeto? detalle.MntNeto : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.MntNeto > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaMntNeto">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaMntNeto" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosMntNeto[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaMntNeto\', \'MntNeto\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosMntNeto[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaMntNeto.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaMntNeto\', \'MntNeto\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaMntNeto.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaMntNeto.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaMntNeto = \'\'; detalle.configuracion.MntNeto=\'\';" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.MntNeto.label }}\n                                            <a ng-if="detalle.cuentaMntNeto.parametros.length > 0 && !detalle.configuracion.MntNeto.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaMntNeto.parametros, detalle.cuentaMntNeto.id, \'MntNeto\', detalle.MntNeto);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.MntNeto, \'btn-warning\' : !detalle.configuracion.MntNeto }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>\n                                <td ng-if="vistaColumnas.TotMntIVA" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.MntIVA}">\n                                    {{ detalle.MntIVA? detalle.MntIVA : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.MntIVA > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaMntIVA">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaMntIVA" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosMntIVA[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaMntIVA\', \'MntIVA\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosMntIVA[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaMntIVA.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaMntIVA\', \'MntIVA\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaMntIVA.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaMntIVA.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaMntIVA = \'\'; detalle.configuracion.MntIVA=\'\';" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.MntIVA.label }}\n                                            <a ng-if="detalle.cuentaMntIVA.parametros.length > 0 && !detalle.configuracion.MntIVA.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaMntIVA.parametros, detalle.cuentaMntIVA.id, \'MntIVA\', detalle.MntIVA);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.MntIVA, \'btn-warning\' : !detalle.configuracion.MntIVA }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>   \n                                <td ng-if="vistaColumnas.TotMntActivoFijo" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.MntActivoFijo}">\n                                    {{ detalle.MntActivoFijo? detalle.MntActivoFijo : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.MntActivoFijo > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaMntActivoFijo">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaMntActivoFijo" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosMntActivoFijo[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaMntActivoFijo\', \'MntActivoFijo\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosMntActivoFijo[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaMntActivoFijo.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaMntActivoFijo\', \'MntActivoFijo\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaMntActivoFijo.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaMntActivoFijo.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaMntActivoFijo = \'\'; detalle.configuracion.MntActivoFijo=\'\';" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.MntActivoFijo.label }}\n                                            <a ng-if="detalle.cuentaMntActivoFijo.parametros.length > 0 && !detalle.configuracion.MntActivoFijo.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaMntActivoFijo.parametros, detalle.cuentaMntActivoFijo.id, \'MntActivoFijo\', detalle.MntActivoFijo);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.MntActivoFijo, \'btn-warning\' : !detalle.configuracion.MntActivoFijo }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>\n                                <td ng-if="vistaColumnas.TotMntIVAActivoFijo" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.MntIVAActivoFijo}">\n                                    {{ detalle.MntIVAActivoFijo? detalle.MntIVAActivoFijo : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.MntIVAActivoFijo > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaMntIVAActivoFijo">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaMntIVAActivoFijo" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosMntIVAActivoFijo[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaMntIVAActivoFijo\', \'MntIVAActivoFijo\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosMntIVAActivoFijo[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaMntIVAActivoFijo.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaMntIVAActivoFijo\', \'MntIVAActivoFijo\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaMntIVAActivoFijo.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaMntIVAActivoFijo.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaMntIVAActivoFijo = \'\'; detalle.configuracion.MntIVAActivoFijo=\'\';" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.MntIVAActivoFijo.label }}\n                                            <a ng-if="detalle.cuentaMntIVAActivoFijo.parametros.length > 0 && !detalle.configuracion.MntIVAActivoFijo.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaMntIVAActivoFijo.parametros, detalle.cuentaMntIVAActivoFijo.id, \'MntIVAActivoFijo\', detalle.MntIVAActivoFijo);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.MntIVAActivoFijo, \'btn-warning\' : !detalle.configuracion.MntIVAActivoFijo }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>\n                                <td ng-if="vistaColumnas.TotIVANoRec" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.IVANoRec}">\n                                    {{ detalle.IVANoRec? detalle.IVANoRec : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.IVANoRec > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaIVANoRec">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaIVANoRec" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosIVANoRec[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaIVANoRec\', \'IVANoRec\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosIVANoRec[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaIVANoRec.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaIVANoRec\', \'IVANoRec\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaIVANoRec.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaIVANoRec.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaIVANoRec = \'\'; detalle.configuracion.IVANoRec=\'\';" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.IVANoRec.label }}\n                                            <a ng-if="detalle.cuentaIVANoRec.parametros.length > 0 && !detalle.configuracion.IVANoRec.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaIVANoRec.parametros, detalle.cuentaIVANoRec.id, \'IVANoRec\', detalle.IVANoRec);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.IVANoRec, \'btn-warning\' : !detalle.configuracion.IVANoRec }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>   \n                                <td ng-if="vistaColumnas.TotIVAUsoComun" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.IVAUsoComun}">\n                                    {{ detalle.IVAUsoComun? detalle.IVAUsoComun : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.IVAUsoComun > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaIVAUsoComun">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaIVAUsoComun" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosIVAUsoComun[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaIVAUsoComun\', \'IVAUsoComun\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosIVAUsoComun[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaIVAUsoComun.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaIVAUsoComun\', \'IVAUsoComun\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaIVAUsoComun.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaIVAUsoComun.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaIVAUsoComun = \'\'; detalle.configuracion.IVAUsoComun=\'\';" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.IVAUsoComun.label }}\n                                            <a ng-if="detalle.cuentaIVAUsoComun.parametros.length > 0 && !detalle.configuracion.IVAUsoComun.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaIVAUsoComun.parametros, detalle.cuentaIVAUsoComun.id, \'IVAUsoComun\', detalle.IVAUsoComun);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.IVAUsoComun, \'btn-warning\' : !detalle.configuracion.IVAUsoComun }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>   \n                                <td ng-if="vistaColumnas.TotOtrosImp" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.OtrosImp}">\n                                    {{ detalle.OtrosImp? detalle.OtrosImp : 0 | currency:"$":0  }}\n                                    <div ng-if="detalle.OtrosImp > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaOtrosImp">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaOtrosImp" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosOtrosImp[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaOtrosImp\', \'OtrosImp\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosOtrosImp[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaOtrosImp.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaOtrosImp\', \'OtrosImp\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaOtrosImp.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaOtrosImp.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaOtrosImp = \'\'; detalle.configuracion.OtrosImp=\'\';" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.OtrosImp.label }}\n                                            <a ng-if="detalle.cuentaOtrosImp.parametros.length > 0 && !detalle.configuracion.OtrosImp.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaOtrosImp.parametros, detalle.cuentaOtrosImp.id, \'OtrosImp\', detalle.OtrosImp);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.OtrosImp, \'btn-warning\' : !detalle.configuracion.OtrosImp }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>\n                                <td ng-if="vistaColumnas.TotMntSinCred" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.MntSinCred}">\n                                    {{ detalle.MntSinCred? detalle.MntSinCred : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.MntSinCred > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaMntSinCred">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaMntSinCred" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosMntSinCred[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaMntSinCred\', \'MntSinCred\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosMntSinCred[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaMntSinCred.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaMntSinCred\', \'MntSinCred\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaMntSinCred.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaMntSinCred.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaMntSinCred = \'\'; detalle.configuracion.MntSinCred=\'\';" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.MntSinCred.label }}\n                                            <a ng-if="detalle.cuentaMntSinCred.parametros.length > 0 && !detalle.configuracion.MntSinCred.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaMntSinCred.parametros, detalle.cuentaMntSinCred.id, \'MntSinCred\', detalle.MntSinCred);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.MntSinCred, \'btn-warning\' : !detalle.configuracion.MntSinCred }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>\n                                <td ng-if="vistaColumnas.TotMntTotal" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.MntTotal}">\n                                    {{ detalle.MntTotal? detalle.MntTotal : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.MntTotal > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaMntTotal">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaMntTotal" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosMntTotal[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaMntTotal\', \'MntTotal\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosMntTotal[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaMntTotal.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaMntTotal\', \'MntTotal\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaMntTotal.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaMntTotal.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaMntTotal = \'\'; detalle.configuracion.MntTotal=\'\'; " class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.MntTotal.label }}\n                                            <a ng-if="detalle.cuentaMntTotal.parametros.length > 0 && !detalle.configuracion.MntTotal.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaMntTotal.parametros, detalle.cuentaMntTotal.id, \'MntTotal\', detalle.MntTotal);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.MntTotal.label, \'btn-warning\' : !detalle.configuracion.MntTotal.label }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>\n                                <td ng-if="vistaColumnas.TotIVANoRetenido" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.IVANoRetenido}">\n                                    {{ detalle.IVANoRetenido? detalle.IVANoRetenido : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.IVANoRetenido > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaIVANoRetenido">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaIVANoRetenido" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosIVANoRetenido[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaIVANoRetenido\', \'IVANoRetenido\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosIVANoRetenido[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaIVANoRetenido.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaIVANoRetenido\', \'IVANoRetenido\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaIVANoRetenido.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaIVANoRetenido.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaIVANoRetenido = \'\'; detalle.configuracion.IVANoRetenido=\'\';" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.IVANoRetenido.label }}\n                                            <a ng-if="detalle.cuentaIVANoRetenido.parametros.length > 0 && !detalle.configuracion.IVANoRetenido.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaIVANoRetenido.parametros, detalle.cuentaIVANoRetenido.id, \'IVANoRetenido\', detalle.IVANoRetenido);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.IVANoRetenido, \'btn-warning\' : !detalle.configuracion.IVANoRetenido }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>   \n                                <td ng-if="vistaColumnas.TotTabPuros" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.TabPuros}">\n                                    {{ detalle.TabPuros? detalle.TabPuros : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.TabPuros > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaTabPuros">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaTabPuros" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosTabPuros[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaTabPuros\', \'TabPuros\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosTabPuros[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaTabPuros.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaTabPuros\', \'TabPuros\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaTabPuros.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaTabPuros.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaTabPuros = \'\'; detalle.configuracion.TabPuros=\'\';" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.TabPuros.label }}\n                                            <a ng-if="detalle.cuentaTabPuros.parametros.length > 0 && !detalle.configuracion.TabPuros.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaTabPuros.parametros, detalle.cuentaTabPuros.id, \'TabPuros\', detalle.TabPuros);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.TabPuros, \'btn-warning\' : !detalle.configuracion.TabPuros }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>   \n                                <td ng-if="vistaColumnas.TotTabCigarrillos" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.TabCigarrillos}">\n                                    {{ detalle.TabCigarrillos? detalle.TabCigarrillos : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.TabCigarrillos > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaTabCigarrillos">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaTabCigarrillos" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosTabCigarrillos[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaTabCigarrillos\', \'TabCigarrillos\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosTabCigarrillos[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaTabCigarrillos.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaTabCigarrillos\', \'TabCigarrillos\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaTabCigarrillos.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaTabCigarrillos.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaTabCigarrillos = \'\'; detalle.configuracion.TabCigarrillos=\'\';" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.TabCigarrillos.label }}\n                                            <a ng-if="detalle.cuentaTabCigarrillos.parametros.length > 0 && !detalle.configuracion.TabCigarrillos.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaTabCigarrillos.parametros, detalle.cuentaTabCigarrillos.id, \'TabCigarrillos\', detalle.TabCigarrillos);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.TabCigarrillos, \'btn-warning\' : !detalle.configuracion.TabCigarrillos }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td> \n                                <td ng-if="vistaColumnas.TotTabElaborado" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.TabElaborado}">\n                                    {{ detalle.TabElaborado? detalle.TabElaborado : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.TabElaborado > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaTabElaborado">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaTabElaborado" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosTabElaborado[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaTabElaborado\', \'TabElaborado\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosTabElaborado[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaTabElaborado.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaTabElaborado\', \'TabElaborado\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaTabElaborado.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaTabElaborado.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaTabElaborado = \'\'; detalle.configuracion.TabElaborado=\'\';" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.TabElaborado.label }}\n                                            <a ng-if="detalle.cuentaTabElaborado.parametros.length > 0 && !detalle.configuracion.TabElaborado.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaTabElaborado.parametros, detalle.cuentaTabElaborado.id, \'TabElaborado\', detalle.TabElaborado);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.TabElaborado, \'btn-warning\' : !detalle.configuracion.TabElaborado }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>   \n\n\n\n\n                                <td ng-if="vistaColumnas.TotImpVehiculo" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.ImpVehiculo}">\n                                    {{ detalle.ImpVehiculo? detalle.ImpVehiculo : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.ImpVehiculo > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaImpVehiculo">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaImpVehiculo" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosImpVehiculo[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaImpVehiculo\', \'ImpVehiculo\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosImpVehiculo[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaImpVehiculo.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaImpVehiculo\', \'ImpVehiculo\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaImpVehiculo.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaImpVehiculo.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaImpVehiculo = \'\'; detalle.configuracion.ImpVehiculo=\'\';" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.ImpVehiculo.label }}\n                                            <a ng-if="detalle.cuentaImpVehiculo.parametros.length > 0 && !detalle.configuracion.ImpVehiculo.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaImpVehiculo.parametros, detalle.cuentaImpVehiculo.id, \'ImpVehiculo\', detalle.ImpVehiculo);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.ImpVehiculo, \'btn-warning\' : !detalle.configuracion.ImpVehiculo }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>   \n                            </tr>\n                        </table>\n                    </div>\n                </div>\n            </div>\n\n            <div class="panel panel-default" ng-if="objeto.archivo">\n                <div class="panel-heading">Resumenes de Cuentas Asignadas</div>\n                <div class="panel-body">\n                    <div class="col-sm-5">\n                        <table class="table table-striped">\n                            <tr>\n                                <th>#</th>\n                                <th class="col-sm-8">Cuenta</th>\n                                <th class="col-sm-4">Monto</th>\n                            </tr>\n                            <tr ng-repeat="cuenta in resumenes.resumentesPorCuenta">\n                                <td>{{ $index + 1 }}</td>\n                                <td>{{ cuenta.cuenta }}</td>\n                                <td class="text-right">{{ cuenta.total | currency:"$":0 }}</td>\n                            </tr>\n                        </table>\n                    </div>\n                </div>\n            </div>\n\n            <div class="panel panel-primary" ng-if="objeto.archivo">\n                <div class="panel-heading">Generación de Comprobante Contable</div>\n                <div class="panel-body">\n                 \n                    <div class="form-group">\n                        <label class="label-control col-sm-3">Fecha de Comprobante:</label>\n                        <div class="col-sm-2">\n                            <p class="input-group" style="margin-bottom:0px !important">\n                                <input type="text" name="fecha" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.comprobante.fecha" is-open="fechas.fecha" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" ng-change="revisarFecha()" class="form-control form-white" required>\n                                <span class="input-group-btn">\n                                    <button type="button" class="btn btn-primary" ng-click="open($event)" style="margin-bottom:0px !important"><i class="glyphicon glyphicon-calendar"></i></button>\n                                </span>\n                            </p>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n\n            <div class="panel panel-danger" ng-if="errores.length > 0">\n                <div class="panel-heading">Errores Detectados</div>\n                <div class="panel-body">\n                    <table class="table">\n                        <tr>\n                            <th>#</th>\n                            <th class="col-sm-6">Error</th>\n                            <th class="col-sm-2">Tipo de Documento</th>\n                            <th class="col-sm-2">Documento N°</th>\n                            <th class="col-sm-2">Columna</th>\n                        </tr>\n                        <tr ng-repeat="error in errores">\n                            <th>{{ $index + 1 }}</th>\n                            <th>{{ error.error }}</th>\n                            <th>{{ error.tipoDocumento }}</th>\n                            <th>{{ error.documento }}</th>\n                            <th>{{ error.columna }}</th>\n                        </tr>\n                    </table>\n                </div>\n            </div>\n\n        </div>\n        <div class="col-sm-12">\n            <button class="btn btn-default" ng-click="volverIndex()">Cancelar</button>\n\n            <button class="btn btn-primary" ng-disabled="form.$invalid" ng-click="guardar()" ng-if="objeto.archivo">Validar Guardar</button>\n\n            <button class="btn btn-primary" ng-disabled="form.$invalid" ng-click="generarComprobante()" ng-if="objeto.archivo">Generar Comprobante</button>\n\n            <button class="btn btn-success" ng-if="objeto.comprobanteId" abrir-ventana="{{ constantes.URL+\'contabilidad-registro-asientos/imprimir-asiento/\' + objeto.comprobanteId}}" ventana-nombre="IMPRIMIRASIENTOCONTABLE" ventana-ancho="750" ventana-alto="600">Ver Comprobante</button>\n        </div>\n    </form>\n</div>'),
a.put("views/empresas.html",'<div class="header">\n    <h2>Administración de <b>Empresas</b> <span style="font-size:18px; font-weight: bold; color:#0a0 !important" class="text-success">(Max: {{ globals.currentUser.max }} )</span></h2>\n</div>\n<!-- /.row -->\n<div class="row">\n    <div class="col-md-12">        \n        <div class="form-group">\n            <label for="orden" class="control-label col-md-1">\n                Ordenar:\n            </label>\n            <div class="col-md-3">\n                <select ng-model="orden" ng-init="orden=\'codigo\'" id="orden" class="form-control form-white form-white">\n                    <option value="rut">Rut</option>\n                    <option value="razonSocial">Razon Social</option>\n                    <option value="nombreFantasia">Nombre de Fantasía</option>\n                </select>\n            </div>\n            <label for="filtro" class="col-md-1 control-label">Filtrar:</label>\n            <div class="col-md-4">\n              <input id="filtro" type="text" class="form-control form-white form-white" ng-model="filtro">\n            </div>\n            <div ng-if="datos.length < globals.currentUser.max" class="col-md-3" style="text-align:right; padding-right:0px">\n                <button class="btn btn-primary btn-md" ng-click="open({}, false);">\n                    <i class="fa fa-plus"></i> Nuevo\n                </button>\n\n                <div class="btn-group">\n	            	<button class="btn btn-dark btn-md" type="button" data-toggle="dropdown" aria-expanded="false">\n	                    <i class="fa fa-wrench"></i> Herramientas <span class="caret"></span>\n	                </button>\n	                <ul class="dropdown-menu dropdown-menu-sm" role="menu">\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'empresas/exportar/excel/2007\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 2007 (.xlsx)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'empresas/exportar/excel/97\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 97/2003 (.xls)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'empresas/exportar/pdf\' }}">\n	                            <i class="fa fa-file-pdf-o"></i> Exportar PDF (.pdf)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a href="javascript:void(0);">\n	                            <i class="fa fa-print"></i> Imprimir\n	                        </a>\n	                    </li>\n	                </ul>\n                </div>\n            </div>\n\n            <div ng-if="datos.length >= globals.currentUser.max" class="col-md-3" style="text-align: right">\n                <span class="text-danger">\n                    <strong>No Puede crear más empresas</strong>\n                </span>\n            </div>\n        </div>\n        <div class="form-group">\n            <table class="table table-striped table-hover">\n                <thead>\n                    <tr>\n                        <th>#</th>\n                        <th></th>\n                        <th class="col-sm-2">Rut</th>\n                        <th class="col-sm-4">Razón Social</th>\n                        <th class="col-sm-4">Nombre de Fantasía</th>\n                        <th class="col-sm-2">Acciones</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="dato in datos | orderBy:orden | filter:filtro">\n                        <td>{{ $index + 1 }}</td>\n                        <td>\n                            <img ng-if="dato.logo" ng-src="{{ dato.logo }}" style="max-width: 50px; max-height: 30px">\n                            <i ng-if="!dato.logo" class="icon-cloud-upload"></i>\n                        </td>\n                        <td>{{ dato.rut }}</td>\n                        <td>{{ dato.razonSocial }}</td>\n                        <td>{{ dato.nombreFantasia }}</td>\n                        <td>                          \n                            <a class="btn-acciones btn btn-default" href="javascript:void(0);" ng-click="editar(dato);" uib-tooltip-html="toolTipEdicion(dato.razonSocial)">\n                                <i class="fa fa-pencil"></i>\n                            </a>\n                            <a class="btn-acciones btn btn-danger" href="javascript:void(0);" confirmation-click="eliminar( dato );" confirmation-needed="La Empresa: <b>{{ dato.razonSocial }}</b> será eliminado.Desea continuar?">\n                                <i class="fa fa-remove"></i>\n                            </a>\n                        </td>\n                    </tr>\n                </tbody>\n                <tr style="background:none !important">\n                    <td colspan="10">\n                        <strong>Usted tiene {{ datos.length }} empresas de un máximo de {{ globals.currentUser.max }}</strong>\n                    </td>\n                </tr>\n            </table>\n        </div>\n    </div>\n</div>\n\n<script type="text/ng-template" id="customTemplate.html">\n    <a style="cursor: pointer;">\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\n    </a>\n</script>\n\n<script type="text/ng-template" id="myModalFormEmpresa.html">\n    <div class="modal-header">\n        <h3 class="modal-title">Administración de Empresa</h3>\n    </div>\n    <div class="modal-body">\n        <form class="form-horizontal" name="form" novalidate autocomplete="Off" >\n            <div class="panel panel-default">\n                <div class="panel-heading">Datos de la Empresa</div>\n                <div class="panel-body">\n                    \n                    <div class="form-group form-group-md required" ng-class="{ \'has-error\': errores(\'rut\') || erroresDatos.rut  }">\n                        <label class="col-sm-3 control-label">Rut:</label>\n                        <div class="col-sm-3">\n                            <input class="form-control form-white" type="text" name="rut" rut="objeto.rut" ng-model="objeto.rut" maxlength="15" placeholder="11.111.111-1" required />\n                            <span class="help-block" ng-show="errores(\'rut\')">\n                                Obligatorio!\n                            </span>\n                        </div>\n                        <span class="text-danger" ng-if="erroresDatos.rut"><b>{{ erroresDatos.rut[0] }}</b></span>\n                    </div>\n\n                    <div class="form-group form-group-md required" ng-class="{ \'has-error\': errores(\'razonSocial\') }">\n                        <label class="col-sm-3 control-label">Razón Social:</label>\n                        <div class="col-sm-6">\n                            <input class="form-control form-white" type="text" name="razonSocial" ng-model="objeto.razonSocial" placeholder="Razón Social" required >\n                            <span class="help-block" ng-show="errores(\'razonSocial\')">\n                                Obligatorio!\n                            </span>\n                        </div>\n                    </div>\n\n                    <div class="form-group form-group-md required" ng-class="{ \'has-error\': errores(\'nombreFantasia\') }">\n                        <label class="col-sm-3 control-label">Nombre de Fantasía:</label>\n                        <div class="col-sm-6">\n                            <input class="form-control form-white" type="text" name="nombreFantasia" ng-model="objeto.nombreFantasia" placeholder="Nombre de Fantasía" required >\n                            <span class="help-block" ng-show="errores(\'nombreFantasia\')">\n                                Obligatorio!\n                            </span>\n                        </div>\n                    </div>\n\n                    <div class="form-group form-group-md required" ng-class="{ \'has-error\': errores(\'direccion\') }">\n                        <label class="col-sm-3 control-label">Dirección:</label>\n                        <div class="col-sm-6">\n                            <input class="form-control form-white" type="text" name="direccion" ng-model="objeto.direccion" placeholder="Dirección" required >\n                            <span class="help-block" ng-show="errores(\'direccion\')">\n                                Obligatorio!\n                            </span>\n                        </div>\n                    </div>\n                    <div class="form-group form-group-md required">\n                        <label class="col-sm-3 control-label">Comuna</label>\n                        <div class="col-sm-6">\n                            <input type="text" ng-model="objeto.comuna" placeholder="Buscar Comuna" uib-typeahead="comuna as comuna.comuna for comuna in getComunas($viewValue)" typeahead-loading="loadingComuna" class="form-control form-white" typeahead-editable="false" typeahead-template-url="customTemplate.html" required  />\n                        </div>\n                        <div class="col-sm-1">\n                            <i ng-show="loadingComuna" class="glyphicon glyphicon-refresh"></i>\n                            <i ng-show="objeto.comuna.id" class="fa fa-check" style="color: #0a0;"></i>\n                        </div>\n                    </div>\n                   \n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label">Teléfonos:</label>\n                        <div class="col-sm-5">\n                            <input class="form-control form-white" type="text" ng-model="objeto.telefono" placeholder="Teléfonos">\n                        </div>\n                    </div>\n\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label">Fax:</label>\n                        <div class="col-sm-5">\n                            <input class="form-control form-white" type="text" ng-model="objeto.fax" placeholder="Fax">\n                        </div>\n                    </div>\n\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label">Actividad Económica:</label>\n                        <div class="col-sm-7">\n                            <input class="form-control form-white" type="text" ng-model="objeto.actividadEconomica" placeholder="Actividad Económica">\n                        </div>\n                    </div>\n\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label">Codigo Actividad Económica:</label>\n                        <div class="col-sm-2">\n                            <input class="form-control form-white" type="text" ng-model="objeto.codigoActividad" placeholder="Código Act.">\n                        </div>\n                    </div>\n\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label">Gerente General:</label>\n                        <div class="col-sm-6">\n                            <input class="form-control form-white" type="text" ng-model="objeto.gerenteGeneral" placeholder="Nombre del Gerente General">\n                        </div>\n                    </div>\n\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label">Facturador MiPyme:</label>\n                        <div class="col-sm-6">\n                            <label>\n                                <input type="checkbox" ng-model="objeto.miPyme" icheck />\n                                SI\n                            </label>\n                        </div>\n                    </div>\n\n                    <div style="text-align:center !important; position:absolute; top:70px; left:100%; margin-left:-190px; width:160px; height:200px" flow-init flow-name="imagen.flow" flow-file-added="obtenerImagenB64()">\n                        <div style="text-align:center !important;  border:2px solid #ddd; border-radius:10px;  width:160px; height:165px; padding-top:5px;">\n                            <img ng-if="!$flow.files[0]" ng-src="{{ logo }}" style="max-width:150px; max-height:150px;" />\n                            <img ng-show="!creandoImagen" flow-img="$flow.files[0]" style="max-width:150px; max-height:150px;" /><br/>                            \n                        </div>\n                        \n                        <p style="text-align:center; margin-top:20px;">\n                            <progressbar ng-show="creandoImagen" class="progress-striped active" value="valorPB" type="success"></progressbar>\n                            <button ng-show="!creandoImagen" class="btn btn-xs btn-success" style="margin:0px;" flow-btn flow-attrs="{accept:\'image/*\'}">\n                                Cambiar Imagen\n                            </button>\n                        </p>\n                        \n                    </div>\n\n                </div>\n            </div>\n\n            <div class="panel panel-default">\n                <div class="panel-heading">Representante Legal</div>\n                <div class="panel-body">\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label" >Rut:</label>\n                        <div class="col-sm-3">\n                            <input class="form-control form-white" type="text" rut="objeto.representanteRut" ng-model="objeto.representanteRut" maxlength="15" placeholder="11.111.111-1" />\n                        </div>\n                    </div>\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label" >Nombre:</label>\n                        <div class="col-sm-6">\n                            <input class="form-control form-white" type="text" ng-model="objeto.representanteNombre" placeholder="Nombre del Representante Legal" >\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="panel panel-default">\n                <div class="panel-heading">Contador</div>\n                <div class="panel-body">\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label">Rut:</label>\n                        <div class="col-sm-3">\n                            <input class="form-control form-white" type="text" rut="objeto.contadorRut" ng-model="objeto.contadorRut" maxlength="15" placeholder="11.111.111-1" />\n                        </div>\n                    </div>\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label">Nombre:</label>\n                        <div class="col-sm-6">\n                            <input class="form-control form-white" type="text" ng-model="objeto.contadorNombre" placeholder="Nombre del Contador">\n                        </div>\n                    </div>\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label">Número Registro:</label>\n                        <div class="col-sm-6">\n                            <input class="form-control form-white" type="text" ng-model="objeto.numeroRegistro" placeholder="Número Registro">\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n\n            \n\n\n            <div class="panel panel-default" ng-if="!objeto.id">\n                <div class="panel-heading">Base de Datos</div>\n                <div class="panel-body">\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label">Año Inicial:</label>\n                        <div class="col-sm-3">\n                            <select class="form-control form-white" ng-model="objeto.anioInicial" ng-options="anio as anio for anio in anios"></select>\n                        </div>\n                    </div>\n\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label">Generar a partir de:</label>\n                        <div class="col-sm-6">\n                            <select ng-model="objeto.baseDatos" ng-options="emp as emp.empresa for emp in empresas" ng-init="objeto.baseDatos=empresas[0]" class="form-control form-white"></select>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </form>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" ng-click="cancel()">Cancelar</button>\n        <button class="btn btn-primary" ng-disabled="form.$invalid" ng-click="guardar()">Guardar</button>\n    </div>\n</script>'),a.put("views/forms/form-apertura-cierre-anual.html",'<script type="text/ng-template" id="customTemplate.html">\r\n    <a style="cursor: pointer;">\r\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\r\n    </a>\r\n</script>\r\n<div class="modal-header">\r\n    <h3 class="modal-title">Apertura y Cierre Anual</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" name="form" novalidate autocomplete="Off">\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Parámetros de Configuración</div>\r\n            <div class="panel-body">\r\n                \r\n                <div class="form-group form-group-md">\r\n                    <label class="col-sm-4 control-label" for="formGroupInputLarge">Año Actual:</label>\r\n                    <div class="col-sm-3">\r\n             			{{ objeto.anioActual }}\r\n                    </div>\r\n                    <div ng-if="objeto.cambiar" class="col-sm-3">\r\n                        <button class="btn btn-success" confirmation-click="cambiar()" confirmation-needed="El año actual será Cerrado y se realizará la apertura del año {{ objeto.actual }} generandose un comprobante de APERTURA según CUENTA DE AJUSTE definida.¿Desea Continuar?">\r\n                            Cambiar a {{ objeto.actual }}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n                <div class="form-group form-group-md" ng-if="objeto.anioAnterior">\r\n                    <label class="col-sm-4 control-label" for="formGroupInputLarge">Editar Año {{ objeto.anioAnterior }}:</label>\r\n                    <div class="col-sm-3">\r\n                        <label class="switch switch-green">\r\n                            <input class="switch-input" ng-model="objeto.editarAnioAnterior" type="checkbox">\r\n                            <span class="switch-label" data-on="SI" data-off="NO"></span>\r\n                            <span class="switch-handle"></span>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                <div class="form-group form-group-md">\r\n                    <label class="col-sm-4 control-label" for="formGroupInputLarge">Cuenta Ajuste Estado Resultado:</label>\r\n                    <div class="col-sm-8">\r\n                        {{ objeto.cuentaAjusteEstadoResultado.codigo }} - {{ objeto.cuentaAjusteEstadoResultado.cuenta }}\r\n                    </div>\r\n                </div>\r\n                \r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-primary" ng-if="!objeto.cambiar" ng-disabled="form.$invalid || bloquearFormulario" ng-click="guardar()">Guardar</button>\r\n    <button class="btn btn-default" ng-click="cancel()">Cerrar</button>\r\n    \r\n</div>'),a.put("views/forms/form-asiento-cuenta-parametros.html",'<div class="modal-header">\r\n        <h3 class="modal-title">Registro de Parametros Requeridos de Cuenta</h3>\r\n    </div>\r\n    <div class="modal-body">\r\n        <form class="form-horizontal" name="form" novalidate>\r\n\r\n            <div class="panel panel-default">\r\n                <div class="panel-heading">Parámetros de la Cuenta</div>\r\n                <div class="panel-body">\r\n                    <div class="form-group form-group-md">\r\n                        <label class="col-sm-3 control-label">Cuenta:</label>\r\n                        <label class="col-sm-9 control-label" style="text-align:left !important">\r\n                            <span class="text-success">{{ objetoCuenta.cuenta.cuenta }} / {{ objetoCuenta.cuenta.codigo }}</span>\r\n                        </label>\r\n                    </div>\r\n                    <div class="form-group" ng-if="objeto.auxiliarTipo">\r\n                        <div class="col-sm-12" ng-if="objeto.auxiliarTipo==1000001">\r\n                            <div class="form-group form-group-md sinMargen">\r\n                                <label class="col-sm-3 control-label">Cliente / Proveedor:</label>\r\n                                <div class="col-sm-7" ng-if="!objeto.auxiliar">\r\n                                    <input type="text" ng-model="objeto.auxiliar" placeholder="Buscar Cliente / Proveedor" uib-typeahead="prov as prov.razonSocial for prov in getClientes($viewValue)" typeahead-loading="loadingCliente" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-on-select="seleccionarFormaPago(); obtenerListaContactos(); analizarVendedor(); seleccionarDespacho();" required>\r\n                                </div>\r\n                                <div class="col-sm-2" ng-if="!objeto.auxiliar">\r\n                                    <i ng-show="loadingCliente" class="glyphicon glyphicon-refresh"></i>\r\n                                    <i ng-show="objeto.auxiliar.id" class="fa fa-check" style="color: #0a0"></i>\r\n                                    <button ng-click="openBuscarCliente()" class="btn btn-primary btn-sm">\r\n                                        <i class="fa fa-search"></i>\r\n                                    </button>\r\n                                </div>\r\n                                <div class="col-sm-9" ng-if="objeto.auxiliar">\r\n                                    {{ objeto.auxiliar.razonSocial }}\r\n                                    <a href="javascript:void(0)" ng-click="objeto.auxiliar=\'\';" class="text-danger">\r\n                                        <i class="fa fa-remove"></i>\r\n                                    </a>\r\n                                </div>\r\n                            </div>\r\n                            <div class="form-group form-group-md sinMargen" ng-if="objeto.auxiliar.id">\r\n                                <label class="col-sm-3 control-label">Rut:</label>\r\n                                <div class="col-sm-4">\r\n                                    {{ objeto.auxiliar.rut }}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="col-sm-12" ng-if="[1000001, 1000002].indexOf( objeto.auxiliarTipo ) == -1">\r\n                            <div class="form-group form-group-md sinMargen">\r\n                                <label class="col-sm-3 control-label">{{ opciones.auxiliar }}:</label>\r\n                                <div class="col-sm-4">\r\n                                    <select ng-model="objeto.auxiliar" ng-options="cta as cta.auxiliar for cta in opciones.auxiliares" class="form-control form-white" required></select>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="form-group" ng-if="opciones.bancos.length > 0">\r\n                        <label class="col-sm-3 control-label">Banco:</label>\r\n                        <div class="col-sm-8">\r\n                            <select ng-model="objeto.banco" ng-options="ban as ban.banco for ban in opciones.bancos" class="form-control form-white" required></select>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="form-group" ng-if="opciones.centrosCostos.length > 0">\r\n                        <label class="col-sm-3 control-label">Centros de Costos:</label>\r\n                        <div class="col-sm-8">\r\n                            <label class="col-sm-3 control-label">Total:</label>\r\n                            <div class="col-sm-8">{{ objeto.monto | currency:"$":0 }}</div>\r\n                            <div ng-if="!objeto.monto" class="col-sm-12 text-danger">\r\n                                <strong>\r\n                                Debe ingresar un Monto en la columna Debe o Haber, según corresponda, para configurar esta opción.\r\n                                </strong>\r\n                            </div>\r\n                            <div ng-if="objeto.monto > 0">\r\n                                <table class="table">\r\n                                    <tr>\r\n                                        <th>#</th>\r\n                                        <th class="col-sm-3">%</th>\r\n                                        <th class="col-sm-3">Monto</th>\r\n                                        <th class="col-sm-6">Centro de Costos</th>\r\n                                        <th>&nbsp;</th>\r\n                                    </tr>\r\n                                    <tr ng-repeat="centro in objeto.centrosCostos">\r\n                                        <td>{{ $index + 1 }}</td>\r\n                                        <td>\r\n                                            <input type="text" ng-model="centro.porcentaje" ui-percentage-mask="0" max="1" maxlength="4" class="form-control form-white" ng-change="calcularMonto(centro);" required>                            \r\n                                        </td>\r\n                                        <td>\r\n                                            {{ centro.monto | currency:"$":0 }}\r\n                                        </td>\r\n                                        <td>\r\n                                            <select ng-model="centro.centroCosto" ng-options="ban as ban.value for ban in opciones.centrosCostos" class="form-control form-white" required></select>\r\n                                        </td>\r\n                                        <td>\r\n                                            <a href="javascript:void(0)" ng-if="objeto.centrosCostos.length > 1" ng-click="quitarCentroCostos(); calcularSumaMontos();" class="btn btn-danger btn-xs">\r\n                                                <i class="fa fa-remove"></i> \r\n                                            </a>\r\n                                        </td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>&nbsp;</td>\r\n                                        <td></td>\r\n                                        <td ng-class="{\'bg-success\' : objeto.totalCentrosCostos==objeto.monto }">{{ objeto.totalCentrosCostos | currency:"$":0 }}</td>\r\n                                        <td>&nbsp;</td>\r\n                                    </tr>\r\n                                </table>         \r\n                                <button class="btn btn-primary btn-sm" ng-click="agregarCentroCostos()"><i class="fa fa-plus"></i> Agregar Centro de Costo</button>  \r\n                            </div>     \r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button class="btn btn-default" ng-click="cancel()">Cancelar</button>\r\n        <button class="btn btn-primary" ng-disabled="form.$invalid || (objeto.totalCentrosCostos!=objeto.monto && opciones.centrosCostos.length > 0 )" ng-click="asignar()">Asignar</button>\r\n    </div>'),a.put("views/forms/form-buscar-activo-fijo-tabla.html",'<div class="modal-header">\r\n    <h3 class="modal-title">Búscador de Activos Fijos - Tabla SII</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <div class="row col-md-12">\r\n        <label for="orden" class="control-label col-md-1">\r\n            Tipo:\r\n        </label>\r\n        <div class="col-md-3">\r\n            <select ng-model="filtro.tipoCuenta" ng-options="tipo as tipo.tipo for tipo in tiposCuenta" class="form-control form-white"></select>\r\n        </div>\r\n        <label for="orden" class="control-label col-md-1">\r\n            Filtrar:\r\n        </label>\r\n        <div class="col-md-4">\r\n            <input id="filtro" type="text" class="form-control form-white" ng-model="filtro.filtro">\r\n        </div>\r\n    </div>\r\n    <table class="table table-striped table-hover filter-head">\r\n        <thead>\r\n            <tr>\r\n                <th class="col-md-9">Clasificacion/Tipo Activo</th>\r\n                <th class="col-md-1">Vida Util Normal</th>\r\n                <th class="col-md-1">Depreciación Acelerada</th>\r\n                <th class="col-md-1">Acciones</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr ng-repeat="dato in datos | filter:filtro.filtro | filter:tipoCodigo">\r\n                <td style="padding-left:{{ (dato.nivel - 1) *25 }}px">\r\n                    <span ng-if="!dato.vidaUtilNormal">{{ dato.activoFijo }}</span>\r\n                    <span ng-if="dato.vidaUtilNormal" class="text-primary"><strong>{{ dato.activoFijo }}</strong></span>\r\n                </td>\r\n                <td>{{ dato.vidaUtilNormal }}</td>\r\n                <td>{{ dato.depreciacionAcelerada }}</td>\r\n                <td style="text-align:right !important; padding-right:0px">\r\n                    <div class="btn-group" ng-if="dato.vidaUtilNormal" style="margin:0px">\r\n                        <button class="btn btn-xs btn-primary" ng-click="seleccionar(dato)">Seleccionar</button>\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n            <tr style="background:none !important">\r\n                <td colspan="10" style="height:100px; background:none !important">&nbsp;</td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-default" ng-click="cancel()">Cerrar</button>\r\n</div>'),a.put("views/forms/form-buscar-cuenta-ifrs.html",'<div class="modal-header">\r\n    <h3 class="modal-title">Búscador de Cuenta IFRS</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <div class="row col-md-12">\r\n        <label for="orden" class="control-label col-md-1">\r\n            Tipo:\r\n        </label>\r\n        <div class="col-md-3">\r\n            <select ng-model="filtro.tipoCuenta" ng-options="tipo as tipo.tipo for tipo in tiposCuenta" class="form-control form-white"></select>\r\n        </div>\r\n        <label for="orden" class="control-label col-md-1">\r\n            Filtrar:\r\n        </label>\r\n        <div class="col-md-4">\r\n            <input id="filtro" type="text" class="form-control form-white" ng-model="filtro.filtro">\r\n        </div>\r\n    </div>\r\n    <table class="table table-striped table-hover filter-head">\r\n        <thead>\r\n            <tr>\r\n                <th class="col-md-2">Codigo</th>\r\n                <th class="col-md-9">Clasificación/Cuenta</th>\r\n                <th class="col-md-1">Acciones</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr ng-repeat="dato in datos | filter:filtro.filtro | filter:tipoCodigo">\r\n                <td>{{ dato.codigo }}</td>\r\n                <td style="padding-left:{{ (dato.nivel - 1) *15 }}px">\r\n                    <span ng-if="!dato.cuenta">{{ dato.nombre }}</span>\r\n                    <span ng-if="dato.cuenta" class="text-primary"><strong>{{ dato.nombre }}</strong></span>\r\n                </td>\r\n                <td style="text-align:right !important; padding-right:0px">\r\n                    <div class="btn-group" ng-if="dato.tipo === 3 " style="margin:0px">\r\n                        <button class="btn btn-xs btn-primary" ng-click="seleccionar(dato)">Seleccionar</button>\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n            <tr style="background:none !important">\r\n                <td colspan="10" style="height:100px; background:none !important">&nbsp;</td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-default" ng-click="cancel()">Cerrar</button>\r\n</div>'),
a.put("views/forms/form-buscar-cuenta-sii.html",'<div class="modal-header">\r\n    <h3 class="modal-title">Búscador de Cuenta del SII</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <div class="row col-md-12">\r\n        <label for="orden" class="control-label col-md-1">\r\n            Filtrar:\r\n        </label>\r\n        <div class="col-md-4">\r\n            <input id="filtro" type="text" class="form-control form-white" ng-model="filtro.filtro">\r\n        </div>\r\n    </div>\r\n    <table class="table table-striped table-hover filter-head">\r\n        <thead>\r\n            <tr>\r\n                <th class="col-md-2">Codigo</th>\r\n                <th class="col-md-9">Cuenta</th>\r\n                <th class="col-md-1">Acciones</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr ng-repeat="dato in datos | filter:filtro.filtro | filter:tipoCodigo">\r\n                <td>{{ dato.codigo }}</td>\r\n                <td style="padding-left:{{ (dato.nivel - 1) *15 }}px">\r\n                    <span ng-if="dato.nivel != 3">{{ dato.cuenta }}</span>\r\n                    <span ng-if="dato.nivel == 3" class="text-primary"><strong>{{ dato.cuenta }}</strong></span>\r\n                </td>\r\n                <td style="text-align:right !important; padding-right:0px">\r\n                    <div class="btn-group" ng-if="dato.nivel == 3 " style="margin:0px">\r\n                        <button class="btn btn-xs btn-primary" ng-click="seleccionar(dato)">Seleccionar</button>\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n            <tr style="background:none !important">\r\n                <td colspan="10" style="height:100px; background:none !important">&nbsp;</td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-default" ng-click="cancel()">Cerrar</button>\r\n</div>'),a.put("views/forms/form-buscar-cuenta.html",'<div class="modal-header">\r\n    <h3 class="modal-title">Búscador de Cuenta</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <div class="row col-md-12">\r\n        <label for="orden" class="control-label col-md-1">\r\n            Tipo:\r\n        </label>\r\n        <div class="col-md-3">\r\n            <select ng-model="filtro.tipoCuenta" ng-options="tipo as tipo.tipo for tipo in tiposCuenta" class="form-control form-white"></select>\r\n        </div>\r\n        <label for="orden" class="control-label col-md-1">\r\n            Filtrar:\r\n        </label>\r\n        <div class="col-md-4">\r\n            <input id="filtro" type="text" class="form-control form-white" ng-model="filtro.filtro">\r\n        </div>\r\n    </div>\r\n    <table class="table table-striped table-hover filter-head">\r\n        <thead>\r\n            <tr>\r\n                <th class="col-md-2">Codigo</th>\r\n                <th class="col-md-9">Clasificación/Cuenta</th>\r\n                <th class="col-md-1">Acciones</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr ng-repeat="dato in datos | filter:filtro.filtro | filter:tipoCodigo">\r\n                <td>{{ dato.codigo }}</td>\r\n                <td style="padding-left:{{ (dato.nivel - 1) *15 }}px">\r\n                    <span ng-if="!dato.cuenta">{{ dato.nombre }}</span>\r\n                    <span ng-if="dato.cuenta" class="text-primary"><strong>{{ dato.nombre }}</strong></span>\r\n                </td>\r\n                <td style="text-align:right !important; padding-right:0px">\r\n                    <div class="btn-group" ng-if="dato.tipo === 3 " style="margin:0px">\r\n                        <button class="btn btn-xs btn-primary" ng-click="seleccionar(dato)">Seleccionar</button>\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n            <tr style="background:none !important">\r\n                <td colspan="10" style="height:100px; background:none !important">&nbsp;</td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-default" ng-click="cancel()">Cerrar</button>\r\n</div>'),a.put("views/forms/form-buscar-recuadro-f22-sii.html",'<div class="modal-header">\r\n    <h3 class="modal-title">Búscador de Codigo Recuadro N°2 - F22 del SII</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <div class="row col-md-12">\r\n        <label for="orden" class="control-label col-md-1">\r\n            Filtrar:\r\n        </label>\r\n        <div class="col-md-4">\r\n            <input id="filtro" type="text" class="form-control form-white" ng-model="filtro.filtro">\r\n        </div>\r\n    </div>\r\n    <table class="table table-striped table-hover filter-head">\r\n        <thead>\r\n            <tr>\r\n                <th class="col-md-2">Codigo</th>\r\n                <th class="col-md-9">Descripción</th>\r\n                <th class="col-md-1">Acciones</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr ng-repeat="dato in datos | filter:filtro.filtro">\r\n                <td>{{ dato.codigo }}</td>\r\n                <td>\r\n                    {{ dato.recuadro }}\r\n                </td>\r\n                <td style="text-align:right !important; padding-right:0px">\r\n                    <div class="btn-group" style="margin:0px">\r\n                        <button class="btn btn-xs btn-primary" ng-click="seleccionar(dato)">Seleccionar</button>\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n            <tr style="background:none !important">\r\n                <td colspan="10" style="height:100px; background:none !important">&nbsp;</td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-default" ng-click="cancel()">Cerrar</button>\r\n</div>'),a.put("views/forms/form-clasificacion-cuenta-ifrs.html",'<div class="modal-header">\r\n    <h3 class="modal-title">Administración de Clasificaciones de Cuenta IFRS</h3>\r\n</div>\r\n<div class="modal-body">\r\n  <form class="form-horizontal" name="form" novalidate autocomplete="Off">\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Datos de la Clasificación</div>\r\n            <div class="panel-body">\r\n         \r\n                <div class="form-group form-group-md" ng-class="{ \'has-error\': errores(\'nombre\') }">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Clasificación:</label>\r\n                    <div class="col-sm-8">\r\n                        <input class="form-control form-white" type="text" name="nombre" ng-model="objeto.nombre" maxlength="255" placeholder="Nombre o Razón Social" required>\r\n                        <span class="help-block" ng-show="errores(\'nombre\')">\r\n                            Obligatorio!\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Clasificación Mayor:</label>\r\n                    <div class="col-sm-6">\r\n                        <select class="form-control form-white" ng-model="objeto.clasificacion" placeholder="Clasificacion" ng-options="clas as \'&nbsp;\'.repeat( (clas.nivel - 1) * 5 ) + clas.clasificacion for clas in clasificaciones" ng-change="formatearDigitoCodigo()">\r\n                            <option></option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Código:</label>\r\n                    <div class="col-sm-5">\r\n                        <div class="input-group">\r\n                            <span class="input-group-addon">{{ objeto.clasificacion.codigoCompleto? objeto.clasificacion.codigoCompleto + "." : "" }}</span>\r\n                            <input type="text" ng-model="objeto.codigo" class="form-control form-white" style="width:50px !important" maxlength="3" required>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div ng-if="!objeto.clasificacion.id" class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Tipo:</label>\r\n                    <div class="col-sm-9">\r\n                        <div class="input-group">\r\n                            <select class="form-control form-white" ng-model="objeto.tipo" placeholder="Clasificacion" ng-options="tipo as tipo.tipo for tipo in tipos"></select>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button class="btn btn-default" ng-click="cancel()">Cerrar</button>\r\n                <button class="btn btn-primary" ng-disabled="form.$invalid || deshabilitar" ng-click="guardar()">Guardar</button>\r\n            </div>\r\n        </div>\r\n    </form>\r\n\r\n    <div class="panel panel-default" ng-if="!retorno">\r\n        <div class="panel-heading">Editar o Eliminar una Clasificación IFRS</div>\r\n        <div class="panel-body">\r\n            <div class="form-group form-group-md">\r\n                <label class="col-sm-3 control-label" for="formGroupInputLarge">Clasificación:</label>\r\n                <div class="col-sm-7">\r\n                    <select class="form-control form-white" ng-model="clasificacion" placeholder="Clasificacion">\r\n                        <option value="{{ clas.id }}" ng-repeat="clas in clasificaciones">\r\n                            {{ "&nbsp;".repeat( (clas.nivel - 1) * 5 ) }}{{ clas.clasificacion }}\r\n                        </option>\r\n                    </select>\r\n                </div>\r\n                <div class="col-sm-2">\r\n                    <a href="javascript:void(0);" ng-click="editarClasificacion(clasificacion);" class="text-primary" style="cursor: pointer" title="Editar Clasificación">\r\n                        <i class="fa fa-pencil fa-lg"></i>\r\n                    </a>\r\n                    <a href="javascript:void(0);" ng-click="eliminarClasificacion(clasificacion);" confirmation-needed="La Clasificación será eliminada. ¿Desea Continuar?" class="text-danger" style="cursor: pointer" title="Eliminar Clasificación">\r\n                        <i class="fa fa-trash fa-lg"></i>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</div>'),a.put("views/forms/form-clasificacion-cuenta.html",'<div class="modal-header">\r\n    <h3 class="modal-title">Administración de Clasificaciones de Cuenta</h3>\r\n</div>\r\n<div class="modal-body">\r\n  <form class="form-horizontal" name="form" novalidate autocomplete="Off">\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Datos de la Clasificación</div>\r\n            <div class="panel-body">\r\n         \r\n                <div class="form-group form-group-md" ng-class="{ \'has-error\': errores(\'nombre\') }">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Clasificación:</label>\r\n                    <div class="col-sm-8">\r\n                        <input class="form-control form-white" type="text" name="nombre" ng-model="objeto.nombre" maxlength="255" placeholder="Nombre o Razón Social" required>\r\n                        <span class="help-block" ng-show="errores(\'nombre\')">\r\n                            Obligatorio!\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Clasificación Mayor:</label>\r\n                    <div class="col-sm-6">\r\n                        <select class="form-control form-white" ng-model="objeto.clasificacion" placeholder="Clasificacion" ng-options="clas as \'&nbsp;\'.repeat( (clas.nivel - 1) * 5 ) + clas.clasificacion for clas in clasificaciones" ng-change="formatearDigitoCodigo()">\r\n                            <option></option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Código:</label>\r\n                    <div class="col-sm-5">\r\n                        <div class="input-group">\r\n                            <span class="input-group-addon">{{ objeto.clasificacion.codigoCompleto? objeto.clasificacion.codigoCompleto + "." : "" }}</span>\r\n                            <input type="text" ng-model="objeto.codigo" class="form-control form-white" style="width:50px !important" maxlength="3" required>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div ng-if="!objeto.clasificacion.id" class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Tipo:</label>\r\n                    <div class="col-sm-9">\r\n                        <div class="input-group">\r\n                            <select class="form-control form-white" ng-model="objeto.tipo" placeholder="Clasificacion" ng-options="tipo as tipo.tipo for tipo in tipos"></select>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button class="btn btn-default" ng-click="cancel()">Cerrar</button>\r\n                <button class="btn btn-primary" ng-disabled="form.$invalid || deshabilitar" ng-click="guardar()">Guardar</button>\r\n            </div>\r\n        </div>\r\n    </form>\r\n\r\n    <div class="panel panel-default" ng-if="!retorno">\r\n        <div class="panel-heading">Editar o Eliminar una Clasificación</div>\r\n        <div class="panel-body">\r\n            <div class="form-group form-group-md">\r\n                <label class="col-sm-3 control-label" for="formGroupInputLarge">Clasificación:</label>\r\n                <div class="col-sm-7">\r\n                    <select class="form-control form-white" ng-model="clasificacion" placeholder="Clasificacion">\r\n                        <option value="{{ clas.id }}" ng-repeat="clas in clasificaciones">\r\n                            {{ "&nbsp;".repeat( (clas.nivel - 1) * 5 ) }}{{ clas.clasificacion }}\r\n                        </option>\r\n                    </select>\r\n                </div>\r\n                <div class="col-sm-2">\r\n                    <a href="javascript:void(0);" ng-click="editarClasificacion(clasificacion);" class="text-primary" style="cursor: pointer" title="Editar Clasificación">\r\n                        <i class="fa fa-pencil fa-lg"></i>\r\n                    </a>\r\n                    <a href="javascript:void(0);" ng-click="eliminarClasificacion(clasificacion);" confirmation-needed="La Clasificación será eliminada. ¿Desea Continuar?" class="text-danger" style="cursor: pointer" title="Eliminar Clasificación">\r\n                        <i class="fa fa-trash fa-lg"></i>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</div>'),a.put("views/forms/form-cliente-proveedor.html",'<script type="text/ng-template" id="customTemplate.html">\r\n    <a style="cursor: pointer;">\r\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\r\n    </a>\r\n</script>\r\n<div class="modal-header">\r\n    <h3 class="modal-title">Clientes / Proveedores</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" name="form" autocomplete="Off" novalidate>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Datos del Cliente / Proveedor</div>\r\n            <div class="panel-body">\r\n                <div class="row">\r\n                    <div class="col-md-11">\r\n                        <div class="form-group required" ng-class="{ \'has-error\': errores(\'rut\') || erroresDatos.rut  }">\r\n                            <div class="col-sm-12" ng-if="!formulario.validar">\r\n                                <div class="col-sm-12 text-primary" style="padding: 10px">\r\n                                    <strong>\r\n                                        <i class="fa fa-info-circle"></i>\r\n                                        Ingrese el Rut y presione el botón Comprobar para activar el formulario\r\n                                    </strong>\r\n                                </div>\r\n                            </div>\r\n                            <label class="col-sm-3 control-label" for="formGroupInputLarge">Rut:</label>\r\n                            <div class="col-sm-3">\r\n                                <input class="form-control form-white" type="text" name="rut" rut="objeto.rut" extranjero="objeto.extranjero" ng-model="objeto.rut" maxlength="15" placeholder="{{ objeto.extranjero? \'XX.XXX.XXX\' : \'XX.XXX.XXX-X\' }}" required>\r\n                                <span class="help-block" ng-show="errores(\'rut\')">\r\n                                    Obligatorio!\r\n                                </span>\r\n                            </div>\r\n                            <div class="col-sm-2">\r\n                                <label>\r\n                                    <input type="checkbox" ng-model="objeto.extranjero" ng-change="formatearRut()" icheck>\r\n                                    Extranjero\r\n                                </label>\r\n                            </div>\r\n                            <div class="col-sm-1" ng-if="!formulario.validar">\r\n                                <button class="btn btn-sm btn-success" ng-click="comprobar()" ng-disabled="!objeto.rut">\r\n                                    Comprobar\r\n                                </button>\r\n                            </div>\r\n                            <span class="text-danger" ng-if="erroresDatos.rut"><b>{{ erroresDatos.rut[0] }}</b></span>\r\n                        </div>\r\n                  \r\n                        <div ng-if="formulario.validar" class="form-group required" ng-class="{ \'has-error\': errores(\'razonSocial\') }">\r\n                            <label class="col-sm-3 control-label" for="formGroupInputLarge">Razon Social:</label>\r\n                            <div class="col-sm-8">\r\n                                <input class="form-control form-white" type="text" name="razonSocial" ng-model="objeto.razonSocial" placeholder="Razón Social" required>\r\n                                <span class="help-block" ng-show="errores(\'razonSocial\')">\r\n                                    Obligatorio!\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div ng-if="formulario.validar" class="form-group required">\r\n                            <label class="col-sm-3 control-label" for="formGroupInputLarge">Tipo:</label>\r\n                            <div class="col-sm-8">\r\n                                <label class="pointer">\r\n                                    <input type="checkbox" ng-model="objeto.cliente" icheck ng-required="!objeto.proveedor">\r\n                                    <span class="pointer">\r\n                                        Cliente\r\n                                    </span>\r\n                                </label>&nbsp;&nbsp;\r\n\r\n                                <label class="pointer">\r\n                                    <input type="checkbox" ng-model="objeto.proveedor" icheck ng-required="!objeto.cliente">\r\n                                    <span class="pointer">\r\n                                        Proveedor\r\n                                    </span>\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                    </div>              \r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n        <div class="panel panel-success" ng-if="objeto.proveedor">\r\n            <div class="panel-heading">Cuentas por Defecto Importación Libro Compra</div>\r\n            <div class="panel-body">\r\n                <table class="table table-striped">\r\n                    <tr>\r\n                        <th class="col-sm-3">Columna</th>\r\n                        <th class="col-sm-8">Cta</th>\r\n                        <th class="col-sm-1">&nbsp;</th>\r\n                    </tr>\r\n                    <tr ng-repeat="columna in objeto.libroCompra">\r\n                        <td>\r\n                            <select ng-show="!columna.columna.campo" ng-model="columna.columna" class="form-control form-white" ng-options="col as col.label | uppercase for col in opciones.compra | toArray | filter: filtrarColumnasLibro(\'libroCompra\',$index)">\r\n                                <option value=""></option>\r\n                            </select>\r\n                            <span ng-show="columna.columna.campo">\r\n                                {{ columna.columna.label }}\r\n                                <a href="javascript:void(0);" class="text-danger" ng-click="columna.columna=\'\';">\r\n                                    <i class="fa fa-remove"></i>\r\n                                </a>\r\n                            </span>\r\n                        </td>\r\n                        <td>\r\n\r\n                            <div ng-if="columna.columna.subcampo">\r\n                                <table class="table table-striped">\r\n                                    <tr>\r\n                                        <th class="col-sm-5">Cod Impuesto</th>\r\n                                        <th class="col-sm-6">Cuenta</th>\r\n                                        <th class="col-sm-1">&nbsp;</th>\r\n                                    </tr>\r\n                                    <tr ng-repeat="cod in objeto[\'libroCompra\'][$parent.$index].subcampos">\r\n                                        <td>\r\n                                            <select ng-show="!cod.impuesto" ng-model="cod.impuesto" class="form-control form-white" ng-options="{ id: key, valor: value } as key + \' | \'+ value for (key , value) in opciones.impuestos">\r\n                                                <option value=""></option>\r\n                                            </select>\r\n                                            <span ng-show="cod.impuesto">\r\n                                                {{ cod.impuesto.id  + \' | \' +  cod.impuesto.valor }}\r\n                                                <a href="javascript:void(0);" class="text-danger" ng-click="cod.impuesto=\'\';">\r\n                                                    <i class="fa fa-remove"></i>\r\n                                                </a>\r\n                                            </span>\r\n\r\n                                        </td>\r\n                                        <td>\r\n                                            <div class="col-sm-10" style="padding: 0px">\r\n                                                <input type="text" ng-show="!cod.cuenta.id" ng-model="cod.cuenta" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="cuentaCompra[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" ng-class="{\'inputLoading\' : cuentaCompra[ $index ] }" required>\r\n                                                <span ng-show="cod.cuenta.id">\r\n                                                    {{ cod.cuenta.cuenta }}\r\n                                                    <a href="javascript:void(0);" class="text-danger" ng-click="cod.cuenta=\'\';">\r\n                                                        <i class="fa fa-remove"></i>\r\n                                                    </a>\r\n                                                </span>\r\n                                            </div>\r\n                                            <div class="col-sm-2" style="padding: 2px" ng-show="!cod.cuenta.id">\r\n                                                <button class="btn btn-sm btn-primary" ng-click="buscarCuenta(cod)" tooltip="Buscar en Plan de Cuentas" style="margin:0px">\r\n                                                    <i class="fa fa-search"></i>\r\n                                                </button>\r\n                                            </div>\r\n                                        </td>\r\n                                        <td>\r\n                                            <button class="btn btn-danger btn-xs" ng-click="quitarImpuesto(\'libroCompra\', columna, cod)">\r\n                                                <i class="fa fa-minus-circle"></i>\r\n                                            </button>\r\n                                        </td>\r\n                                    </tr>\r\n                                </table>\r\n                                <button class="btn btn-warning btn-xs" ng-click="agregarImpuesto(\'libroCompra\', columna)">\r\n                                    <i class="fa fa-plus"></i> Agregar Impuesto\r\n                                </button>\r\n                            </div>\r\n                            <div ng-if="!columna.columna.subcampo">\r\n                                <div class="col-sm-10" style="padding: 0px">\r\n                                    <input type="text" ng-show="!columna.cuenta.id" ng-model="columna.cuenta" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="cuenta[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" ng-class="{\'inputLoading\' : cuenta[ $index ] }" required>\r\n                                    <span ng-show="columna.cuenta.id">\r\n                                        {{ columna.cuenta.cuenta }}\r\n                                        <a href="javascript:void(0);" class="text-danger" ng-click="columna.cuenta=\'\';">\r\n                                            <i class="fa fa-remove"></i>\r\n                                        </a>\r\n                                    </span>\r\n                                </div>\r\n                                <div class="col-sm-2" style="padding: 0px" ng-show="!columna.cuenta.id">\r\n                                    <button class="btn btn-sm btn-primary" ng-click="buscarCuenta(columna)" tooltip="Buscar en Plan de Cuentas" style="margin:0px">\r\n                                        <i class="fa fa-search"></i>\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </td>\r\n                        <td>\r\n                            <button class="btn btn-danger btn-xs" ng-click="quitarColumna(\'libroCompra\', columna)">\r\n                                <i class="fa fa-remove"></i>\r\n                            </button>\r\n                        </td>\r\n                    </tr>\r\n                </table>\r\n                <button class="btn btn-warning btn-xs" ng-click="agregarColumna(\'libroCompra\')">\r\n                    <i class="fa fa-plus"></i> Agregar\r\n                </button>\r\n            </div>\r\n        </div>\r\n\r\n\r\n        <div class="panel panel-primary" ng-if="objeto.cliente">\r\n            <div class="panel-heading">Cuentas por Defecto Importación Libro Venta</div>\r\n            <div class="panel-body">\r\n                <table class="table table-striped">\r\n                    <tr>\r\n                        <th class="col-sm-3">Columna</th>\r\n                        <th class="col-sm-8">Cta</th>\r\n                        <th class="col-sm-1">&nbsp;</th>\r\n                    </tr>\r\n                    <tr ng-repeat="columna in objeto.libroVenta">\r\n                        <td>\r\n                            <select ng-show="!columna.columna.campo" ng-model="columna.columna" class="form-control form-white" ng-options="col as col.label | uppercase for col in opciones.venta | toArray | filter: filtrarColumnasLibro(\'libroVenta\', $index)">\r\n                                <option value=""></option>\r\n                            </select>\r\n                            <span ng-show="columna.columna.campo">\r\n                                {{ columna.columna.label }}\r\n                                <a href="javascript:void(0);" class="text-danger" ng-click="columna.columna=\'\';">\r\n                                    <i class="fa fa-remove"></i>\r\n                                </a>\r\n                            </span>\r\n                        </td>\r\n                        <td>\r\n                            <div ng-if="columna.columna.subcampo">\r\n                                <table class="table table-striped">\r\n                                    <tr>\r\n                                        <th class="col-sm-5">Cod Impuesto</th>\r\n                                        <th class="col-sm-6">Cuenta</th>\r\n                                        <th class="col-sm-1">&nbsp;</th>\r\n                                    </tr>\r\n                                    <tr ng-repeat="cod in objeto[\'libroVenta\'][$parent.$index].subcampos">\r\n                                        <td>\r\n                                            <select ng-show="!cod.impuesto" ng-model="cod.impuesto" class="form-control form-white" ng-options="{ id: key, valor: value } as key + \' | \'+ value for (key , value) in opciones.impuestos">\r\n                                                <option value=""></option>\r\n                                            </select>\r\n                                            <span ng-show="cod.impuesto">\r\n                                                {{ cod.impuesto.id  + \' | \' +  cod.impuesto.valor }}\r\n                                                <a href="javascript:void(0);" class="text-danger" ng-click="cod.impuesto=\'\';">\r\n                                                    <i class="fa fa-remove"></i>\r\n                                                </a>\r\n                                            </span>\r\n\r\n                                        </td>\r\n                                        <td>\r\n                                            <div class="col-sm-10" style="padding: 0px">\r\n                                                <input type="text" ng-show="!cod.cuenta.id" ng-model="cod.cuenta" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="cuentaVenta[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" ng-class="{\'inputLoading\' : cuentaVenta[ $index ] }" required>\r\n                                                <span ng-show="cod.cuenta.id">\r\n                                                    {{ cod.cuenta.cuenta }}\r\n                                                    <a href="javascript:void(0);" class="text-danger" ng-click="cod.cuenta=\'\';">\r\n                                                        <i class="fa fa-remove"></i>\r\n                                                    </a>\r\n                                                </span>\r\n                                            </div>\r\n                                            <div class="col-sm-2" style="padding: 2px" ng-show="!cod.cuenta.id">\r\n                                                <button class="btn btn-sm btn-primary" ng-click="buscarCuenta(cod)" tooltip="Buscar en Plan de Cuentas" style="margin:0px">\r\n                                                    <i class="fa fa-search"></i>\r\n                                                </button>\r\n                                            </div>\r\n                                        </td>\r\n                                        <td>\r\n                                            <button class="btn btn-danger btn-xs" ng-click="quitarImpuesto(\'libroVenta\', columna, cod)">\r\n                                                <i class="fa fa-minus-circle"></i>\r\n                                            </button>\r\n                                        </td>\r\n                                    </tr>\r\n                                </table>\r\n                                <button class="btn btn-warning btn-xs" ng-click="agregarImpuesto(\'libroVenta\', columna)">\r\n                                    <i class="fa fa-plus"></i> Agregar Impuesto\r\n                                </button>\r\n                            </div>\r\n                            <div ng-if="!columna.columna.subcampo">\r\n                                <div class="col-sm-10" style="padding: 0px">\r\n                                    <input type="text" ng-show="!columna.cuenta.id" ng-model="columna.cuenta" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="cuentaVenta[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" ng-class="{\'inputLoading\' : cuentaVenta[ $index ] }" required>\r\n                                    <span ng-show="columna.cuenta.id">\r\n                                        {{ columna.cuenta.cuenta }}\r\n                                        <a href="javascript:void(0);" class="text-danger" ng-click="columna.cuenta=\'\';">\r\n                                            <i class="fa fa-remove"></i>\r\n                                        </a>\r\n                                    </span>\r\n                                </div>\r\n                                <div class="col-sm-2" style="padding: 2px" ng-show="!columna.cuenta.id">\r\n                                    <button class="btn btn-sm btn-primary" ng-click="buscarCuenta(columna)" tooltip="Buscar en Plan de Cuentas" style="margin:0px">\r\n                                        <i class="fa fa-search"></i>\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </td>\r\n                        <td>\r\n                            <button class="btn btn-danger btn-xs" ng-click="quitarColumna(\'libroVenta\', columna)">\r\n                                <i class="fa fa-remove"></i>\r\n                            </button>\r\n                        </td>\r\n                    </tr>\r\n                </table>\r\n                <button class="btn btn-warning btn-xs" ng-click="agregarColumna(\'libroVenta\')">\r\n                    <i class="fa fa-plus"></i> Agregar\r\n                </button>\r\n            </div>\r\n        </div>\r\n\r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-primary" ng-if="formulario.validar" ng-disabled="form.$invalid" ng-click="guardar()">Guardar</button>\r\n    <button class="btn btn-primary" ng-if="formulario.validar" ng-disabled="form.$invalid" ng-click="guardar(true)">Guardar/Cerrar</button>\r\n    <button class="btn btn-default" ng-click="cancel()">Cerrar</button>\r\n</div>'),
a.put("views/forms/form-cuenta-configuracion.html",'<div class="modal-header">\r\n    <h3 class="modal-title">Configuración de Cuenta</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" name="form" novalidate>\r\n\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Parámetros de la Cuenta</div>\r\n            <div class="panel-body">\r\n                <div class="form-group form-group-md">\r\n                    <label class="col-sm-2 control-label">Cuenta:</label>\r\n                    <label class="col-sm-10 control-label">\r\n                        {{ objeto.nombre }} / {{ objeto.codigo }}\r\n                    </label>\r\n                </div>\r\n        		<table class="table table-striped">\r\n        			<tr>\r\n    					<th>#</th>\r\n        			    <th class="col-xs-5">Parámetro</th>\r\n                        <th class="col-xs-1">Valor</th>\r\n                        <th></th>\r\n                        <th>#</th>\r\n                        <th class="col-xs-5">Parámetro</th>\r\n                        <th class="col-xs-1">Valor</th>\r\n                    </tr>\r\n\r\n                     <tr>\r\n                        <td>1</td>\r\n                        <td>\r\n                            Centro de Costo\r\n                        </td>\r\n                        <td>\r\n                            <label class="switch switch-green">\r\n                                <input class="switch-input" ng-model="configuracion.centroCosto" type="checkbox">\r\n                                <span class="switch-label" data-on="SI" data-off="NO"></span>\r\n                                <span class="switch-handle"></span>\r\n                            </label>\r\n                        </td>            \r\n                        <td rowspan="15">&nbsp;</td>        \r\n                        <td>2</td>\r\n                        <td>\r\n                            Banco\r\n                        </td>\r\n                        <td>\r\n                            <label class="switch switch-green">\r\n                                <input class="switch-input" ng-model="configuracion.banco" type="checkbox">\r\n                                <span class="switch-label" data-on="SI" data-off="NO"></span>\r\n                                <span class="switch-handle"></span>\r\n                            </label>\r\n                        </td>\r\n\r\n                    </tr>\r\n\r\n                    <tr>\r\n                        <td>3</td>\r\n                        \r\n                        <td>\r\n                            Valor Tributario\r\n                        </td>\r\n                        <td>\r\n                            <label class="switch switch-green">\r\n                                <input class="switch-input" ng-model="configuracion.capitalPropio" type="checkbox">\r\n                                <span class="switch-label" data-on="SI" data-off="NO"></span>\r\n                                <span class="switch-handle"></span>\r\n                            </label>\r\n                        </td>\r\n\r\n                        <td>4</td>\r\n                        <td>\r\n                            Documentos\r\n                        </td>\r\n                        <td>\r\n                            <label class="switch switch-green">\r\n                                <input class="switch-input" ng-model="configuracion.documentos" type="checkbox">\r\n                                <span class="switch-label" data-on="SI" data-off="NO"></span>\r\n                                <span class="switch-handle"></span>\r\n                            </label>\r\n                        </td>\r\n\r\n                    </tr>\r\n\r\n                    <tr>\r\n                        <td>5</td>\r\n                        <td>\r\n                            Existencias\r\n                        </td>\r\n                        <td>\r\n                            <label class="switch switch-green">\r\n                                <input class="switch-input" ng-model="configuracion.existencias" type="checkbox">\r\n                                <span class="switch-label" data-on="SI" data-off="NO"></span>\r\n                                <span class="switch-handle"></span>\r\n                            </label>\r\n                        </td>\r\n                    \r\n                        <td>6</td>\r\n                        <td>\r\n                            Activos Fijos\r\n                        </td>\r\n                        <td>\r\n                            <label class="switch switch-green">\r\n                                <input class="switch-input" ng-model="configuracion.activosFijos" type="checkbox">\r\n                                <span class="switch-label" data-on="SI" data-off="NO"></span>\r\n                                <span class="switch-handle"></span>\r\n                            </label>\r\n                        </td>\r\n                    </tr>\r\n\r\n                    <tr>\r\n                        <td>7</td>\r\n                        <td>\r\n                            Retiros\r\n                        </td>\r\n                        <td>\r\n                            <label class="switch switch-green">\r\n                                <input class="switch-input" ng-model="configuracion.retiros" type="checkbox">\r\n                                <span class="switch-label" data-on="SI" data-off="NO"></span>\r\n                                <span class="switch-handle"></span>\r\n                            </label>\r\n                        </td>\r\n                   \r\n                        <td>8</td>\r\n                        <td>\r\n                            Corrección Monetaria\r\n                        </td>\r\n                        <td>\r\n                            <label class="switch switch-green">\r\n                                <input class="switch-input" ng-model="configuracion.correccion" type="checkbox">\r\n                                <span class="switch-label" data-on="SI" data-off="NO"></span>\r\n                                <span class="switch-handle"></span>\r\n                            </label>\r\n                        </td>\r\n                    </tr>\r\n\r\n                     <tr>\r\n                        <td>9</td>\r\n                        <td>\r\n                            Usa Cta Auxiliar:\r\n                        </td>\r\n                        <td colspan="4">\r\n                            <select ng-model="configuracion.auxiliar" ng-options="cta as cta.auxiliar for cta in opciones.auxiliares" class="form-control form-white"></select>\r\n                        </td>\r\n\r\n                    </tr>\r\n\r\n        		</table>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-primary" ng-disabled="form.$invalid" ng-click="guardar()">Cerrar</button>\r\n</div>'),a.put("views/forms/form-cuenta-ifrs-configuracion.html",'<div class="modal-header">\r\n    <h3 class="modal-title">Configuración de Cuenta IFRS</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" name="form" novalidate>\r\n\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Parámetros de la Cuenta</div>\r\n            <div class="panel-body">\r\n                <div class="form-group form-group-md">\r\n                    <label class="col-sm-2 control-label">Cuenta:</label>\r\n                    <label class="col-sm-10 control-label">\r\n                        {{ objeto.nombre }} / {{ objeto.codigo }}\r\n                    </label>\r\n                </div>\r\n        		<table class="table table-striped">\r\n        			<tr>\r\n    					<th>#</th>\r\n        			    <th class="col-xs-5">Parámetro</th>\r\n                        <th class="col-xs-1">Valor</th>\r\n                        <th></th>\r\n                        <th>#</th>\r\n                        <th class="col-xs-5">Parámetro</th>\r\n                        <th class="col-xs-1">Valor</th>\r\n                    </tr>\r\n\r\n                     <tr>\r\n                        <td>1</td>\r\n                        <td>\r\n                            Centro de Costo\r\n                        </td>\r\n                        <td>\r\n                            <label class="switch switch-green">\r\n                                <input class="switch-input" ng-model="configuracion.centroCosto" type="checkbox">\r\n                                <span class="switch-label" data-on="SI" data-off="NO"></span>\r\n                                <span class="switch-handle"></span>\r\n                            </label>\r\n                        </td>            \r\n                        <td rowspan="15">&nbsp;</td>        \r\n                        <td>2</td>\r\n                        <td>\r\n                            Banco\r\n                        </td>\r\n                        <td>\r\n                            <label class="switch switch-green">\r\n                                <input class="switch-input" ng-model="configuracion.banco" type="checkbox">\r\n                                <span class="switch-label" data-on="SI" data-off="NO"></span>\r\n                                <span class="switch-handle"></span>\r\n                            </label>\r\n                        </td>\r\n\r\n                    </tr>\r\n\r\n                    <tr>\r\n                        <td>3</td>\r\n                        \r\n                        <td>\r\n                            Capital Propio\r\n                        </td>\r\n                        <td>\r\n                            <label class="switch switch-green">\r\n                                <input class="switch-input" ng-model="configuracion.capitalPropio" type="checkbox">\r\n                                <span class="switch-label" data-on="SI" data-off="NO"></span>\r\n                                <span class="switch-handle"></span>\r\n                            </label>\r\n                        </td>\r\n\r\n                        <td>4</td>\r\n                        <td>\r\n                            Documentos\r\n                        </td>\r\n                        <td>\r\n                            <label class="switch switch-green">\r\n                                <input class="switch-input" ng-model="configuracion.documentos" type="checkbox">\r\n                                <span class="switch-label" data-on="SI" data-off="NO"></span>\r\n                                <span class="switch-handle"></span>\r\n                            </label>\r\n                        </td>\r\n\r\n                    </tr>\r\n\r\n                    <tr>\r\n                        <td>5</td>\r\n                        <td>\r\n                            Existencias\r\n                        </td>\r\n                        <td>\r\n                            <label class="switch switch-green">\r\n                                <input class="switch-input" ng-model="configuracion.existencias" type="checkbox">\r\n                                <span class="switch-label" data-on="SI" data-off="NO"></span>\r\n                                <span class="switch-handle"></span>\r\n                            </label>\r\n                        </td>\r\n                    \r\n                        <td>6</td>\r\n                        <td>\r\n                            Activos Fijos\r\n                        </td>\r\n                        <td>\r\n                            <label class="switch switch-green">\r\n                                <input class="switch-input" ng-model="configuracion.activosFijos" type="checkbox">\r\n                                <span class="switch-label" data-on="SI" data-off="NO"></span>\r\n                                <span class="switch-handle"></span>\r\n                            </label>\r\n                        </td>\r\n                    </tr>\r\n\r\n                    <tr>\r\n                        <td>7</td>\r\n                        <td>\r\n                            Retiros\r\n                        </td>\r\n                        <td>\r\n                            <label class="switch switch-green">\r\n                                <input class="switch-input" ng-model="configuracion.retiros" type="checkbox">\r\n                                <span class="switch-label" data-on="SI" data-off="NO"></span>\r\n                                <span class="switch-handle"></span>\r\n                            </label>\r\n                        </td>\r\n                   \r\n                        <td>8</td>\r\n                        <td>\r\n                            Corrección Monetaria\r\n                        </td>\r\n                        <td>\r\n                            <label class="switch switch-green">\r\n                                <input class="switch-input" ng-model="configuracion.correccion" type="checkbox">\r\n                                <span class="switch-label" data-on="SI" data-off="NO"></span>\r\n                                <span class="switch-handle"></span>\r\n                            </label>\r\n                        </td>\r\n                    </tr>\r\n\r\n                     <tr>\r\n                        <td>9</td>\r\n                        <td>\r\n                            Usa Cta Auxiliar:\r\n                        </td>\r\n                        <td colspan="4">\r\n                            <select ng-model="configuracion.auxiliar" ng-options="cta as cta.auxiliar for cta in opciones.auxiliares" class="form-control form-white"></select>\r\n                        </td>\r\n\r\n                    </tr>\r\n\r\n        		</table>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-primary" ng-disabled="form.$invalid" ng-click="guardar()">Cerrar</button>\r\n</div>'),a.put("views/forms/form-cuenta-ifrs.html",'<script type="text/ng-template" id="customTemplate.html">\r\n    <a style="cursor: pointer;">\r\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\r\n    </a>\r\n</script>\r\n<div class="modal-header">\r\n    <h3 class="modal-title">Administración de Cuenta IFRS</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" name="form" novalidate autocomplete="Off">\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Datos de la Cuenta</div>\r\n            <div class="panel-body">\r\n                \r\n                <div class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Clasificación:</label>\r\n                    <div class="col-sm-6">\r\n             			<input type="text" name="clasificacion" ng-model="objeto.clasificacion" placeholder="Buscar Clasificación" uib-typeahead="clasificacion as clasificacion.clasificacion for clasificacion in getClasificaciones($viewValue)" typeahead-loading="loadingClasificacion" typeahead-on-select="obtenerCodigoCuenta(); formatearDigitoCodigo(); comprobarCodigoCuenta(); " typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" required>\r\n                    </div>\r\n                    <div class="col-sm-1">\r\n                        <a href="javascript:void(0);" ng-click="openClasificacion()" title="Administración de Clasificaciones de Cuenta">\r\n                            <i class="fa fa-wrench"></i>\r\n                        </a>\r\n                    </div>\r\n                    <div class="col-sm-1">\r\n                        <i ng-show="loadingClasificacion" class="glyphicon glyphicon-refresh"></i>\r\n                        <i ng-if="objeto.clasificacion.id" class="fa fa-check" style="color: #0a0"></i>\r\n                    </div>\r\n                </div>\r\n                <div class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Código:</label>\r\n                    <div class="col-sm-3">\r\n                        <div class="input-group">\r\n                            <span class="input-group-addon">{{ objeto.clasificacion.codigo }}.</span>\r\n                            <input type="text" class="form-control form-white" name="codigocuenta" maxlength="3" ng-model="objeto.codigo" ng-blur="comprobarCodigoCuenta();" ng-minlength="{{ largoCodigoCuenta }}" ng-pattern="onlyNumbers">\r\n                        </div>\r\n                    </div>\r\n                    <div ng-if="comprobandoCuenta">\r\n                        <img src="images/cargando.37ead0fc.gif">\r\n                    </div>\r\n                    <div ng-if="bloquearFormulario" class="col-sm-6 text-danger">\r\n                        Código Existente!\r\n                    </div>\r\n                    <div ng-if="form[\'codigocuenta\'].$error.pattern" class="text-danger"><strong>Solo Números!</strong></div>  \r\n                    <div ng-if="form[\'codigocuenta\'].$error.minlength" class="text-danger"><strong>{{ largoCodigoCuenta }} Digitos!</strong></div>\r\n                </div>\r\n                <div class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Cuenta:</label>\r\n                    <div class="col-sm-6">\r\n                        <input type="text" ng-model="objeto.nombre" placeholder="Nombre de la Cuenta" class="form-control form-white">\r\n                    </div>\r\n                </div>\r\n                <div class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label">Configurar SubCuentas:</label>\r\n                    <div class="col-sm-4">\r\n                        <label class="switch switch-green">\r\n                            <input class="switch-input" ng-model="objeto.configurarSubCuentas" type="checkbox" ng-change="habilitarSubCuentas()">\r\n                            <span class="switch-label" data-on="SI" data-off="NO"></span>\r\n                            <span class="switch-handle"></span>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                <div ng-if="!objeto.configurarSubCuentas" class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label">Configurar:</label>\r\n                    <div class="col-sm-4">\r\n                        <button ng-click="openConfiguracionCuenta( objeto, 1)" type="button" class="btn btn-xs btn-success">Configurar</button>\r\n                    </div>\r\n                </div>       \r\n                <div ng-if="!objeto.configurarSubCuentas" class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label">InHabilitar:</label>\r\n                    <div class="col-sm-4">\r\n                        <label class="switch switch-green">\r\n                            <input class="switch-input" ng-model="objeto.inhabilitar" type="checkbox">\r\n                            <span class="switch-label" data-on="SI" data-off="NO"></span>\r\n                            <span class="switch-handle"></span>\r\n                        </label>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="panel panel-default" ng-if="objeto.configurarSubCuentas">\r\n            <div class="panel-heading">Lista de Sub Cuentas</div>\r\n            <div class="panel-body">\r\n        		<table class="table table-striped">\r\n        			<tr>\r\n    					<th>#</th>\r\n        			    <th class="col-xs-2">Código</th>\r\n                        <th class="col-xs-7">SubCuenta</th>\r\n                        <th class="col-xs-2">Configurar</th>\r\n                        <th class="col-xs-2">InHabilitar</th>\r\n                        <th></th>\r\n                    </tr>\r\n                    <tr ng-repeat="subcuenta in objeto.subcuentas">\r\n                        <td>{{ $index + 1 }}</td>\r\n                        <td>\r\n                            <div class="input-group" ng-init="subcuenta.codigoCuenta = objeto.clasificacion.codigo + \'.\' + objeto.codigo " ng-class="{\'has-error\': subcuenta.isDuplicate}">\r\n                                <span class="input-group-addon">{{ objeto.clasificacion.codigo }}.{{ objeto.codigo }}.</span>\r\n                                <input type="text" name="subcodigo{{ $index }}" ng-model="subcuenta.codigo" class="form-control form-white" style="width:50px !important" maxlength="{{ largoCodigoSubCuenta }}" ng-minlength="{{ largoCodigoSubCuenta }}" ng-maxlength="{{ largoCodigoSubCuenta }}" ng-change="verifyDuplicate()" ng-pattern="onlyNumbers" required>\r\n                            </div>     \r\n                            <div ng-if="subcuenta.isDuplicate" class="text-danger"><strong>Código Existente!</strong></div>  \r\n                            <div ng-if="form[\'subcodigo\'+$index].$error.pattern" class="text-danger"><strong>Solo Números!</strong></div>  \r\n                            <div ng-if="form[\'subcodigo\'+$index].$error.minlength" class="text-danger"><strong>{{ largoCodigoSubCuenta }} Digitos!</strong></div>                 \r\n                        </td>\r\n                        <td><input type="text" ng-model="subcuenta.nombre" class="form-control form-white" required></td>\r\n                        <td>\r\n                            <button ng-click="openConfiguracionCuenta( subcuenta, 2)" type="button" class="btn btn-xs btn-success">Configurar</button>\r\n                        </td>\r\n                        <td>\r\n                            <label class="switch switch-green">\r\n                                <input class="switch-input" ng-model="subcuenta.inhabilitar" type="checkbox">\r\n                                <span class="switch-label" data-on="SI" data-off="NO"></span>\r\n                                <span class="switch-handle"></span>\r\n                            </label>\r\n                        </td>\r\n                        <td>\r\n                            <i ng-if="subcuenta.id" class="fa fa-trash pointer" confirmation-click="eliminarSubCuenta(subcuenta)" confirmation-needed="La Sub Cuenta será eliminada.Desea continuar?"></i>\r\n\r\n                            <i ng-if="!subcuenta.id" class="fa fa-trash pointer" ng-click="eliminarSubCuenta(subcuenta)"></i>\r\n                        </td>\r\n                    </tr>\r\n        		</table>\r\n\r\n                <button type="button" ng-click="agregarSubCuenta()" class="btn btn-xs btn-primary"><i class="fa fa-plus"></i> Agregar SubCuenta</button>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-default" ng-click="cancel()">Cancelar</button>\r\n    <button class="btn btn-primary" ng-disabled="form.$invalid || bloquearFormulario" ng-click="guardar()">Guardar</button>\r\n</div>'),a.put("views/forms/form-cuenta-parametros-asignacion.html",'<div class="modal-header">\r\n    <h3 class="modal-title">Gestión de Parametros de la Cuenta</h3>\r\n</div>\r\n<div class="modal-body form-horizontal">\r\n    <form name="form" autocomplete="Off" novalidate>\r\n        <div class="form-group">\r\n            <label class="col-sm-3 control-label">Columna Destino:</label>\r\n            <div class="col-sm-9">\r\n                {{ objeto.columna }}\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label class="col-sm-3 control-label">Cuenta:</label>\r\n            <div class="col-sm-9">\r\n                {{ opciones.datosCuenta.cuenta }}\r\n            </div>\r\n        </div>\r\n        <div class="form-group" ng-if="objeto.auxiliarTipo">\r\n            <label class="col-sm-3 control-label">Auxiliar:</label>\r\n            <div class="col-sm-8">\r\n                {{ opciones.auxiliar }}\r\n            </div>\r\n            <div class="col-sm-8" ng-if="objeto.auxiliarTipo==1000001">\r\n                <div class="form-group form-group-md sinMargen">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Rut:</label>\r\n                    <div class="col-sm-4">\r\n                        {{ objeto.auxiliar.rut }}\r\n                    </div>\r\n                </div>\r\n                <div class="form-group form-group-md sinMargen">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Razon Social:</label>\r\n                    <div class="col-sm-8">\r\n                        {{ objeto.auxiliar.razonSocial }}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="col-sm-8" ng-if="[1000001, 1000002].indexOf( objeto.auxiliarTipo ) == -1">\r\n                <select ng-model="objeto.auxiliar" ng-options="cta as cta.auxiliar for cta in opciones.auxiliares" class="form-control form-white" required></select>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="form-group" ng-if="opciones.bancos.length > 0">\r\n            <label class="col-sm-3 control-label">Banco:</label>\r\n            <div class="col-sm-8">\r\n                <select ng-model="objeto.banco" ng-options="ban as ban.banco for ban in opciones.bancos" class="form-control form-white" required></select>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="form-group" ng-if="opciones.centrosCostos.length > 0">\r\n            <label class="col-sm-3 control-label">Centros de Costos:</label>\r\n            <div class="col-sm-8">\r\n                <label class="col-sm-3 control-label">Total:</label>\r\n                <div class="col-sm-8">{{ objeto.monto | currency:"$":0 }}</div>\r\n\r\n                <table class="table">\r\n                    <tr>\r\n                        <th>#</th>\r\n                        <th class="col-sm-3">%</th>\r\n                        <th class="col-sm-3">Monto</th>\r\n                        <th class="col-sm-6">Centro de Costos</th>\r\n                        <th>&nbsp;</th>\r\n                    </tr>\r\n                    <tr ng-repeat="centro in objeto.centrosCostos">\r\n                        <td>{{ $index + 1 }}</td>\r\n                        <td>\r\n                            <input type="text" ng-model="centro.porcentaje" ui-percentage-mask="0" max="1" maxlength="4" class="form-control form-white" ng-change="calcularMonto(centro);" required>                            \r\n                        </td>\r\n                        <td>\r\n                            {{ centro.monto | currency:"$":0 }}\r\n                        </td>\r\n                        <td>\r\n                            <select ng-model="centro.centroCosto" ng-options="ban as ban.value for ban in opciones.centrosCostos" class="form-control form-white" required></select>\r\n                        </td>\r\n                        <td>\r\n                            <a href="javascript:void(0)" ng-if="objeto.centrosCostos.length > 1" ng-click="quitarCentroCostos(); calcularSumaMontos();" class="btn btn-danger btn-xs">\r\n                                <i class="fa fa-remove"></i> \r\n                            </a>\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>&nbsp;</td>\r\n                        <td></td>\r\n                        <td ng-class="{\'bg-success\' : objeto.totalCentrosCostos==objeto.monto }">{{ objeto.totalCentrosCostos | currency:"$":0 }}</td>\r\n                        <td>&nbsp;</td>\r\n                    </tr>\r\n                </table>         \r\n                <button class="btn btn-primary btn-sm" ng-click="agregarCentroCostos()"><i class="fa fa-plus"></i> Agregar Centro de Costo</button>       \r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-default" ng-click="cancel()">Cancelar</button>\r\n    <button class="btn btn-primary" ng-disabled="form.$invalid || (objeto.totalCentrosCostos!=objeto.monto && opciones.centrosCostos.length > 0 )" ng-click="asignar()">Asignar</button>\r\n</div>'),a.put("views/forms/form-cuenta.html",'<script type="text/ng-template" id="customTemplate.html">\r\n    <a style="cursor: pointer;">\r\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\r\n    </a>\r\n</script>\r\n<div class="modal-header">\r\n    <h3 class="modal-title">Administración de Cuenta</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" name="form" novalidate autocomplete="Off">\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Datos de la Cuenta</div>\r\n            <div class="panel-body">\r\n                \r\n                <div class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Clasificación:</label>\r\n                    <div class="col-sm-6">\r\n             			<input type="text" name="clasificacion" ng-model="objeto.clasificacion" placeholder="Buscar Clasificación" uib-typeahead="clasificacion as clasificacion.clasificacion for clasificacion in getClasificaciones($viewValue)" typeahead-loading="loadingClasificacion" typeahead-on-select="obtenerCodigoCuenta(); formatearDigitoCodigo(); comprobarCodigoCuenta(); " typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" required>\r\n                    </div>\r\n                    <div class="col-sm-1">\r\n                        <a href="javascript:void(0);" ng-click="openClasificacion()" title="Administración de Clasificaciones de Cuenta">\r\n                            <i class="fa fa-wrench"></i>\r\n                        </a>\r\n                    </div>\r\n                    <div class="col-sm-1">\r\n                        <i ng-show="loadingClasificacion" class="glyphicon glyphicon-refresh"></i>\r\n                        <i ng-if="objeto.clasificacion.id" class="fa fa-check" style="color: #0a0"></i>\r\n                    </div>\r\n                </div>\r\n                <div class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Código:</label>\r\n                    <div class="col-sm-3">\r\n                        <div class="input-group">\r\n                            <span class="input-group-addon">{{ objeto.clasificacion.codigo }}.</span>\r\n                            <input type="text" class="form-control form-white" name="codigocuenta" maxlength="3" ng-model="objeto.codigo" ng-blur="comprobarCodigoCuenta();" ng-minlength="{{ largoCodigoCuenta }}" ng-pattern="onlyNumbers">\r\n                        </div>\r\n                    </div>\r\n                    <div ng-if="comprobandoCuenta">\r\n                        <img src="images/cargando.37ead0fc.gif">\r\n                    </div>\r\n                    <div ng-if="bloquearFormulario" class="col-sm-6 text-danger">\r\n                        Código Existente!\r\n                    </div>\r\n                    <div ng-if="form[\'codigocuenta\'].$error.pattern" class="text-danger"><strong>Solo Números!</strong></div>  \r\n                    <div ng-if="form[\'codigocuenta\'].$error.minlength" class="text-danger"><strong>{{ largoCodigoCuenta }} Digitos!</strong></div>\r\n                </div>\r\n                <div class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Cuenta:</label>\r\n                    <div class="col-sm-6">\r\n                        <input type="text" ng-model="objeto.nombre" placeholder="Nombre de la Cuenta" class="form-control form-white">\r\n                    </div>\r\n                </div>\r\n                <div class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label">Configurar SubCuentas:</label>\r\n                    <div class="col-sm-4">\r\n                        <label class="switch switch-green">\r\n                            <input class="switch-input" ng-model="objeto.configurarSubCuentas" type="checkbox" ng-change="habilitarSubCuentas()">\r\n                            <span class="switch-label" data-on="SI" data-off="NO"></span>\r\n                            <span class="switch-handle"></span>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                <div ng-if="!objeto.configurarSubCuentas" class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label">Configurar:</label>\r\n                    <div class="col-sm-4">\r\n                        <button ng-click="openConfiguracionCuenta( objeto, 1)" type="button" class="btn btn-xs btn-success">Configurar</button>\r\n                    </div>\r\n                </div>       \r\n                <div ng-if="!objeto.configurarSubCuentas" class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label">InHabilitar:</label>\r\n                    <div class="col-sm-4">\r\n                        <label class="switch switch-green">\r\n                            <input class="switch-input" ng-model="objeto.inhabilitar" type="checkbox">\r\n                            <span class="switch-label" data-on="SI" data-off="NO"></span>\r\n                            <span class="switch-handle"></span>\r\n                        </label>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="panel panel-default" ng-if="objeto.configurarSubCuentas">\r\n            <div class="panel-heading">Lista de Sub Cuentas</div>\r\n            <div class="panel-body">\r\n        		<table class="table table-striped">\r\n        			<tr>\r\n    					<th>#</th>\r\n        			    <th class="col-xs-2">Código</th>\r\n                        <th class="col-xs-7">SubCuenta</th>\r\n                        <th class="col-xs-2">Configurar</th>\r\n                        <th class="col-xs-2">InHabilitar</th>\r\n                        <th></th>\r\n                    </tr>\r\n                    <tr ng-repeat="subcuenta in objeto.subcuentas">\r\n                        <td>{{ $index + 1 }}</td>\r\n                        <td>\r\n                            <div class="input-group" ng-init="subcuenta.codigoCuenta = objeto.clasificacion.codigo + \'.\' + objeto.codigo " ng-class="{\'has-error\': subcuenta.isDuplicate}">\r\n                                <span class="input-group-addon">{{ objeto.clasificacion.codigo }}.{{ objeto.codigo }}.</span>\r\n                                <input type="text" name="subcodigo{{ $index }}" ng-model="subcuenta.codigo" class="form-control form-white" style="width:50px !important" maxlength="{{ largoCodigoSubCuenta }}" ng-minlength="{{ largoCodigoSubCuenta }}" ng-maxlength="{{ largoCodigoSubCuenta }}" ng-change="verifyDuplicate()" ng-pattern="onlyNumbers" required>\r\n                            </div>     \r\n                            <div ng-if="subcuenta.isDuplicate" class="text-danger"><strong>Código Existente!</strong></div>  \r\n                            <div ng-if="form[\'subcodigo\'+$index].$error.pattern" class="text-danger"><strong>Solo Números!</strong></div>  \r\n                            <div ng-if="form[\'subcodigo\'+$index].$error.minlength" class="text-danger"><strong>{{ largoCodigoSubCuenta }} Digitos!</strong></div>                 \r\n                        </td>\r\n                        <td><input type="text" ng-model="subcuenta.nombre" class="form-control form-white" required></td>\r\n                        <td>\r\n                            <button ng-click="openConfiguracionCuenta( subcuenta, 2)" type="button" class="btn btn-xs btn-success">Configurar</button>\r\n                        </td>\r\n                        <td>\r\n                            <label class="switch switch-green">\r\n                                <input class="switch-input" ng-model="subcuenta.inhabilitar" type="checkbox">\r\n                                <span class="switch-label" data-on="SI" data-off="NO"></span>\r\n                                <span class="switch-handle"></span>\r\n                            </label>\r\n                        </td>\r\n                        <td>\r\n                            <i ng-if="subcuenta.id" class="fa fa-trash pointer" confirmation-click="eliminarSubCuenta(subcuenta)" confirmation-needed="La Sub Cuenta será eliminada.Desea continuar?"></i>\r\n\r\n                            <i ng-if="!subcuenta.id" class="fa fa-trash pointer" ng-click="eliminarSubCuenta(subcuenta)"></i>\r\n                        </td>\r\n                    </tr>\r\n        		</table>\r\n\r\n                <button type="button" ng-click="agregarSubCuenta()" class="btn btn-xs btn-primary"><i class="fa fa-plus"></i> Agregar SubCuenta</button>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-default" ng-click="cancel()">Cancelar</button>\r\n    <button class="btn btn-primary" ng-disabled="form.$invalid || bloquearFormulario" ng-click="guardar()">Guardar</button>\r\n</div>'),
a.put("views/forms/form-gestion-activos-fijos-documento.html",'<script type="text/ng-template" id="customTemplate.html">\r\n    <a style="cursor: pointer;">\r\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\r\n    </a>\r\n</script>\r\n<div class="modal-header">\r\n    <h3 class="modal-title">Ingreso de Activos Fijos</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" name="form" novalidate autocomplete="Off">\r\n        <div class="panel panel-default" ng-if="documento.id">\r\n            <div class="panel-heading">Datos del Documento</div>\r\n            <div class="panel-body">\r\n                <div class="form-group sinMargen">\r\n                    <label class="col-sm-4 control-label">Tipo Documento</label>\r\n                    <div class="col-sm-8">{{ documento.tipoDoc }}</div>\r\n                </div>\r\n                <div class="form-group sinMargen">\r\n                    <label class="col-sm-4 control-label">Fecha</label>\r\n                    <div class="col-sm-8">{{ documento.fecha | date:\'dd-MM-yyyy\'  }}</div>\r\n                </div>\r\n                <div class="form-group sinMargen">\r\n                    <label class="col-sm-4 control-label">Folio</label>\r\n                    <div class="col-sm-8">{{ documento.numero }}</div>\r\n                </div>\r\n                <div class="form-group sinMargen">\r\n                    <label class="col-sm-4 control-label">Rut</label>\r\n                    <div class="col-sm-8">{{ documento.rut }}</div>\r\n                </div>\r\n                <div class="form-group sinMargen">\r\n                    <label class="col-sm-4 control-label">Proveedor</label>\r\n                    <div class="col-sm-8">{{ documento.razonSocial }}</div>\r\n                </div>\r\n                <div class="form-group sinMargen">\r\n                    <label class="col-sm-4 control-label">Monto Total</label>\r\n                    <div class="col-sm-8">{{ documento.total | currency:"$":0 }}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div ng-if="!documento.id" class="row">\r\n            <div class="text-danger col-sm-12" style="font-size: 15px; text-align: center; padding: 5px; text-transform: uppercase">\r\n                <strong>\r\n                    Ingreso sin Documento de Compra\r\n                </strong>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="panel panel-success">\r\n            <div class="panel-heading">Activos Fijos</div>\r\n            <div class="panel-body">\r\n                <table class="table table-striped table-bordered">\r\n                    <tr>\r\n                        <th>#</th>\r\n                        <th class="col-xs-4">Activo Fijo</th>                        \r\n                        <th class="col-xs-2">Descripción</th>\r\n                        <th class="col-xs-1">Código Int</th>\r\n                        <th class="col-xs-1">Fecha Compra</th>\r\n                        <th>Meses Vida Util</th>\r\n                        <th class="col-xs-1">Mes Inicio Depreciacion</th>\r\n                        <th class="col-xs-2">Valor</th>\r\n                        <th class="col-xs-1">Acciones</th>\r\n                    </tr>\r\n                    <tr ng-repeat="activoFijo in gestion.activosFijos">\r\n                        <td>{{ $index + 1 }}</td>\r\n                        <td>\r\n                            {{\r\n                                activoFijo.activo.activoFijo\r\n                            }}<br>\r\n                            <span class="text-primary">Vida Util Normal: <strong>{{ activoFijo.activo.vidaUtilNormal }} Años</strong></span><br>\r\n                            <span class="text-danger">Depreciación Acelerada: <strong>{{ activoFijo.activo.depreciacionAcelerada }} Años</strong></span>\r\n                        </td>\r\n                        <td>\r\n                            {{ activoFijo.descripcion }}\r\n                        </td>\r\n                        <td>{{ activoFijo.codigo }}</td>\r\n                        <td>{{ activoFijo.fechaCompra | date:"MMMM-yyyy" }}</td>\r\n                        <td>{{ activoFijo.anios }} Meses</td>\r\n                        <td>{{ activoFijo.inicioDep | date:"MMMM-yyyy" }}</td>\r\n                        <td>{{ activoFijo.valor | currency:"$":0 }}</td>                        \r\n                        <td style="text-align: left">\r\n                            <a href="javascript:void(0);" uib-tooltip="Editar Activo Fijo" ng-click="crearActivoFijo(activoFijo);" class="btn btn-acciones btn-default">\r\n                                <i class="fa fa-edit"></i>\r\n                            </a>\r\n                            <a href="javascript:void(0);" uib-tooltip="Copiar Activo Fijo" ng-click="copiarActivoFijo(activoFijo);" class="btn btn-acciones btn-primary">\r\n                                <i class="fa fa-copy"></i>\r\n                            </a>\r\n                            <a href="javascript:void(0);" ng-click="quitarActivoFijo(activoFijo);" class="btn btn-acciones btn-danger">\r\n                                <i class="fa fa-remove"></i>\r\n                            </a>\r\n                        </td>\r\n                    </tr>\r\n                </table>\r\n                <button class="btn btn-warning" ng-click="crearActivoFijo({})">\r\n                    <i class="fa fa-plus"></i> Agregar Activo Fijo\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="modal-footer">  \r\n    <button class="btn btn-success" ng-if="gestion.activosFijos.length > 0" confirmation-click="guardar(true)" confirmation-needed="El Ingreso de Activos Fijos para este documento será <b>FINALIZADO</b>. Desea continuar?" ng-disabled="form.$invalid" ng-click="finalizar()">Grabar y Finalizar Ingreso</button>\r\n    <button class="btn btn-primary" ng-if="documento.id" ng-disabled="form.$invalid" ng-click="guardar(false)">Guardar</button>\r\n    <button class="btn btn-default" ng-click="cerrar()">Salir</button>\r\n</div>'),a.put("views/forms/form-gestion-pago-documentos.html",'<script type="text/ng-template" id="customTemplate.html">\r\n    <a style="cursor: pointer;">\r\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\r\n    </a>\r\n</script>\r\n<div class="modal-header">\r\n    <h3 class="modal-title">Pago de Documento</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" name="form" novalidate autocomplete="Off">\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Datos del Documento</div>\r\n            <div class="panel-body">\r\n                <h5><strong>Resumen por Tipo de Documento</strong></h5>\r\n                <table class="table table-striped table-bordered">\r\n                    <tr>\r\n                        <th class="col-sm-6">Tipo Documento</th>\r\n                        <th class="col-sm-2">Cantidad</th>\r\n                        <th class="col-sm-2">Total Pagar</th>\r\n                        <th class="col-sm-2">Total Abonar</th>\r\n                    </tr>\r\n                    <tr ng-repeat="res in resumenes">\r\n                        <td>{{ res.tipoDoc }}</td>\r\n                        <td style="text-align: right">{{ res.totalDoctos }}</td>\r\n                        <td style="text-align: right">{{ res.totalPagar | currency:"$":0 }}</td>\r\n                        <td style="text-align: right">{{ res.totalAbonar | currency:"$":0 }}</td>\r\n                    </tr>\r\n                </table>\r\n                <div ng-if="( documentos | filter : { pagar : 1 } ).length > 0 ">\r\n                    <h5><strong>Documentos a Pagar</strong></h5>\r\n                </div>\r\n                <div style="max-height: 500px; overflow-y: auto" ng-if="( documentos | filter : { pagar : 1 } ).length > 0 ">\r\n                    <table class="table table-striped table-bordered">\r\n                        <tr>\r\n                            <th>Tipo Documento</th>\r\n                            <th>Numero</th>\r\n                            <th>Fecha</th>\r\n                            <th>Rut</th>\r\n                            <th>Razon Social</th>\r\n                            <th>Monto</th>\r\n                        </tr>\r\n                        <tr ng-repeat="doc in documentos | filter : { pagar : 1 }">\r\n                            <td>{{ doc.tipoDoc }}</td>   \r\n                            <td style="text-align: right">{{ doc.numero }}</td>\r\n                            <td>{{ doc.fecha | date : \'dd-MM-yyyy\' }}</td>   \r\n                            <td>{{ doc.rut }}</td>   \r\n                            <td>{{ doc.razonSocial }}</td>   \r\n                            <td style="text-align: right">\r\n                                {{ doc.total | currency:"$":0 }}\r\n                                <span class="text-danger" ng-show="doc.totalNotaCredito > 0">\r\n                                    <br>N.Credito \r\n                                    {{ doc.totalNotaCredito | currency:"$":0 }}\r\n                                </span>\r\n                                <span ng-show="doc.totalNotaCredito > 0" style="font-weight: bold">\r\n                                    <br>\r\n                                    {{ doc.total  - doc.totalNotaCredito | currency:"$":0 }}\r\n                                </span>\r\n                            </td>\r\n                        </tr>\r\n                    </table>\r\n                </div>\r\n                <div ng-if="( documentos | filter : { pagar : 2 } ).length > 0 ">\r\n                    <h5><strong>Documento a abonar</strong></h5>\r\n                </div>\r\n                <div style="max-height: 500px; overflow-y: auto" ng-if="( documentos | filter : { pagar : 2 } ).length > 0 ">\r\n                    <table class="table table-striped table-bordered">\r\n                        <tr>\r\n                            <th>Tipo Documento</th>\r\n                            <th>Numero</th>\r\n                            <th>Fecha</th>\r\n                            <th>Rut</th>\r\n                            <th>Razon Social</th>\r\n                            <th>Monto</th>\r\n                        </tr>\r\n                        <tr ng-repeat="doc in documentos | filter : { pagar : 2 }">\r\n                            <td>{{ doc.tipoDoc }}</td>   \r\n                            <td style="text-align: right">{{ doc.numero }}</td>\r\n                            <td>{{ doc.fecha | date : \'dd-MM-yyyy\' }}</td>   \r\n                            <td>{{ doc.rut }}</td>   \r\n                            <td>{{ doc.razonSocial }}</td>   \r\n                            <td style="text-align: right">{{ doc.abono | currency:"$":0 }}</td>\r\n                        </tr>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="panel panel-success" ng-if="listaPagosAnticipos.length > 0">\r\n            <div class="panel-heading">Pagos Anticipados Registrados</div>\r\n            <div class="panel-body">\r\n                <table class="table table-striped table-bordered">\r\n                    <tr>\r\n                        <th class="col-xs-2">Fecha</th>\r\n                        <th class="col-xs-2">Monto</th>\r\n                        <th class="col-xs-2">Cliente Proveedor</th>\r\n                        <th class="col-xs-3">Observaciones</th>\r\n                        <th class="col-xs-3">Documento(s) Anticipo</th>\r\n                    </tr>\r\n                    <tr ng-repeat="anticipo in listaPagosAnticipos">\r\n                        <td>{{ anticipo.fecha | date : \'dd-MM-yyyy\'  }}</td>\r\n                        <td>{{ anticipo.total | currency:"$":0 }}</td>\r\n                        <td>{{ anticipo.razonSocial }}</td>\r\n                        <td>{{ anticipo.observaciones }}</td>\r\n                        <td>\r\n                            <div ng-repeat="doc in documentos | filter:{ clienteProvId : anticipo.clienteProvId}">\r\n                                <div class="col-sm-12" style="padding: 0px; margin: 0px">\r\n                                    <div class="col-sm-12">\r\n                                        <span>\r\n                                            {{ doc.tipoDoc + \' \' + doc.numero }}\r\n                                        </span>\r\n                                    </div>\r\n                                    <div class="col-sm-12">\r\n                                        <div class="input-group">\r\n                                            <span class="input-group-addon" id="basic-addon3">Monto</span>\r\n                                            <input type="text" ng-model="anticipo[\'A\' + doc.id].montoAnticipo" ng-change="calcularTotalAnticipado( anticipo )" class="form-control form-white" name="montoAnt{{ anticipo.id }}_{{ $index }}" ui-money-mask="0" max="doc.total" aria-describedby="basic-addon3">\r\n                                        </div>\r\n                                        <span class="text-danger" ng-show="form[\'montoAnt\' + anticipo.id + \'_\' + $index ].$error.max"><strong>El Monto no puede ser mayor al Total del Documento $ {{ doc.total | currency:"$":0 }}</strong></span>\r\n\r\n                                        <span class="text-danger" ng-show="doc.errorAnticipo"><strong>La Suma total de los anticipos registrados para el documento es superior al Total del Documento $ {{ doc.total | currency:"$":0 }}</strong></span>\r\n                                    </div>                            \r\n                                </div>\r\n                                <div class="col-sm-12" style="padding: 0px; margin:0px">\r\n                                    <hr style="margin: 5px">\r\n                                </div>\r\n                            </div>\r\n                            <div class="col-sm-12">\r\n                                <span class="text-primary">Total: <strong>{{ anticipo.totalAnticipos | currency:"$":0 }}</strong></span><br>\r\n                                <span class="text-success">Saldo: <strong ng-if=" anticipo.total - anticipo.totalAnticipos >= 0">{{ anticipo.total - anticipo.totalAnticipos | currency:"$":0 }}</strong></span><br>\r\n                                <span class="text-danger" ng-show="anticipo.total < anticipo.totalAnticipos"><br>\r\n                                <strong>El Monto Total no puede ser mayor al monto del Anticipo $ {{ anticipo.total | currency:"$":0 }}</strong></span>\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                </table>\r\n            </div>\r\n        </div>\r\n\r\n\r\n        <div class="panel panel-success" ng-if="listaNotasDebCred.length > 0">\r\n            <div class="panel-heading">Notas de Crédito </div>\r\n            <div class="panel-body">\r\n                <div style="max-height: 500px; overflow-y: auto">\r\n                    <table class="table table-striped table-bordered">\r\n                        <tr>\r\n                            <th class="col-xs-1">Fecha</th>\r\n                            <th class="col-xs-2">Tipo Documento</th>\r\n                            <th class="col-xs-1">Numero</th>\r\n                            <th class="col-xs-1">Monto</th>\r\n                            <th class="col-xs-2">Cliente Proveedor</th>\r\n                            <th class="col-xs-5">Documentos Asociados</th>\r\n                        </tr>\r\n                        <tr ng-repeat="nota in listaNotasDebCred">\r\n                            <td>{{ nota.fecha | date : \'dd-MM-yyyy\' }}</td>\r\n                            <td>{{ nota.tipoDoc }}</td>\r\n                            <td>{{ nota.numero }}</td>\r\n                            <td ng-class="{\'text-danger\' : nota.saldoInvalido}">\r\n                                {{ nota.total | currency:"$":0 }}\r\n                                <b class="fa fa-remove" ng-show="nota.saldoInvalido"></b>\r\n                                <small ng-if="nota.usado" class="text-primary"><br>\r\n                                    {{ nota.original | currency:"$":0 }}\r\n                                </small>\r\n                            </td>\r\n                            <td>{{ nota.razonSocial }}</td>\r\n                            <td>\r\n                                <table class="table table-striped table-bordered col-sm-12" ng-if="nota.documentosAsociados.length > 0">\r\n                                    <tr>\r\n                                        <th>Referencia</th>\r\n                                        <th>Monto</th>\r\n                                        <th>&nbsp;</th>\r\n                                    </tr>\r\n                                    <tr ng-repeat="doc in nota.documentosAsociados">\r\n                                        <td style="padding: 0px; padding-bottom: 4px">\r\n                                            <select ng-show="!doc.documentoAsoc.id" ng-model="doc.documentoAsoc" ng-options="opc as ( opc.tipoDoc + \' \' + opc.numero ) for opc in documentos | filter: filtrarDoctosSeleccionados(nota, $index)" class="form-control form-white" ng-change="totalNotasCreditoDebito(); comprobarMontoFacturaNotaCredito(nota, doc.documentoAsoc.id);">\r\n                                                <option value=""></option>\r\n                                            </select>\r\n                                            <span ng-if="doc.documentoAsoc.id">\r\n                                                {{\r\n                                                    doc.documentoAsoc.tipoDoc + \' \' + doc.documentoAsoc.numero\r\n                                                }}\r\n                                                <a href="javascript:void(0);" class="text-danger" ng-click="doc.documentoAsoc=\'\'; totalNotasCreditoDebito();">\r\n                                                    <i class="fa fa-remove"></i>\r\n                                                </a>\r\n                                            </span>\r\n                                        </td>\r\n                                        <td>\r\n                                            <input type="text" class="form-control form-white" ng-model="doc.monto" ui-money-mask="0" ng-disabled="!doc.documentoAsoc.id" ng-change="comprobarMontoFacturaNotaCredito(nota, doc.documentoAsoc.id); sumarMontosDocumentosAsociados(nota); totalNotasCreditoDebito(); ">\r\n                                            <span class="text-danger" ng-if="doc.documentoAsoc.total < doc.monto" style="font-weight: bold">\r\n                                                Monto superior a Referencia!<br>\r\n                                            </span>\r\n                                            <span class="text-danger" ng-show="nota.montoSuperiorFactura && doc.documentoAsoc.total >= doc.monto" style="font-weight: bold">\r\n                                                La suma de los montos excede el total de la Referencia\r\n                                            </span>\r\n                                        </td>\r\n                                        <td style="padding: 2px; text-align: center">\r\n                                            <a href="javascript:void(0);" class="btn btn-danger btn-xs" ng-click="quitarDocumentosAsociados( nota, doc); sumarMontosDocumentosAsociados(nota); comprobarMontoFacturaNotaCredito(nota, doc.documentoAsoc.id);">\r\n                                                <i class="fa fa-remove"></i>\r\n                                            </a>\r\n                                        </td>\r\n                                    </tr>\r\n                                </table>\r\n                                <span ng-show="nota.totalDocumentosAsociados > 0">Total Asignado: <b class="text-success">{{ nota.totalDocumentosAsociados | currency:"$":0 }}</b><br></span>\r\n                                <span ng-show="nota.totalDocumentosAsociados > 0">Saldo: <b class="text-primary">{{ (nota.total - nota.totalDocumentosAsociados) | currency:"$":0 }}</b><br></span>\r\n\r\n                                <span class="text-danger" style="font-weight: bold" ng-if="nota.saldoInvalido">\r\n                                    Monto(s) asignados sobrepasan el Total de la Nota de Credito!<br>\r\n                                </span>\r\n\r\n                                <button class="btn btn-warning btn-xs" ng-click="agregarDocumentosAsociados(nota);" ng-if="nota.documentosAsociados.length < (documentos | filter:{clienteProvId : clienteProvId} ).length">\r\n                                    <i class="fa fa-plus"></i> Agregar\r\n                                </button>\r\n                            </td>\r\n                        </tr>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="panel panel-primary">\r\n            <div class="panel-heading">Gestión de Pago</div>\r\n            <div class="panel-body">\r\n                <div class="form-group form-group-md" ng-if="objeto.totalAnticipos > 0">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Sub Total:</label>\r\n                    <div class="col-sm-6">\r\n                        {{ objeto.subTotal | currency:"$":0 }}\r\n                    </div>\r\n                </div>\r\n                \r\n                <div class="form-group form-group-md" ng-if="objeto.totalAnticipos > 0">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Total Anticipos:</label>\r\n                    <div class="col-sm-6">\r\n                        {{ objeto.totalAnticipos | currency:"$":0 }}\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Total:</label>\r\n                    <div class="col-sm-6">\r\n                        {{ objeto.total | currency:"$":0 }}\r\n                    </div>\r\n                </div>\r\n\r\n                <div ng-if="!objeto.total">\r\n                    <div class="form-group form-group-md">\r\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Fecha de Pago:</label>\r\n                        <div class="col-sm-3">\r\n                            <p class="input-group" style="margin:0px; padding:0px">\r\n                                <input type="text" uib-datepicker-popup="dd-MM-yyyy" name="fechaPago" ng-model="objeto.fechaPago" is-open="fechas[\'fechaPago\']" datepicker-options="dateOptionsPago" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" regular-fecha required>\r\n                                <span class="input-group-btn">\r\n                                    <button type="button" class="btn btn-primary" ng-click="openFecha(\'fechaPago\')"><i class="glyphicon glyphicon-calendar"></i></button>\r\n                                </span>\r\n                            </p>\r\n                        </div>\r\n                        <div class="col-sm-5 text-danger" ng-show="form[\'fechaPago\'].$error.date">\r\n                            Fecha no Válida\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div ng-if="objeto.total">\r\n                    <div class="form-group form-group-md">\r\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Medios de Pago:</label>\r\n                        <div class="col-sm-6">\r\n                            <ul>\r\n                                <li ng-repeat="medio in mediosHabilitados">{{ medio.medio }}</li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="form-group form-group-md">\r\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Fecha de Pago:</label>\r\n                        <div class="col-sm-3">\r\n                            <p class="input-group" style="margin:0px; padding:0px">\r\n                                <input type="text" uib-datepicker-popup="dd-MM-yyyy" name="fechaPago" ng-model="objeto.fechaPago" is-open="fechas[\'fechaPago\']" datepicker-options="dateOptionsPago" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" regular-fecha required>\r\n                                <span class="input-group-btn">\r\n                                    <button type="button" class="btn btn-primary" ng-click="openFecha(\'fechaPago\')"><i class="glyphicon glyphicon-calendar"></i></button>\r\n                                </span>\r\n                            </p>\r\n                        </div>\r\n                        <div class="col-sm-5 text-danger" ng-show="form[\'fechaPago\'].$error.date">\r\n                            Fecha no Válida\r\n                        </div>\r\n                    </div>\r\n\r\n            		<table class="table table-striped table-bordered">\r\n                        <tr>\r\n                            <th class="col-xs-3">Medio de Pago</th>\r\n                            <th class="col-xs-3">Cta Imputable</th>\r\n                            <th class="col-xs-4">Datos Medio de Pago</th>\r\n                            <th class="col-xs-2">Monto</th>\r\n                            <th>&nbsp;</th>\r\n                        </tr>\r\n                        <tr ng-repeat="pago in objeto.pagos">\r\n                            <td>\r\n                                <select ng-if="objeto.tipo==2 || objeto.tipo == 3" name="medio{{ $index }}" ng-model="pago.medio" ng-options="opc as opc.medio for opc in opciones.mediosPagoProveedores | filter : filtrarMedio" ng-change="seleccionarCtaDefecto(pago);" class="form-control form-white" required></select>\r\n\r\n                                <select ng-if="objeto.tipo==1" name="medio{{ $index }}" ng-model="pago.medio" ng-options="opc as opc.medio for opc in opciones.mediosPagoClientes | filter : filtrarMedio" ng-change="seleccionarCtaDefecto(pago);" class="form-control form-white" required></select>\r\n                            </td>\r\n                            <td>\r\n                                <select ng-if="pago.medio.id && !pago.cuenta.id" name="cuenta{{ $index }}" ng-model="pago.cuenta" ng-options="opc.cuenta as opc.cuenta.cuenta for opc in pago.medio.cuentas" class="form-control form-white" ng-change="generarVistaComprobante()" required></select>\r\n\r\n                                <span ng-if="pago.cuenta.id">\r\n                                    {{ pago.cuenta.cuenta }}\r\n                                    <a href="javascript:void(0)" class="text-danger" ng-click="pago.cuenta=\'\';">\r\n                                        <i class="fa fa-remove"></i>\r\n                                    </a>\r\n                                    <br>\r\n                                    {{ pago.cuenta.codigo }}\r\n                                </span>\r\n\r\n                            </td>\r\n                            <td>\r\n                                <div ng-if="pago.medio.tipo == 2 ">\r\n                                    <div ng-if="objeto.tipo == 1">\r\n                                        <strong>Banco:</strong>\r\n                                        <select ng-model="pago.datosMedio.banco" name="banco{{ $index }}" ng-options="banco as banco.banco for banco in opciones.bancos" class="form-control form-white" required></select>\r\n                                    </div>\r\n                                    <strong>N° Documento:</strong>\r\n                                    <input type="text" ng-model="pago.datosMedio.numero" name="numero{{ $index }}" class="form-control form-white" required>\r\n\r\n                                    <strong>Fecha:</strong>\r\n                                    <p class="input-group" style="margin:0px; padding:0px">\r\n                                          <input type="text" uib-datepicker-popup="dd-MM-yyyy" name="fecha{{ $index }}" ng-model="pago.datosMedio.fecha" is-open="fechas[\'fecha\'+$index]" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" regular-fecha required>\r\n                                          <span class="input-group-btn">\r\n                                                <button type="button" class="btn btn-primary" ng-click="openFecha(\'fecha\'+ $index)"><i class="glyphicon glyphicon-calendar"></i></button>\r\n                                          </span>\r\n                                    </p>\r\n                                </div>\r\n\r\n\r\n                                <div ng-if="pago.medio.tipo == 4 ">\r\n                                    \r\n                                    <strong>N° Transacción:</strong>\r\n                                    <input type="text" ng-model="pago.datosMedio.numero" name="numero{{ $index }}" class="form-control form-white" required>\r\n\r\n                                    <strong>Fecha:</strong>\r\n                                    <p class="input-group" style="margin:0px; padding:0px">\r\n                                          <input type="text" uib-datepicker-popup="dd-MM-yyyy" name="fecha{{ $index }}" ng-model="pago.datosMedio.fecha" is-open="fechas[\'fecha\'+$index]" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" regular-fecha required>\r\n                                          <span class="input-group-btn">\r\n                                                <button type="button" class="btn btn-primary" ng-click="openFecha(\'fecha\'+ $index)"><i class="glyphicon glyphicon-calendar"></i></button>\r\n                                          </span>\r\n                                    </p>\r\n\r\n                                </div>\r\n\r\n\r\n                                <div ng-if="pago.medio.tipo == 5 ">\r\n                                    <strong>Nómina de Pago:</strong>\r\n                                    <select ng-if="!pago.datosMedio.nomina.id" ng-model="pago.datosMedio.nomina" name="nomina{{ $index }}" ng-options="nomina as nomina.nomina for nomina in opciones.nominas" class="form-control form-white" required></select>\r\n\r\n                                    <span ng-if="pago.datosMedio.nomina.id">\r\n                                        <br>\r\n                                        {{ pago.datosMedio.nomina.nomina }}\r\n                                        <a href="javascript:void(0)" class="text-danger" ng-click="pago.datosMedio.nomina=\'\';">\r\n                                            <i class="fa fa-remove"></i>\r\n                                        </a>\r\n                                        <br>\r\n                                        {{ pago.datosMedio.nomina.fecha | date:\'dd-MM-yyyy\' }}<br>\r\n                                        {{ pago.datosMedio.nomina.banco }}\r\n                                    </span>\r\n\r\n\r\n                                </div>\r\n                            </td>\r\n                            <td>\r\n                                <input type="text" ng-model="pago.monto" class="form-control form-white" ui-money-mask="0" ng-change="sumarMontos();" required>\r\n                            </td>\r\n                            <td>\r\n                                <a href="javascript:void(0);" ng-show="objeto.pagos.length > 1" class="btn btn-danger btn-xs" ng-click="quitarMedioPago($index); sumarMontos();">\r\n                                    <i class="fa fa-remove"></i>\r\n                                </a>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td colspan="3"></td>\r\n                            <td style="text-align: right" ng-class="{\'success\' : objeto.totalMonto == objeto.total, \'danger\' : objeto.totalMonto != objeto.total }">\r\n                            <strong>{{ objeto.totalMonto | currency:"$":0 }}</strong></td>\r\n                            <td ng-class="{\'success\' : objeto.totalMonto == objeto.total, \'danger\' : objeto.totalMonto != objeto.total }" style="text-align: center">\r\n                                <i ng-show="objeto.totalMonto == objeto.total" class="fa fa-check"></i>\r\n                                <i ng-show="objeto.totalMonto != objeto.total" class="fa fa-remove"></i>\r\n                            </td>\r\n                        </tr>\r\n                    </table>\r\n                    <button ng-if="mismoClienteProv" class="btn btn-warning btn-sm" ng-click="agregarMedioPago()">\r\n                        <i class="fa fa-plus"></i> Agregar Medio de Pago\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="panel panel-success" ng-init="colapsarVistaPrevia=true;">\r\n            <div class="panel-heading">\r\n                Vista Previa del Comprobante\r\n                <a href="javascript:void(0)" class="btn btn-xs btn-success" ng-click="colapsarVistaPrevia=true;" ng-show="!colapsarVistaPrevia">\r\n                    <i class="fa fa-eye-slash"></i> Ocultar\r\n                </a>\r\n                <a href="javascript:void(0)" class="btn btn-xs btn-success" ng-click="colapsarVistaPrevia=false;" ng-show="colapsarVistaPrevia">\r\n                    <i class="fa fa-eye"></i> Mostrar\r\n                </a>\r\n            </div>\r\n            <div class="panel-body" ng-class="{\'collapse\' : colapsarVistaPrevia }">\r\n                <div class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Tipo Comprobante:</label>\r\n                    <div class="col-sm-6">\r\n                        <span ng-if="objeto.tipo == 2 || objeto.tipo == 3">Egresos</span>\r\n                        <span ng-if="objeto.tipo == 1">Ingresos</span>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Fecha Comprobante:</label>\r\n                    <div class="col-sm-6">\r\n                        {{ objeto.fechaPago | date:\'dd-MM-yyyy\' }}\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Número:</label>\r\n                    <div class="col-sm-6">\r\n                        Automático\r\n                    </div>\r\n                </div>\r\n\r\n                <table class="table table-striped table-bordered">\r\n                    <tr>\r\n                        <th class="col-xs-2">Cuenta</th>\r\n                        <th class="col-xs-2">Codigo</th>\r\n                        <th class="col-xs-4">Glosa</th>\r\n                        <th class="col-xs-2">Debe</th>\r\n                        <th class="col-xs-2">Haber</th>\r\n                    </tr>\r\n                    <tr ng-repeat="asiento in objeto.comprobanteContable">\r\n                        <td>{{ asiento.cuenta }}</td>\r\n                        <td>{{ asiento.codigo }}</td>\r\n                        <td>{{ asiento.glosa }}</td>\r\n                        <td class="text-right">{{ asiento.debe | currency:"$":0 }}</td>\r\n                        <td class="text-right">{{ asiento.haber | currency:"$":0 }}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td colspan="3">&nbsp;</td>\r\n                        <td style="text-align: right" ng-class="{\'success\' : objeto.totalDebe == objeto.totalHaber, \'danger\' : objeto.totalDebe != objeto.totalHaber }">\r\n                        <strong>{{ objeto.totalDebe | currency:"$":0 }}</strong></td>\r\n                        <td style="text-align: right" ng-class="{\'success\' : objeto.totalDebe == objeto.totalHaber, \'danger\' : objeto.totalDebe != objeto.totalHaber }">\r\n                        <strong>{{ objeto.totalHaber | currency:"$":0 }}</strong></td>\r\n                    </tr>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-default" ng-if="!objeto.comprobanteId" ng-click="cancel()">Cancelar</button>\r\n    <button class="btn btn-primary" ng-if="!objeto.comprobanteId && !datoGrabado" ng-disabled="form.$invalid || (objeto.totalMonto != objeto.total) || (objeto.totalDebe != objeto.totalHaber) || errorValidacionAnticipo || errorValidacionSumaAnticipo" ng-click="guardar()">Guardar</button>\r\n\r\n    <button class="btn btn-default" ng-if="objeto.comprobanteId" ng-click="cerrar()">Salir</button>\r\n    <a class="btn btn-primary" ng-if="objeto.comprobanteId" abrir-ventana="{{ constantes.URL+\'contabilidad-registro-asientos/imprimir-asiento/\' + objeto.comprobanteId }}" ventana-nombre="IMPRIMIRASIENTOCONTABLE" ventana-ancho="750" ventana-alto="600">Ver Comprobante</a>\r\n</div>'),
a.put("views/forms/form-importacion-libro-compra-xml.html",'<script type="text/ng-template" id="customTemplate.html">\r\n    <a style="cursor: pointer;">\r\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\r\n    </a>\r\n</script>\r\n\r\n\r\n<div class="modal-header">\r\n    <h3 class="modal-title">Importación de Libro de Compra XML</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" name="form" novalidate autocomplete="Off">\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Datos del Libro</div>\r\n            <div class="panel-body">\r\n                \r\n                <div class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Archivo:</label>\r\n                    <div class="col-sm-9">\r\n                        {{ objeto.archivo }}\r\n                    </div>\r\n                </div>\r\n\r\n            <div ng-if="objeto.archivo">\r\n                <div class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Envio Libro ID:</label>\r\n                    <div class="col-sm-9">\r\n                        {{ objeto.envioLibroID }}\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Periodo Tributario:</label>\r\n                    <div class="col-sm-3">\r\n                       {{ objeto.PeriodoTributario }}\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Tipo de Operación:</label>\r\n                    <div class="col-sm-3">\r\n                        {{ objeto.TipoOperacion }}\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Tipo de Libro:</label>\r\n                    <div class="col-sm-3">\r\n                        {{ objeto.TipoLibro }}\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Tipo de Envio:</label>\r\n                    <div class="col-sm-3">\r\n                        {{ objeto.TipoEnvio }}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="panel panel-default" ng-if="objeto.archivo">\r\n            <div class="panel-heading">Resumen del Periodo</div>\r\n            <div class="panel-body">\r\n                <div class="form-group form-group-md">\r\n                    <table class="table table-striped">\r\n                        <tr>\r\n                            <th>Tipo Documento</th>\r\n                            <th>Tipo Impuesto</th>\r\n                            <th>Total Documentos</th>\r\n                            <th>Total Monto Exento</th>\r\n                            <th>Total Monto Neto</th>\r\n                            <th>TotOpIVARec</th>\r\n                            <th>TotMntIVA</th>\r\n                            <th>TotOpIVAUsoComun</th>\r\n                            <th>TotIVAUsoComun</th>\r\n                            <th>TotOtrosImp</th>\r\n                            <th>TotImpSinCredito</th>\r\n                            <th>TotMntTotal</th>                            \r\n                        </tr>\r\n\r\n                        <tr ng-repeat="total in objeto.resumen.totales">\r\n                            <td>{{ total.TpoDoc }}</td>\r\n                            <td>{{ total.TpoImp }}</td>\r\n                            <td>{{ total.TotDoc }}</td>\r\n                            <td>{{ total.TotMntExe }}</td>\r\n                            <td>{{ total.TotMntNeto }}</td>\r\n                            <td>{{ total.TotOpIVARec }}</td>\r\n                            <td>{{ total.TotMntIVA }}</td>\r\n                            <td>{{ total.TotOpIVAUsoComun }}</td>\r\n                            <td>{{ total.TotIVAUsoComun }}</td>\r\n                            <td>{{ total.TotOtrosImp }}</td>                            \r\n                            <td>{{ total.TotImpSinCredito }}</td>\r\n                            <td>{{ total.MntTotal }}</td>\r\n                        </tr>\r\n\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="panel panel-default" ng-if="objeto.archivo">\r\n            <div class="panel-heading">Detalle del Libro</div>\r\n            <div class="panel-body">\r\n        		<table class="table table-striped">\r\n        			<tr>\r\n    					<th>#</th>\r\n        			    <th>Tipo Dcto</th>\r\n                        <th>N° Dcto</th>\r\n                        <th>Tipo Imp.</th>\r\n                        <th>Tasa Imp.</th>\r\n                        <th>Fecha Dcto</th>\r\n                        <th>Rut</th>\r\n                        <th>Razón Social</th>\r\n                        <th>Monto Exento</th>\r\n                        <th>Monto Neto</th>\r\n                        <th>Monto IVA</th>\r\n                        <th>Iva Uso Común</th>\r\n                        <th>Otros Imp.</th>\r\n                        <th>Monto Sin Credito</th>\r\n                        <th>Monto Total</th>\r\n                    </tr>\r\n                    <tr ng-repeat="detalle in objeto.detalle">\r\n                        <td>{{ $index + 1 }}</td>\r\n                        <td>{{ detalle.TpoDoc }}</td>\r\n                        <td>{{ detalle.NroDoc }}</td>\r\n                        <td>{{ detalle.TpoImp }}</td>\r\n                        <td>{{ detalle.TasaImp }}</td>\r\n                        <td>{{ detalle.FchDoc }}</td>\r\n                        <td>{{ detalle.RUTDoc }}</td>\r\n                        <td>{{ detalle.RznSoc }}</td>\r\n                        <td>{{ detalle.MntExe }}</td>\r\n                        <td>{{ detalle.MntNeto }}</td>\r\n                        <td>{{ detalle.MntIVA }}</td>\r\n                        <td>{{ detalle.IVAUsoComun }}</td>\r\n                        <td>{{ detalle.OtrosImp }}</td>\r\n                        <td>{{ detalle.MntSinCred }}</td>\r\n                        <td>{{ detalle.MntTotal }}</td>\r\n                    </tr>\r\n        		</table>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-default" ng-click="cancel()">Cancelar</button>\r\n    <button class="btn btn-primary" ng-disabled="form.$invalid" ng-click="guardar()">Guardar</button>\r\n</div>'),a.put("views/forms/form-proveedor.html",'<script type="text/ng-template" id="customTemplate.html">\r\n    <a style="cursor: pointer;">\r\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\r\n    </a>\r\n</script>\r\n<div class="modal-header">\r\n    <h3 class="modal-title">Administración de Proveedores</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" name="form" novalidate autocomplete="Off">\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Datos de la Cuenta</div>\r\n            <div class="panel-body">\r\n                \r\n                <div class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Clasificación:</label>\r\n                    <div class="col-sm-6">\r\n             			<input type="text" name="clasificacion" ng-model="objeto.clasificacion" placeholder="Buscar Clasificación" uib-typeahead="clasificacion as clasificacion.clasificacion for clasificacion in getClasificaciones($viewValue)" typeahead-loading="loadingClasificacion" typeahead-on-select="obtenerCodigoCuenta(); formatearDigitoCodigo(); comprobarCodigoCuenta(); " typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" required>\r\n                    </div>\r\n                    <div class="col-sm-1">\r\n                        <a href="javascript:void(0);" ng-click="openClasificacion()" title="Administración de Clasificaciones de Cuenta">\r\n                            <i class="fa fa-wrench"></i>\r\n                        </a>\r\n                    </div>\r\n                    <div class="col-sm-1">\r\n                        <i ng-show="loadingClasificacion" class="glyphicon glyphicon-refresh"></i>\r\n                        <i ng-if="objeto.clasificacion.id" class="fa fa-check" style="color: #0a0"></i>\r\n                    </div>\r\n                </div>\r\n                <div class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Código:</label>\r\n                    <div class="col-sm-3">\r\n                        <div class="input-group">\r\n                            <span class="input-group-addon">{{ objeto.clasificacion.codigo }}.</span>\r\n                            <input type="text" class="form-control form-white" name="codigocuenta" maxlength="3" ng-model="objeto.codigo" ng-blur="comprobarCodigoCuenta();" ng-minlength="{{ largoCodigoCuenta }}" ng-pattern="onlyNumbers">\r\n                        </div>\r\n                    </div>\r\n                    <div ng-if="comprobandoCuenta">\r\n                        <img src="images/cargando.37ead0fc.gif">\r\n                    </div>\r\n                    <div ng-if="bloquearFormulario" class="col-sm-6 text-danger">\r\n                        Código Existente!\r\n                    </div>\r\n                    <div ng-if="form[\'codigocuenta\'].$error.pattern" class="text-danger"><strong>Solo Números!</strong></div>  \r\n                    <div ng-if="form[\'codigocuenta\'].$error.minlength" class="text-danger"><strong>{{ largoCodigoCuenta }} Digitos!</strong></div>\r\n                </div>\r\n                <div class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label" for="formGroupInputLarge">Cuenta:</label>\r\n                    <div class="col-sm-6">\r\n                        <input type="text" ng-model="objeto.nombre" placeholder="Nombre de la Cuenta" class="form-control form-white">\r\n                    </div>\r\n                </div>\r\n                <div class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label">Configurar SubCuentas:</label>\r\n                    <div class="col-sm-4">\r\n                        <label class="switch switch-green">\r\n                            <input class="switch-input" ng-model="objeto.configurarSubCuentas" type="checkbox" ng-change="habilitarSubCuentas()">\r\n                            <span class="switch-label" data-on="SI" data-off="NO"></span>\r\n                            <span class="switch-handle"></span>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                <div ng-if="!objeto.configurarSubCuentas" class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label">Configurar:</label>\r\n                    <div class="col-sm-4">\r\n                        <button ng-click="openConfiguracionCuenta( objeto, 1)" type="button" class="btn btn-xs btn-success">Configurar</button>\r\n                    </div>\r\n                </div>       \r\n                <div ng-if="!objeto.configurarSubCuentas" class="form-group form-group-md">\r\n                    <label class="col-sm-3 control-label">InHabilitar:</label>\r\n                    <div class="col-sm-4">\r\n                        <label class="switch switch-green">\r\n                            <input class="switch-input" ng-model="objeto.inhabilitar" type="checkbox">\r\n                            <span class="switch-label" data-on="SI" data-off="NO"></span>\r\n                            <span class="switch-handle"></span>\r\n                        </label>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="panel panel-default" ng-if="objeto.configurarSubCuentas">\r\n            <div class="panel-heading">Lista de Sub Cuentas</div>\r\n            <div class="panel-body">\r\n        		<table class="table table-striped">\r\n        			<tr>\r\n    					<th>#</th>\r\n        			    <th class="col-xs-2">Código</th>\r\n                        <th class="col-xs-7">SubCuenta</th>\r\n                        <th class="col-xs-2">Configurar</th>\r\n                        <th class="col-xs-2">InHabilitar</th>\r\n                        <th></th>\r\n                    </tr>\r\n                    <tr ng-repeat="subcuenta in objeto.subcuentas">\r\n                        <td>{{ $index + 1 }}</td>\r\n                        <td>\r\n                            <div class="input-group" ng-init="subcuenta.codigoCuenta = objeto.clasificacion.codigo + \'.\' + objeto.codigo " ng-class="{\'has-error\': subcuenta.isDuplicate}">\r\n                                <span class="input-group-addon">{{ objeto.clasificacion.codigo }}.{{ objeto.codigo }}.</span>\r\n                                <input type="text" name="subcodigo{{ $index }}" ng-model="subcuenta.codigo" class="form-control form-white" style="width:50px !important" maxlength="{{ largoCodigoSubCuenta }}" ng-minlength="{{ largoCodigoSubCuenta }}" ng-maxlength="{{ largoCodigoSubCuenta }}" ng-change="verifyDuplicate()" ng-pattern="onlyNumbers" required>\r\n                            </div>     \r\n                            <div ng-if="subcuenta.isDuplicate" class="text-danger"><strong>Código Existente!</strong></div>  \r\n                            <div ng-if="form[\'subcodigo\'+$index].$error.pattern" class="text-danger"><strong>Solo Números!</strong></div>  \r\n                            <div ng-if="form[\'subcodigo\'+$index].$error.minlength" class="text-danger"><strong>{{ largoCodigoSubCuenta }} Digitos!</strong></div>                 \r\n                        </td>\r\n                        <td><input type="text" ng-model="subcuenta.nombre" class="form-control form-white" required></td>\r\n                        <td>\r\n                            <button ng-click="openConfiguracionCuenta( subcuenta, 2)" type="button" class="btn btn-xs btn-success">Configurar</button>\r\n                        </td>\r\n                        <td>\r\n                            <label class="switch switch-green">\r\n                                <input class="switch-input" ng-model="subcuenta.inhabilitar" type="checkbox">\r\n                                <span class="switch-label" data-on="SI" data-off="NO"></span>\r\n                                <span class="switch-handle"></span>\r\n                            </label>\r\n                        </td>\r\n                        <td>\r\n                            <i ng-if="subcuenta.id" class="fa fa-trash pointer" confirmation-click="eliminarSubCuenta(subcuenta)" confirmation-needed="La Sub Cuenta será eliminada.Desea continuar?"></i>\r\n\r\n                            <i ng-if="!subcuenta.id" class="fa fa-trash pointer" ng-click="eliminarSubCuenta(subcuenta)"></i>\r\n                        </td>\r\n                    </tr>\r\n        		</table>\r\n\r\n                <button type="button" ng-click="agregarSubCuenta()" class="btn btn-xs btn-primary"><i class="fa fa-plus"></i> Agregar SubCuenta</button>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-default" ng-click="cancel()">Cancelar</button>\r\n    <button class="btn btn-primary" ng-disabled="form.$invalid || bloquearFormulario" ng-click="guardar()">Guardar</button>\r\n</div>'),a.put("views/forms/form-sii-control-folios.html",'<div class="modal-header">\r\n    <h3 class="modal-title">Control de Folios - Timbraje SII</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" name="form" novalidate autocomplete="Off">\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Datos de Folios</div>\r\n            <div class="panel-body">         \r\n                <div ng-if="anteriorActivo" class="text-danger">\r\n                    <strong>No puede generar nuevos Folios debido a que existe un registro que aún no cuenta con el Ultimo Folio Autorizado por el SII</strong></div>       \r\n                <div ng-if="!anteriorActivo">\r\n                    <div class="form-group form-group-md" ng-if="objeto.ultimoAutorizado > 0">\r\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Último Autorizado:</label>\r\n                        <div class="col-sm-2">\r\n                            {{ objeto.ultimoAutorizado }}\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group form-group-md">\r\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Desde:</label>\r\n                        <div class="col-sm-2">\r\n                 			<input ng-if="!objeto.id" type="text" ng-model="objeto.desde" class="form-control form-white" ui-number-mask="0" name="desde" min="objeto.ultimoAutorizado + 1" max="objeto.hasta" required>\r\n                            <span ng-if="objeto.id">{{ objeto.desde }}</span>\r\n                        </div>\r\n                        <div ng-if="form.desde.$error.min" class="col-sm-7 text-danger">\r\n                            El Valor ingresado no puede ser igual o menor al último Folio Autorizado\r\n                        </div>\r\n                        <div ng-if="form.desde.$error.max" class="col-sm-7 text-danger">\r\n                            El Valor ingresado no puede ser mayor al definido en Hasta\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group form-group-md">\r\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Hasta:</label>\r\n                        <div class="col-sm-2">\r\n                            <input ng-if="!objeto.id" type="text" ng-model="objeto.hasta" class="form-control form-white" ui-number-mask="0" name="hasta" min="objeto.desde" required>\r\n                            <span ng-if="objeto.id">{{ objeto.hasta }}</span>\r\n                        </div>\r\n                        <div ng-if="form.hasta.$error.min" class="col-sm-7 text-danger">\r\n                            El Valor ingresado no puede ser inferior al definido en Desde\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group form-group-md" ng-if="objeto.id">\r\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Último Autorizado:</label>\r\n                        <div class="col-sm-2">\r\n                            <input ng-if="!bloquearFormulario" type="text" name="autorizado" ng-model="objeto.autorizado" class="form-control form-white" ui-number-mask="0" required max="{{ objeto.hasta }}" min="{{ objeto.desde }}">\r\n                            <span ng-if="bloquearFormulario">{{ objeto.autorizado }}</span>\r\n                        </div>\r\n                        <div ng-if="form.autorizado.$error.max" class="col-sm-7 text-danger">\r\n                            El Valor ingresado no puede superar el rango ingresado\r\n                        </div>\r\n                        <div ng-if="form.autorizado.$error.min" class="col-sm-7 text-danger">\r\n                            El Valor ingresado no puede ser inferior al rango ingresado\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group form-group-md" ng-if="objeto.id">\r\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Formulario:</label>\r\n                        <div class="col-sm-9">\r\n                            <button ng-show="!objeto.archivo && !archivo.mostrar" type="button" ngf-select ng-model="archivo.file" class="btn btn-xs btn-warning" subir-archivo modelo-file="archivo.file" modelo="archivo" modelo-destino="objeto.archivo" nombre-archivo="archivo">\r\n                                Seleccionar\r\n                            </button>\r\n                            <uib-progressbar ng-show="archivo.mostrar" class="progress-striped active" value="archivo.porc" type="success"><strong>{{ archivo.porc + "%" }}</strong></uib-progressbar>\r\n                            <span ng-if="objeto.archivo && !archivo.loading" class="text-success">\r\n                                <strong>\r\n                                    {{ objeto.archivoNombre }}\r\n                                </strong>\r\n                                <a ng-show="!bloquearFormulario" ng-href="{{ constantes.URL + objeto.archivoRuta }}" class="btn btn-sm btn-primary" target="_black" style="margin-left: 2px">\r\n                                    <i class="fa fa-search"></i>\r\n                                </a>\r\n\r\n                                <a ng-show="!bloquearFormulario" href="javascript:void(0)" class="btn btn-sm btn-danger" style="margin-left: 2px" ng-click="quitarArchivo();">\r\n                                    <i class="fa fa-remove"></i>\r\n                                </a>\r\n                            </span>\r\n                            <img ng-if="archivo.loading" src="images/cargando.37ead0fc.gif" style="height: 20px">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="panel panel-success">\r\n            <div class="panel-heading">Registro de Uso de Folios</div>\r\n            <div class="panel-body">\r\n                <div class="form-group form-group-md" ng-if="objeto.id">\r\n                    <div class="col-sm-12">\r\n                        <table class="table table-striped">\r\n                            <tr>\r\n                                <th class="col-xs-2">Desde</th>\r\n                                <th class="col-xs-2">Hasta</th>\r\n                                <th class="col-xs-7">Uso</th>\r\n                                <th class="col-xs-1">&nbsp;</th>\r\n                            </tr>\r\n                            <tr ng-repeat="uso in objeto.usoFolios">\r\n                                <td><input type="text" ng-model="uso.desde" class="form-control form-white" required></td>\r\n                                <td><input type="text" ng-model="uso.hasta" class="form-control form-white" required></td>\r\n                                <td><input type="text" ng-model="uso.uso" class="form-control form-white" maxlength="255" required></td>\r\n                                <td>\r\n                                    <button class="btn btn-xs btn-danger" ng-click="quitarUso($index)">\r\n                                        <i class="fa fa-remove"></i>\r\n                                    </button>\r\n                                </td>\r\n                            </tr>\r\n                        </table>\r\n                        <button class="btn btn-primary btn-sm" ng-click="agregarUso();">\r\n                            <i class="fa fa-plus"></i> Agregar\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>  \r\n        </div>  \r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-default" ng-click="cancel()">Cerrar</button>\r\n    <button class="btn btn-primary" ng-show="!bloquearFormulario || !objeto.archivoId" ng-disabled="form.$invalid" confirmation-click="guardar()" confirmation-needed="La información ingresada no podrá ser modificada. Desea continuar?">Grabar</button>\r\n    <button class="btn btn-success" ng-show="objeto.id" abrir-ventana="{{ constantes.URL + \'sii-control-folios/\' + objeto.sid + \'/imprimir\' }}" ventana-nombre="IMPRIMIRLIBROCOMPRAS" ventana-ancho="750" ventana-alto="600">Imprimir Folios</button>\r\n</div>'),a.put("views/forms/form-usuario-permisos.html",'<script type="text/ng-template" id="customTemplate.html">\r\n    <a style="cursor: pointer;">\r\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\r\n    </a>\r\n</script>\r\n<div class="modal-header">\r\n    <h3 class="modal-title">Permisos de Acceso</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" role="form" name="formMenu" novalidate>\r\n\r\n        <div class="form-group">\r\n            <label for="perfil" class="col-sm-3 control-label">\r\n                Empresa:\r\n            </label>\r\n            <div class="col-sm-7">\r\n                <select ng-model="objeto.empresa" ng-options="emp as emp.razonSocial for emp in empresas" class="form-control form-white form-white">\r\n                    <option value="{{ empresaGlobal }}">{{ empresaGlobal.razonSocial }}</option>\r\n                </select>\r\n                <span ng-if="objeto.empresa.nRut==\'global\'" class="text-primary"><strong>\r\n                    Esta configuración permite copiar los accesos seleccionados para Todas las Empresas.\r\n                    </strong>\r\n                </span>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="perfil" class="col-sm-3 control-label">\r\n                Perfil:\r\n            </label>\r\n            <div class="col-sm-4">\r\n                <select ng-model="objeto.perfil" ng-options="per as per.perfil for per in opciones.perfiles" class="form-control form-white form-white" ng-change="objeto.editar=false"></select>\r\n            </div>\r\n            <div class="col-sm-1" ng-show="objeto.perfil.sid!==\'0\'">\r\n                <button class="btn btn-success btn-sm" ng-click="cargarPerfil()">Cargar</button>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="form-group" ng-show="objeto.perfil.sid!==\'0\' && objeto.editar">\r\n            <label for="perfil" class="col-sm-3 control-label">\r\n                Modificar Acceso:\r\n            </label>\r\n            <div class="col-sm-8">\r\n                <label>\r\n                <input type="checkbox" ng-model="objeto.modificarAcceso" class="icheckbox_flat-aero" name="check" icheck> <small class="text-success">Modificar Accesos del Perfil para Usuario Actual</small>\r\n                </label>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="panel panel-default" style="margin-top:20px" ng-show="(objeto.perfil.sid===\'0\' || objeto.editar ) &&  objeto.empresa.nRut">\r\n            <div class="panel-heading">Accesos del Perfil </div>\r\n            <div class="panel-body">          \r\n                <div class="table-responsive">          \r\n                    <table class="table" align="center" ng-show="empresas.length > 0">\r\n                        <thead>\r\n                            <tr>\r\n                                <th rowspan="2">#</th>\r\n                                <th rowspan="2" class="col-sm-3">Menú</th>\r\n                                <th rowspan="2" class="col-sm-5">Descripción</th>\r\n                                <th colspan="4" class="col-sm-4" style="text-align:center">{{  objeto.empresa.razonSocial }}</th>\r\n                            </tr>\r\n                            <tr>\r\n                                <th ng-if="!objeto.empresa.nRut" colspan="4">&nbsp;</th>\r\n                                <th ng-if="objeto.empresa.nRut" class="col-sm-1" style="text-align:center">\r\n                                    Crear<br>\r\n                                    <span ng-if="objeto.modificarAcceso || objeto.perfil.sid===\'0\'">\r\n                                        <input type="checkbox" ng-model="checkmasterEmpresa[ objeto.empresa.nRut ][\'crear\']" ng-change="marcarTodosEmpresa( objeto.empresa.nRut, \'crear\' );" icheck>\r\n                                    </span>\r\n                                </th>\r\n                                <th ng-if="objeto.empresa.nRut" class="col-sm-1" style="text-align:center">\r\n                                    Editar<br>\r\n                                    <span ng-if="objeto.modificarAcceso || objeto.perfil.sid===\'0\'">\r\n                                        <input type="checkbox" ng-model="checkmasterEmpresa[ objeto.empresa.nRut ][\'editar\']" ng-change="marcarTodosEmpresa( objeto.empresa.nRut, \'editar\' );" icheck>\r\n                                    </span>\r\n                                </th>\r\n                                <th ng-if="objeto.empresa.nRut" class="col-sm-1" style="text-align:center">\r\n                                    Eliminar<br>\r\n                                    <span ng-if="objeto.modificarAcceso || objeto.perfil.sid===\'0\'">\r\n                                        <input type="checkbox" ng-model="checkmasterEmpresa[ objeto.empresa.nRut ][\'eliminar\']" ng-change="marcarTodosEmpresa( objeto.empresa.nRut, \'eliminar\' );" icheck>\r\n                                    </span>\r\n                                </th>\r\n                                <th ng-if="objeto.empresa.nRut" class="col-sm-1" style="text-align:center">\r\n                                    Ver<br>\r\n                                    <span ng-if="objeto.modificarAcceso || objeto.perfil.sid===\'0\'">\r\n                                        <input type="checkbox" ng-model="checkmasterEmpresa[ objeto.empresa.nRut ][\'ver\']" ng-change="marcarTodosEmpresa( objeto.empresa.nRut, \'ver\' );" icheck>\r\n                                    </span>\r\n                                </th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr ng-repeat="opc in menu.datos" ng-class="{ \'bg-warning\' : opc.tipo == 1 }">\r\n                                <td style="text-align: right; font-size: 12px; width: 20px !important; color:#000 !important">\r\n                                    {{ opc.posicion }}\r\n                                </td>\r\n                                <td style="font-weight: bold; font-size: 12px; color:#000 !important">\r\n                                    {{ opc.menu }}\r\n                                </td>\r\n                                <td style="color:#000 !important; font-size: 12px">\r\n                                    {{ opc.title }}\r\n                                </td>                  \r\n                                <td style="text-align: center;color:#fff !important">\r\n                                    <span ng-if="objeto.modificarAcceso || objeto.perfil.sid===\'0\'">\r\n                                        <input type="checkbox" ng-model="checklistEmpresa[ objeto.empresa.nRut ][ opc.sid ][\'crear\']" ng-change="seleccionarOpcion(objeto.empresa.nRut, opc.sid, \'crear\')" icheck>\r\n                                    </span>\r\n                                    <span ng-show="checklistEmpresa[ objeto.empresa.nRut ][ opc.sid ][\'crear\'] && !objeto.modificarAcceso && objeto.perfil.sid!==\'0\'" class="text-primary"><i class="glyphicon glyphicon-ok"></i></span>\r\n                                </td>\r\n\r\n                                <td style="text-align: center;color:#fff !important">\r\n                                    <span ng-if="objeto.modificarAcceso || objeto.perfil.sid===\'0\'">\r\n                                        <input type="checkbox" ng-model="checklistEmpresa[ objeto.empresa.nRut ][ opc.sid ][\'editar\']" ng-change="seleccionarOpcion(objeto.empresa.nRut, opc.sid, \'editar\')" icheck>\r\n                                    </span>\r\n                                    <span ng-show="checklistEmpresa[ objeto.empresa.nRut ][ opc.sid ][\'editar\'] && !objeto.modificarAcceso && objeto.perfil.sid!==\'0\'" class="text-primary"><i class="glyphicon glyphicon-ok"></i></span>\r\n                                </td>\r\n\r\n                                <td style="text-align: center;color:#fff !important">\r\n                                    <span ng-if="objeto.modificarAcceso || objeto.perfil.sid===\'0\'">\r\n                                        <input type="checkbox" ng-model="checklistEmpresa[ objeto.empresa.nRut ][ opc.sid ][\'eliminar\']" ng-change="seleccionarOpcion(objeto.empresa.nRut, opc.sid, \'eliminar\')" icheck>\r\n                                    </span>\r\n                                    <span ng-show="checklistEmpresa[ objeto.empresa.nRut ][ opc.sid ][\'eliminar\'] && !objeto.modificarAcceso && objeto.perfil.sid!==\'0\'" class="text-primary"><i class="glyphicon glyphicon-ok"></i></span>\r\n                                </td>\r\n\r\n                                <td style="text-align: center;color:#fff !important">\r\n                                    <span ng-if="objeto.modificarAcceso || objeto.perfil.sid===\'0\'">\r\n                                        <input type="checkbox" ng-model="checklistEmpresa[ objeto.empresa.nRut ][ opc.sid ][\'ver\']" ng-change="seleccionarOpcion(objeto.empresa.nRut, opc.sid, \'ver\')" icheck>\r\n                                    </span>\r\n                                    <span ng-show="checklistEmpresa[ objeto.empresa.nRut ][ opc.sid ][\'ver\'] && !objeto.modificarAcceso && objeto.perfil.sid!==\'0\'" class="text-primary"><i class="glyphicon glyphicon-ok"></i></span>\r\n                                </td>\r\n\r\n                            </tr>\r\n                        </tbody>\r\n                    </table> \r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="form-group" ng-if="empresas.length > 0" ng-show="(objeto.modificarAcceso || objeto.perfil.sid===\'0\') &&  objeto.empresa.nRut">\r\n            <label for="perfil" class="col-sm-3 control-label">\r\n                Guardar Selección:<br>\r\n                <small class="text-success">Puede actualizar un Perfil existente o crear uno Nuevo para asignarlo a otros usuarios</small>\r\n            </label>\r\n            <div class="col-sm-9">\r\n                <div class="col-sm-4">\r\n                    <select ng-model="objeto.guardarPerfil" class="form-control form-white form-white" ng-options="opc as opc.opcion for opc in opcionesGuardarPerfil"></select>\r\n                </div>\r\n                <div class="col-sm-5" ng-show="objeto.guardarPerfil.id===1">               \r\n                    <select ng-model="objeto.modificarPerfil" ng-options="per as per.perfil for per in opciones.perfilesExistentes" class="form-control form-white form-white"></select>                    \r\n                </div>\r\n                <div class="col-sm-5" ng-show="objeto.guardarPerfil.id===2">\r\n                    <input type="text" ng-model="objeto.nombrePerfil" class="form-control form-white form-white">\r\n                </div>\r\n            </div>                \r\n        </div>\r\n\r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-primary" ng-click="cancel()">Cerrar</button>\r\n</div>'),
a.put("views/forms/form-usuario.html",'<script type="text/ng-template" id="customTemplate.html">\r\n    <a style="cursor: pointer;">\r\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\r\n    </a>\r\n</script>\r\n<div class="modal-header">\r\n    <h3 class="modal-title">Administración de Usuarios</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" name="form" novalidate>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Datos del Usuario</div>\r\n            <div class="panel-body">\r\n                <div class="row">\r\n                    <div class="col-md-8">\r\n                        <div class="form-group form-group-md required" ng-class="{ \'has-error\': errores(\'rut\') || erroresDatos.rut  }">\r\n                            <label class="col-sm-4 control-label" for="formGroupInputLarge">Rut:</label>\r\n                            <div class="col-sm-4">\r\n                                <input class="form-control form-white" type="text" name="rut" rut="objeto.rut" ng-model="objeto.rut" maxlength="15" placeholder="11.111.111-1" required>\r\n                                <span class="help-block" ng-show="errores(\'rut\')">\r\n                                    Obligatorio!\r\n                                </span>\r\n                            </div>\r\n                            <span class="text-danger" ng-if="erroresDatos.rut"><b>{{ erroresDatos.rut[0] }}</b></span>\r\n                        </div>\r\n\r\n                        <div class="form-group form-group-md required" ng-class="{ \'has-error\': errores(\'nombres\') }">\r\n                            <label class="col-sm-4 control-label" for="formGroupInputLarge">Nombres:</label>\r\n                            <div class="col-sm-8">\r\n                                <input class="form-control form-white" type="text" name="nombres" ng-model="objeto.nombres" placeholder="Nombres" required>\r\n                                <span class="help-block" ng-show="errores(\'nombres\')">\r\n                                    Obligatorio!\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class="form-group form-group-md required" ng-class="{ \'has-error\': errores(\'paterno\') }">\r\n                            <label class="col-sm-4 control-label" for="formGroupInputLarge">Apellido Paterno:</label>\r\n                            <div class="col-sm-7">\r\n                                <input class="form-control form-white" type="text" name="paterno" ng-model="objeto.paterno" placeholder="Apellido Paterno" required>\r\n                                <span class="help-block" ng-show="errores(\'paterno\')">\r\n                                    Obligatorio!\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class="form-group form-group-md required" ng-class="{ \'has-error\': errores(\'materno\') }">\r\n                            <label class="col-sm-4 control-label" for="formGroupInputLarge">Apellido Materno</label>\r\n                            <div class="col-sm-7">\r\n                                <input class="form-control form-white" type="text" name="materno" ng-model="objeto.materno" placeholder="Apellido Materno" required>\r\n                                <span class="help-block" ng-show="errores(\'materno\')">\r\n                                    Obligatorio!\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                     \r\n\r\n\r\n                        <div class="form-group form-group-md required" ng-class="{ \'has-error\': errores(\'email\') }">\r\n                            <label class="col-sm-4 control-label" for="formGroupInputLarge">E-mail:</label>\r\n                            <div class="col-sm-7">\r\n                                <input class="form-control form-white" name="email" type="text" ng-model="objeto.email" placeholder="correo@correo.cl" required>\r\n                                <span class="help-block" ng-show="errores(\'email\')">\r\n                                    Obligatorio!\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        <div class="form-group form-group-md">\r\n                            <label class="col-sm-4 control-label">Teléfono:</label>\r\n                            <div class="col-sm-6">\r\n                                <input class="form-control form-white" type="text" ng-model="objeto.telefono" placeholder="Teléfono o Anexo">\r\n                            </div>\r\n                        </div>\r\n                        <div class="form-group form-group-md">\r\n                            <label class="col-sm-4 control-label">Celular:</label>\r\n                            <div class="col-sm-6">\r\n                                <input class="form-control form-white" type="text" ng-model="objeto.celular" placeholder="Celular">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-md-4" style="text-align:center !important">\r\n                        <div flow-init flow-name="imagen.flow" flow-file-added="obtenerImagenB64()" style="text-align:center !important">\r\n                            <img ng-if="!$flow.files[0]" ng-src="{{ fotografia }}" style="max-width:150px; max-height:150px">\r\n                            <img ng-show="!creandoImagen" flow-img="$flow.files[0]" style="max-width:150px; max-height:150px"><br>\r\n                            <progressbar ng-show="creandoImagen" class="progress-striped active" value="valorPB" type="success"></progressbar>\r\n                            <p style="text-align:center; margin-top:20px">\r\n                                <button class="btn btn-xs btn-success" flow-btn flow-attrs="{accept:\'image/*\'}">Cambiar Imagen</button>\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div flow-init flow-name="imagenFirma.flow" flow-file-added="obtenerImagenFirmaB64()" style="text-align:center !important">\r\n                            <img ng-if="!$flow.files[0]" ng-src="{{ firma }}" style="max-width:150px; max-height:100px">\r\n                            <img ng-show="!creandoImagenFirma" flow-img="$flow.files[0]" style="max-width:150px; max-height:100px"><br>\r\n                            <progressbar ng-show="creandoImagenFirma" class="progress-striped active" value="valorPBFirma" type="success"></progressbar>\r\n                            <p style="text-align:center; margin-top:20px">\r\n                                <button class="btn btn-xs btn-primary" flow-btn flow-attrs="{accept:\'image/*\'}">Cambiar Firma</button>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                \r\n            </div>\r\n        </div>\r\n\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Datos de Acceso</div>\r\n            <div class="panel-body">\r\n                <div class="row">\r\n                    <div class="col-md-8">\r\n                        <div class="form-group">\r\n                            <label for="perfil" class="col-sm-4 control-label">\r\n                                Permisos de Acceso\r\n                            </label>\r\n                            <div class="col-sm-6">\r\n                                <button class="btn btn-primary btn-sm" ng-click="openPermisosUsuario()">\r\n                                    <i class="fa fa-wrench"></i> Administrar\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class="form-group form-group-md required" ng-class="{ \'has-error\': errores(\'usuario\') || erroresDatos.usuario }">\r\n                            <label class="col-sm-4 control-label" for="formGroupInputLarge">Nombre de Usuario:</label>\r\n                            <div class="col-sm-5">\r\n                                <input class="form-control form-white" type="text" name="usuario" ng-model="objeto.usuario" placeholder="Usuario" required>\r\n                                <span class="help-block" ng-show="errores(\'usuario\')">\r\n                                    Obligatorio!\r\n                                </span>\r\n                            </div>\r\n                            <span class="text-danger" ng-if="erroresDatos.usuario"><b>{{ erroresDatos.usuario[0] }}</b></span>\r\n                        </div>\r\n                        <div ng-if="objeto.sid" class="form-group form-group-md">\r\n                            <label class="col-sm-4 control-label" for="formGroupInputLarge">Modificar Contraseña:</label>\r\n                            <div class="col-sm-8">\r\n                                <input type="checkbox" ng-click="" id="reescribir" ng-model="objeto.crearPassword">\r\n                                <label for="reescribir">\r\n                                    Reescribir la Contraseña\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                        <div ng-if="objeto.crearPassword" class="form-group form-group-md required" ng-class="{ \'has-error\': errores(\'contrasena\') }">\r\n                            <label class="col-sm-4 control-label" for="formGroupInputLarge">\r\n                                <span ng-if="objeto.sid">Nueva </span>\r\n                                Contraseña:</label>\r\n                            <div class="col-sm-5">\r\n                                <input class="form-control form-white" type="text" name="contrasena" ng-model="objeto.contrasena" placeholder="Password" required>\r\n                                <span class="help-block" ng-show="errores(\'contrasena\')">\r\n                                    Obligatorio!\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-primary" ng-disabled="form.$invalid" ng-click="guardar()">Guardar</button>\r\n    <button class="btn btn-default" ng-click="cancel()">Cancelar</button>\r\n</div>'),a.put("views/funcionarios.html",'<div class="header">\n    <h2>Administración de <b>Funcionarios</b></h2>\n</div>\n<div class="row">\n    <div class="col-md-12">        \n        <div class="form-group">\n            <label for="orden" class="control-label col-md-1">\n                Ordenar:\n            </label>\n            <div class="col-md-3">\n                <select ng-model="orden" id="orden" ng-init="orden=\'rut\'" class="form-control form-white">\n                    <option value="rut">Rut</option>\n                    <option value="funcionario">Funcionario</option>\n                    <option value="departamento">Departamento</option>\n                    <option value="email">Correo Electrónico</option>\n                </select>\n            </div>\n            <label for="filtro" class="col-md-1 control-label">Filtrar:</label>\n            <div class="col-md-4">\n              <input id="filtro" type="text" class="form-control form-white form-white" ng-model="filtro">\n            </div>\n            <div class="col-md-3" style="text-align:right; padding-right:0px">\n                <button class="btn btn-primary btn-md" ng-click="open({});">\n                    <i class="fa fa-plus"></i> Nuevo\n                </button>\n\n                <div class="btn-group">\n	            	<button class="btn btn-dark btn-md" type="button" data-toggle="dropdown" aria-expanded="false">\n	                    <i class="fa fa-wrench"></i> Herramientas <span class="caret"></span>\n	                </button>\n	                <ul class="dropdown-menu dropdown-menu-sm" role="menu">\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'usuarios/exportar/excel/2007\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 2007 (.xlsx)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'usuarios/exportar/excel/97\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 97/2003 (.xls)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'usuarios/exportar/pdf\' }}">\n	                            <i class="fa fa-file-pdf-o"></i> Exportar PDF (.pdf)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a href="javascript:void(0);">\n	                            <i class="fa fa-print"></i> Imprimir\n	                        </a>\n	                    </li>\n	                </ul>\n                </div>\n            </div>\n        </div>\n        <div class="form-group">\n            <table class="table table-striped table-hover">\n                <thead>\n                <tr>\n                    <th>#</th>\n                    <th class="col-sm-1"></th>\n                    <th class="col-sm-2">Rut</th>\n                    <th class="col-sm-3">Funcionario</th>\n                    <th class="col-sm-2">Correo Electrónico</th>\n                    <th class="col-sm-2">Rol(es) Adicional(es)</th>\n                    <th class="col-sm-2">Acciones</th>\n                </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="dato in datos | orderBy:orden | filter : filtro ">\n                        <td>{{ $index + 1 }}</td>\n                        <td><img ng-src="{{ dato.fotografia }}" style="max-width: 50px; max-height: 40px"></td>\n                        <td>{{ dato.rut }}</td>\n                        <td>{{ dato.funcionario }}</td>\n                        <td>{{ dato.email }}</td>\n                        <td>\n                            <ul>\n                                <li ng-repeat="rol in dato.roles">{{ rol }}</li>\n                            </ul>\n\n                        </td>\n                        <td>\n                            <a class="btn-acciones btn btn-default" href="javascript:void(0);" ng-click="editar(dato);" uib-tooltip-html="toolTipEdicion(dato.funcionario)">\n                                <i class="fa fa-pencil"></i>\n                            </a>\n                            <a class="btn-acciones btn btn-danger" href="javascript:void(0);" confirmation-click="eliminar( dato );" confirmation-needed="El Funcionario: <b>{{ dato.funcionario }}</b> será eliminado.Desea continuar?">\n                                <i class="fa fa-remove"></i>\n                            </a>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>'),a.put("views/importacion-libro-boletas.html",'<div class="header">\n    <h2>Importación de <b>Libros de Boletas</b></h2>\n</div>\n\n<script type="text/ng-template" id="customTemplate.html">\n    <a style="cursor: pointer;">\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\n    </a>\n</script>\n\n<div class="row" ng-if="!mostrarForm">\n    <div class="col-md-12">        \n        <div class="form-group">\n            <label for="orden" class="control-label col-md-1">\n                Ordenar:\n            </label>\n            <div class="col-md-3">\n                <select ng-model="orden" id="orden" ng-init="orden=\'rut\'" class="form-control form-white">\n                    <option value="rut">Rut</option>\n                </select>\n            </div>\n            <label for="filtro" class="col-md-1 control-label">Filtrar:</label>\n            <div class="col-md-4">\n              <input id="filtro" type="text" class="form-control form-white form-white" ng-model="filtroIndex">\n            </div>\n            <div class="col-md-3" style="text-align:right; padding-right:0px">\n                <button class="btn btn-primary btn-md" ng-click="gestionarArchivo({});">\n                    <i class="fa fa-plus"></i> Nuevo\n                </button>\n\n                <div class="btn-group">\n	            	<button class="btn btn-dark btn-md" type="button" data-toggle="dropdown" aria-expanded="false">\n	                    <i class="fa fa-wrench"></i> Herramientas <span class="caret"></span>\n	                </button>\n	                <ul class="dropdown-menu dropdown-menu-sm" role="menu">\n                        <li>\n                            <a ng-href="{{ constantes.URL + \'ejmUploadLbrBoleta.csv\' }}">\n                                <i class="fa fa-file-excel-o"></i> Descargar Archivo para Importación\n                            </a>\n                        </li>\n	                </ul>\n                </div>\n            </div>\n        </div>\n        <div class="form-group">\n            <table class="table table-striped table-hover">\n                <thead>\n                <tr>\n                    <th>#</th>\n                    <th class="col-sm-2">Archivo</th>\n                    <th class="col-sm-1">Periodo</th>\n                    <th class="col-sm-4">Responsable</th>\n                    <th class="col-sm-1">Importación</th>\n                    <th class="col-sm-1">Documentos</th>\n                    <th class="col-sm-1">Centralizado</th>\n                    <th class="col-sm-2">Acciones</th>\n                </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="dato in datos | orderBy:orden | filter: filtroIndex">\n                        <td>{{ $index + 1 }}</td>\n                        <td>{{ dato.archivo }}</td>\n                        <td>{{ dato.periodo }}</td>\n                        <td>{{ dato.responsable }}</td>\n                        <td>{{ dato.fechaImportacion }}</td>\n                        <td>{{ dato.documentos }}</td>\n                        <td style="text-align: center">\n                            <span class="text-success" ng-if="dato.centralizado">\n                                <i class="fa fa-check"></i>\n                            </span>\n                            <span class="text-default" ng-if="!dato.centralizado">\n                                NO\n                            </span>\n                        </td>\n                        <td>\n                            <a class="btn-acciones btn btn-default" href="javascript:void(0);" ng-click="gestionarLibro(dato);" uib-tooltip-html="toolTipEdicion(dato.archivo)">\n                                <i class="fa fa-pencil"></i>\n                            </a>\n                            <a class="btn-acciones btn btn-danger" href="javascript:void(0);" confirmation-click="eliminarLibro( dato.id );" confirmation-needed="El Libro de Boletas: <b>{{ dato.archivo }}</b> será eliminado.Desea continuar?">\n                                <i class="fa fa-remove"></i>\n                            </a>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>\n\n<script type="text/ng-template" id="myModalAsignacionMasivaCuenta.html">\n    <div class="modal-header">\n        <h3 class="modal-title">Asignación Masiva de Cuenta</h3>\n    </div>\n    <div class="modal-body form-horizontal">\n        <div class="form-group">\n            <label class="col-sm-3 control-label">Columna Destino:</label>\n            <div class="col-sm-9">\n                {{ objeto.columna }}\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-3 control-label">Cuenta:</label>\n            <div class="col-sm-7" style="padding:0px;">\n                <input type="text" ng-model="objeto.cuenta" placeholder="Buscar Cuenta Destino" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estado" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required  />\n            </div>\n            <div class="col-sm-2">\n                <i ng-show="estado" class="glyphicon glyphicon-refresh"></i>\n                <i ng-show="objeto.cuenta.codigo" class="fa fa-check" style="color: #fff;"></i>\n                <button class="btn btn-sm btn-primary" ng-click="buscarCuenta()" tooltip="Buscar en Plan de Cuentas">\n                    <i class="fa fa-search"></i>\n                </button>\n            </div>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" ng-click="cancel()">Cancelar</button>\n        <button class="btn btn-primary" ng-disabled="form.$invalid" ng-click="asignar()">Asignar</button>\n    </div>\n</script>\n\n<div class="row" ng-if="mostrarForm">\n    <form class="form-horizontal" name="form" novalidate autocomplete="Off">\n        <div class="col-md-12">\n            <div class="panel panel-default">\n                <div class="panel-heading">Datos del Libro</div>\n                <div class="panel-body">\n\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Tipo de Importación:</label>\n                        <div class="col-sm-5"> \n                            <strong>Archivo CSV - Sistema</strong>\n                        </div>\n                    </div>\n                    \n                    <div class="form-group form-group-md" ng-if="!miPyme  && !objeto.archivo">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Tipo de Operación:</label>\n                        <div class="col-sm-5">                            \n                            Venta\n                        </div>\n                    </div>\n\n                    <div class="form-group form-group-md" ng-if="!miPyme && !objeto.archivo">                       \n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Periodo Tributario:</label>\n                        <div class="col-sm-2">\n                            <div class="input-group">\n                                <select ng-model="objeto.periodoMes" class="form-control form-white" ng-options="mes as mes.mes for mes in opciones.meses"></select>\n                                <div class="input-group-addon">{{ objeto.periodoAnio }}</div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="form-group form-group-md" ng-if="!miPyme">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Archivo:</label>\n                        <div class="col-sm-9">\n                            <button ng-show="!objeto.archivo && !archivo.mostrar" type="button" ngf-select ng-model="archivo.file" class="btn btn-xs btn-warning" subir-archivo modelo-file="archivo.file" modelo="archivo" modelo-destino="objeto.archivo" nombre-archivo="archivo" ng-disabled="!objeto.periodoMes.id" accept=".csv" ngf-pattern=".csv">\n                                Seleccionar\n                            </button>\n                            <uib-progressbar ng-show="archivo.mostrar" class="progress-striped active" value="archivo.porc" type="success"><strong>{{ archivo.porc + "%" }}</strong></uib-progressbar>\n                            <span ng-if="objeto.archivo && !archivo.loading" class="text-success">\n                                <strong>\n                                    {{ objeto.archivo }}\n                                </strong>\n                            </span>\n                            <img ng-if="archivo.loading" src="images/cargando.37ead0fc.gif" style="height: 20px">\n                        </div>\n                    </div>\n\n                    <div class="panel panel-danger" ng-if="!miPyme && archivoImp.errores.length > 0 && !objeto.archivo">\n                        <div class="panel-heading">Errores Detectados</div>\n                        <div class="panel-body">\n                            <table class="table">\n                                <tr>\n                                    <th>#</th>\n                                    <th class="col-sm-6">Error</th>\n                                    <th class="col-sm-2">Tipo de Documento</th>\n                                    <th class="col-sm-2">Documento N°</th>\n                                    <th class="col-sm-2">Fecha</th>\n                                    <th class="col-sm-2">Razón Social Contraparte</th>\n                                </tr>\n                                <tr ng-repeat="error in archivoImp.errores">\n                                    <th>{{ $index + 1 }}</th>\n                                    <th>{{ error.error }}</th>\n                                    <th>{{ error.tipoDocumento }}</th>\n                                    <th>{{ error.documento }}</th>\n                                    <th>{{ error.fecha }}</th>\n                                    <th>{{ error.rzn_social }}</th>\n                                </tr>\n                            </table>\n                        </div>\n                    </div>\n\n\n                    <div ng-if="objeto.archivo">\n                      \n                        <div class="form-group form-group-md">\n                            <label class="col-sm-3 control-label" for="formGroupInputLarge">Periodo Tributario:</label>\n                            <div class="col-sm-3">\n                               {{ objeto.resumen.PeriodoTributario }}\n                            </div>\n                        </div>\n\n                        <div class="form-group form-group-md">\n                            <label class="col-sm-3 control-label" for="formGroupInputLarge">Tipo de Operación:</label>\n                            <div class="col-sm-3">\n                                {{ objeto.resumen.TipoOperacion }}\n                            </div>\n                        </div>\n\n                        <div class="form-group form-group-md">\n                            <label class="col-sm-3 control-label" for="formGroupInputLarge">Tipo de Libro:</label>\n                            <div class="col-sm-3">\n                                {{ objeto.resumen.TipoLibro }}\n                            </div>\n                        </div>\n\n                    </div>\n                </div>\n            </div>\n\n            <div class="panel panel-default" ng-if="objeto.archivo">\n                <div class="panel-heading">Resumen del Periodo</div>\n                <div class="panel-body">\n                    <div class="form-group form-group-md">\n                        <table class="table table-striped">\n                            <tr>\n                                <th>Tipo Documento</th>                            \n                                <th>Total Documentos</th>\n                                <th ng-if="vistaColumnas.TotMntExe">Total Monto Exento</th>\n                                <th ng-if="vistaColumnas.TotMntNeto">Total Monto Neto</th>\n                                <th ng-if="vistaColumnas.TotMntIVA">Total MonTO IVA</th>\n                            \n                                <th ng-if="vistaColumnas.TotMntTotal">TOTAL MONTO TOTAL</th>\n                               \n                            </tr>\n\n                            <tr ng-repeat="total in objeto.resumen.totales.TotalesPeriodo | filter : mayorQue(\'TotMntTotal\', 0) ">\n                                <td>({{ total.TpoDoc }})  {{ tiposDocumentos[total.TpoDoc] }}</td>                            \n                                <td>{{ total.TotDoc }}</td>\n                                <td ng-if="vistaColumnas.TotMntExe">{{ total.TotMntExe | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotMntNeto">{{ total.TotMntNeto | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotMntIVA">{{ total.TotMntIVA | currency:"$":0 }}</td>\n                                   \n                                <td ng-if="vistaColumnas.TotMntTotal">{{ total.TotMntTotal | currency:"$":0 }}</td>\n                              \n                            </tr>\n                        </table>\n                    </div>\n                </div>\n            </div>\n\n            <div class="panel panel-default" ng-if="objeto.archivo">\n                <div class="panel-heading">Detalle del Libro</div>\n                <div class="panel-body">\n                    <div class="table-responsive">\n                        <table class="table table-striped table-bordered">\n                            <tr>\n                                <th></th>\n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.TpoDoc" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.desde" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n\n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.hasta" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                          \n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.FchDoc" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                              \n                                <th style="padding: 1px" ng-if="vistaColumnas.TotMntExe">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.MntExe" ng-change="revisarFiltro(\'MntExe\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotMntNeto">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.MntNeto" ng-change="revisarFiltro(\'MntNeto\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotMntIVA">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.MntIVA" ng-change="revisarFiltro(\'MntIVA\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                             \n\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotMntTotal">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.MntTotal" ng-change="revisarFiltro(\'MntTotal\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n\n                            </tr>\n                            <tr class="bg-success">\n                                <th>#</th>\n                                <th>Tipo Dcto</th>\n                                <th>Desde</th>\n                                <th>Hasta</th>\n                                <th>Fecha</th>                               \n                                <th ng-if="vistaColumnas.TotMntExe">Monto Exento\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaMntExe\', \'MntExe\', \'Monto Exento\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n                                <th ng-if="vistaColumnas.TotMntNeto">\n                                    Monto Neto\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaMntNeto\', \'MntNeto\', \'Monto Neto\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n                                <th ng-if="vistaColumnas.TotMntIVA">\n                                    Monto IVA\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaMntIVA\', \'MntIVA\', \'Monto IVA\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>     \n\n\n\n                                <th ng-if="vistaColumnas.TotMntTotal">\n                                    Monto Total\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaMntTotal\', \'MntTotal\', \'Monto Total\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n                                \n                            </tr>\n\n\n\n                            <tr ng-repeat="detalle in ( filtros.itemsFiltrados = ( objeto.detalle | filter : filtro ) )">\n                                <td>{{ $index + 1 }}</td>\n                                <td>{{ \'(\'+detalle.TpoDoc+\') \'+detalle.NombreDoc }}</td>\n                                <td>{{ detalle.desde }}</td>\n                                <td>{{ detalle.hasta }}</td>\n                                <td>{{ detalle.fecha | date : "dd-MM-yyyy" }}</td>\n                                <td ng-if="vistaColumnas.TotMntExe" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.MntExe}">\n                                    {{ detalle.MntExe ? detalle.MntExe : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.MntExe > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaMntExe">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaMntExe" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosMntNeto[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaMntExe\', \'MntExe\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosMntNeto[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaMntExe.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaMntExe\', \'MntExe\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaMntExe.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaMntExe.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaMntExe=\'\'; detalle.configuracion.MntExe=\'\'; resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.MntExe.label }}\n                                            <a ng-if="detalle.cuentaMntExe.parametros.length > 0 && !detalle.configuracion.MntExe.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaMntExe.parametros, detalle.cuentaMntExe.id, \'MntExe\', detalle.MntExe);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.MntExe, \'btn-warning\' : !detalle.configuracion.MntExe }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>\n                                <td ng-if="vistaColumnas.TotMntNeto" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.MntNeto}">\n                                    {{ detalle.MntNeto? detalle.MntNeto : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.MntNeto > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaMntNeto">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaMntNeto" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosMntNeto[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaMntNeto\', \'MntNeto\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosMntNeto[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaMntNeto.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaMntNeto\', \'MntNeto\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaMntNeto.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaMntNeto.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaMntNeto = \'\'; detalle.configuracion.MntNeto=\'\'; resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.MntNeto.label }}\n                                            <a ng-if="detalle.cuentaMntNeto.parametros.length > 0 && !detalle.configuracion.MntNeto.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaMntNeto.parametros, detalle.cuentaMntNeto.id, \'MntNeto\', detalle.MntNeto);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.MntNeto, \'btn-warning\' : !detalle.configuracion.MntNeto }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>\n                                <td ng-if="vistaColumnas.TotMntIVA" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.MntIVA}">\n                                    {{ detalle.MntIVA? detalle.MntIVA : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.MntIVA > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaMntIVA">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaMntIVA" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosMntIVA[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaMntIVA\', \'MntIVA\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosMntIVA[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaMntIVA.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaMntIVA\', \'MntIVA\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaMntIVA.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaMntIVA.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaMntIVA = \'\'; detalle.configuracion.MntIVA=\'\'; resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.MntIVA.label }}\n                                            <a ng-if="detalle.cuentaMntIVA.parametros.length > 0 && !detalle.configuracion.MntIVA.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaMntIVA.parametros, detalle.cuentaMntIVA.id, \'MntIVA\', detalle.MntIVA);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.MntIVA, \'btn-warning\' : !detalle.configuracion.MntIVA }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>        \n\n\n                                <td ng-if="vistaColumnas.TotMntTotal" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.MntTotal}">\n                                    {{ detalle.MntTotal? detalle.MntTotal : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.MntTotal > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaMntTotal">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaMntTotal" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosMntTotal[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaMntTotal\', \'MntTotal\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosMntTotal[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaMntTotal.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaMntTotal\', \'MntTotal\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaMntTotal.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaMntTotal.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaMntTotal = \'\'; detalle.configuracion.MntTotal=\'\'; resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.MntTotal.label }}\n                                            <a ng-if="detalle.cuentaMntTotal.parametros.length > 0 && !detalle.configuracion.MntTotal.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaMntTotal.parametros, detalle.cuentaMntTotal.id, \'MntTotal\', detalle.MntTotal);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.MntTotal, \'btn-warning\' : !detalle.configuracion.MntTotal }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td> \n                                \n                            </tr>\n                        </table>\n                    </div>\n                </div>\n            </div>\n\n            <div class="panel panel-default" ng-if="objeto.archivo">\n                <div class="panel-heading">Resumenes de Cuentas Asignadas</div>\n                <div class="panel-body">\n                    <div class="col-sm-5">\n                        <table class="table table-striped">\n                            <tr>\n                                <th>#</th>\n                                <th class="col-sm-8">Cuenta</th>\n                                <th class="col-sm-4">Monto</th>\n                            </tr>\n                            <tr ng-repeat="cuenta in resumenes.resumentesPorCuenta">\n                                <td>{{ $index + 1 }}</td>\n                                <td>{{ cuenta.cuenta }}</td>\n                                <td class="text-right">{{ cuenta.total | currency:"$":0 }}</td>\n                            </tr>\n                        </table>\n                    </div>\n                </div>\n            </div>\n\n            <div class="panel panel-default" ng-if="objeto.archivo">\n                <div class="panel-heading">Cuadraturas</div>\n                <div class="panel-body">\n                    <div class="form-group">\n                        <label class="control-label col-sm-2">Total Libro:</label>\n                        <div class="col-sm-2" style="text-align:right">\n                            <strong>{{ objeto.totalLibro | currency:"$":0  }}</strong>\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label class="control-label col-sm-2">Total Carga:</label>\n                        <div class="col-sm-2" style="text-align:right">\n                            {{ resumenes.totalMontoTotal | currency:"$":0 }}\n                        </div>\n                        <div class="col-sm-1 text-success" ng-if="resumenes.totalMontoTotal == objeto.totalLibro">\n                            <i class="fa fa-check"></i>\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label class="control-label col-sm-2">Total Cuentas Asignadas:</label>\n                        <div class="col-sm-2" style="text-align:right">\n                            {{ resumenes.totalMontoCtasAsignadas | currency:"$":0 }}\n                        </div>\n                        <div class="col-sm-1 text-success" ng-if="resumenes.totalMontoCtasAsignadas == objeto.totalLibro">\n                            <i class="fa fa-check"></i>\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label class="control-label col-sm-2">Total Cuentas Monto Total:</label>\n                        <div class="col-sm-2" style="text-align:right">\n                            {{ resumenes.totalMontoCtasTotal | currency:"$":0 }}\n                        </div>\n                        <div class="col-sm-1 text-success" ng-if="resumenes.totalMontoCtasTotal == objeto.totalLibro">\n                            <i class="fa fa-check"></i>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="panel panel-primary" ng-if="objeto.archivo">\n                <div class="panel-heading">Generación de Comprobante Contable</div>\n                <div class="panel-body">\n                 \n                    <div class="form-group">\n                        <label class="label-control col-sm-3">Fecha de Comprobante:</label>\n                        <div class="col-sm-2">\n                            <p class="input-group" style="margin-bottom:0px !important">\n                                <input type="text" name="fecha" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.comprobante.fecha" is-open="fechas.fecha" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" ng-change="revisarFecha()" class="form-control form-white" required>\n                                <span class="input-group-btn">\n                                    <button type="button" class="btn btn-primary" ng-click="open($event)" style="margin-bottom:0px !important"><i class="glyphicon glyphicon-calendar"></i></button>\n                                </span>\n                            </p>\n                        </div>\n                    </div>\n\n                    <div class="form-group" ng-if="objeto.comprobantes > 0">\n                        <label class="label-control col-sm-3">Total Comprobantes creados:</label>\n                        <div class="col-sm-5">\n                            {{ objeto.comprobantes }}\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <label class="label-control col-sm-3">Generación de Comprobante:</label>\n                        <div class="col-sm-5">\n                            <label>\n                                <input type="radio" ng-model="objeto.comprobante.tipo" ng-value="1" icheck> Único Comprobante\n                            </label>&nbsp;&nbsp;&nbsp;&nbsp;\n                            <label>\n                                <input type="radio" ng-model="objeto.comprobante.tipo" ng-value="2" icheck> Por Documento\n                            </label><br>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n\n            <div class="panel panel-danger" ng-if="errores.length > 0">\n                <div class="panel-heading">Errores Detectados</div>\n                <div class="panel-body">\n                    <table class="table">\n                        <tr>\n                            <th>#</th>\n                            <th class="col-sm-6">Error</th>\n                            <th class="col-sm-2">Tipo de Documento</th>\n                            <th class="col-sm-2">Documento N°</th>\n                            <th class="col-sm-2">Columna</th>\n                        </tr>\n                        <tr ng-repeat="error in errores">\n                            <th>{{ $index + 1 }}</th>\n                            <th>{{ error.error }}</th>\n                            <th>{{ error.tipoDocumento }}</th>\n                            <th>{{ error.documento }}</th>\n                            <th>{{ error.columna }}</th>\n                        </tr>\n                    </table>\n                </div>\n            </div>\n\n        </div>\n        <div class="col-sm-12">\n            <button class="btn btn-default" ng-click="volverIndex()">Cancelar</button>\n\n            <button class="btn btn-primary" ng-disabled="form.$invalid" ng-click="guardar()" ng-if="objeto.archivo">Validar Guardar</button>\n\n            <button class="btn btn-primary" ng-disabled="form.$invalid" ng-click="generarComprobante()" ng-show="objeto.archivo && ( (objeto.comprobantes == 0 && objeto.cuentasGeneradas ) ||  (objeto.comprobantes == 1 && objeto.comprobante.tipo == 1) || ( objeto.comprobantes > 1 && objeto.comprobante.tipo == 2) )">Generar Comprobante</button>\n\n\n            <button class="btn btn-primary" ng-disabled="form.$invalid" confirmation-click="generarComprobante()" ng-show="objeto.archivo && objeto.comprobantes > 1 && objeto.comprobante.tipo == 1" confirmation-needed="Los Comprobantes creados anteriormente serán anulados. Desea Continuar?">Generar Comprobante</button>\n\n            <button class="btn btn-primary" ng-disabled="form.$invalid" confirmation-click="generarComprobante()" ng-show="objeto.archivo && objeto.comprobantes == 1 && objeto.comprobante.tipo == 2" confirmation-needed="El Comprobante creado anteriormente será anulado. Desea Continuar?">Generar Comprobante</button>\n\n\n            <button class="btn btn-success" ng-show="objeto.comprobantes > 0" abrir-ventana="{{ constantes.URL+\'importacion-libro-boleta/comprobantes-contables/imprimir/\' + objeto.id}}" ventana-nombre="IMPRIMIRASIENTOCONTABLE" ventana-ancho="750" ventana-alto="600">Ver Comprobante</button>\n\n            <button class="btn btn-danger" ng-show="objeto.archivo && objeto.comprobantes==0" confirmation-click="eliminarLibro( objeto.id )" confirmation-needed="El Libro será eliminado permanentemente. Desea Continuar?">\n                Eliminar Libro\n            </button>\n        </div>\n    </form>\n</div>'),
a.put("views/importacion-libro-compra-xml.html",'<div class="header">\n    <h2>Importación de <b>Libros de Compra</b>\n        <b ng-if="miPyme" class="text-primary"> - Facturador Mi Pyme SII</b>\n        <b ng-if="!miPyme" class="text-success"> - Archivo CSV</b>\n    </h2>\n</div>\n\n<script type="text/ng-template" id="customTemplate.html">\n    <a style="cursor: pointer;">\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\n    </a>\n</script>\n\n<div class="row" ng-if="!mostrarForm">\n    <div class="col-md-12">        \n        <div class="form-group">\n            <label for="orden" class="control-label col-md-1">\n                Ordenar:\n            </label>\n            <div class="col-md-3">\n                <select ng-model="orden" id="orden" ng-init="orden=\'periodo\'" class="form-control form-white">\n                    <option value="periodo">Periodo</option>\n                    <option value="responsable">Responsable</option>\n                    <option value="fechaImportacion">Importación</option>\n                    <option value="documentos">Documentos</option>\n                </select>\n            </div>\n            <div class="col-md-1">\n                <select ng-model="ordenSent" id="ordenSent" ng-init="ordenSent=\'-\'" class="form-control form-white">\n                    <option value="+">ASC</option>\n                    <option value="-">DESC</option>\n                </select>\n            </div>\n            <label for="filtro" class="col-md-1 control-label">Filtrar:</label>\n            <div class="col-md-3">\n              <input id="filtro" type="text" class="form-control form-white form-white" ng-model="filtroIndex">\n            </div>\n            <div class="col-md-3" style="text-align:right; padding-right:0px">\n                <button class="btn btn-primary btn-md" ng-click="gestionarArchivo({});">\n                    <i class="fa fa-plus"></i> Nuevo\n                </button>\n\n                <div class="btn-group">\n	            	<button class="btn btn-dark btn-md" type="button" data-toggle="dropdown" aria-expanded="false">\n	                    <i class="fa fa-wrench"></i> Herramientas <span class="caret"></span>\n	                </button>\n	                <ul class="dropdown-menu dropdown-menu-sm" role="menu">\n	                    \n	                    <li>\n	                        <a href="javascript:void(0);">\n	                            <i class="fa fa-print"></i> Imprimir\n	                        </a>\n	                    </li>\n	                </ul>\n                </div>\n            </div>\n        </div>\n        <div class="form-group">\n            <table class="table table-striped table-hover">\n                <thead>\n                <tr>\n                    <th>#</th>\n                    <th class="col-sm-2">Archivo</th>\n                    <th class="col-sm-1">Periodo</th>\n                    <th class="col-sm-4">Responsable</th>\n                    <th class="col-sm-1">Importación</th>                    \n                    <th class="col-sm-1">Documentos</th>\n                    <th class="col-sm-1">Centralizado</th>\n                    <th class="col-sm-2">Acciones</th>\n                </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="dato in datos | orderBy:ordenSent+orden | filter: filtroIndex">\n                        <td>{{ $index + 1 }}</td>\n                        <td>{{ dato.archivo }}</td>\n                        <td>{{ dato.periodo }}</td>\n                        <td>{{ dato.responsable }}</td>\n                        <td>{{ dato.fechaImportacion | date:\'dd-MM-yyyy\' }}</td>\n                        <td>{{ dato.documentos }}</td>\n                        <td style="text-align: center">\n                            <span class="text-success" ng-if="dato.centralizado">\n                                <i class="fa fa-check"></i>\n                            </span>\n                            <span class="text-default" ng-if="!dato.centralizado">\n                                NO\n                            </span>\n                        </td>\n                        <td>\n                            <a class="btn-acciones btn btn-default" href="javascript:void(0);" ng-click="gestionarLibro(dato);" uib-tooltip-html="toolTipEdicion(dato.archivo)">\n                                <i class="fa fa-pencil"></i>\n                            </a>\n                            <a class="btn-acciones btn btn-danger" href="javascript:void(0);" confirmation-click="eliminarLibro( dato.id );" confirmation-needed="El Libro de Compra: <b>{{ dato.archivo }}</b> será eliminado.Desea continuar?">\n                                <i class="fa fa-remove"></i>\n                            </a>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>\n\n<script type="text/ng-template" id="myModalAsignacionMasivaCuenta.html">\n    <div class="modal-header">\n        <h3 class="modal-title">Asignación Masiva de Cuenta</h3>\n    </div>\n    <div class="modal-body form-horizontal">\n        <div class="form-group">\n            <label class="col-sm-3 control-label">Columna Destino:</label>\n            <div class="col-sm-9">\n                {{ objeto.columna }}\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-3 control-label">Cuenta:</label>\n            <div class="col-sm-7" style="padding:0px;">\n                <input type="text" ng-model="objeto.cuenta" placeholder="Buscar Cuenta Destino" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estado" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required  />\n            </div>\n            <div class="col-sm-2">\n                <i ng-show="estado" class="glyphicon glyphicon-refresh"></i>\n                <i ng-show="objeto.cuenta.codigo" class="fa fa-check" style="color: #fff;"></i>\n                <button class="btn btn-sm btn-primary" ng-click="buscarCuenta()" tooltip="Buscar en Plan de Cuentas">\n                    <i class="fa fa-search"></i>\n                </button>\n            </div>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" ng-click="cancel()">Cancelar</button>\n        <button class="btn btn-primary" ng-disabled="form.$invalid" ng-click="asignar()">Asignar</button>\n    </div>\n</script>\n\n\n<div class="row" ng-if="mostrarForm">\n\n    <span onclick="bajar()" class="ir-abajo icon-arrow-down"></span>\n\n    <span onclick="subir()" class="ir-arriba icon-arrow-up"></span>\n\n\n    <form class="form-horizontal" name="form" novalidate autocomplete="Off">\n        <div class="col-md-12">\n            <div class="panel" ng-class="{\'panel-primary\': miPyme, \'panel-success\':!miPyme}">\n                <div class="panel-heading">Datos del Libro</div>\n                <div class="panel-body">\n\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Tipo de Importación:</label>\n                        <div class="col-sm-5">                            \n                            <strong ng-if="miPyme">Archivo XML - SII</strong>\n                            <strong ng-if="!miPyme">Archivo CSV - Sistema</strong>\n                        </div>\n                    </div>\n\n                    <div class="form-group form-group-md" ng-if="!miPyme  && !objeto.archivo">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Tipo de Operación:</label>\n                        <div class="col-sm-5">                            \n                            Compra\n                        </div>\n                    </div>\n\n                    <div class="form-group form-group-md" ng-if="!miPyme && !objeto.archivo">                       \n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Periodo Tributario:</label>\n                        <div class="col-sm-2">\n                            <div class="input-group">\n                                <select ng-model="objeto.periodoMes" class="form-control form-white" ng-options="mes as mes.mes for mes in opciones.meses"></select>\n                                <div class="input-group-addon">{{ objeto.periodoAnio }}</div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="form-group form-group-md" ng-if="!miPyme">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Archivo:</label>\n                        <div class="col-sm-9">\n                            <button ng-show="!objeto.archivo && !archivo.mostrar" type="button" ngf-select ng-model="archivo.file" class="btn btn-xs btn-warning" subir-archivo modelo-file="archivo.file" modelo="archivo" modelo-destino="objeto.archivo" nombre-archivo="archivo" ng-disabled="!objeto.periodoMes.id" accept=".csv" ngf-pattern=".csv">\n                                Seleccionar CSV\n                            </button>\n                            <uib-progressbar ng-show="archivo.mostrar" class="progress-striped active" value="archivo.porc" type="success"><strong>{{ archivo.porc + "%" }}</strong></uib-progressbar>\n                            <span ng-if="objeto.archivo && !archivo.loading" class="text-success">\n                                <strong>\n                                    {{ objeto.archivo }}\n                                </strong>\n                            </span>\n                            <img ng-if="archivo.loading" src="images/cargando.37ead0fc.gif" style="height: 20px">\n                        </div>\n                    </div>\n\n                                        \n                    <div class="form-group form-group-md" ng-if="miPyme">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Archivo:</label>\n                        <div class="col-sm-9">\n                            <button ng-show="!objeto.archivo && !archivo.mostrar" type="button" ngf-select ng-model="archivo.file" class="btn btn-xs btn-warning" subir-archivo modelo-file="archivo.file" modelo="archivo" modelo-destino="objeto.archivo" nombre-archivo="archivo" accept=".xml" ngf-pattern=".xml">\n                                Seleccionar\n                            </button>\n                            <uib-progressbar ng-show="archivo.mostrar" class="progress-striped active" value="archivo.porc" type="success"><strong>{{ archivo.porc + "%" }}</strong></uib-progressbar>\n                            <span ng-if="objeto.archivo && !archivo.loading" class="text-success">\n                                <strong>\n                                    {{ objeto.archivo }}\n                                </strong>\n                            </span>\n                            <img ng-if="archivo.loading" src="images/cargando.37ead0fc.gif" style="height: 20px">\n                        </div>\n                    </div>\n\n\n\n                    <div class="panel panel-danger" ng-if="archivoImp.advertencias.length > 0">\n                        <div class="panel-heading">Advertencias</div>\n                        <div class="panel-body">\n                            <table class="table">\n                                <tr>\n                                    <th>#</th>\n                                    <th class="col-sm-6">Advertencia</th>\n                                    <th class="col-sm-2">Tipo de Documento</th>\n                                    <th class="col-sm-2">Documento N°</th>\n                                    <th class="col-sm-2">Fecha</th>\n                                    <th class="col-sm-2">Razón Social Contraparte</th>\n                                </tr>\n                                <tr ng-repeat="error in archivoImp.advertencias">\n                                    <th>{{ $index + 1 }}</th>\n                                    <th>{{ error.error }}</th>\n                                    <th>{{ error.tipoDocumento }}</th>\n                                    <th>{{ error.documento }}</th>\n                                    <th>{{ error.fecha }}</th>\n                                    <th>{{ error.rzn_social }}</th>\n                                </tr>\n                            </table>\n                        </div>\n                    </div>\n\n                    <div class="panel panel-danger" ng-if="archivoImp.errores.length > 0 ">\n                        <div class="panel-heading">Errores Detectados</div>\n                        <div class="panel-body">\n                            <table class="table">\n                                <tr>\n                                    <th>#</th>\n                                    <th class="col-sm-3">Error</th>\n                                    <th class="col-sm-2">Tipo de Documento</th>\n                                    <th class="col-sm-2">Documento N°</th>\n                                    <th class="col-sm-2">Fecha</th>\n                                    <th class="col-sm-3">Razón Social Contraparte</th>\n                                </tr>\n                                <tr ng-repeat="error in archivoImp.errores">\n                                    <td>{{ $index + 1 }}</td>\n                                    <td>{{ error.error }}</td>\n                                    <td>{{ error.tipoDocumento }}</td>\n                                    <td>{{ error.documento }}</td>\n                                    <td>{{ error.fecha }}</td>\n                                    <td>{{ error.rzn_social }}</td>\n                                </tr>\n                            </table>\n                            <big>\n                                <span class="label label-primary">\n                                    Los Documentos que ya se encuentran registrados pueden ser omitidos en la importación del presente Libro de Compras para continuar con la importación.\n                                </span>\n                            </big>\n                        </div>\n                    </div>\n\n                    \n\n                    <div ng-if="objeto.archivo">\n                        <div class="form-group form-group-md">\n                            <label class="col-sm-3 control-label" for="formGroupInputLarge">Envio Libro ID:</label>\n                            <div class="col-sm-9">\n                                {{ objeto.envioLibroID[0] }}\n                            </div>\n                        </div>\n\n                        <div class="form-group form-group-md">\n                            <label class="col-sm-3 control-label" for="formGroupInputLarge">Periodo Tributario:</label>\n                            <div class="col-sm-3">\n                               {{ objeto.resumen.PeriodoTributario }}\n                            </div>\n                        </div>\n\n                        <div class="form-group form-group-md">\n                            <label class="col-sm-3 control-label" for="formGroupInputLarge">Tipo de Operación:</label>\n                            <div class="col-sm-3">\n                                {{ objeto.resumen.TipoOperacion }}\n                            </div>\n                        </div>\n\n                        <div class="form-group form-group-md">\n                            <label class="col-sm-3 control-label" for="formGroupInputLarge">Tipo de Libro:</label>\n                            <div class="col-sm-3">\n                                {{ objeto.resumen.TipoLibro }}\n                            </div>\n                        </div>\n\n                        <div class="form-group form-group-md">\n                            <label class="col-sm-3 control-label" for="formGroupInputLarge">Tipo de Envio:</label>\n                            <div class="col-sm-3">\n                                {{ objeto.resumen.TipoEnvio }}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="panel panel-default" ng-if="objeto.archivo">\n                <div class="panel-heading">Resumen del Periodo</div>\n                <div class="panel-body">\n\n                    <div class="form-group form-group-md">\n                        <table class="table table-striped">\n                            <tr>\n                                <th class="col-xs-1">Tipo Documento</th>                            \n                                <th class="col-xs-1">Total Documentos</th>\n                                <th ng-if="vistaColumnas.TotMntExe" class="col-xs-1">Total Monto Exento</th>\n                                <th ng-if="vistaColumnas.TotMntNeto" class="col-xs-1">Total Monto Neto</th>\n                                <th ng-if="vistaColumnas.TotOpIVARec" class="col-xs-1">OPERACIONES CON IVA RECUPERABLE</th>\n                                <th ng-if="vistaColumnas.TotMntIVA" class="col-xs-1">TOTAL MONTO IVA (recuperable)</th>\n\n                                <th ng-if="vistaColumnas.TotOpActivoFijo" class="col-xs-1">OPERACIONES ACTIVO FIJO</th>\n                                <th ng-if="vistaColumnas.TotMntActivoFijo" class="col-xs-1">MONTO NETO ACTIVO FIJO</th>\n                                <th ng-if="vistaColumnas.TotMntIVAActivoFijo" class="col-xs-1">TOTAL MONTO IVA ACTIVO FIJO</th>\n                                <th ng-if="vistaColumnas.TotIVANoRec" class="col-xs-1">IVA no recuperable</th>\n\n                                <th ng-if="vistaColumnas.TotOpIVAUsoComun" class="col-xs-1">OPERACIONES CON IVA USO COMUN</th>\n                                <th ng-if="vistaColumnas.TotIVAUsoComun" class="col-xs-1">IVA USO COMUN</th>\n                                <th ng-if="vistaColumnas.TotOtrosImp" class="col-xs-2">Impuesto o recargo</th>\n                                <th ng-if="vistaColumnas.TotMntSinCred" class="col-xs-1">Impuesto sin Derecho a crédito</th>\n                                <th ng-if="vistaColumnas.TotMntTotal" class="col-xs-1">TOTAL MONTO TOTAL</th>          \n\n                                <th ng-if="vistaColumnas.TotIVANoRetenido" class="col-xs-1">IVA no retenido</th>          \n                                <th ng-if="vistaColumnas.TotTabPuros" class="col-xs-1">TABACOS MANUFACTURADOS (Cigarros puros)</th> \n                                <th ng-if="vistaColumnas.TotTabCigarrillos" class="col-xs-1">TABACOS MANUFACTURADOS (Cigarrillos)</th> \n                                <th ng-if="vistaColumnas.TotTabElaborado" class="col-xs-1">TABACOS MANUFACTURADOS (Tabaco elaborado)</th>\n                                <th ng-if="vistaColumnas.TotImpVehiculo" class="col-xs-1">Impuesto a Los Vehículos Automóviles</th>\n                            </tr>\n\n                            <tr ng-repeat="total in objeto.resumen.totales.TotalesPeriodo">\n                                <td>\n                                    ({{ total.TpoDoc }}) {{ tiposDocumentos[total.TpoDoc] }}\n                                </td>                            \n                                <td>{{ total.TotDoc }}</td>\n                                <td ng-if="vistaColumnas.TotMntExe">{{ total.TotMntExe | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotMntNeto">{{ total.TotMntNeto | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotOpIVARec">{{ total.TotOpIVARec }}</td>\n                                <td ng-if="vistaColumnas.TotMntIVA">{{ total.TotMntIVA | currency:"$":0 }}</td>\n\n\n                                <td ng-if="vistaColumnas.TotOpActivoFijo">{{ total.TotOpActivoFijo | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotMntActivoFijo">{{ total.TotMntActivoFijo | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotMntIVAActivoFijo">{{ total.TotMntIVAActivoFijo | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotIVANoRec">\n                                    <table class="table table-bordered" ng-if="!total.TotIVANoRec.TotMntIVANoRec && total.TotIVANoRec.length > 0">\n                                        <tr>\n                                            <th>Cod</th>\n                                            <th>Monto</th>\n                                        </tr>\n                                        <tr ng-repeat="otro in total.TotIVANoRec">\n                                            <td>{{ otro.CodImp }}</td>\n                                            <td>{{ otro.TotMntIVANoRec  | currency:"$":0 }}</td>\n                                        </tr>\n                                    </table>\n                                    <span ng-if="total.TotIVANoRec.TotMntIVANoRec">\n                                        ({{ total.TotIVANoRec.CodIVANoRec }}) \n                                        {{ total.TotIVANoRec.TotMntIVANoRec | currency:"$":0 }}\n                                    </span>\n                                </td>\n\n\n                                <td ng-if="vistaColumnas.TotOpIVAUsoComun">{{ total.TotOpIVAUsoComun }}</td>\n                                <td ng-if="vistaColumnas.TotIVAUsoComun">{{ total.TotIVAUsoComun | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotOtrosImp">\n                                    <table class="table table-bordered" ng-if="!total.TotOtrosImp.TotMntImp && total.TotOtrosImp.length > 0">\n                                        <tr>\n                                            <th>Cod</th>\n                                            <th>Monto</th>\n                                        </tr>\n                                        <tr ng-repeat="otro in total.TotOtrosImp">\n                                            <td>{{ otro.CodImp }}</td>\n                                            <td>{{ otro.TotMntImp  | currency:"$":0 }}</td>\n                                        </tr>\n                                    </table>\n                                    <span ng-if="total.TotOtrosImp.TotMntImp">\n                                        ({{ total.TotOtrosImp.CodImp }}) \n                                        {{ total.TotOtrosImp.TotMntImp | currency:"$":0 }}\n                                    </span>\n                                </td>                            \n                                <td ng-if="vistaColumnas.TotMntSinCred">{{ total.TotImpSinCredito | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotMntTotal">{{ total.TotMntTotal | currency:"$":0 }}</td>\n\n                                <td ng-if="vistaColumnas.TotIVANoRetenido">{{ total.TotIVANoRetenido | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotTabPuros">{{ total.TotTabPuros | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotTabCigarrillos">{{ total.TotTabCigarrillos | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotTabElaborado">{{ total.TotTabElaborado | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotImpVehiculo">{{ total.TotImpVehiculo | currency:"$":0 }}</td>\n                            </tr>\n                        </table>\n                    </div>\n                </div>\n            </div>\n\n\n            <div class="panel panel-warning" ng-if="!miPyme && archivoImp.advertencias.length > 0 && objeto.archivo">\n                <div class="panel-heading">Errores Detectados</div>\n                <div class="panel-body">\n                    <table class="table">\n                        <tr>\n                            <th>#</th>\n                            <th class="col-sm-6">Error</th>\n                            <th class="col-sm-2">Tipo de Documento</th>\n                            <th class="col-sm-2">Documento N°</th>\n                            <th class="col-sm-2">Fecha</th>\n                            <th class="col-sm-2">Razón Social Contraparte</th>\n                        </tr>\n                        <tr ng-repeat="error in archivoImp.advertencias">\n                            <th>{{ $index + 1 }}</th>\n                            <th>{{ error.error }}</th>\n                            <th>{{ error.tipoDocumento }}</th>\n                            <th>{{ error.documento }}</th>\n                            <th>{{ error.fecha }}</th>\n                            <th>{{ error.rzn_social }}</th>\n                        </tr>\n                    </table>\n                </div>\n            </div>\n\n\n            <div class="panel panel-default" ng-if="objeto.archivo">\n                <div class="panel-heading">Detalle del Libro</div>\n                <div class="panel-body">\n                    <div class="table-responsive">\n                        <table class="table table-striped table-bordered">\n                            <tr>\n                                <th colspan="30">                                    \n                                    <label>\n                                        MOSTRAR SOLAMENTE INCOMPLETOS \n                                        <input type="checkbox" ng-model="filtros.mostrarIncompletos" icheck>\n                                    </label>\n                                </th>\n                            </tr>\n                            <tr>\n                                <th></th>\n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.TpoDoc" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.NroDoc" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                          \n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.FchDoc" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.RUTDoc" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.RznSoc" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotMntExe">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.MntExe" ng-change="revisarFiltro(\'MntExe\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotMntNeto">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.MntNeto" ng-change="revisarFiltro(\'MntNeto\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotMntIVA">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.MntIVA" ng-change="revisarFiltro(\'MntIVA\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotMntActivoFijo">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.MntActivoFijo" ng-change="revisarFiltro(\'MntActivoFijo\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotMntIVAActivoFijo">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.MntIVAActivoFijo" ng-change="revisarFiltro(\'MntIVAActivoFijo\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotIVANoRec">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.IVANoRec" ng-change="revisarFiltro(\'IVANoRec\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotCredIVAUsoComun">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.IVAUsoComun" ng-change="revisarFiltro(\'IVAUsoComun\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotOtrosImp">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.OtrosImp" ng-change="revisarFiltro(\'OtrosImp\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotMntSinCred">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.MntSinCred" ng-change="revisarFiltro(\'MntSinCred\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotMntTotal">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.MntTotal" ng-change="revisarFiltro(\'MntTotal\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotIVANoRetenido">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.IVANoRetenido" ng-change="revisarFiltro(\'IVANoRetenido\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotTabPuros">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.TabPuros" ng-change="revisarFiltro(\'TabPuros\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotTabCigarrillos">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.TabCigarrillos" ng-change="revisarFiltro(\'TabCigarrillos\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotTabElaborado">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.TabElaborado" ng-change="revisarFiltro(\'TabElaborado\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotImpVehiculo">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.ImpVehiculo" ng-change="revisarFiltro(\'ImpVehiculo\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                            </tr>\n                            <tr class="bg-success">\n                                <th>#</th>\n                                <th>Tipo Dcto</th>\n                                <th>N° Dcto</th>\n                                <th>Fecha Dcto</th>\n                                <th>Rut</th>\n                                <th>Razón Social</th>\n                                <th ng-if="vistaColumnas.TotMntExe">Monto Exento\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaMntExe\', \'MntExe\', \'Monto Exento\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n                                <th ng-if="vistaColumnas.TotMntNeto">\n                                    Monto Neto\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaMntNeto\', \'MntNeto\', \'Monto Neto\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n                                <th ng-if="vistaColumnas.TotMntIVA">\n                                    Monto IVA\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaMntIVA\', \'MntIVA\', \'Monto IVA\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>       \n                                <th ng-if="vistaColumnas.TotMntActivoFijo">\n                                    Monto Activo Fijo\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaMntActivoFijo\', \'MntActivoFijo\', \'Monto Activo Fijo\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>   \n                                <th ng-if="vistaColumnas.TotMntIVAActivoFijo">\n                                    IVA Activo Fijo\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaMntIVAActivoFijo\', \'MntIVAActivoFijo\', \'IVA Activo Fijo\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>   \n                                <th ng-if="vistaColumnas.TotIVANoRec">\n                                    IVA No Recuperable\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaIVANoRec\', \'IVANoRec\', \'IVA No Recuperable\')">\n                                        Cta Masiva\n                                    </button>\n                                </th> \n                                <th ng-if="vistaColumnas.TotIVAUsoComun">\n                                    IVA USO COMUN\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaIVAUsoComun\', \'IVAUsoComun\', \'IVA USO COMUN\')">\n                                        Cta Masiva\n                                    </button>\n                                </th> \n                                <th ng-if="vistaColumnas.TotOtrosImp">\n                                    Otros Imp.\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaOtrosImp\', \'OtrosImp\', \'Otros Imp.\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n                                <th ng-if="vistaColumnas.TotMntSinCred">\n                                    Monto Sin Credito\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva( \'cuentaMntSinCred\' , \'MntSinCred\', \'Monto Sin Credito\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n                                <th ng-if="vistaColumnas.TotMntTotal">\n                                    Monto Total\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaMntTotal\', \'MntTotal\', \'Monto Total\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n\n\n\n\n\n                                <th ng-if="vistaColumnas.TotIVANoRetenido">\n                                    IVA no retenido\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaIVANoRetenido\', \'IVANoRetenido\', \'IVA no retenido\')">\n                                        Cta Masiva\n                                    </button>\n                                </th> \n\n                                <th ng-if="vistaColumnas.TotTabPuros">\n                                    TABACOS (Cigarros puros)\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaTabPuros\', \'TabPuros\', \'TABACOS (Cigarros puros)\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n                                \n                                <th ng-if="vistaColumnas.TotTabCigarrillos">\n                                    TABACOS (Cigarrillos)\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaTabCigarrillos\', \'TabCigarrillos\', \'TABACOS (Cigarrillos)\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n\n                                <th ng-if="vistaColumnas.TotTabElaborado">\n                                    TABACOS (Tabaco elaborado)\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaTabElaborado\', \'TabElaborado\', \'TABACOS (Tabaco elaborado)\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n                                <th ng-if="vistaColumnas.TotImpVehiculo">\n                                    Impuesto a Los Vehículos Automóviles\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaImpVehiculo\', \'ImpVehiculo\', \'Impuesto a Los Vehículos Automóviles\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n                            </tr>\n                            <tr ng-repeat="detalle in ( filtros.itemsFiltrados = ( objeto.detalle | filter : filtro ) ) | filter : filtrarIncompletos" ng-class="{\'warning\' : detalle.modIva, \'danger strikeout\' : detalle.estado==0}">\n                                <td>{{ $index + 1 }}</td>\n                                <td>{{ \'(\'+detalle.TpoDoc+\') \'+detalle.NombreDoc }}</td>\n                                <td>{{ detalle.NroDoc }}</td>                        \n                                <td>{{ detalle.FchDoc | date : "dd-MM-yyyy" }}</td>\n                                <td>{{ detalle.RUTDoc }}</td>\n                                <td>{{ detalle.RznSoc }}</td>\n                                <td ng-if="vistaColumnas.TotMntExe" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.MntExe.label}">\n                                    {{ detalle.MntExe ? detalle.MntExe : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.MntExe > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaMntExe">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaMntExe" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosMntNeto[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaMntExe\', \'MntExe\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosMntNeto[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaMntExe.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaMntExe\', \'MntExe\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaMntExe.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaMntExe.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaMntExe=\'\'; detalle.configuracion.MntExe=\'\';resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.MntExe.label }}\n                                            <a ng-if="detalle.cuentaMntExe.parametros.length > 0 && !detalle.configuracion.MntExe.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaMntExe.parametros, detalle.cuentaMntExe.id, \'MntExe\', detalle.MntExe);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.MntExe.label, \'btn-warning\' : !detalle.configuracion.MntExe.label }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>\n                                <td ng-if="vistaColumnas.TotMntNeto" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.MntNeto.label}">\n                                    {{ detalle.MntNeto? detalle.MntNeto : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.MntNeto > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaMntNeto">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaMntNeto" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosMntNeto[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaMntNeto\', \'MntNeto\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosMntNeto[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaMntNeto.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaMntNeto\', \'MntNeto\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaMntNeto.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaMntNeto.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaMntNeto = \'\'; detalle.configuracion.MntNeto=\'\';resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.MntNeto.label }}\n                                            <a ng-if="detalle.cuentaMntNeto.parametros.length > 0 && !detalle.configuracion.MntNeto.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaMntNeto.parametros, detalle.cuentaMntNeto.id, \'MntNeto\', detalle.MntNeto);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.MntNeto.label, \'btn-warning\' : !detalle.configuracion.MntNeto.label }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>\n                                <td ng-if="vistaColumnas.TotMntIVA" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.MntIVA.label}">\n                                    {{ detalle.MntIVA? detalle.MntIVA : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.MntIVA > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaMntIVA">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaMntIVA" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosMntIVA[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaMntIVA\', \'MntIVA\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosMntIVA[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaMntIVA.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaMntIVA\', \'MntIVA\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaMntIVA.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaMntIVA.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaMntIVA = \'\'; detalle.configuracion.MntIVA=\'\';resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.MntIVA.label }}\n                                            <a ng-if="detalle.cuentaMntIVA.parametros.length > 0 && !detalle.configuracion.MntIVA.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaMntIVA.parametros, detalle.cuentaMntIVA.id, \'MntIVA\', detalle.MntIVA);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.MntIVA.label, \'btn-warning\' : !detalle.configuracion.MntIVA.label }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>   \n                                <td ng-if="vistaColumnas.TotMntActivoFijo" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.MntActivoFijo.label}">\n                                    {{ detalle.MntActivoFijo? detalle.MntActivoFijo : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.MntActivoFijo > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaMntActivoFijo">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaMntActivoFijo" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosMntActivoFijo[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaMntActivoFijo\', \'MntActivoFijo\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosMntActivoFijo[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaMntActivoFijo.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaMntActivoFijo\', \'MntActivoFijo\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaMntActivoFijo.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaMntActivoFijo.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaMntActivoFijo = \'\'; detalle.configuracion.MntActivoFijo=\'\';resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.MntActivoFijo.label }}\n                                            <a ng-if="detalle.cuentaMntActivoFijo.parametros.length > 0 && !detalle.configuracion.MntActivoFijo.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaMntActivoFijo.parametros, detalle.cuentaMntActivoFijo.id, \'MntActivoFijo\', detalle.MntActivoFijo);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.MntActivoFijo.label, \'btn-warning\' : !detalle.configuracion.MntActivoFijo.label }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>\n                                <td ng-if="vistaColumnas.TotMntIVAActivoFijo" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.MntIVAActivoFijo.label}">\n                                    {{ detalle.MntIVAActivoFijo? detalle.MntIVAActivoFijo : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.MntIVAActivoFijo > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaMntIVAActivoFijo">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaMntIVAActivoFijo" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosMntIVAActivoFijo[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaMntIVAActivoFijo\', \'MntIVAActivoFijo\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosMntIVAActivoFijo[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaMntIVAActivoFijo.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaMntIVAActivoFijo\', \'MntIVAActivoFijo\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaMntIVAActivoFijo.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaMntIVAActivoFijo.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaMntIVAActivoFijo = \'\'; detalle.configuracion.MntIVAActivoFijo=\'\';resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.MntIVAActivoFijo.label }}\n                                            <a ng-if="detalle.cuentaMntIVAActivoFijo.parametros.length > 0 && !detalle.configuracion.MntIVAActivoFijo.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaMntIVAActivoFijo.parametros, detalle.cuentaMntIVAActivoFijo.id, \'MntIVAActivoFijo\', detalle.MntIVAActivoFijo);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.MntIVAActivoFijo.label, \'btn-warning\' : !detalle.configuracion.MntIVAActivoFijo.label }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>\n                                <td ng-if="vistaColumnas.TotIVANoRec" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.IVANoRec.label}">\n\n                                    <table class="col-sm-12" ng-if="detalle.IVANoRec.length > 0 && detalle.IVANoRec" ng-class="{\'table-bordered\' : detalle.IVANoRec.length > 1 }">\n                                        <tr ng-repeat="otro in detalle.IVANoRec">\n                                            <td class="col-sm-12" ng-class="{\'bg-success\' : detalle.configuracion.IVANoRec[ \'A\'+otro.codigo].label}">\n                                                ({{ otro.codigo }}) {{ codigosImpuestos[otro.codigo] }}<br>{{ otro.monto  | currency:"$":0 }}<br>\n                                                <div class="col-sm-12" ng-show="!detalle.cuentaIVANoRec[ \'A\'+otro.codigo]">\n                                                    <div class="form-group">\n                                                        <div class="col-sm-9" style="padding:0px">\n                                                            <input type="text" ng-model="detalle.cuentaIVANoRec[ \'A\'+otro.codigo]" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosOtrosImp[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaIVANoRec\', \'IVANoRec\', \'A\'+otro.codigo ); resumenAsignacionCuenta();" required>\n                                                        </div>\n                                                        <div class="col-sm-3">\n                                                            <i ng-show="estadosOtrosImp[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                            <i ng-show="detalle.cuentaIVANoRec[ \'A\'+otro.codigo].codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                            <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaIVANoRec\', \'IVANoRec\', detalle.id,  \'A\'+otro.codigo )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <div ng-show="detalle.cuentaIVANoRec[ \'A\'+otro.codigo].codigo" style="font-weight: normal !important; font-size:12px !important">\n                                                    {{ detalle.cuentaIVANoRec[ \'A\'+otro.codigo].cuenta }}\n                                                    <a href="javascript:void(0);" ng-click="detalle.cuentaIVANoRec[ \'A\'+otro.codigo] = \'\'; detalle.configuracion.IVANoRec[\'A\'+otro.codigo]=\'\';resumenAsignacionCuenta();" class="text-danger">\n                                                        <i class="fa fa-remove"></i>\n                                                    </a><br>\n                                                    {{ detalle.configuracion.IVANoRec[ \'A\'+otro.codigo].label }}\n                                                    <a ng-if="detalle.cuentaIVANoRec[ \'A\'+otro.codigo].parametros.length > 0 && !detalle.configuracion.IVANoRec[ \'A\'+otro.codigo].auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaIVANoRec[ \'A\'+otro.codigo].parametros, detalle.cuentaIVANoRec[ \'A\'+otro.codigo].id, \'IVANoRec\', otro.monto, \'A\'+otro.codigo);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.IVANoRec[ \'A\'+otro.codigo].label, \'btn-warning\' : !detalle.configuracion.IVANoRec[ \'A\'+otro.codigo].label }">\n                                                        <i class="fa fa-cogs"></i>\n                                                    </a>\n                                                </div>\n                                                <span ng-if="detalle.IVANoRec.length > 1"><br>&nbsp;</span>                                               \n                                            </td>\n                                        </tr>\n                                    </table>\n                                </td>   \n                                <td ng-if="vistaColumnas.TotIVAUsoComun" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.IVAUsoComun.label}">\n                                    {{ detalle.IVAUsoComun? detalle.IVAUsoComun : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.IVAUsoComun > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaIVAUsoComun">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaIVAUsoComun" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosIVAUsoComun[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaIVAUsoComun\', \'IVAUsoComun\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosIVAUsoComun[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaIVAUsoComun.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaIVAUsoComun\', \'IVAUsoComun\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaIVAUsoComun.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaIVAUsoComun.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaIVAUsoComun = \'\'; detalle.configuracion.IVAUsoComun=\'\';resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.IVAUsoComun.label }}\n                                            <a ng-if="detalle.cuentaIVAUsoComun.parametros.length > 0 && !detalle.configuracion.IVAUsoComun.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaIVAUsoComun.parametros, detalle.cuentaIVAUsoComun.id, \'IVAUsoComun\', detalle.IVAUsoComun);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.IVAUsoComun.label, \'btn-warning\' : !detalle.configuracion.IVAUsoComun.label }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>   \n                                <td ng-if="vistaColumnas.TotOtrosImp" style="text-align: right">\n\n                                    <table class="col-sm-12" ng-if="detalle.OtrosImp.length > 0 && detalle.OtrosImp" ng-class="{\'table-bordered\' : detalle.OtrosImp.length > 1 }">\n                                        <tr ng-repeat="otro in detalle.OtrosImp">\n                                            <td class="col-sm-12" ng-class="{\'bg-success\' : detalle.configuracion.OtrosImp[\'A\'+otro.codigo].label}">\n                                                ({{ otro.codigo }}) {{ codigosImpuestos[otro.codigo] }}<br>{{ otro.monto  | currency:"$":0 }}<br>\n                                                <div class="col-sm-12" ng-show="!detalle.cuentaOtrosImp[\'A\'+otro.codigo]">\n                                                    <div class="form-group">\n                                                        <div class="col-sm-9" style="padding:0px">\n                                                            <input type="text" ng-model="detalle.cuentaOtrosImp[\'A\'+otro.codigo]" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosOtrosImp[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaOtrosImp\', \'OtrosImp\', \'A\'+otro.codigo ); resumenAsignacionCuenta();" required>\n                                                        </div>\n                                                        <div class="col-sm-3">\n                                                            <i ng-show="estadosOtrosImp[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                            <i ng-show="detalle.cuentaOtrosImp[\'A\'+otro.codigo].codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                            <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaOtrosImp\', \'OtrosImp\', detalle.id, \'A\'+otro.codigo )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <div ng-show="detalle.cuentaOtrosImp[\'A\'+otro.codigo].codigo" style="font-weight: normal !important; font-size:12px !important">\n                                                    {{ detalle.cuentaOtrosImp[\'A\'+otro.codigo].cuenta }}\n                                                    <a href="javascript:void(0);" ng-click="detalle.cuentaOtrosImp[\'A\'+otro.codigo] = \'\'; detalle.configuracion.OtrosImp[\'A\'+otro.codigo]=\'\';resumenAsignacionCuenta();" class="text-danger">\n                                                        <i class="fa fa-remove"></i>\n                                                    </a><br>\n                                                    {{ detalle.configuracion.OtrosImp[\'A\'+otro.codigo].label }}\n                                                    <a ng-if="detalle.cuentaOtrosImp[\'A\'+otro.codigo].parametros.length > 0 && !detalle.configuracion.OtrosImp[\'A\'+otro.codigo].auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaOtrosImp[\'A\'+otro.codigo].parametros, detalle.cuentaOtrosImp[\'A\'+otro.codigo].id, \'OtrosImp\', otro.monto, \'A\'+otro.codigo);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.OtrosImp[\'A\'+otro.codigo].label, \'btn-warning\' : !detalle.configuracion.OtrosImp[\'A\'+otro.codigo].label }">\n                                                        <i class="fa fa-cogs"></i>\n                                                    </a>\n                                                </div>\n                                                <span ng-if="detalle.OtrosImp.length > 1"><br>&nbsp;</span>                                                \n                                            </td>\n                                        </tr>\n                                    </table>\n\n\n\n\n                                </td>\n                                <td ng-if="vistaColumnas.TotMntSinCred" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.MntSinCred.label}">\n                                    {{ detalle.MntSinCred? detalle.MntSinCred : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.MntSinCred > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaMntSinCred">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaMntSinCred" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosMntSinCred[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaMntSinCred\', \'MntSinCred\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosMntSinCred[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaMntSinCred.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaMntSinCred\', \'MntSinCred\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaMntSinCred.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaMntSinCred.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaMntSinCred = \'\'; detalle.configuracion.MntSinCred=\'\';resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.MntSinCred.label }}\n                                            <a ng-if="detalle.cuentaMntSinCred.parametros.length > 0 && !detalle.configuracion.MntSinCred.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaMntSinCred.parametros, detalle.cuentaMntSinCred.id, \'MntSinCred\', detalle.MntSinCred);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.MntSinCred.label, \'btn-warning\' : !detalle.configuracion.MntSinCred.label }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>\n                                <td ng-if="vistaColumnas.TotMntTotal" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.MntTotal.label}">\n                                    {{ detalle.MntTotal? detalle.MntTotal : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.MntTotal > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaMntTotal">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaMntTotal" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosMntTotal[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaMntTotal\', \'MntTotal\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosMntTotal[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaMntTotal.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaMntTotal\', \'MntTotal\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaMntTotal.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaMntTotal.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaMntTotal = \'\'; detalle.configuracion.MntTotal=\'\'; resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.MntTotal.label }}\n                                            <a ng-if="detalle.cuentaMntTotal.parametros.length > 0 && !detalle.configuracion.MntTotal.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaMntTotal.parametros, detalle.cuentaMntTotal.id, \'MntTotal\', detalle.MntTotal);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.MntTotal.label, \'btn-warning\' : !detalle.configuracion.MntTotal.label }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>\n                                <td ng-if="vistaColumnas.TotIVANoRetenido" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.IVANoRetenido.label}">\n                                    {{ detalle.IVANoRetenido? detalle.IVANoRetenido : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.IVANoRetenido > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaIVANoRetenido">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaIVANoRetenido" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosIVANoRetenido[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaIVANoRetenido\', \'IVANoRetenido\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosIVANoRetenido[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaIVANoRetenido.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaIVANoRetenido\', \'IVANoRetenido\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaIVANoRetenido.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaIVANoRetenido.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaIVANoRetenido = \'\'; detalle.configuracion.IVANoRetenido=\'\';resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.IVANoRetenido.label }}\n                                            <a ng-if="detalle.cuentaIVANoRetenido.parametros.length > 0 && !detalle.configuracion.IVANoRetenido.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaIVANoRetenido.parametros, detalle.cuentaIVANoRetenido.id, \'IVANoRetenido\', detalle.IVANoRetenido);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.IVANoRetenido.label, \'btn-warning\' : !detalle.configuracion.IVANoRetenido.label }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>   \n                                <td ng-if="vistaColumnas.TotTabPuros" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.TabPuros.label}">\n                                    {{ detalle.TabPuros? detalle.TabPuros : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.TabPuros > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaTabPuros">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaTabPuros" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosTabPuros[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaTabPuros\', \'TabPuros\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosTabPuros[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaTabPuros.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaTabPuros\', \'TabPuros\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaTabPuros.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaTabPuros.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaTabPuros = \'\'; detalle.configuracion.TabPuros=\'\';resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.TabPuros.label }}\n                                            <a ng-if="detalle.cuentaTabPuros.parametros.length > 0 && !detalle.configuracion.TabPuros.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaTabPuros.parametros, detalle.cuentaTabPuros.id, \'TabPuros\', detalle.TabPuros);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.TabPuros.label, \'btn-warning\' : !detalle.configuracion.TabPuros.label }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>   \n                                <td ng-if="vistaColumnas.TotTabCigarrillos" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.TabCigarrillos.label}">\n                                    {{ detalle.TabCigarrillos? detalle.TabCigarrillos : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.TabCigarrillos > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaTabCigarrillos">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaTabCigarrillos" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosTabCigarrillos[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaTabCigarrillos\', \'TabCigarrillos\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosTabCigarrillos[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaTabCigarrillos.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaTabCigarrillos\', \'TabCigarrillos\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaTabCigarrillos.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaTabCigarrillos.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaTabCigarrillos = \'\'; detalle.configuracion.TabCigarrillos=\'\';resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.TabCigarrillos.label }}\n                                            <a ng-if="detalle.cuentaTabCigarrillos.parametros.length > 0 && !detalle.configuracion.TabCigarrillos.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaTabCigarrillos.parametros, detalle.cuentaTabCigarrillos.id, \'TabCigarrillos\', detalle.TabCigarrillos);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.TabCigarrillos.label, \'btn-warning\' : !detalle.configuracion.TabCigarrillos.label }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td> \n                                <td ng-if="vistaColumnas.TotTabElaborado" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.TabElaborado.label}">\n                                    {{ detalle.TabElaborado? detalle.TabElaborado : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.TabElaborado > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaTabElaborado">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaTabElaborado" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosTabElaborado[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaTabElaborado\', \'TabElaborado\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosTabElaborado[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaTabElaborado.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaTabElaborado\', \'TabElaborado\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaTabElaborado.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaTabElaborado.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaTabElaborado = \'\'; detalle.configuracion.TabElaborado=\'\';resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.TabElaborado.label }}\n                                            <a ng-if="detalle.cuentaTabElaborado.parametros.length > 0 && !detalle.configuracion.TabElaborado.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaTabElaborado.parametros, detalle.cuentaTabElaborado.id, \'TabElaborado\', detalle.TabElaborado);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.TabElaborado.label, \'btn-warning\' : !detalle.configuracion.TabElaborado.label }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>   \n\n\n\n\n                                <td ng-if="vistaColumnas.TotImpVehiculo" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.ImpVehiculo.label}">\n                                    {{ detalle.ImpVehiculo? detalle.ImpVehiculo : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.ImpVehiculo > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaImpVehiculo">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaImpVehiculo" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosImpVehiculo[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaImpVehiculo\', \'ImpVehiculo\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosImpVehiculo[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaImpVehiculo.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaImpVehiculo\', \'ImpVehiculo\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaImpVehiculo.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaImpVehiculo.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaImpVehiculo = \'\'; detalle.configuracion.ImpVehiculo=\'\';resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.ImpVehiculo.label }}\n                                            <a ng-if="detalle.cuentaImpVehiculo.parametros.length > 0 && !detalle.configuracion.ImpVehiculo.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaImpVehiculo.parametros, detalle.cuentaImpVehiculo.id, \'ImpVehiculo\', detalle.ImpVehiculo);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.ImpVehiculo.label, \'btn-warning\' : !detalle.configuracion.ImpVehiculo.label }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>   \n                            </tr>\n                        </table>\n                    </div>\n                </div>\n            </div>\n\n            <div class="panel panel-default" ng-if="objeto.archivo">\n                <div class="panel-heading">Resumenes de Cuentas Asignadas</div>\n                <div class="panel-body">\n                    <div class="col-sm-5">\n                        <table class="table table-striped">\n                            <tr>\n                                <th>#</th>\n                                <th class="col-sm-8">Cuenta</th>\n                                <th class="col-sm-4">Monto</th>\n                            </tr>\n                            <tr ng-repeat="cuenta in resumenes.resumentesPorCuenta">\n                                <td>{{ $index + 1 }}</td>\n                                <td>{{ cuenta.cuenta }}</td>\n                                <td class="text-right">{{ cuenta.total | currency:"$":0 }}</td>\n                            </tr>\n                        </table>\n                    </div>\n                </div>\n            </div>\n\n            <div class="panel panel-default" ng-if="objeto.archivo">\n                <div class="panel-heading">Cuadraturas</div>\n                <div class="panel-body">\n                    <div class="form-group">\n                        <label class="control-label col-sm-2">Total Libro XML:</label>\n                        <div class="col-sm-2" style="text-align:right">\n                            <strong>{{ objeto.totalLibro | currency:"$":0  }}</strong>\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label class="control-label col-sm-2">Total Carga:</label>\n                        <div class="col-sm-2" style="text-align:right">\n                            {{ resumenes.totalMontoTotal | currency:"$":0 }}\n                        </div>\n                        <div class="col-sm-1 text-success" ng-if="resumenes.totalMontoTotal == objeto.totalLibro">\n                            <i class="fa fa-check"></i>\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label class="control-label col-sm-2">Total Cuentas Asignadas:</label>\n                        <div class="col-sm-2" style="text-align:right">\n                            {{ resumenes.totalMontoCtasAsignadas | currency:"$":0 }}\n                        </div>\n                        <div class="col-sm-1 text-success" ng-if="resumenes.totalMontoCtasAsignadas == objeto.totalLibro">\n                            <i class="fa fa-check"></i>\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label class="control-label col-sm-2">Total Cuentas Monto Total:</label>\n                        <div class="col-sm-2" style="text-align:right">\n                            {{ resumenes.totalMontoCtasTotal | currency:"$":0 }}\n                        </div>\n                        <div class="col-sm-1 text-success" ng-if="resumenes.totalMontoCtasTotal == objeto.totalLibro">\n                            <i class="fa fa-check"></i>\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label class="control-label col-sm-2">Total Carga - Total Cuentas Asignadas:</label>\n                        <div class="col-sm-2" style="text-align:right">\n                            {{ resumenes.totalMontoTotal - resumenes.totalMontoCtasAsignadas | currency:"$":0 }}\n                        </div>\n                        <div class="col-sm-1 text-success" ng-if="resumenes.totalMontoTotal - resumenes.totalMontoCtasAsignadas == 0">\n                            <i class="fa fa-check"></i>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div ng-if="objeto.totalLibro == resumenes.totalMontoTotal ">\n                <div class="panel panel-primary" ng-if="objeto.archivo">\n                    <div class="panel-heading">Generación de Comprobante Contable</div>\n                    <div class="panel-body">\n                     \n                        <div class="form-group">\n                            <label class="label-control col-sm-3">Fecha de Comprobante:</label>\n                            <div class="col-sm-2">\n                                <p class="input-group" style="margin-bottom:0px !important">\n                                    <input type="text" name="fecha" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.comprobante.fecha" is-open="fechas.fecha" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" ng-change="revisarFecha()" required>\n                                    <span class="input-group-btn">\n                                        <button type="button" class="btn btn-primary" ng-click="open($event)" style="margin-bottom:0px !important"><i class="glyphicon glyphicon-calendar"></i></button>\n                                    </span>\n                                </p>\n                            </div>\n                        </div>\n\n                        <div class="form-group" ng-if="objeto.comprobantes > 0">\n                            <label class="label-control col-sm-3">Total Comprobantes creados:</label>\n                            <div class="col-sm-5">\n                                {{ objeto.comprobantes }}\n                            </div>\n                        </div>\n\n                        <div class="form-group">\n                            <label class="label-control col-sm-3">Generación de Comprobante:</label>\n                            <div class="col-sm-5">\n                                <label>\n                                    <input type="radio" ng-model="objeto.comprobante.tipo" ng-value="1" icheck> Único Comprobante\n                                </label>&nbsp;&nbsp;&nbsp;&nbsp;\n                                <label>\n                                    <input type="radio" ng-model="objeto.comprobante.tipo" ng-value="2" icheck> Por Documento\n                                </label><br>\n                            </div>\n                        </div>\n\n                    </div>\n                </div>\n\n                <div class="panel panel-danger" ng-if="errores.length > 0">\n                    <div class="panel-heading">Errores Detectados</div>\n                    <div class="panel-body">\n                        <table class="table">\n                            <tr>\n                                <th>#</th>\n                                <th class="col-sm-6">Error</th>\n                                <th class="col-sm-2">Tipo de Documento</th>\n                                <th class="col-sm-2">Documento N°</th>\n                                <th class="col-sm-2">Columna</th>\n                            </tr>\n                            <tr ng-repeat="error in errores">\n                                <th>{{ $index + 1 }}</th>\n                                <th>{{ error.error }}</th>\n                                <th>{{ error.tipoDocumento }}</th>\n                                <th>{{ error.documento }}</th>\n                                <th>{{ error.columna }}</th>\n                            </tr>\n                        </table>\n                    </div>\n                </div>\n                <div class="col-sm-12">\n                    <button class="btn btn-default" ng-click="volverIndex()">Cancelar/Volver</button>\n                    <button class="btn btn-primary" ng-click="omitirErrores()" ng-if="archivoImp.errores.length > 0">Omitir Documentos y Continuar</button>\n\n                    <button class="btn btn-primary" ng-click="guardar()" ng-show="objeto.archivo && objeto.totalLibro > 0">Validar Guardar</button>\n      \n                    <button class="btn btn-primary" ng-disabled="form.$invalid" ng-click="generarComprobante()" ng-show="objeto.archivo && ( (objeto.comprobantes == 0 && objeto.cuentasGeneradas ) ||  (objeto.comprobantes == 1 && objeto.comprobante.tipo == 1) || ( objeto.comprobantes > 1 && objeto.comprobante.tipo == 2) ) && objeto.totalLibro > 0">Generar Comprobante</button>\n\n\n                    <button class="btn btn-primary" ng-disabled="form.$invalid" confirmation-click="generarComprobante()" ng-show="objeto.archivo && objeto.comprobantes > 1 && objeto.comprobante.tipo == 1 && objeto.totalLibro > 0" confirmation-needed="Los Comprobantes creados anteriormente serán anulados. Desea Continuar?">Generar Comprobante</button>\n\n                    <button class="btn btn-primary" ng-disabled="form.$invalid" confirmation-click="generarComprobante()" ng-show="objeto.archivo && objeto.comprobantes == 1 && objeto.comprobante.tipo == 2 && objeto.totalLibro > 0" confirmation-needed="El Comprobante creado anteriormente será anulado. Desea Continuar?">Generar Comprobante</button>\n\n\n                    <button class="btn btn-success" ng-show="objeto.comprobantes > 0 && objeto.totalLibro > 0" abrir-ventana="{{ constantes.URL+\'importacion-libro-compra/comprobantes-contables/imprimir/\' + objeto.id}}" ventana-nombre="IMPRIMIRASIENTOCONTABLE" ventana-ancho="750" ventana-alto="600">Ver Comprobante</button>\n\n                    <button class="btn btn-danger" ng-show="objeto.archivo && objeto.comprobantes==0" confirmation-click="eliminarLibro( objeto.id )" confirmation-needed="El Libro será eliminado permanentemente. Desea Continuar?">\n                        Eliminar Libro\n                    </button>\n\n                </div>\n            </div>\n            \n        </div>\n        <div ng-if="objeto.totalLibro != resumenes.totalMontoTotal ">\n            <div class="col-sm-12 text-danger">\n                <strong>\n                    <big>ATENCIÓN:</big><br>\n                    El Libro que ha cargado no ha podido ser leido en su totalidad, el sistema ha detectado diferencias en la cuadratura y ha evitado que \n                    continue operando con él. Contacte a soporte para obtener mayor información.\n                </strong>                 \n            </div>\n            <div class="col-sm-12">\n                <button class="btn btn-default" ng-click="volverIndex()">Cancelar/Volver</button>\n                <button class="btn btn-primary" ng-click="omitirErrores()" ng-if="archivoImp.errores.length > 0">Omitir Documentos y Continuar</button>\n            </div>\n        </div>\n        <div class="col-sm-12" id="scrollToHere">\n            &nbsp;\n        </div>\n    </form>\n</div>\n<script type="text/javascript">\n    function bajar(){\n        $(\'html,body\').animate({\n            scrollTop: $("#scrollToHere").offset().top\n        }, 500);\n    }\n\n    function subir(){\n        $(\'html,body\').animate({\n            scrollTop: \'0px\'\n        }, 500);\n    }\n\n    $(window).scroll(function () {\n        if ($(this).scrollTop() > 200) {\n            $(\'.ir-arriba\').fadeIn();\n        }\n        else {\n            $(\'.ir-arriba\').fadeOut();\n        }\n\n        if ($(this).scrollTop() < $(document).height()-$(window).height() ) {\n            $(\'.ir-abajo\').fadeIn();\n        }\n        else {\n            $(\'.ir-abajo\').fadeOut();\n        }\n    });\n    $(\'.ir-arriba\').fadeOut();\n</script>'),
a.put("views/importacion-libro-venta-xml.html",'<div class="header">\n    <h2>Importación de <b>Libros de Venta</b>\n        <b ng-if="miPyme" class="text-primary"> - Facturador Mi Pyme SII</b>\n        <b ng-if="!miPyme" class="text-success"> - Archivo CSV</b>\n    </h2>\n</div>\n\n<script type="text/ng-template" id="customTemplate.html">\n    <a style="cursor: pointer;">\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\n    </a>\n</script>\n\n<div class="row" ng-if="!mostrarForm">\n    <div class="col-md-12">        \n        <div class="form-group">\n            <label for="orden" class="control-label col-md-1">\n                Ordenar:\n            </label>\n            <div class="col-md-3">\n                <select ng-model="orden" id="orden" ng-init="orden=\'periodo\'" class="form-control form-white">\n                    <option value="periodo">Periodo</option>\n                    <option value="responsable">Responsable</option>\n                    <option value="fechaImportacion">Importación</option>\n                    <option value="documentos">Documentos</option>\n                </select>\n            </div>\n            <div class="col-md-1">\n                <select ng-model="ordenSent" id="ordenSent" ng-init="ordenSent=\'-\'" class="form-control form-white">\n                    <option value="+">ASC</option>\n                    <option value="-">DESC</option>\n                </select>\n            </div>\n            <label for="filtro" class="col-md-1 control-label">Filtrar:</label>\n            <div class="col-md-3">\n              <input id="filtro" type="text" class="form-control form-white form-white" ng-model="filtroIndex">\n            </div>\n            <div class="col-md-3" style="text-align:right; padding-right:0px">\n                <button class="btn btn-primary btn-md" ng-click="gestionarArchivo({});">\n                    <i class="fa fa-plus"></i> Nuevo\n                </button>\n\n                <div class="btn-group">\n	            	<button class="btn btn-dark btn-md" type="button" data-toggle="dropdown" aria-expanded="false">\n	                    <i class="fa fa-wrench"></i> Herramientas <span class="caret"></span>\n	                </button>\n	                <ul class="dropdown-menu dropdown-menu-sm" role="menu">\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'ejmUploadLbrVta.csv\' }}">\n                                <i class="fa fa-file-excel-o"></i> Descargar Archivo para Importación\n                            </a> \n	                    </li>\n	                </ul>\n                </div>\n            </div>\n        </div>\n        <div class="form-group">\n            <table class="table table-striped table-hover">\n                <thead>\n                <tr>\n                    <th>#</th>\n                    <th class="col-sm-2">Archivo</th>\n                    <th class="col-sm-1">Periodo</th>\n                    <th class="col-sm-4">Responsable</th>\n                    <th class="col-sm-1">Importación</th>                    \n                    <th class="col-sm-1">Documentos</th>\n                    <th class="col-sm-1">Centralizado</th>\n                    <th class="col-sm-2">Acciones</th>\n                </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="dato in datos | orderBy: ordenSent+orden | filter: filtroIndex">\n                        <td>{{ $index + 1 }}</td>\n                        <td>{{ dato.archivo }}</td>\n                        <td>{{ dato.periodo }}</td>\n                        <td>{{ dato.responsable }}</td>\n                        <td>{{ dato.fechaImportacion | date:\'dd-MM-yyyy\' }}</td>\n                        \n                        <td>{{ dato.documentos }}</td>\n                        <td style="text-align: center">\n                            <span class="text-success" ng-if="dato.centralizado">\n                                <i class="fa fa-check"></i>\n                            </span>\n                            <span class="text-default" ng-if="!dato.centralizado">\n                                NO\n                            </span>\n                        </td>\n                        <td>\n                            <a class="btn-acciones btn btn-default" href="javascript:void(0);" ng-click="gestionarLibro(dato);" uib-tooltip-html="toolTipEdicion(dato.archivo)">\n                                <i class="fa fa-pencil"></i>\n                            </a>\n                            <a class="btn-acciones btn btn-danger" href="javascript:void(0);" confirmation-click="eliminarLibro( dato.id );" confirmation-needed="El Libro de Compra: <b>{{ dato.archivo }}</b> será eliminado.Desea continuar?">\n                                <i class="fa fa-remove"></i>\n                            </a>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>\n\n<script type="text/ng-template" id="myModalAsignacionMasivaCuenta.html">\n    <div class="modal-header">\n        <h3 class="modal-title">Asignación Masiva de Cuenta</h3>\n    </div>\n    <div class="modal-body form-horizontal">\n        <div class="form-group">\n            <label class="col-sm-3 control-label">Columna Destino:</label>\n            <div class="col-sm-9">\n                {{ objeto.columna }}\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-3 control-label">Cuenta:</label>\n            <div class="col-sm-7" style="padding:0px;">\n                <input type="text" ng-model="objeto.cuenta" placeholder="Buscar Cuenta Destino" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estado" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required  />\n            </div>\n            <div class="col-sm-2">\n                <i ng-show="estado" class="glyphicon glyphicon-refresh"></i>\n                <i ng-show="objeto.cuenta.codigo" class="fa fa-check" style="color: #fff;"></i>\n                <button class="btn btn-sm btn-primary" ng-click="buscarCuenta()" tooltip="Buscar en Plan de Cuentas">\n                    <i class="fa fa-search"></i>\n                </button>\n            </div>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" ng-click="cancel()">Cancelar</button>\n        <button class="btn btn-primary" ng-disabled="form.$invalid" ng-click="asignar()">Asignar</button>\n    </div>\n</script>\n\n\n<div class="row" ng-if="mostrarForm">\n    <span onclick="bajar()" class="ir-abajo icon-arrow-down"></span>\n\n    <span onclick="subir()" class="ir-arriba icon-arrow-up"></span>\n\n    <form class="form-horizontal" name="form" novalidate autocomplete="Off">\n        <div class="col-md-12">\n            <div class="panel" ng-class="{\'panel-primary\': miPyme, \'panel-success\':!miPyme}">\n                <div class="panel-heading">Datos del Libro</div>\n                <div class="panel-body">\n\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Tipo de Importación:</label>\n                        <div class="col-sm-5">                            \n                            <strong ng-if="miPyme">Archivo XML - SII</strong>\n                            <strong ng-if="!miPyme">Archivo CSV - Sistema</strong>\n                        </div>\n                    </div>\n\n\n                    <div class="form-group form-group-md" ng-if="!miPyme  && !objeto.archivo">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Tipo de Operación:</label>\n                        <div class="col-sm-5">                            \n                            Venta\n                        </div>\n                    </div>\n\n                    <div class="form-group form-group-md" ng-if="!miPyme && !objeto.archivo">                       \n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Periodo Tributario:</label>\n                        <div class="col-sm-2">\n                            <div class="input-group">\n                                <select ng-model="objeto.periodoMes" class="form-control form-white" ng-options="mes as mes.mes for mes in opciones.meses"></select>\n                                <div class="input-group-addon">{{ objeto.periodoAnio }}</div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="form-group form-group-md" ng-if="!miPyme">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Archivo:</label>\n                        <div class="col-sm-9">\n                            <button ng-show="!objeto.archivo && !archivo.mostrar" type="button" ngf-select ng-model="archivo.file" class="btn btn-xs btn-warning" subir-archivo modelo-file="archivo.file" modelo="archivo" modelo-destino="objeto.archivo" nombre-archivo="archivo" ng-disabled="!objeto.periodoMes.id" accept=".csv" ngf-pattern=".csv">\n                                Seleccionar\n                            </button>\n                            <uib-progressbar ng-show="archivo.mostrar" class="progress-striped active" value="archivo.porc" type="success"><strong>{{ archivo.porc + "%" }}</strong></uib-progressbar>\n                            <span ng-if="objeto.archivo && !archivo.loading" class="text-success">\n                                <strong>\n                                    {{ objeto.archivo }}\n                                </strong>\n                            </span>\n                            <img ng-if="archivo.loading" src="images/cargando.37ead0fc.gif" style="height: 20px">\n                        </div>\n                    </div>\n\n            \n\n                    \n                    <div class="form-group form-group-md" ng-if="miPyme">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Archivo:</label>\n                        <div class="col-sm-9">\n                            <button ng-show="!objeto.archivo && !archivo.mostrar" type="button" ngf-select ng-model="archivo.file" class="btn btn-xs btn-warning" subir-archivo modelo-file="archivo.file" modelo="archivo" modelo-destino="objeto.archivo" nombre-archivo="archivo" accept=".xml" ngf-pattern=".xml">\n                                Seleccionar\n                            </button>\n                            <uib-progressbar ng-show="archivo.mostrar" class="progress-striped active" value="archivo.porc" type="success"><strong>{{ archivo.porc + "%" }}</strong></uib-progressbar>\n                            <span ng-if="objeto.archivo && !archivo.loading" class="text-success">\n                                <strong>\n                                    {{ objeto.archivo }}\n                                </strong>\n                            </span>\n                            <img ng-if="archivo.loading" src="images/cargando.37ead0fc.gif" style="height: 20px">\n                        </div>\n                    </div>\n\n\n                    <div class="panel panel-danger" ng-if="archivoImp.advertencias.length > 0">\n                        <div class="panel-heading">Advertencias</div>\n                        <div class="panel-body">\n                            <table class="table">\n                                <tr>\n                                    <th>#</th>\n                                    <th class="col-sm-6">Advertencia</th>\n                                    <th class="col-sm-2">Tipo de Documento</th>\n                                    <th class="col-sm-2">Documento N°</th>\n                                    <th class="col-sm-2">Fecha</th>\n                                    <th class="col-sm-2">Razón Social Contraparte</th>\n                                </tr>\n                                <tr ng-repeat="error in archivoImp.advertencias">\n                                    <th>{{ $index + 1 }}</th>\n                                    <th>{{ error.error }}</th>\n                                    <th>{{ error.tipoDocumento }}</th>\n                                    <th>{{ error.documento }}</th>\n                                    <th>{{ error.fecha }}</th>\n                                    <th>{{ error.rzn_social }}</th>\n                                </tr>\n                            </table>\n                        </div>\n                    </div>\n\n                    <div class="panel panel-danger" ng-if="archivoImp.errores.length > 0 ">\n                        <div class="panel-heading">Errores Detectados</div>\n                        <div class="panel-body">\n                            <table class="table">\n                                <tr>\n                                    <th>#</th>\n                                    <th class="col-sm-4">Error</th>\n                                    <th class="col-sm-2">Tipo de Documento</th>\n                                    <th class="col-sm-2">Documento N°</th>\n                                    <th class="col-sm-2">Fecha</th>\n                                    <th class="col-sm-4">Razón Social Contraparte</th>\n                                </tr>\n                                <tr ng-repeat="error in archivoImp.errores">\n                                    <th>{{ $index + 1 }}</th>\n                                    <th>{{ error.error }}</th>\n                                    <th>{{ error.tipoDocumento }}</th>\n                                    <th>{{ error.documento }}</th>\n                                    <th>{{ error.fecha }}</th>\n                                    <th>{{ error.rzn_social }}</th>\n                                </tr>\n                            </table>\n                        </div>\n                    </div>\n\n                <div ng-if="objeto.archivo">\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Envio Libro ID:</label>\n                        <div class="col-sm-9">\n                            {{ objeto.envioLibroID[0] }}\n                        </div>\n                    </div>\n\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Periodo Tributario:</label>\n                        <div class="col-sm-3">\n                           {{ objeto.resumen.PeriodoTributario }}\n                        </div>\n                    </div>\n\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Tipo de Operación:</label>\n                        <div class="col-sm-3">\n                            {{ objeto.resumen.TipoOperacion }}\n                        </div>\n                    </div>\n\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Tipo de Libro:</label>\n                        <div class="col-sm-3">\n                            {{ objeto.resumen.TipoLibro }}\n                        </div>\n                    </div>\n\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Tipo de Envio:</label>\n                        <div class="col-sm-3">\n                            {{ objeto.resumen.TipoEnvio }}\n                        </div>\n                    </div>\n                </div>\n                </div>\n            </div>\n\n            <div class="panel panel-default" ng-if="objeto.archivo">\n                <div class="panel-heading">Resumen del Periodo</div>\n                <div class="panel-body">\n                    <div class="form-group form-group-md">\n                        <table class="table table-striped">\n                            <tr>\n                                <th>Tipo Documento</th>                            \n                                <th>Total Documentos</th>\n                                <th ng-if="vistaColumnas.TotMntExe">Total Monto Exento</th>\n                                <th ng-if="vistaColumnas.TotMntNeto">Total Monto Neto</th>\n                                <th ng-if="vistaColumnas.TotMntIVA">Total MonTO IVA</th>\n                                <th ng-if="vistaColumnas.TotIVAFueraPlazo">IVA fuera plazo</th>\n                                <th ng-if="vistaColumnas.TotIVAPropio">TOTAL IVA propio</th>\n                                <th ng-if="vistaColumnas.TotIVATerceros">TOTAL IVA terceros</th>\n                                <th ng-if="vistaColumnas.TotLey18211">TOTAL Ley 18.211</th>\n                                <th ng-if="vistaColumnas.TotOtrosImp">Impuesto o recargos</th>\n                                <th ng-if="vistaColumnas.TotOpIVARetTotal">TOTAL OPERACIONES CON IVA RETENIDO TOTAL</th>\n                                <th ng-if="vistaColumnas.TotIVARetTotal">IVA Retenido Total</th>\n                                <th ng-if="vistaColumnas.TotOpIVARetParcial">TOTAL OPERACIONES CON IVA RETENIDO PARCIAL</th>\n                                <th ng-if="vistaColumnas.TotIVARetParcial">IVA Retenido Parcial</th>\n                                <th ng-if="vistaColumnas.TotCredEC">TOTAL CREDITO ESPECIAL 65% EMPRESAS CONSTRUCTORAS</th>\n                                <th ng-if="vistaColumnas.TotDepEnvase">TOTAL Depósito envases</th>\n                                <th ng-if="vistaColumnas.TotMntTotal">TOTAL MONTO TOTAL</th>\n                                <th ng-if="vistaColumnas.TotOpIVANoRetenido">OPERACIONES  CON  IVA  NO  RETENIDO PARCIAL</th>\n                                <th ng-if="vistaColumnas.TotIVANoRetenido">TOTAL IVA no retenido</th>                         \n                                <th ng-if="vistaColumnas.TotMntNoFact">Total Monto no facturable</th>                         \n                                <th ng-if="vistaColumnas.TotMntPeriodo">Total Monto Período</th>                         \n                                <th ng-if="vistaColumnas.TotPsjNac">TOTAL EXENTO Venta de pasajes Transporte nacional</th>                         \n                                <th ng-if="vistaColumnas.TotPsjInt">TOTAL EXENTO Venta de pasajes Transporte internacional</th>                      \n                            </tr>\n\n                            <tr ng-repeat="total in objeto.resumen.totales.TotalesPeriodo">\n                                <td>({{ total.TpoDoc }})  {{ tiposDocumentos[total.TpoDoc] }}</td>                            \n                                <td>{{ total.TotDoc }}</td>\n                                <td ng-if="vistaColumnas.TotMntExe">{{ total.TotMntExe | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotMntNeto">{{ total.TotMntNeto | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotMntIVA">{{ total.TotMntIVA | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotIVAFueraPlazo">{{ total.TotIVAFueraPlazo }}</td>\n                                <td ng-if="vistaColumnas.TotIVAPropio">{{ total.TotIVAPropio }}</td>\n                                <td ng-if="vistaColumnas.TotIVATerceros">{{ total.TotIVATerceros }}</td>\n                                <td ng-if="vistaColumnas.TotLey18211">{{ total.TotLey18211 }}</td>\n                              \n                                <td ng-if="vistaColumnas.TotOtrosImp">\n                                    <table class="table table-bordered" ng-if="!total.TotOtrosImp.TotMntImp && total.TotOtrosImp">\n                                        <tr>\n                                            <th>Cod</th>\n                                            <th>Monto</th>\n                                        </tr>\n                                        <tr ng-repeat="otro in total.TotOtrosImp">\n                                            <td>{{ otro.CodImp }}</td>\n                                            <td>{{ otro.TotMntImp  | currency:"$":0 }}</td>\n                                        </tr>\n                                    </table>\n                                    <span ng-if="total.TotOtrosImp.TotMntImp">\n                                        ({{ total.TotOtrosImp.CodImp }}) \n                                        {{ total.TotOtrosImp.TotMntImp | currency:"$":0 }}\n                                    </span>\n                                </td>\n\n                                <td ng-if="vistaColumnas.TotOpIVARetTotal">{{ total.TotOpIVARetTotal }}</td>\n                                <td ng-if="vistaColumnas.TotIVARetTotal">{{ total.TotIVARetTotal }}</td>\n                                <td ng-if="vistaColumnas.TotOpIVARetParcial">{{ total.TotOpIVARetParcial }}</td>\n                                <td ng-if="vistaColumnas.TotIVARetParcial">{{ total.TotIVARetParcial }}</td>                                \n                                <td ng-if="vistaColumnas.TotCredEC">{{ total.TotCredEC }}</td>\n                                <td ng-if="vistaColumnas.TotDepEnvase">{{ total.TotDepEnvase | currency:"$":0 }}</td>    \n                                <td ng-if="vistaColumnas.TotMntTotal">{{ total.TotMntTotal | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotOpIVANoRetenido">{{ total.TotOpIVANoRetenido | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotIVANoRetenido">{{ total.TotIVANoRetenido | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotMntNoFact">{{ total.TotMntNoFact | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotMntPeriodo">{{ total.TotMntPeriodo | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotPsjNac">{{ total.TotPsjNac | currency:"$":0 }}</td>\n                                <td ng-if="vistaColumnas.TotPsjInt">{{ total.TotPsjInt | currency:"$":0 }}</td>\n                            </tr>\n                        </table>\n                    </div>\n                </div>\n            </div>\n\n            <div class="panel panel-default" ng-if="objeto.archivo">\n                <div class="panel-heading">Detalle del Libro</div>\n                <div class="panel-body">\n                    <div class="table-responsive">\n                        <table class="table table-striped table-bordered">\n                            <tr>\n                                <th colspan="30">                                    \n                                    <label>\n                                        MOSTRAR SOLAMENTE INCOMPLETOS \n                                        <input type="checkbox" ng-model="filtros.mostrarIncompletos" icheck>\n                                    </label>\n                                </th>\n                            </tr>\n                            <tr>\n                                <th></th>\n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.TpoDoc" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.NroDoc" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                          \n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.FchDoc" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.RUTDoc" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.RznSoc" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotMntExe">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.MntExe" ng-change="revisarFiltro(\'MntExe\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotMntNeto">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.MntNeto" ng-change="revisarFiltro(\'MntNeto\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotMntIVA">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.MntIVA" ng-change="revisarFiltro(\'MntIVA\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                             \n\n\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotIVAFueraPlazo">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.IVAFueraPlazo" ng-change="revisarFiltro(\'IVAFueraPlazo\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotIVAPropio">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.IVAPropio" ng-change="revisarFiltro(\'IVAPropio\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotIVATerceros">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.IVATerceros" ng-change="revisarFiltro(\'IVATerceros\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotLey18211">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.Ley18211" ng-change="revisarFiltro(\'Ley18211\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotOtrosImp">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.OtrosImp" ng-change="revisarFiltro(\'OtrosImp\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n\n\n\n\n\n\n\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotIVARetTotal">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.IVARetTotal" ng-change="revisarFiltro(\'IVARetTotal\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotIVARetParcial">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.IVARetParcial" ng-change="revisarFiltro(\'IVARetParcial\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotCredEC">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.CredEC" ng-change="revisarFiltro(\'CredEC\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotDepEnvase">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.DepEnvase" ng-change="revisarFiltro(\'DepEnvase\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotMntTotal">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.MntTotal" ng-change="revisarFiltro(\'MntTotal\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotIVANoRetenido">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.IVANoRetenido" ng-change="revisarFiltro(\'IVANoRetenido\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotMntNoFact">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.MntNoFact" ng-change="revisarFiltro(\'MntNoFact\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotMntPeriodo">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.MntPeriodo" ng-change="revisarFiltro(\'MntPeriodo\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotPsjNac">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.PsjNac" ng-change="revisarFiltro(\'PsjNac\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px" ng-if="vistaColumnas.TotPsjInt">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.PsjInt" ng-change="revisarFiltro(\'PsjInt\')" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                            </tr>\n                            <tr class="bg-success">\n                                <th>#</th>\n                                <th>Tipo Dcto</th>\n                                <th>N° Dcto</th>\n                                <th>Fecha Dcto</th>\n                                <th>Rut</th>\n                                <th>Razón Social</th>\n                                <th ng-if="vistaColumnas.TotMntExe">Monto Exento\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaMntExe\', \'MntExe\', \'Monto Exento\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n                                <th ng-if="vistaColumnas.TotMntNeto">\n                                    Monto Neto\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaMntNeto\', \'MntNeto\', \'Monto Neto\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n                                <th ng-if="vistaColumnas.TotMntIVA">\n                                    Monto IVA\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaMntIVA\', \'MntIVA\', \'Monto IVA\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>     \n\n\n\n                                <th ng-if="vistaColumnas.TotIVAFueraPlazo">\n                                    IVA fuera plazo\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaIVAFueraPlazo\', \'IVAFueraPlazo\', \'IVA fuera plazo\')">\n                                        Cta Masiva\n                                    </button>\n                                </th> \n                                <th ng-if="vistaColumnas.TotIVAPropio">\n                                    IVA Propio\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaIVAPropio\', \'IVAPropio\', \'IVA Propio\')">\n                                        Cta Masiva\n                                    </button>\n                                </th> \n                                <th ng-if="vistaColumnas.TotIVATerceros">\n                                    IVA Terceros\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaIVATerceros\', \'IVATerceros\', \'IVA Terceros\')">\n                                        Cta Masiva\n                                    </button>\n                                </th> \n                                <th ng-if="vistaColumnas.TotLey18211">\n                                    Monto IVA\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaLey18211\', \'Ley18211\', \'Ley 18211\')">\n                                        Cta Masiva\n                                    </button>\n                                </th> \n                                <th ng-if="vistaColumnas.TotOtrosImp">\n                                    Otros Imp.\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaOtrosImp\', \'OtrosImp\', \'Otros Imp.\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n\n                                <th ng-if="vistaColumnas.TotIVARetTotal">\n                                    IVA Retenido Total\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva( \'cuentaIVARetTotal\' , \'IVARetTotal\', \'IVA Retenido Total\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n                                <th ng-if="vistaColumnas.TotIVARetParcial">\n                                    IVA Retenido Parcial\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaIVARetParcial\', \'IVARetParcial\', \'IVA Retenido Parcial\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>                           \n                                <th ng-if="vistaColumnas.TotCredEC">\n                                    Crédito 65% Empresas Constructoras\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaCredEC\', \'CredEC\', \'Crédito 65% Empresas Constructoras\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n                                <th ng-if="vistaColumnas.TotDepEnvase">\n                                    Garantía Dep. Envases\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva( \'cuentaDepEnvase\' , \'DepEnvase\', \'Garantía Dep. Envases\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n                                <th ng-if="vistaColumnas.TotMntTotal">\n                                    Monto Total\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaMntTotal\', \'MntTotal\', \'Monto Total\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n                                <th ng-if="vistaColumnas.TotIVANoRetenido">\n                                    IVA no retenido\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva( \'cuentaIVANoRetenido\' , \'IVANoRetenido\', \'IVA no retenido\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n                                <th ng-if="vistaColumnas.TotMntNoFact">\n                                    Total Monto no facturable\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaMntNoFact\', \'MntNoFact\', \'Total Monto no facturable\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n\n\n                                <th ng-if="vistaColumnas.TotMntPeriodo">\n                                    Total Monto Período                                 \n                                </th>\n                                <th ng-if="vistaColumnas.TotPsjNac">\n                                    Venta de pasajes Transporte nacional\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaPsjNac\', \'PsjNac\', \'Venta de pasajes Transporte nacional\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n                                <th ng-if="vistaColumnas.TotPsjInt">\n                                    Venta de pasajes Transporte internacional\n                                    <button class="btn btn-primary btn-xs" ng-click="openAsignacionCtaMasiva(\'cuentaPsjInt\', \'PsjInt\', \'Venta de pasajes Transporte internacional\')">\n                                        Cta Masiva\n                                    </button>\n                                </th>\n                            </tr>\n\n\n\n                            <tr ng-repeat="detalle in ( filtros.itemsFiltrados = ( objeto.detalle | filter : filtro ) ) | filter : filtrarIncompletos">\n                                <td>{{ $index + 1 }}</td>\n                                <td>{{ \'(\'+detalle.TpoDoc+\') \'+detalle.NombreDoc }}</td>\n                                <td>{{ detalle.NroDoc }}</td>\n                                <td ng-if="[35,48].indexOf( detalle.TpoDoc ) >= 0" colspan="3" class="warning">&nbsp;</td>\n                                <td ng-if="[35,48].indexOf( detalle.TpoDoc ) < 0">{{ detalle.FchDoc | date : "dd-MM-yyyy" }}</td>\n                                <td ng-if="[35,48].indexOf( detalle.TpoDoc ) < 0">{{ detalle.RUTDoc }}</td>\n                                <td ng-if="[35,48].indexOf( detalle.TpoDoc ) < 0">{{ detalle.RznSoc }}</td>\n                                <td ng-if="vistaColumnas.TotMntExe" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.MntExe}">\n                                    {{ detalle.MntExe ? detalle.MntExe : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.MntExe > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaMntExe">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaMntExe" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosMntNeto[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaMntExe\', \'MntExe\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosMntNeto[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaMntExe.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaMntExe\', \'MntExe\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaMntExe.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaMntExe.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaMntExe=\'\'; detalle.configuracion.MntExe=\'\'; resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.MntExe.label }}\n                                            <a ng-if="detalle.cuentaMntExe.parametros.length > 0 && !detalle.configuracion.MntExe.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaMntExe.parametros, detalle.cuentaMntExe.id, \'MntExe\', detalle.MntExe);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.MntExe, \'btn-warning\' : !detalle.configuracion.MntExe }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>\n                                <td ng-if="vistaColumnas.TotMntNeto" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.MntNeto}">\n                                    {{ detalle.MntNeto? detalle.MntNeto : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.MntNeto > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaMntNeto">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaMntNeto" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosMntNeto[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaMntNeto\', \'MntNeto\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosMntNeto[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaMntNeto.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaMntNeto\', \'MntNeto\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaMntNeto.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaMntNeto.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaMntNeto = \'\'; detalle.configuracion.MntNeto=\'\'; resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.MntNeto.label }}\n                                            <a ng-if="detalle.cuentaMntNeto.parametros.length > 0 && !detalle.configuracion.MntNeto.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaMntNeto.parametros, detalle.cuentaMntNeto.id, \'MntNeto\', detalle.MntNeto);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.MntNeto, \'btn-warning\' : !detalle.configuracion.MntNeto }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>\n                                <td ng-if="vistaColumnas.TotMntIVA" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.MntIVA}">\n                                    {{ detalle.MntIVA? detalle.MntIVA : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.MntIVA > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaMntIVA">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaMntIVA" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosMntIVA[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaMntIVA\', \'MntIVA\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosMntIVA[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaMntIVA.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaMntIVA\', \'MntIVA\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaMntIVA.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaMntIVA.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaMntIVA = \'\'; detalle.configuracion.MntIVA=\'\'; resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.MntIVA.label }}\n                                            <a ng-if="detalle.cuentaMntIVA.parametros.length > 0 && !detalle.configuracion.MntIVA.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaMntIVA.parametros, detalle.cuentaMntIVA.id, \'MntIVA\', detalle.MntIVA);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.MntIVA, \'btn-warning\' : !detalle.configuracion.MntIVA }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>        \n\n\n\n\n                                <td ng-if="vistaColumnas.TotIVAFueraPlazo" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.IVAFueraPlazo}">\n                                    {{ detalle.IVAFueraPlazo? detalle.IVAFueraPlazo : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.IVAFueraPlazo > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaIVAFueraPlazo">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaIVAFueraPlazo" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosIVAFueraPlazo[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaIVAFueraPlazo\', \'IVAFueraPlazo\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosIVAFueraPlazo[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaIVAFueraPlazo.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaIVAFueraPlazo\', \'IVAFueraPlazo\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaIVAFueraPlazo.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaIVAFueraPlazo.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaIVAFueraPlazo = \'\'; detalle.configuracion.IVAFueraPlazo=\'\';resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.IVAFueraPlazo.label }}\n                                            <a ng-if="detalle.cuentaIVAFueraPlazo.parametros.length > 0 && !detalle.configuracion.IVAFueraPlazo.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaIVAFueraPlazo.parametros, detalle.cuentaIVAFueraPlazo.id, \'IVAFueraPlazo\', detalle.IVAFueraPlazo);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.IVAFueraPlazo, \'btn-warning\' : !detalle.configuracion.IVAFueraPlazo }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>   \n\n                                <td ng-if="vistaColumnas.TotIVAPropio" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.IVAPropio}">\n                                    {{ detalle.IVAPropio? detalle.IVAPropio : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.IVAPropio > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaIVAPropio">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaIVAPropio" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosIVAPropio[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaIVAPropio\', \'IVAPropio\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosIVAPropio[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaIVAPropio.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaIVAPropio\', \'IVAPropio\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaIVAPropio.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaIVAPropio.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaIVAPropio = \'\'; detalle.configuracion.IVAPropio=\'\'; resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.IVAPropio.label }}\n                                            <a ng-if="detalle.cuentaIVAPropio.parametros.length > 0 && !detalle.configuracion.IVAPropio.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaIVAPropio.parametros, detalle.cuentaIVAPropio.id, \'IVAPropio\', detalle.IVAPropio);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.IVAPropio, \'btn-warning\' : !detalle.configuracion.IVAPropio }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>   \n\n                                <td ng-if="vistaColumnas.TotIVATerceros" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.IVATerceros}">\n                                    {{ detalle.IVATerceros? detalle.IVATerceros : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.IVATerceros > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaIVATerceros">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaIVATerceros" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosIVATerceros[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaIVATerceros\', \'IVATerceros\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosIVATerceros[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaIVATerceros.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaIVATerceros\', \'IVATerceros\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaIVATerceros.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaIVATerceros.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaIVATerceros = \'\'; detalle.configuracion.IVATerceros=\'\'; resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.IVATerceros.label }}\n                                            <a ng-if="detalle.cuentaIVATerceros.parametros.length > 0 && !detalle.configuracion.IVATerceros.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaIVATerceros.parametros, detalle.cuentaIVATerceros.id, \'IVATerceros\', detalle.IVATerceros);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.IVATerceros, \'btn-warning\' : !detalle.configuracion.IVATerceros }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>   \n\n                                <td ng-if="vistaColumnas.TotLey18211" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.Ley18211}">\n                                    {{ detalle.Ley18211? detalle.Ley18211 : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.Ley18211 > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaLey18211">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaLey18211" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosLey18211[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaLey18211\', \'Ley18211\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosLey18211[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaLey18211.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaLey18211\', \'Ley18211\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaLey18211.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaLey18211.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaLey18211 = \'\'; detalle.configuracion.Ley18211=\'\'; resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.Ley18211.label }}\n                                            <a ng-if="detalle.cuentaLey18211.parametros.length > 0 && !detalle.configuracion.Ley18211.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaLey18211.parametros, detalle.cuentaLey18211.id, \'Ley18211\', detalle.Ley18211);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.Ley18211, \'btn-warning\' : !detalle.configuracion.Ley18211 }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>   \n\n                                <td ng-if="vistaColumnas.TotOtrosImp" style="text-align: right">\n\n                                    <table class="col-sm-12" ng-if="detalle.OtrosImp.length > 0 && detalle.OtrosImp" ng-class="{\'table-bordered\' : detalle.OtrosImp.length > 1 }">\n                                        <tr ng-repeat="otro in detalle.OtrosImp">\n                                            <td class="col-sm-12" ng-class="{\'bg-success\' : detalle.configuracion.OtrosImp[\'A\'+otro.codigo].ingresado}">\n                                                ({{ otro.codigo }}) {{ codigosImpuestos[otro.codigo] }}<br>{{ otro.monto  | currency:"$":0 }}<br>\n                                                <div class="col-sm-12" ng-show="!detalle.cuentaOtrosImp[\'A\'+otro.codigo]">\n                                                    <div class="form-group">\n                                                        <div class="col-sm-9" style="padding:0px">\n                                                            <input type="text" ng-model="detalle.cuentaOtrosImp[\'A\'+otro.codigo]" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosOtrosImp[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaOtrosImp\', \'OtrosImp\', \'A\'+otro.codigo ); resumenAsignacionCuenta();" required>\n                                                        </div>\n                                                        <div class="col-sm-3">\n                                                            <i ng-show="estadosOtrosImp[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                            <i ng-show="detalle.cuentaOtrosImp[\'A\'+otro.codigo].codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                            <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaOtrosImp\', \'OtrosImp\', detalle.id, \'A\'+otro.codigo )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <div ng-show="detalle.cuentaOtrosImp[\'A\'+otro.codigo].codigo" style="font-weight: normal !important; font-size:12px !important">\n                                                    {{ detalle.cuentaOtrosImp[\'A\'+otro.codigo].cuenta }}\n                                                    <a href="javascript:void(0);" ng-click="detalle.cuentaOtrosImp[\'A\'+otro.codigo] = \'\'; detalle.configuracion.OtrosImp[\'A\'+otro.codigo]=\'\';" class="text-danger">\n                                                        <i class="fa fa-remove"></i>\n                                                    </a><br>\n                                                    {{ detalle.configuracion.OtrosImp[\'A\'+otro.codigo].label }}\n                                                    <a ng-if="detalle.cuentaOtrosImp[\'A\'+otro.codigo].parametros.length > 0 && !detalle.configuracion.OtrosImp[\'A\'+otro.codigo].auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaOtrosImp[\'A\'+otro.codigo].parametros, detalle.cuentaOtrosImp[\'A\'+otro.codigo].id, \'OtrosImp\', otro.monto, \'A\'+otro.codigo);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.OtrosImp[\'A\'+otro.codigo], \'btn-warning\' : !detalle.configuracion.OtrosImp[\'A\'+otro.codigo] }">\n                                                        <i class="fa fa-cogs"></i>\n                                                    </a>\n                                                </div>\n                                                <span ng-if="detalle.OtrosImp.length > 1"><br>&nbsp;</span>                                                \n                                            </td>\n                                        </tr>\n                                    </table>\n                                </td>\n\n\n\n\n\n                                <td ng-if="vistaColumnas.TotIVARetTotal" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.IVARetTotal}">\n                                    {{ detalle.IVARetTotal? detalle.IVARetTotal : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.IVARetTotal > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaIVARetTotal">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaIVARetTotal" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosIVARetTotal[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaIVARetTotal\', \'IVARetTotal\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosIVARetTotal[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaIVARetTotal.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaIVARetTotal\', \'IVARetTotal\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaIVARetTotal.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaIVARetTotal.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaIVARetTotal = \'\'; detalle.configuracion.IVARetTotal=\'\'; resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.IVARetTotal.label }}\n                                            <a ng-if="detalle.cuentaIVARetTotal.parametros.length > 0 && !detalle.configuracion.IVARetTotal.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaIVARetTotal.parametros, detalle.cuentaIVARetTotal.id, \'IVARetTotal\', detalle.IVARetTotal);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.IVARetTotal, \'btn-warning\' : !detalle.configuracion.IVARetTotal }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td> \n                                <td ng-if="vistaColumnas.TotIVARetParcial" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.IVARetParcial}">\n                                    {{ detalle.IVARetParcial? detalle.IVARetParcial : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.IVARetParcial > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaIVARetParcial">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaIVARetParcial" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosIVARetParcial[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaIVARetParcial\', \'IVARetParcial\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosIVARetParcial[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaIVARetParcial.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaIVARetParcial\', \'IVARetParcial\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaIVARetParcial.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaIVARetParcial.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaIVARetParcial = \'\'; detalle.configuracion.IVARetParcial=\'\'; resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.IVARetParcial.label }}\n                                            <a ng-if="detalle.cuentaIVARetParcial.parametros.length > 0 && !detalle.configuracion.IVARetParcial.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaIVARetParcial.parametros, detalle.cuentaIVARetParcial.id, \'IVARetParcial\', detalle.IVARetParcial);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.IVARetParcial, \'btn-warning\' : !detalle.configuracion.IVARetParcial }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td> \n                                <td ng-if="vistaColumnas.TotCredEC" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.CredEC}">\n                                    {{ detalle.CredEC? detalle.CredEC : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.CredEC > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaCredEC">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaCredEC" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosCredEC[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaCredEC\', \'CredEC\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosCredEC[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaCredEC.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaCredEC\', \'CredEC\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaCredEC.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaCredEC.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaCredEC = \'\'; detalle.configuracion.CredEC=\'\'; resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.CredEC.label }}\n                                            <a ng-if="detalle.cuentaCredEC.parametros.length > 0 && !detalle.configuracion.CredEC.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaCredEC.parametros, detalle.cuentaCredEC.id, \'CredEC\', detalle.CredEC);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.CredEC, \'btn-warning\' : !detalle.configuracion.CredEC }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td> \n                                <td ng-if="vistaColumnas.TotDepEnvase" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.DepEnvase}">\n                                    {{ detalle.DepEnvase? detalle.DepEnvase : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.DepEnvase > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaDepEnvase">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaDepEnvase" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosDepEnvase[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaDepEnvase\', \'DepEnvase\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosDepEnvase[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaDepEnvase.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaDepEnvase\', \'DepEnvase\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaDepEnvase.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaDepEnvase.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaDepEnvase = \'\'; detalle.configuracion.DepEnvase=\'\'; resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.DepEnvase.label }}\n                                            <a ng-if="detalle.cuentaDepEnvase.parametros.length > 0 && !detalle.configuracion.DepEnvase.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaDepEnvase.parametros, detalle.cuentaDepEnvase.id, \'DepEnvase\', detalle.DepEnvase);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.DepEnvase, \'btn-warning\' : !detalle.configuracion.DepEnvase }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td> \n                                <td ng-if="vistaColumnas.TotMntTotal" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.MntTotal}">\n                                    {{ detalle.MntTotal? detalle.MntTotal : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.MntTotal > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaMntTotal">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaMntTotal" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosMntTotal[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaMntTotal\', \'MntTotal\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosMntTotal[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaMntTotal.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaMntTotal\', \'MntTotal\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaMntTotal.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaMntTotal.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaMntTotal = \'\'; detalle.configuracion.MntTotal=\'\'; resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.MntTotal.label }}\n                                            <a ng-if="detalle.cuentaMntTotal.parametros.length > 0 && !detalle.configuracion.MntTotal.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaMntTotal.parametros, detalle.cuentaMntTotal.id, \'MntTotal\', detalle.MntTotal);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.MntTotal, \'btn-warning\' : !detalle.configuracion.MntTotal }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td> \n                                <td ng-if="vistaColumnas.TotIVANoRetenido" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.IVANoRetenido}">\n                                    {{ detalle.IVANoRetenido? detalle.IVANoRetenido : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.IVANoRetenido > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaIVANoRetenido">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaIVANoRetenido" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosIVANoRetenido[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaIVANoRetenido\', \'IVANoRetenido\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosIVANoRetenido[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaIVANoRetenido.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaIVANoRetenido\', \'IVANoRetenido\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaIVANoRetenido.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaIVANoRetenido.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaIVANoRetenido = \'\'; detalle.configuracion.IVANoRetenido=\'\'; resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.IVANoRetenido.label }}\n                                            <a ng-if="detalle.cuentaIVANoRetenido.parametros.length > 0 && !detalle.configuracion.IVANoRetenido.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaIVANoRetenido.parametros, detalle.cuentaIVANoRetenido.id, \'IVANoRetenido\', detalle.IVANoRetenido);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.IVANoRetenido, \'btn-warning\' : !detalle.configuracion.IVANoRetenido }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td> \n                                <td ng-if="vistaColumnas.TotMntNoFact" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.MntNoFact}">\n                                    {{ detalle.MntNoFact? detalle.MntNoFact : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.MntNoFact > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaMntNoFact">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaMntNoFact" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosMntNoFact[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaMntNoFact\', \'MntNoFact\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosMntNoFact[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaMntNoFact.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaMntNoFact\', \'MntNoFact\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaMntNoFact.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaMntNoFact.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaMntNoFact = \'\'; detalle.configuracion.MntNoFact=\'\'; resumenAsignacionCuenta();" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.MntNoFact.label }}\n                                            <a ng-if="detalle.cuentaMntNoFact.parametros.length > 0 && !detalle.configuracion.MntNoFact.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaMntNoFact.parametros, detalle.cuentaMntNoFact.id, \'MntNoFact\', detalle.MntNoFact);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.MntNoFact, \'btn-warning\' : !detalle.configuracion.MntNoFact }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td> \n                                <td ng-if="vistaColumnas.TotMntPeriodo" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.MntPeriodo}">\n                                    {{ detalle.MntPeriodo? detalle.MntPeriodo : 0 | currency:"$":0 }}                                    \n                                </td> \n                                <td ng-if="vistaColumnas.TotPsjNac" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.PsjNac}">\n                                    {{ detalle.PsjNac? detalle.PsjNac : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.PsjNac > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaPsjNac">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaPsjNac" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosPsjNac[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaPsjNac\', \'PsjNac\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosPsjNac[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaPsjNac.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaPsjNac\', \'PsjNac\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaPsjNac.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaPsjNac.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaPsjNac = \'\'; detalle.configuracion.PsjNac=\'\';" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.PsjNac.label }}\n                                            <a ng-if="detalle.cuentaPsjNac.parametros.length > 0 && !detalle.configuracion.PsjNac.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaPsjNac.parametros, detalle.cuentaPsjNac.id, \'PsjNac\', detalle.PsjNac);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.PsjNac, \'btn-warning\' : !detalle.configuracion.PsjNac }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td> \n                                <td ng-if="vistaColumnas.TotPsjInt" style="text-align: right" ng-class="{\'bg-success\' : detalle.configuracion.PsjInt}">\n                                    {{ detalle.PsjInt? detalle.PsjInt : 0 | currency:"$":0 }}\n                                    <div ng-if="detalle.PsjInt > 0">\n                                        <div class="col-sm-12" ng-show="!detalle.cuentaPsjInt">\n                                            <div class="form-group">\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="detalle.cuentaPsjInt" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadosPsjInt[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white marcarRojo" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="analisisConfiguracion( detalle.id, \'cuentaPsjInt\', \'PsjInt\'); resumenAsignacionCuenta();" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="estadosPsjInt[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="detalle.cuentaPsjInt.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarCuenta(\'cuentaPsjInt\', \'PsjInt\', detalle.id)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div ng-show="detalle.cuentaPsjInt.codigo" style="font-weight: normal !important; font-size:12px !important">\n                                            {{ detalle.cuentaPsjInt.cuenta }}\n                                            <a href="javascript:void(0);" ng-click="detalle.cuentaPsjInt = \'\'; detalle.configuracion.PsjInt=\'\';" class="text-danger">\n                                                <i class="fa fa-remove"></i>\n                                            </a><br>\n                                            {{ detalle.configuracion.PsjInt.label }}\n                                            <a ng-if="detalle.cuentaPsjInt.parametros.length > 0 && !detalle.configuracion.PsjInt.auto " href="javascript:void(0);" ng-click="openGestionParametro(detalle.id, detalle.cuentaPsjInt.parametros, detalle.cuentaPsjInt.id, \'PsjInt\', detalle.PsjInt);" class="btn btn-xs" ng-class="{\'btn-success\' : detalle.configuracion.PsjInt, \'btn-warning\' : !detalle.configuracion.PsjInt }">\n                                                <i class="fa fa-cogs"></i>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td> \n                            </tr>\n                        </table>\n                    </div>\n                </div>\n            </div>\n\n            <div class="panel panel-default" ng-if="objeto.archivo">\n                <div class="panel-heading">Resumenes de Cuentas Asignadas</div>\n                <div class="panel-body">\n                    <div class="col-sm-5">\n                        <table class="table table-striped">\n                            <tr>\n                                <th>#</th>\n                                <th class="col-sm-8">Cuenta</th>\n                                <th class="col-sm-4">Monto</th>\n                            </tr>\n                            <tr ng-repeat="cuenta in resumenes.resumentesPorCuenta">\n                                <td>{{ $index + 1 }}</td>\n                                <td>{{ cuenta.cuenta }}</td>\n                                <td class="text-right">{{ cuenta.total | currency:"$":0 }}</td>\n                            </tr>\n                        </table>\n                    </div>\n                </div>\n            </div>\n\n            <div class="panel panel-default" ng-if="objeto.archivo">\n                <div class="panel-heading">Cuadraturas</div>\n                <div class="panel-body">\n                    <div class="form-group">\n                        <label class="control-label col-sm-2">Total Libro XML:</label>\n                        <div class="col-sm-2" style="text-align:right">\n                            <strong>{{ objeto.totalLibro | currency:"$":0  }}</strong>\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label class="control-label col-sm-2">Total Carga:</label>\n                        <div class="col-sm-2" style="text-align:right">\n                            {{ resumenes.totalMontoTotal | currency:"$":0 }}\n                        </div>\n                        <div class="col-sm-1 text-success" ng-if="resumenes.totalMontoTotal == objeto.totalLibro">\n                            <i class="fa fa-check"></i>\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label class="control-label col-sm-2">Total Cuentas Asignadas:</label>\n                        <div class="col-sm-2" style="text-align:right">\n                            {{ resumenes.totalMontoCtasAsignadas | currency:"$":0 }}\n                        </div>\n                        <div class="col-sm-1 text-success" ng-if="resumenes.totalMontoCtasAsignadas == objeto.totalLibro">\n                            <i class="fa fa-check"></i>\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label class="control-label col-sm-2">Total Cuentas Monto Total:</label>\n                        <div class="col-sm-2" style="text-align:right">\n                            {{ resumenes.totalMontoCtasTotal | currency:"$":0 }}\n                        </div>\n                        <div class="col-sm-1 text-success" ng-if="resumenes.totalMontoCtasTotal == objeto.totalLibro">\n                            <i class="fa fa-check"></i>\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label class="control-label col-sm-2">Total Carga - Total Cuentas Asignadas:</label>\n                        <div class="col-sm-2" style="text-align:right">\n                            {{ resumenes.totalMontoTotal - resumenes.totalMontoCtasAsignadas | currency:"$":0 }}\n                        </div>\n                        <div class="col-sm-1 text-success" ng-if="resumenes.totalMontoTotal - resumenes.totalMontoCtasAsignadas == 0">\n                            <i class="fa fa-check"></i>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div ng-if="objeto.totalLibro == resumenes.totalMontoTotal ">\n                <div class="panel panel-primary" ng-if="objeto.archivo">\n                    <div class="panel-heading">Generación de Comprobante Contable</div>\n                    <div class="panel-body">\n                     \n                        <div class="form-group">\n                            <label class="label-control col-sm-3">Fecha de Comprobante:</label>\n                            <div class="col-sm-2">\n                                <p class="input-group" style="margin-bottom:0px !important">\n                                    <input type="text" name="fecha" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.comprobante.fecha" is-open="fechas.fecha" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" ng-change="revisarFecha()" class="form-control form-white" required>\n                                    <span class="input-group-btn">\n                                        <button type="button" class="btn btn-primary" ng-click="open($event)" style="margin-bottom:0px !important"><i class="glyphicon glyphicon-calendar"></i></button>\n                                    </span>\n                                </p>\n                            </div>\n                        </div>\n\n                        <div class="form-group" ng-if="objeto.comprobantes > 0">\n                            <label class="label-control col-sm-3">Total Comprobantes creados:</label>\n                            <div class="col-sm-5">\n                                {{ objeto.comprobantes }}\n                            </div>\n                        </div>\n\n                        <div class="form-group">\n                            <label class="label-control col-sm-3">Generación de Comprobante:</label>\n                            <div class="col-sm-5">\n                                <label>\n                                    <input type="radio" ng-model="objeto.comprobante.tipo" ng-value="1" icheck> Único Comprobante\n                                </label>&nbsp;&nbsp;&nbsp;&nbsp;\n                                <label>\n                                    <input type="radio" ng-model="objeto.comprobante.tipo" ng-value="2" icheck> Por Documento\n                                </label><br>\n                            </div>\n                        </div>\n\n                    </div>\n                </div>\n\n                <div class="panel panel-danger" ng-if="errores.length > 0">\n                    <div class="panel-heading">Errores Detectados</div>\n                    <div class="panel-body">\n                        <table class="table">\n                            <tr>\n                                <th>#</th>\n                                <th class="col-sm-6">Error</th>\n                                <th class="col-sm-2">Tipo de Documento</th>\n                                <th class="col-sm-2">Documento N°</th>\n                                <th class="col-sm-2">Columna</th>\n                            </tr>\n                            <tr ng-repeat="error in errores">\n                                <th>{{ $index + 1 }}</th>\n                                <th>{{ error.error }}</th>\n                                <th>{{ error.tipoDocumento }}</th>\n                                <th>{{ error.documento }}</th>\n                                <th>{{ error.columna }}</th>\n                            </tr>\n                        </table>\n                    </div>\n                </div>\n\n                <div class="col-sm-12">\n                    <button class="btn btn-default" ng-click="volverIndex()">Cancelar/Volver</button>\n\n                    <button class="btn btn-primary" ng-click="guardar()" ng-show="objeto.archivo && objeto.totalLibro > 0">Validar Guardar</button>\n\n                    <button class="btn btn-primary" ng-disabled="form.$invalid" ng-click="generarComprobante()" ng-show="objeto.archivo && ( (objeto.comprobantes == 0 && objeto.cuentasGeneradas ) ||  (objeto.comprobantes == 1 && objeto.comprobante.tipo == 1) || ( objeto.comprobantes > 1 && objeto.comprobante.tipo == 2) ) && objeto.totalLibro > 0">Generar Comprobante</button>\n\n\n                    <button class="btn btn-primary" ng-disabled="form.$invalid" confirmation-click="generarComprobante()" ng-show="objeto.archivo && objeto.comprobantes > 1 && objeto.comprobante.tipo == 1 && objeto.totalLibro > 0" confirmation-needed="Los Comprobantes creados anteriormente serán anulados. Desea Continuar?">Generar Comprobante</button>\n\n                    <button class="btn btn-primary" ng-disabled="form.$invalid" confirmation-click="generarComprobante()" ng-show="objeto.archivo && objeto.comprobantes == 1 && objeto.comprobante.tipo == 2 && objeto.totalLibro > 0" confirmation-needed="El Comprobante creado anteriormente será anulado. Desea Continuar?">Generar Comprobante</button>\n\n\n                    <button class="btn btn-success" ng-show="objeto.comprobantes > 0 && objeto.totalLibro > 0" abrir-ventana="{{ constantes.URL+\'importacion-libro-venta/comprobantes-contables/imprimir/\' + objeto.id}}" ventana-nombre="IMPRIMIRASIENTOCONTABLE" ventana-ancho="750" ventana-alto="600">Ver Comprobante</button>\n\n                    <button class="btn btn-danger" ng-show="objeto.archivo && objeto.comprobantes==0" confirmation-click="eliminarLibro( objeto.id )" confirmation-needed="El Libro será eliminado permanentemente. Desea Continuar?">\n                        Eliminar Libro\n                    </button>\n                </div>\n            </div>\n\n        </div>\n        <div ng-if="objeto.totalLibro != resumenes.totalMontoTotal">\n            <div class="col-sm-12 text-danger" ng-if="objeto.tipo != 3">\n                <strong>\n                    <big>ATENCIÓN:</big><br>\n                    El Libro que ha cargado no ha podido ser leido en su totalidad, el sistema ha detectado diferencias en la cuadratura y ha evitado que \n                    continue operando con él. Contacte a soporte para obtener mayor información.\n                </strong>                 \n            </div>\n            <div class="col-sm-12">\n                <button class="btn btn-default" ng-click="volverIndex()">Cancelar/Volver</button>\n\n                <button class="btn btn-success" ng-show="objeto.comprobantes > 0 && objeto.tipo==3" abrir-ventana="{{ constantes.URL+\'importacion-libro-venta/comprobantes-contables/imprimir/\' + objeto.id}}" ventana-nombre="IMPRIMIRASIENTOCONTABLE" ventana-ancho="750" ventana-alto="600">Ver Comprobante</button>\n\n            </div>\n        </div>\n        <div class="col-sm-12" id="scrollToHere">\n           &nbsp;\n        </div>\n    </form>\n</div>\n\n<script type="text/javascript">\n    function bajar(){\n        $(\'html,body\').animate({\n            scrollTop: $("#scrollToHere").offset().top\n        }, 2000);\n    }\n\n    function subir(){\n        $(\'html,body\').animate({\n            scrollTop: \'0px\'\n        }, 2000);\n    }\n\n    $(window).scroll(function () {\n        if ($(this).scrollTop() > 200) {\n            $(\'.ir-arriba\').fadeIn();\n        }\n        else {\n            $(\'.ir-arriba\').fadeOut();\n        }\n\n        if ($(this).scrollTop() < $(document).height()-$(window).height() ) {\n            $(\'.ir-abajo\').fadeIn();\n        }\n        else {\n            $(\'.ir-abajo\').fadeOut();\n        }\n    });\n    $(\'.ir-arriba\').fadeOut();\n</script>'),
a.put("views/ingreso-boleta-honorarios.html",'<div class="header">\n    <h2>Registro de <b>Boletas de Honorarios</b></h2>\n</div>\n<script type="text/ng-template" id="customTemplate.html">\n    <a style="cursor: pointer;">\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\n    </a>\n</script>\n<div class="row">\n    <div class="col-md-12">     \n        <div class="row col-md-12">\n            <form class="form-horizontal" name="form" novalidate autocomplete="Off">\n                <div class="form-group">                    \n                    <div class="col-md-9">\n                        &nbsp;\n                    </div>\n                    <div class="col-md-3" style="text-align:right">\n                        \n                        <div class="btn-group">\n                            <button class="btn btn-dark btn-md" type="button" data-toggle="dropdown" aria-expanded="false">\n                                <i class="fa fa-wrench"></i> Herramientas <span class="caret"></span>\n                            </button>\n                            <ul class="dropdown-menu dropdown-menu-sm" role="menu">\n                                <li>\n                                    <a ng-href="{{ constantes.URL + \'impBoletasHonorarios.xlsx\' }}">\n                                        <i class="fa fa-file-excel-o"></i> Descargar Archivo para Importación\n                                    </a>\n                                </li>\n                                <li>\n                                    <a href="javascript:void(0);" ng-click="importarBoletas();">\n                                        <i class="fa fa-file-excel-o"></i> Importar Boletas (.xlsx)\n                                    </a>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n                <div class="panel panel-primary" ng-disabled="boleta.estado===2">\n                    <div class="panel-heading">\n                        Datos Generales\n                    </div>\n                    <div class="panel-body">\n                        <div class="form-group">\n                            <label class="col-sm-3 control-label">Tipo de Boleta:</label>\n                            <div class="col-sm-4">\n                                <select ng-model="boleta.tipoBoleta" ng-options="item as item.nombre for item in opciones.tiposBoletas" class="form-control form-white" ng-change="generarAsientos()" required></select>\n                            </div>\n                        </div>\n\n                        <div class="form-group">\n                            <label class="col-sm-3 control-label">Prestador de Servicio:</label>\n                            <div class="col-sm-7">\n                                <div ng-if="!boleta.proveedor.id">\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="boleta.proveedor" placeholder="Buscar Proveedor" uib-typeahead="prov as prov.razonSocial for prov in getProveedores($viewValue)" typeahead-loading="proveedor" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" ng-class="{\'inputLoading\' : proveedor}" required>\n                                    </div>\n                                    <div class="col-sm-1">\n                                        <button class="btn btn-sm btn-dark" ng-click="administrarProveedores()">\n                                            <i class="fa fa-wrench"></i> \n                                        </button>\n                                    </div>\n                                    <div class="col-sm-1">\n                                        <i ng-show="boleta.proveedor.id" class="fa fa-check" style="color: #0a0"></i>\n                                    </div>\n                                    \n                                </div>\n                                <div class="col-sm-7" ng-if="boleta.proveedor.id" style="padding-left: 5px">\n                                    <strong>\n                                    {{ boleta.proveedor.razonSocial }}&nbsp;&nbsp;\n                                    <a href="javascript:void(0)" ng-click="boleta.proveedor=\'\'" class="btn btn-danger btn-sm">\n                                        <i class="fa fa-remove"></i>\n                                    </a>\n                                    <br>\n                                    {{ boleta.proveedor.rut }}\n                                    </strong>\n                                </div>\n                            </div>\n                            \n                        </div>\n\n                        <div class="form-group">\n                            <label class="col-sm-3 control-label">Número:</label>\n                            <div class="col-sm-2">\n                                 <input class="form-control form-white" type="text" ng-model="boleta.numero" required> \n                            </div>\n                        </div>\n                        \n\n                        <div class="form-group">\n                            <label class="col-sm-3 control-label">Fecha:</label>\n                            <div class="col-sm-2">\n                                <p class="input-group" style="margin-bottom:0px">\n                                  <input type="text" name="fecha" uib-datepicker-popup="dd-MM-yyyy" ng-model="boleta.fecha" is-open="fechas.fecha" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" ng-change="revisarFecha(); cambiarFechaComprobante();" class="form-control form-white" required>\n                                  <span class="input-group-btn">\n                                    <button type="button" class="btn btn-primary" ng-click="open(\'fecha\')" style="margin-bottom:0px"><i class="glyphicon glyphicon-calendar"></i></button>\n                                  </span>\n                                </p>\n                            </div>\n                            <div class="col-sm-5 text-danger" ng-show="form[\'fecha\'].$error.date">\n                                Fecha no Válida\n                            </div>\n                        </div>\n\n\n\n                        <div class="form-group">\n                            <label class="col-sm-3 control-label">Detalle de Servicios:</label>\n                            <div class="col-sm-6">\n                                <textarea ng-model="boleta.glosa" id="detalle" class="form-control form-white" required></textarea>\n                            </div>\n                        </div>\n\n                        <div class="form-group">\n                            <label class="col-sm-3 control-label">Monto Total:</label>\n                            <div class="col-sm-2">\n                                 <input class="form-control form-white" type="text" ng-model="boleta.total" ui-money-mask="0" ng-change="generarAsientos();" required> \n                            </div>\n                        </div>\n\n                    </div>\n                </div>\n                <div class="panel panel-success" ng-disabled="boleta.estado===2">\n                    <div class="panel-heading">\n                        Generación del Asiento Contable\n                    </div>\n                    <div class="panel-body">\n                        <div class="form-group">\n                            <label class="col-sm-3 control-label">Fecha Comprobante:</label>\n                            <div class="col-sm-2">\n                                <p class="input-group" style="margin-bottom:0px">\n                                  <input type="text" name="fechaComprobante" uib-datepicker-popup="dd-MM-yyyy" ng-model="boleta.fechaComprobante" is-open="fechas.fechaComprobante" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" ng-change="revisarFecha()" class="form-control form-white" required>\n                                  <span class="input-group-btn">\n                                    <button type="button" class="btn btn-primary" ng-click="open(\'fechaComprobante\')" style="margin-bottom:0px"><i class="glyphicon glyphicon-calendar"></i></button>\n                                  </span>\n                                </p>\n                            </div>\n                            <div class="col-sm-5 text-danger" ng-show="form[\'fechaComprobante\'].$error.date">\n                                Fecha no Válida\n                            </div>\n                            <div class="col-sm-5 text-danger" ng-show="validacion.fechaFueraRango">\n                                Fecha Fuera del Año Contable Activo\n                            </div>\n                        </div>\n\n                        <div class="form-group">\n                            <label class="col-sm-3 control-label">Centralizando en:</label>\n                            <div class="col-sm-2"><strong>\n                            <big class="text-success" style="text-transform: uppercase">{{ boleta.fechaComprobante | date:\'MMMM\' }} / {{ boleta.fechaComprobante | date:\'yyyy\' }}</big>\n                            </strong>\n                            </div>\n                        </div>\n\n                        <table class="table table-bordered table-striped">\n                            <tr>\n                                <th>#</th>\n                                <th class="col-md-4">Cuenta</th>\n                                <th class="col-md-1">Código</th>\n                                <th class="col-md-3">Glosa</th>\n                                <th class="col-md-2">Debe</th>\n                                <th class="col-md-2">Haber</th>\n                                <th>&nbsp;&nbsp;</th>\n                            </tr>\n                            <tr ng-repeat="asiento in boleta.asientos | filter:filtro" ng-class="{\'bg-danger\' : asiento.visible==0}">\n                                <td>{{ $index + 1 }}</td>\n                                <td>\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input ng-if="!vista" type="text" ng-model="asiento.cuenta" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estados[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                        <span ng-if="vista">{{ asiento.cuenta.cuenta }}</span>\n                                    </div>\n                                    <div class="col-sm-3" ng-if="!vista">\n                                        <i ng-show="estados[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="asiento.cuenta.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta(asiento)" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </td>\n                                <td>{{ asiento.cuenta.codigo }} {{ asiento.visible }}</td>\n                                <td>\n                                    <span ng-if="vista">{{ asiento.glosa }}</span>\n                                    <div class="col-sm-10" ng-if="!vista" ng-show="asiento.glosaPersonalizada">\n                                        <textarea ng-model="asiento.glosa" class="form-control form-white" rows="2"></textarea>\n                                    </div>\n\n                                    <div class="col-sm-8" ng-if="!vista" ng-show="!asiento.glosaPersonalizada">\n                                        {{ boleta.glosa }}\n                                    </div>\n                                    \n                                    <div class="col-sm-4" ng-if="!vista" ng-show="!asiento.glosaPersonalizada">\n                                        <button ng-click="asiento.glosaPersonalizada=true" role="button" class="btn btn-xs btn-warning">\n                                            <i class="fa fa-edit"></i>\n                                        </button>\n                                    </div>\n                                    <div class="col-sm-1" ng-if="!vista" ng-show="asiento.glosaPersonalizada">\n                                        <i ng-click="asiento.glosaPersonalizada=false" class="fa fa-trash"></i>\n                                    </div>\n                                </td>\n                                <td style="text-align: right">\n                                    <!--\n                                    <input  ng-if="!vista" type="text" ng-model="asiento.debe" ng-change="sumarDebe()" ui-money-mask="0" class="form-control form-white text-right" ng-disabled="asiento.haber" ng-required="!asiento.haber" >\n                                    -->\n                                    <span>{{ asiento.debe | currency:"$":0 }}</span>\n                                </td>\n                                <td style="text-align: right">\n                                    <!--\n                                    <input  ng-if="!vista" type="text" ng-model="asiento.haber" ng-change="sumarHaber()" ui-money-mask="0" class="form-control form-white text-right" ng-disabled="asiento.debe" ng-required="!asiento.debe" >\n                                    -->\n                                    <span>{{ asiento.haber | currency:"$":0 }}</span>\n                                </td>\n                                <td>\n                                    <i ng-if="boleta.asientos.length > 0  && !vista" class="fa fa-trash pointer" ng-click="eliminarAsiento(asiento)"></i>\n                                </td>\n                            </tr>\n                            <tr style="background: none !important">\n                                <td colspan="4" class="text-right"><strong>Totales</strong></td>\n                                <td class="text-right" ng-class="{\'bg-success\': comprobarDebeHaber(), \'bg-danger\': !comprobarDebeHaber() }"><strong>{{ boleta.totalDebe | currency:"$":0 }}</strong></td>\n                                <td class="text-right" ng-class="{\'bg-success\': comprobarDebeHaber(), \'bg-danger\': !comprobarDebeHaber()}"><strong>{{ boleta.totalHaber | currency:"$":0 }}</strong></td>\n                                <td ng-class="{\'bg-success\': comprobarDebeHaber() }">\n                                    <i ng-show="comprobarDebeHaber()" class="glyphicon glyphicon-ok"></i>\n                                </td>\n                            </tr>\n                        </table>\n                        <!--\n                        <button  ng-if="!vista" role="button" ng-click="agregarAsiento()" class="btn btn-sm btn-success" style="margin-left: 0px;"><i class="fa fa-plus"></i> Agregar Cuenta</button>\n                        -->\n                    </div>\n                    <div class="panel-footer" style="text-align:right !important">\n                        <button class="btn btn-primary" ng-disabled="form.$invalid || !comprobarDebeHaber() || validacion.fechaFueraRango" confirmation-click="guardar()" confirmation-needed="La Boleta de Honorarios será registrada.Desea continuar?">Grabar</button>\n                        <button class="btn btn-default" ng-click="nuevo()">Nuevo</button>\n                    </div>\n\n                </div>\n            </form>\n        </div>\n    </div>\n</div>\n\n\n\n\n<script type="text/ng-template" id="myModalImportarBoletas.html">\n    <div class="modal-header">\n        <h3 class="modal-title">Importación mediante Archivo Excel SII</h3>\n    </div>\n    <div class="modal-body">\n        <form class="form-horizontal" name="form">\n            <div class="panel panel-default">\n                <div class="panel-heading">Gestión de archivo</div>\n                <div class="panel-body">\n                    <div class="form-group form-group-md">\n                        <div class="col-sm-12" style="font-style: italic;">\n                            <strong>\n                            PASO 1: </strong> Seleccione el archivo Excel, descargado previamente desde la página del SII, el cual contiene las boletas de honorarios a importar. El sistema realizará una pre-carga de los datos que serán importados para que usted pueda confirmar el Proceso de Importación.\n                        </div>\n                    </div>\n\n                    <div class="form-group">&nbsp;</div>\n\n\n                    <div class="form-group">\n                        <label class="col-sm-3 control-label">Fecha Comprobante:</label>\n                        <div class="col-sm-4">\n                            <p class="input-group" style="margin-bottom:0px;">\n                              <input type="text" name="fechaComprobante"  uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.fechaComprobante" is-open="fechas.fechaComprobante" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" ng-change="revisarFecha()" class="form-control form-white" required  />\n                              <span class="input-group-btn">\n                                <button type="button" class="btn btn-primary" ng-click="open(\'fechaComprobante\')" style="margin-bottom:0px;"><i class="glyphicon glyphicon-calendar"></i></button>\n                              </span>\n                            </p>\n                        </div>\n                        <div class="col-sm-5 text-danger" ng-show="form[\'fechaComprobante\'].$error.date">\n                            Fecha no Válida\n                        </div>\n                        <div class="col-sm-5 text-danger" ng-show="validacion.fechaFueraRango">\n                            Fecha Fuera del Año Contable Activo\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <label class="col-sm-3 control-label">Centralizando en:</label>\n                        <div class="col-sm-8"><strong>\n                        <big class="text-success" style="text-transform: uppercase;">{{ objeto.fechaComprobante | date:\'MMMM\' }} / {{ objeto.fechaComprobante | date:\'yyyy\' }}</big>\n                        </strong>\n                        </div>\n                    </div>\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label">Archivo:</label>\n                        <div class="col-sm-5">\n                            <button ng-disabled="form.$invalid" ng-model-rejected="rejFiles" ngf-select ng-model="files" class="btn btn-primary">Seleccionar Archivo</button>\n                        </div>\n                    </div>\n                    <div class="col-sm-12" ng-show="dynamic > 0">\n                        <uib-progressbar class="progress-striped active" value="dynamic" type="success"><strong>{{ dynamic + "%" }}</strong></uib-progressbar>\n                    </div>\n                </div>\n            </div>\n            <div class="panel panel-warning" ng-if="confirmar.datos.length > 0">\n                <div class="panel-heading">Confirmación de Datos</div>\n                <div class="panel-body">\n                    <div class="form-group form-group-md">\n                        <div class="col-sm-12" style="font-style: italic;">\n                            <strong>\n                            PASO 2:</strong> Confirme los datos que se presentan a continuación. de lo contrario vuelva a seleccionar un nuevo archivo en el PASO 1\n                        </div>\n                    </div>\n                 \n\n                    <div class="form-group">\n                        <label class="col-sm-3 control-label">Fecha Comprobante:</label>\n                        <div class="col-sm-4">\n                            {{ confirmar.fecha | date : \'dd-MM-yyyy\' }}\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <label class="col-sm-3 control-label">Centralizando en:</label>\n                        <div class="col-sm-8"><strong>\n                        <big class="text-success" style="text-transform: uppercase;">{{ confirmar.fecha | date:\'MMMM\' }} / {{ confirmar.fecha | date:\'yyyy\' }}</big>\n                        </strong>\n                        </div>\n                    </div>\n                    <div style="height: 400px; overflow: auto;">\n                        <table class="table table-striped">\n                            <tr>\n                                <th class="col-sm-2">Tipo</th>\n                                <th class="col-sm-1">Número</th>\n                                <th class="col-sm-2">Fecha</th>\n                                <th class="col-sm-2">Rut</th>\n                                <th class="col-sm-2">Nombre / Razón Social</th>\n                                <th class="col-sm-1">Brutos</th>\n                                <th class="col-sm-1">Retenido</th>\n                                <th class="col-sm-1">Pagado</th>\n                            </tr>\n                            <tr ng-repeat="fila in confirmar.datos">\n                                <td>{{ fila.tipoBoleta }}</td>\n                                <td>{{ fila.numero }}</td>\n                                <td>{{ fila.fecha | date : \'dd-MM-yyyy\' }}</td>\n                                <td>{{ fila.rut }}</td>\n                                <td>{{ fila.razonSocial }}</td>\n                                <td>{{ fila.brutos | currency:"$":0 }}</td>\n                                <td>{{ fila.retencion | currency:"$":0 }}</td>\n                                <td>{{ fila.liquido | currency:"$":0 }}</td>\n                            </tr>\n                        </table>\n                    </div><br/>\n                    <div class="form-group sinMargen">\n                        <label class="col-sm-3 control-label">Total Bruto:</label>\n                        <div class="col-sm-8">\n                            <strong>\n                                {{ confirmar.totalBruto | currency:"$":0 }}\n                            </strong>\n                        </div>                        \n                    </div>\n                    <div class="form-group sinMargen">\n                        <label class="col-sm-3 control-label">Total Retención:</label>\n                        <div class="col-sm-8">\n                            <strong>\n                                {{ confirmar.totalRetencion | currency:"$":0 }}\n                            </strong>\n                        </div>                        \n                    </div>\n                    <div class="form-group sinMargen">\n                        <label class="col-sm-3 control-label">Total Pagado:</label>\n                        <div class="col-sm-8">\n                            <strong>\n                                {{ confirmar.totalLiquido | currency:"$":0 }}\n                            </strong>\n                        </div>                        \n                    </div>\n\n                    <button class="btn btn-success" confirmation-click="confirmarDatos();" confirmation-needed="Los registros serán importados al sistema. Desea Continuar?">Confirmar Carga de Datos</button>\n                </div>\n            </div>\n\n            <div class="panel panel-danger" ng-if="listaErrores.length > 0">\n                <div class="panel-heading">Errores en archivo</div>\n                <div class="panel-body" style="height: 300px; overflow-y: scroll;">\n                    <div class="form-group form-group-md">\n                        <div class="col-sm-12" style="font-style: italic;">                            \n                        El proceso de importación no puede continuar debido a errores que se detallan a continuación\n                        </div>\n                    </div>\n                    <table class="table table-striped">\n                        <tr>\n                            <th>Error</th>\n                        </tr>\n                        <tr ng-repeat="fila in listaErrores">\n                            <td>{{ fila }}</td>\n                        </tr>\n                    </table>\n                </div>\n            </div>\n\n            <div class="panel panel-success" ng-if="resumen.length > 0">\n                <div class="panel-heading">Resumen de la Importación</div>\n                <div class="panel-body">\n                    <div class="form-group form-group-md">\n                        <div class="col-sm-12" style="font-style: italic;">\n                        El proceso de importación se realizó correctamente. El resumen de la importación se detalle a continuación\n                        </div>\n                    </div>\n                    <div style="height: 400px; overflow: auto;">\n                        <table class="table table-striped">\n                            <tr>\n                                <th class="col-sm-2">Tipo</th>\n                                <th class="col-sm-1">Número</th>\n                                <th class="col-sm-2">Fecha</th>\n                                <th class="col-sm-2">Rut</th>\n                                <th class="col-sm-2">Nombre / Razón Social</th>\n                                <th class="col-sm-1">Brutos</th>\n                                <th class="col-sm-1">Retenido</th>\n                                <th class="col-sm-1">Pagado</th>\n                            </tr>\n                            <tr ng-repeat="fila in resumen">\n                                <td>{{ fila.tipoBoleta }}</td>\n                                <td>{{ fila.numero }}</td>\n                                <td>{{ fila.fecha | date : \'dd-MM-yyyy\' }}</td>\n                                <td>{{ fila.rut }}</td>\n                                <td>{{ fila.razonSocial }}</td>\n                                <td>{{ fila.brutos | currency:"$":0 }}</td>\n                                <td>{{ fila.retencion | currency:"$":0 }}</td>\n                                <td>{{ fila.liquido | currency:"$":0 }}</td>\n                            </tr>\n                        </table>\n                    </div>\n                </div>\n            </div>\n\n        </form>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" ng-click="cancel()">Cancelar</button>\n    </div>\n</script>'),a.put("views/inicio.html",'<div class="header">\n    <span>\n        <h2 style="color:#2B94BE !important"><b style="color:#000 !important">Accesos</b> Directos</h2>\n    </span>\n</div>'),a.put("views/medios-pagos.html",'<script type="text/ng-template" id="customTemplate.html">\n    <a style="cursor: pointer;">\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\n    </a>\n</script>\n\n<div class="header">\n    <h2>Administración de <b>Medios de Pago</b></h2>\n</div>\n<!-- /.row -->\n<div class="row">\n    <div class="col-md-12">\n        <div class="form-group">\n            \n            <label for="orden" class="control-label col-md-1">\n                Ordenar por:\n            </label>\n            <div class="col-md-3">\n                <select ng-model="orden" ng-init="orden=\'tipo\'" id="orden" class="form-control form-white">\n                    <option value="tipo">Medio de Pago</option>\n                </select>\n            </div>\n        \n            <label for="filtro" class="col-md-1 control-label">Filtrar:</label>\n            <div class="col-md-4">\n              <input id="filtro" type="text" class="form-control form-white" ng-model="filtro">\n            </div>\n            \n            <div class="col-md-3" style="text-align:right; padding-right:0px">\n                <button class="btn btn-primary btn-md" ng-click="open({});">\n                    <i class="fa fa-plus"></i> Nuevo\n                </button>\n\n                <div class="btn-group">\n	            	<button class="btn btn-dark btn-md" type="button" data-toggle="dropdown" aria-expanded="false">\n	                    <i class="fa fa-wrench"></i> Herramientas <span class="caret"></span>\n	                </button>\n	                <ul class="dropdown-menu dropdown-menu-sm" role="menu">\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'medios-pagos/exportar/excel/2007\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 2007 (.xlsx)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'medios-pagos/exportar/excel/97\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 97/2003 (.xls)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'medios-pagos/exportar/pdf\' }}">\n	                            <i class="fa fa-file-pdf-o"></i> Exportar PDF (.pdf)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a href="javascript:void(0);" ng-click="eliminarClasificacion(dato)">\n	                            <i class="fa fa-print"></i> Imprimir\n	                        </a>\n	                    </li>\n	                </ul>\n                </div>\n            </div>\n        </div>\n\n        <div class="form-group">\n\n	        <table class="table table-striped table-hover">\n	            <thead>\n	                <tr>\n	                    <th>#</th>\n	                    <th class="col-sm-3">Medio de Pago</th>\n	                    <th class="col-sm-3">Tipo de Comportamiento</th>\n                        <th class="col-sm-2">Habilitado</th>\n                        <th class="col-sm-1">Ctas Proveedor</th>\n                        <th class="col-sm-1">Ctas Cliente</th>\n	                    <th class="col-sm-2">Acciones</th>\n	                </tr>\n	            </thead>\n	            <tbody>\n	                <tr ng-repeat="dato in datos | orderBy:orden">\n	                    <td>{{ $index + 1 }}</td>\n	                    <td>{{ dato.medio }}</td>\n	                    <td>{{ dato.tipoPago }}</td>\n                        <td>{{ dato.habilitado }}</td>\n                        <td>\n                            <a ng-if="dato.ctasProveedor" href="javascript:void(0)" uib-tooltip-html="toolTipCuentas( dato.ctasProveedorDet )">\n                                {{ dato.ctasProveedor }}\n                            </a>\n                        </td>\n                        <td>\n                            <a ng-if="dato.ctasCliente" href="javascript:void(0)" uib-tooltip-html="toolTipCuentas( dato.ctasClienteDet )">\n                                {{ dato.ctasCliente }}\n                            </a>\n                        </td>\n	                    <td>\n	                        <a class="btn-acciones btn btn-default" href="javascript:void(0);" ng-click="editar(dato)" uib-tooltip-html="toolTipEdicion(dato.departamento)">\n	                            <i class="fa fa-pencil"></i>\n	                        </a>\n	                        <a class="btn-acciones btn btn-danger" href="javascript:void(0);" confirmation-click="eliminar(dato)" confirmation-needed="El Medio de Pago será eliminado.Desea continuar?">\n	                            <i class="fa fa-remove"></i>\n	                        </a>\n\n	                    </td>\n	                </tr>\n	            </tbody>\n	        </table>\n        </div>\n    </div>\n</div>\n\n<script type="text/ng-template" id="myModalContent.html">\n    <div class="modal-header">\n        <h3 class="modal-title">Administración de Medios de Pago</h3>\n    </div>\n    <div class="modal-body">\n        <form class="form-horizontal" name="form" novalidate >\n            <div class="panel panel-default">\n                <div class="panel-heading">Datos del Medio de Pago</div>\n                <div class="panel-body">\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Medio de Pago:</label>\n                        <div class="col-sm-5">\n                            <input class="form-control form-white" type="text"  ng-model="objeto.medio" placeholder="Nombre del Medio de Pago" required />\n                        </div>\n                        <span ng-if="errores.medio.length" class="text-danger">{{ errores.medio[0] }}</span>\n                    </div>\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Comportamiento:</label>\n                        <div class="col-sm-5">\n                            <select class="form-control form-white" ng-model="objeto.tipoPago" placeholder="Dependencia" ng-options="tipo as tipo.tipo for tipo in opciones.tiposPagos"></select>\n                        </div>\n                    </div>\n\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Habilitado:</label>\n                        <div class="col-sm-9">\n                            <label>\n                                <input type="checkbox" ng-model="objeto.clientes" ng-value="1" icheck /> Pago Clientes\n                            </label>&nbsp;&nbsp;&nbsp;\n                            <label>\n                                <input type="checkbox" ng-model="objeto.proveedores" ng-value="1" icheck /> Pago Proveedores\n                            </label>\n                        </div>\n                    </div>\n\n                    <div class="form-group form-group-md" ng-if="objeto.tipoPago.id > 0">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Datos Solicitados:</label>\n                        <div class="col-sm-9">\n                            <table class="table table-striped">\n                                <tr class="bg-primary">\n                                    <th>#</th>\n                                    <th class="col-sm-5">Campo</th>\n                                    <th class="col-sm-7">Descripción</th>\n                                </tr>\n                                <tr ng-repeat="dato in objeto.tipoPago.campos">        \n                                    <td>{{ $index + 1 }}</td>\n                                    <td>{{ dato.campo }}</td>\n                                    <td><span ng-bind-html="dato.descripcion|html"></span></td>\n                                </tr>\n                            </table>\n                        </div>\n                    </div>\n\n                    <div class="form-group form-group-md" ng-if="objeto.tipoPago.id > 0 && objeto.proveedores">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Cuentas Asociadas Para Pago de Proveedores:</label>\n                        <div class="col-sm-9">\n                            <table class="table table-striped">\n                                <tr ng-repeat="cuentaProv in objeto.cuentasPagoProveedores">\n                                    <td>\n                                        <div class="col-sm-9" style="padding:0px;" ng-if="!cuentaProv.cuenta.id">\n                                            <input type="text" ng-model="cuentaProv.cuenta" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="cuentaProv[$index]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required  />\n                                        </div>\n                                        <div class="col-sm-3" ng-if="!cuentaProv.cuenta.id">\n                                            <i ng-show="cuentaProv[$index]" class="glyphicon glyphicon-refresh"></i>\n                                            <i ng-show="cuentaProv.cuenta.codigo" class="fa fa-check" style="color: #0a0;"></i>\n                                            <button class="btn btn-sm btn-primary" style="margin-right:1px;" ng-click="buscarCuenta( \'cuentasPagoProveedores\', $index, true )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                            <a href="javascript:void(0);"  class="btn btn-danger btn-sm" style="margin-left:1px;" ng-click="quitarCuenta(\'cuentasPagoProveedores\', $index)">\n                                                <i class="fa fa-remove"></i>\n                                            </a>\n                                        </div>\n                                        <div  ng-if="cuentaProv.cuenta.id">\n                                            {{ cuentaProv.cuenta.codigo }} | {{ cuentaProv.cuenta.cuenta }}\n                                            <a href="javascript:void(0);"  class="btn btn-danger btn-xs" style="margin-left:1px;" ng-click="cuentaProv.cuenta=\'\';">\n                                                <i class="fa fa-remove"></i>\n                                            </a>\n                                        </div>\n                                    </td>\n                                </tr>\n                            </table>\n                            <button class="btn btn-warning btn-sm" ng-click="agregarCuenta(\'cuentasPagoProveedores\')">\n                                <i class="fa fa-plus"></i> Agregar\n                            </button>\n                        </div>\n                    </div>\n\n\n                    <div class="form-group form-group-md" ng-if="objeto.tipoPago.id > 0 && objeto.clientes">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Cuentas Asociadas Para Pago de Clientes:</label>\n                        <div class="col-sm-9">\n                            <table class="table table-striped">\n                                <tr ng-repeat="cuentaCli in objeto.cuentasPagoClientes">\n                                    <td>\n                                        <div class="col-sm-9" style="padding:0px;" ng-if="!cuentaCli.cuenta.id">\n                                            <input type="text" ng-model="cuentaCli.cuenta" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="cuentaCli[$index]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required  />\n                                        </div>\n                                        <div class="col-sm-3"  ng-if="!cuentaCli.cuenta.id">\n                                            <i ng-show="cuentaCli[$index]" class="glyphicon glyphicon-refresh"></i>\n                                            <i ng-show="cuentaCli.cuenta.codigo" class="fa fa-check" style="color: #0a0;"></i>\n                                            <button class="btn btn-sm btn-primary" style="margin-right:1px;" ng-click="buscarCuenta( \'cuentasPagoClientes\', $index, true )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                            <a href="javascript:void(0);"  class="btn btn-danger btn-sm" style="margin-left:1px;" ng-click="quitarCuenta(\'cuentasPagoClientes\', $index)">\n                                                <i class="fa fa-remove"></i>\n                                            </a>\n                                        </div>\n                                        <div  ng-if="cuentaCli.cuenta.id">\n                                            {{ cuentaCli.cuenta.codigo }} | {{ cuentaCli.cuenta.cuenta }}\n                                            <a href="javascript:void(0);"  class="btn btn-danger btn-xs" style="margin-left:1px;" ng-click="cuentaCli.cuenta=\'\';">\n                                                <i class="fa fa-remove"></i>\n                                            </a>\n                                        </div>\n                                    </td>\n                                </tr>\n                            </table>\n                            <button class="btn btn-warning btn-sm" ng-click="agregarCuenta(\'cuentasPagoClientes\')">\n                                <i class="fa fa-plus"></i> Agregar\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </form>\n    </div>\n    <div class="modal-footer">        \n        <button class="btn btn-default" ng-click="cancel()">Cancelar</button>\n        <button class="btn btn-primary" ng-disabled="form.$invalid" ng-click="guardar()">Guardar</button>\n    </div>\n</script>'),
a.put("views/menu.html",'<div class="header">\n        <h2>Administración del <b>Menú del Sistema</b></h2>\n</div>\n<div class="row col-lg-12">\n    <div class="form-horizontal">\n        <label for="orden" class="col-sm-1 control-label">Ordenar:</label>\n        <div class="col-sm-2">\n            <select id="orden" ng-model="orden" class="form-control form-white input-sm">\n                <option value="menu">Menú</option>\n                <option value="href">Href</option>\n                <option value="onclick">Onclick</option>\n            </select>\n        </div>\n\n        <label for="filtro" class="col-sm-1 control-label">Filtrar:</label>\n        <div class="col-sm-6">\n          <input id="filtro" type="text" class="form-control form-white input-sm" ng-model="filtro">\n        </div>\n        \n        <div class="col-sm-2 text-right">\n            <button class="btn btn-success btn-md" ng-click="openForm({id:\'\'});">\n                <i class="fa fa-plus"></i> Agregar\n            </button>\n        </div>\n\n    </div>\n    <table class="table">\n        <thead>\n            <tr>\n                <th>#</th>\n                <th class="col-xs-1">Icon</th>\n                <th class="col-xs-4">Menú</th>\n                <th class="col-xs-2">Href</th>\n                <th class="col-xs-2">Click</th>\n                <th class="col-xs-1">Acceso</th>\n                <th class="col-xs-1">Facturador</th>\n                <th class="col-xs-1">Acciones</th>\n            </tr>\n        </thead>\n        <tbody>\n     		<tr ng-repeat="dato in datos | filter:filtro " ng-class="{ \'bg-warning\' : dato.tipo == 1 }">\n     			<td class="text-right">{{ dato.posicion }}</td>\n     			<td class="text-right"><i ng-if="dato.fontawesome" class="fa {{ dato.fontawesome }}"></i></td>\n     			<td style="padding-left: {{ dato.tipo * 35  }}px">\n                    <span ng-show="[2,3].indexOf(dato.tipo) >= 0" class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>                    \n                    {{ dato.menu }}\n                </td>\n     		    <td>{{ dato.href }}</td>\n                <td>{{ dato.click }}</td>\n        		<td>{{ dato.acceso }}</td>\n                <td>\n                    <span ng-show="dato.miPyme==1" class="text-primary"><strong>SI</strong></span>\n                    <span ng-show="dato.miPyme==2" class="text-danger"><strong>NO</strong></span>\n                    <span ng-show="dato.miPyme==3" class="text-success"><strong>AMBOS</strong></span>\n                </td>\n     			<td>\n     				<div class="btn-group">\n                        <button class="btn btn-primary btn-sm dropdown-toggle" type="button" data-toggle="dropdown" aria-expanded="false">\n                            Acciones <span class="caret"></span>\n                        </button>\n                        <ul class="dropdown-menu dropdown-menu-sm" role="menu">\n                            <li><a href="javascript:void(0);" ng-click="editar( dato );"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Editar</a></li>\n                            <li><a href="javascript:void(0);" confirmation-click="eliminar( dato );" confirmation-needed="La Opción del menú será eliminada.Desea continuar?"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span> Eliminar</a></li>\n                        </ul>\n                    </div>\n     			</td>\n     		</tr>\n            <tr style="background:none !important">\n                <td colspan="10" style="height:100px; background:none !important">&nbsp;</td>\n            </tr>\n        </tbody>\n    </table>\n</div>\n\n\n<script type="text/ng-template" id="myModalMenu.html">\n    <div >\n        <div class="modal-header">\n            <h3 class="modal-title">Mantención Opciones del Menú</h3>\n        </div>\n        <div class="modal-body">\n            <form class="form-horizontal" role="form" name="formMenu" novalidate>\n              <div class="form-group " ng-class="{ \'has-error\' : formMenu.nombre.$invalid && !formMenu.nombre.$pristine }">\n                <label for="nombre" class="col-xs-3 control-label">\n                    Nombre Opción\n                </label>\n                <div class="col-xs-8">\n                    <input type="text" name="nombre" ng-model="objeto.nombre" class="form-control form-white" id="nombre" placeholder="Nombre Opción" required>\n                    <div ng-show="formMenu.nombre.$invalid && !formMenu.nombre.$pristine" class="glyphicon glyphicon-remove form-control form-white-feedback" aria-hidden="true"></div>\n                    <span ng-show="formMenu.nombre.$invalid && !formMenu.nombre.$pristine" class="help-block">Obligatorio!.</span>\n                </div>\n              </div>\n\n              <div class="form-group " ng-class="{ \'has-error\' : formMenu.titulo.$invalid && !formMenu.titulo.$pristine }">\n                <label for="title" class="col-xs-3 control-label">\n                    Title\n                </label>\n                <div class="col-xs-8">\n                    <input type="text" name="titulo" ng-model="objeto.titulo" class="form-control form-white" id="titulo" placeholder="Title" required>\n                    <div ng-show="formMenu.titulo.$invalid && !formMenu.titulo.$pristine" class="glyphicon glyphicon-remove form-control form-white-feedback" aria-hidden="true"></div>\n                    <span ng-show="formMenu.titulo.$invalid && !formMenu.titulo.$pristine" class="help-block">Obligatorio!.</span>\n                </div>\n              </div>\n\n    \n              <div class="form-group " ng-class="{ \'has-error\' : formMenu.tipo.$invalid && !formMenu.tipo.$pristine }">\n                <label for="tipo" class="col-xs-3 control-label">\n                    Tipo\n                </label>\n                <div class="col-xs-3">\n                    <select name="tipo" ng-model="objeto.tipo" class="form-control form-white" id="tipo" ng-options="opc as opc.value for opc in opciones.tipos" required ></select>\n                    <div ng-show="formMenu.tipo.$invalid && !formMenu.tipo.$pristine" class="glyphicon glyphicon-remove form-control form-white-feedback" aria-hidden="true"></div>\n                    <span ng-show="formMenu.tipo.$invalid && !formMenu.tipo.$pristine" class="help-block">Obligatorio!.</span>\n                </div>\n              </div>\n              \n              <div class="form-group " ng-class="{ \'has-error\' : formMenu.padre.$invalid && !formMenu.padre.$pristine }">\n                <label for="padre" class="col-xs-3 control-label">\n                    Padre\n                </label>\n                <div class="col-xs-8">\n                    <select name="padre" ng-model="objeto.padre" class="form-control form-white" id="padre" ng-options="opc as ( \'&nbsp;\'.repeat(opc.nivel * 10) + opc.value ) for opc in opciones.padres" required ></select>\n                    <div ng-show="formMenu.padre.$invalid && !formMenu.padre.$pristine" class="glyphicon glyphicon-remove form-control form-white-feedback" aria-hidden="true"></div>\n                    <span ng-show="formMenu.padre.$invalid && !formMenu.padre.$pristine" class="help-block">Obligatorio!.</span>\n                </div>\n              </div>\n\n              <div class="form-group " ng-class="{ \'has-error\' : formMenu.posicion.$invalid && !formMenu.posicion.$pristine }">\n                <label for="posicion" class="col-xs-3 control-label">\n                    Posición\n                </label>\n                <div class="col-xs-2">\n                    <select name="posicion" ng-model="objeto.posicion" class="form-control form-white" id="posicion" ng-options="opc as opc.value for opc in opciones.posiciones" required ></select>\n                    <div ng-show="formMenu.posicion.$invalid && !formMenu.posicion.$pristine" class="glyphicon glyphicon-remove form-control form-white-feedback" aria-hidden="true"></div>\n                    <span ng-show="formMenu.posicion.$invalid && !formMenu.posicion.$pristine" class="help-block">Obligatorio!.</span>\n                </div>\n              </div>\n\n              <div class="form-group " ng-class="{ \'has-error\' : formMenu.administrador.$invalid && !formMenu.administrador.$pristine }">\n                <label for="administrador" class="col-xs-3 control-label">\n                    Acceso\n                </label>\n                <div class="col-xs-4">\n                    <select name="administrador" ng-model="objeto.administrador" class="form-control form-white" id="administrador" ng-options="opc as opc.value for opc in opciones.categorias" required ></select>\n                    <div ng-show="formMenu.administrador.$invalid && !formMenu.administrador.$pristine" class="glyphicon glyphicon-remove form-control form-white-feedback" aria-hidden="true"></div>\n                    <span ng-show="formMenu.administrador.$invalid && !formMenu.administrador.$pristine" class="help-block">Obligatorio!.</span>\n                </div>\n              </div>\n\n              <div class="form-group " ng-class="{ \'has-error\' : formMenu.administrador.$invalid && !formMenu.administrador.$pristine }">\n                <label for="administrador" class="col-xs-3 control-label">\n                    Permisos a Configurar:\n                </label>\n                <div class="col-xs-9">\n                    <div class="row">\n                        <label class="col-sm-4">\n                            <input type="checkbox" ng-model="objeto.permisos.crear" ng-value="crear" icheck />\n                            Crear\n                        </label>\n                        <label class="col-sm-4">\n                            <input type="checkbox" ng-model="objeto.permisos.modificar" ng-value="modificar" icheck />\n                            Modificar\n                        </label>\n                    </div>\n                    <div class="row">\n                        <label class="col-sm-4">\n                            <input type="checkbox" ng-model="objeto.permisos.ver" ng-value="ver" icheck />\n                            Ver\n                        </label>\n                        <label class="col-sm-4">\n                            <input type="checkbox" ng-model="objeto.permisos.eliminar" ng-value="eliminar" icheck />\n                            Eliminar\n                        </label>\n                    </div>\n                </div>\n              </div>\n\n                <div class="form-group " ng-class="{ \'has-error\' : formMenu.administrador.$invalid && !formMenu.administrador.$pristine }">\n                    <label for="administrador" class="col-xs-3 control-label">\n                        Tipo Empresa:\n                    </label>\n                    <div class="col-sm-9">\n                        <label class="col-sm-12">\n                            <input type="radio" ng-model="objeto.miPyme" ng-value="1" icheck />\n                            Facturador Mi Pyme\n                        </label>\n                        <label class="col-sm-12">\n                            <input type="radio" ng-model="objeto.miPyme" ng-value="2" icheck />\n                            Sin Factura Mi Pyme\n                        </label>\n                        <label class="col-sm-12">\n                            <input type="radio" ng-model="objeto.miPyme" ng-value="3" icheck />\n                            Ambas\n                        </label>\n                    </div> \n                </div>\n\n\n              <div class="form-group ">\n                <label for="href" class="col-xs-3 control-label">\n                    Href\n                </label>\n                <div class="col-xs-8">\n                    <input type="text" name="href" ng-model="objeto.href" class="form-control form-white" id="href" placeholder="Href">\n                </div>\n              </div>\n\n              <div class="form-group ">\n                <label for="onclick" class="col-xs-3 control-label">\n                    OnClick\n                </label>\n                <div class="col-xs-8">\n                    <input type="text" name="onclick" ng-model="objeto.onclick" class="form-control form-white" id="onclick" placeholder="OnClick">\n                </div>\n              </div>\n\n              <div class="form-group ">\n                <label for="fontawesome" class="col-xs-3 control-label">\n                    Icon Font Awesome\n                </label>\n                <div class="col-xs-5">\n                    <input type="text" name="fontawesome" ng-model="objeto.fontawesome" class="form-control form-white" id="fontawesome" placeholder="Icon Font Awesome">\n                </div>\n                <div class="col-xs-1">\n                    <i class="fa {{ objeto.fontawesome }}"></i>\n                </div>\n              </div>\n\n           \n              \n            </form>\n        </div>\n        <div class="modal-footer">\n      \n        	<button class="btn btn-primary" type="submit" ng-disabled="formMenu.$invalid"  ng-click="guardar()" >Grabar</button>&nbsp;\n    \n        	<button class="btn btn-danger" ng-click="cancel()" >Salir</button>\n      	</div>\n    </div>\n</script>'),a.put("views/modal-confirmation.html",'<div>\n    <div class="modal-header dialog-header-confirm">\n        <h4 class="modal-title">{{ dialog.titulo }}</h4>\n    </div>\n    <div class="modal-body">\n        <div class="row">\n            <div class="col-sm-2 text-center text-primary" style="font-size:27px">\n                <i class="fa fa-question-circle"></i>\n            </div>\n            <div class="col-sm-10">\n                <div ng-bind-html="dialog.mensaje"></div>\n            </div>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" ng-click="cancel()">Cancelar</button>\n        <button class="btn btn-primary" ng-click="aceptar()">Aceptar</button>\n    </div>\n</div>'),a.put("views/nominas-pagos.html",'<script type="text/ng-template" id="customTemplate.html">\n    <a style="cursor: pointer;">\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\n    </a>\n</script>\n\n<div class="header">\n    <h2>Administración de <b>Nóminas de Pago</b></h2>\n</div>\n<!-- /.row -->\n<div class="row">\n    <div class="col-md-12">\n        <div class="form-group">\n            \n            <label for="orden" class="control-label col-md-1">\n                Ordenar por:\n            </label>\n            <div class="col-md-3">\n                <select ng-model="orden" ng-init="orden=\'tipo\'" id="orden" class="form-control form-white">\n                    <option value="tipo">Nómina de Pago</option>\n                </select>\n            </div>\n        \n            <label for="filtro" class="col-md-1 control-label">Filtrar:</label>\n            <div class="col-md-4">\n              <input id="filtro" type="text" class="form-control form-white" ng-model="filtro">\n            </div>\n            \n            <div class="col-md-3" style="text-align:right; padding-right:0px">\n                <button class="btn btn-primary btn-md" ng-click="open({});">\n                    <i class="fa fa-plus"></i> Nuevo\n                </button>\n\n                <div class="btn-group">\n	            	<button class="btn btn-dark btn-md" type="button" data-toggle="dropdown" aria-expanded="false">\n	                    <i class="fa fa-wrench"></i> Herramientas <span class="caret"></span>\n	                </button>\n	                <ul class="dropdown-menu dropdown-menu-sm" role="menu">\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'nominas-pagos/exportar/excel/2007\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 2007 (.xlsx)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'nominas-pagos/exportar/excel/97\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 97/2003 (.xls)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'nominas-pagos/exportar/pdf\' }}">\n	                            <i class="fa fa-file-pdf-o"></i> Exportar PDF (.pdf)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a href="javascript:void(0);" ng-click="eliminarClasificacion(dato)">\n	                            <i class="fa fa-print"></i> Imprimir\n	                        </a>\n	                    </li>\n	                </ul>\n                </div>\n            </div>\n        </div>\n\n        <div class="form-group">\n\n	        <table class="table table-striped table-hover">\n	            <thead>\n	                <tr>\n	                    <th>#</th>\n	                    <th class="col-sm-4">Nómina de Pago</th>\n                        <th class="col-sm-2">Fecha</th>\n                        <th class="col-sm-4">Banco</th>\n	                    <th class="col-sm-2">Acciones</th>\n	                </tr>\n	            </thead>\n	            <tbody>\n	                <tr ng-repeat="dato in datos | orderBy:orden">\n	                    <td>{{ $index + 1 }}</td>\n	                    <td>{{ dato.nomina }}</td>\n                        <td>{{ dato.fecha }}</td>\n                        <td>{{ dato.banco }}</td>\n	                    <td>\n	                        <a class="btn-acciones btn btn-default" href="javascript:void(0);" ng-click="editar(dato)" uib-tooltip-html="toolTipEdicion(dato.departamento)">\n	                            <i class="fa fa-pencil"></i>\n	                        </a>\n	                        <a class="btn-acciones btn btn-danger" href="javascript:void(0);" confirmation-click="eliminar(dato)" confirmation-needed="La Nómina de Pago será eliminada.Desea continuar?">\n	                            <i class="fa fa-remove"></i>\n	                        </a>\n	                    </td>\n	                </tr>\n	            </tbody>\n	        </table>\n        </div>\n    </div>\n</div>\n\n<script type="text/ng-template" id="myModalContent.html">\n    <div class="modal-header">\n        <h3 class="modal-title">Administración de Nóminas de Pago</h3>\n    </div>\n    <div class="modal-body">\n        <form class="form-horizontal" name="form" novalidate >\n            <div class="panel panel-default">\n                <div class="panel-heading">Datos de la Nómina de Pago</div>\n                <div class="panel-body">\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Nómina de Pago:</label>\n                        <div class="col-sm-6">\n                            <input class="form-control form-white" type="text"  ng-model="objeto.nomina" placeholder="Nombre de la Nómina de Pago" required />\n                        </div>\n                        <span ng-if="errores.nomina.length" class="text-danger">{{ errores.nomina[0] }}</span>\n                    </div>\n\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Fecha:</label>\n                        <div class="col-sm-3">\n                            <p class="input-group" style="margin:0px; padding:0px;">\n                                <input type="text"  uib-datepicker-popup="dd-MM-yyyy" name="fecha" ng-model="objeto.fecha" is-open="fechas[\'fecha\']" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" required/>\n                                <span class="input-group-btn ">\n                                    <button type="button" class="btn btn-primary" ng-click="openFecha(\'fecha\')"><i class="glyphicon glyphicon-calendar"></i></button>\n                                </span>\n                            </p>\n                        </div>\n                    </div>\n\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Banco:</label>\n                        <div class="col-sm-6">\n                            <select class="form-control form-white" ng-model="objeto.banco" ng-options="ban as ban.banco for ban in opciones.bancos" required ></select>\n                        </div>\n                    </div>\n                  \n                </div>\n            </div>\n        </form>\n    </div>\n    <div class="modal-footer">        \n        <button class="btn btn-default" ng-click="cancel()">Cancelar</button>\n        <button class="btn btn-primary" ng-disabled="form.$invalid" ng-click="guardar()">Guardar</button>\n    </div>\n</script>'),a.put("views/pago-anticipos.html",'<div class="header">\n    <h2>Pago de <b>Anticipos</b></h2>\n</div>\n\n<script type="text/ng-template" id="customTemplate.html">\n    <a style="cursor: pointer;">\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\n    </a>\n</script>\n\n<!-- /.row -->\n<div class="row">\n    <div class="col-md-12">\n        <div class="form-group">\n            \n            <label for="orden" class="control-label col-md-1">\n                Ordenar por:\n            </label>\n            <div class="col-md-3">\n                <select ng-model="orden" ng-init="orden=\'fecha\'" id="orden" class="form-control form-white">\n                    <option value="fecha">Fecha</option>\n                    <option value="tipo">Tipo Pago</option>\n                    <option value="proveedor">Razón Social</option>\n                    <option value="monto">Monto</option>\n                    <option value="observaciones">Observaciones</option>\n                    <option value="estado">Estado</option>\n                </select>\n            </div>\n        \n            <label for="filtro" class="col-md-1 control-label">Filtrar:</label>\n            <div class="col-md-4">\n              <input id="filtro" type="text" class="form-control form-white" ng-model="filtro">\n            </div>\n            \n            <div class="col-md-3" style="text-align:right; padding-right:0px">\n                <button ng-if="permisos.crear" class="btn btn-primary btn-md" ng-click="open({});">\n                    <i class="fa fa-plus"></i> Nuevo\n                </button>\n            </div>\n        </div>\n\n        <div class="form-group">\n\n	        <table class="table table-striped table-hover">\n	            <thead>\n	                <tr>\n	                    <th>#</th>\n	                    <th class="col-sm-1">Fecha</th>	    \n                        <th class="col-sm-1">Tipo Pago</th>  \n                        <th class="col-sm-3">Razon Social</th>  \n                        <th class="col-sm-1">Monto</th>      \n                        <th class="col-sm-3">Observaciones</th> \n                        <th class="col-sm-1">Estado</th>            \n	                    <th class="col-sm-2">Acciones</th>\n	                </tr>\n	            </thead>\n	            <tbody>\n	                <tr ng-repeat="dato in datos | orderBy:orden">\n	                    <td>{{ $index + 1 }}</td>\n	                    <td>{{ dato.fecha }}</td>\n                        <td>{{ dato.tipo }}</td>\n                        <td>{{ dato.proveedor }}</td>\n                        <td>{{ dato.monto | currency:"$":0 }}</td>\n                        <td>{{ dato.observaciones }}</td>    \n                        <td ng-class="{\'text-success\' : dato.estado == \'ASOCIADO\'}">{{ dato.estado }}</td>               \n	                    <td>\n	                        <a ng-if="permisos.editar" class="btn-acciones btn btn-default" href="javascript:void(0);" ng-click="editar(dato)" uib-tooltip-html="toolTipEdicion(dato.proveedor)">\n	                            <i class="fa fa-pencil"></i>\n	                        </a>\n	                        <a ng-if="permisos.eliminar" class="btn-acciones btn btn-danger" href="javascript:void(0);" confirmation-click="eliminar(dato)" confirmation-needed="El Pago Anticipado será eliminado.Desea continuar?">\n	                            <i class="fa fa-remove"></i>\n	                        </a>\n\n	                    </td>\n	                </tr>\n	            </tbody>\n	        </table>\n        </div>\n    </div>\n</div>\n\n<script type="text/ng-template" id="myModalContent.html">\n    <div class="modal-header">\n        <h3 class="modal-title">Registro de Pago de Anticipo</h3>\n    </div>\n    <div class="modal-body">\n        <form class="form-horizontal" name="form" novalidate >\n            <div class="panel panel-default">\n                <div class="panel-heading">Datos de Pago del Anticipo</div>\n                <div class="panel-body">\n                    <div class="form-group form-group-md required">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Tipo de Pago:</label>\n                        <div class="col-sm-5">\n                            <label>\n                                <input type="radio" ng-model="objeto.tipo" ng-value="2" icheck ng-change="resetForm()" />\n                                Proveedores\n                            </label>\n                            &nbsp;&nbsp;&nbsp;&nbsp;\n                            <label>\n                                <input type="radio" ng-model="objeto.tipo" ng-value="1" icheck ng-change="resetForm()" />\n                                Clientes\n                            </label>\n                        </div>\n                    </div>\n\n                    <div class="form-group required">\n                        <label class="col-sm-3 control-label" ng-if="objeto.tipo==2">Proveedor:</label>\n                        <label class="col-sm-3 control-label" ng-if="objeto.tipo==1">Cliente:</label>\n                        <div class="col-sm-9">\n                            <div class="col-sm-11" style="padding:0px;">\n                                <input type="text" ng-model="objeto.proveedor" placeholder="Buscar {{ objeto.tipo==2? \'Proveedor\' : \'Cliente\' }}" uib-typeahead="prov as prov.razonSocial for prov in getProveedores($viewValue)" typeahead-loading="proveedor" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="generarVistaComprobante();" ng-class="{\'inputLoading\' : proveedor}" />\n                            </div>\n                            <div class="col-sm-1">\n                                <i ng-show="objeto.proveedor.id" class="fa fa-check" style="color: #0a0;"></i>\n                            </div>                               \n                        </div> \n                    </div>\n\n                    <div class="form-group required">\n                        <label class="col-sm-3 control-label">Fecha:</label>\n                        <div class="col-sm-3">\n                            <p class="input-group" style="margin-bottom:0px;">\n                                <input type="text" name="fecha"  uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.fecha" is-open="fechas.fecha" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" ng-change="revisarFecha();" class="form-control form-white" required  />\n                                <span class="input-group-btn">\n                                    <button type="button" class="btn btn-primary" ng-click="openFecha(\'fecha\')" style="margin-bottom:0px;"><i class="glyphicon glyphicon-calendar"></i></button>\n                                </span>\n                            </p>\n                        </div>\n                        <div class="col-sm-5 text-danger" ng-show="form[\'fecha\'].$error.date">\n                            Fecha no Válida\n                        </div>\n                    </div>\n\n                    <div class="form-group required">\n                        <label class="col-sm-3 control-label">Monto:</label>\n                        <div class="col-sm-3">\n                            <input type="text" ng-model="objeto.total" name="total" ui-money-mask="0" class="form-control form-white" ng-blur="traspasarMontoTotal();" required />\n                        </div>\n                    </div>   \n\n                    <div class="form-group required">\n                        <label class="col-sm-3 control-label">Observaciones:</label>\n                        <div class="col-sm-8">\n                            <textarea ng-model="objeto.observaciones" class="form-control form-white" rows="2" required ></textarea>\n                        </div>\n                    </div>  \n\n                </div>\n            </div>\n\n            <div class="panel panel-success">\n                <div class="panel-heading">Medios de Pago del Anticipo</div>\n                <div class="panel-body"> \n                    <table class="table table-striped table-bordered">\n                        <tr>\n                            <th class="col-xs-3">Medio de Pago</th>\n                            <th class="col-xs-3">Cta Imputable</th>\n                            <th class="col-xs-4">Datos Medio de Pago</th>\n                            <th class="col-xs-2">Monto</th>\n                            <th>&nbsp;</th>\n                        </tr>\n                        <tr ng-repeat="pago in objeto.pagos">\n                            <td>\n                                <select ng-if="objeto.tipo==2" name="medio{{ $index }}" ng-model="pago.medio" ng-options="opc as opc.medio for opc in opciones.mediosPagoProveedores | filter : filtrarMedio" class="form-control form-white" ng-change="pago.cuenta=\'\';" required></select>\n\n                                <select ng-if="objeto.tipo==1" name="medio{{ $index }}" ng-model="pago.medio" ng-options="opc as opc.medio for opc in opciones.mediosPagoClientes | filter : filtrarMedio" class="form-control form-white" ng-change="pago.cuenta=\'\';" required></select>\n                            </td>\n                            <td>\n                                <select ng-if="pago.medio.id && !pago.cuenta.id" name="cuenta{{ $index }}" ng-model="pago.cuenta" ng-options="cuenta as cuenta.cuenta for cuenta in pago.medio.cuentas" class="form-control form-white" ng-change="generarVistaComprobante()" required ></select>\n\n                                <span ng-if="pago.cuenta.id">\n                                    {{ pago.cuenta.cuenta }}\n                                    <a href="javascript:void(0)" class="text-danger" ng-click="pago.cuenta=\'\';">\n                                        <i class="fa fa-remove"></i>\n                                    </a>\n                                    <br/>\n                                    {{ pago.cuenta.codigo }}\n                                </span>\n\n                            </td>\n                            <td>\n                                <div ng-if="pago.medio.tipo == 2 ">\n                                    <div ng-if="objeto.tipo == 1">\n                                        <strong>Banco:</strong>\n                                        <select ng-model="pago.datosMedio.banco"  name="banco{{ $index }}" ng-options="banco as banco.banco for banco in opciones.bancos" class="form-control form-white" required ></select>\n                                    </div>\n                                    <strong>N° Documento:</strong>\n                                    <input type="text" ng-model="pago.datosMedio.numero"  name="numero{{ $index }}" class="form-control form-white" required  />\n\n                                    <strong>Fecha:</strong>\n                                    <p class="input-group" style="margin:0px; padding:0px;">\n                                          <input type="text"  uib-datepicker-popup="dd-MM-yyyy" name="fecha{{ $index }}" ng-model="pago.datosMedio.fecha" is-open="fechas[\'fecha\'+$index]" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" required/>\n                                          <span class="input-group-btn ">\n                                                <button type="button" class="btn btn-primary" ng-click="openFecha(\'fecha\'+ $index)"><i class="glyphicon glyphicon-calendar"></i></button>\n                                          </span>\n                                    </p>\n                                </div>\n\n\n                                <div ng-if="pago.medio.tipo == 4 ">\n                                    \n\n                                    <strong>N° Transacción:</strong>\n                                    <input type="text" ng-model="pago.datosMedio.numero"  name="numero{{ $index }}" class="form-control form-white" required  />\n\n                                    <strong>Fecha:</strong>\n                                    <p class="input-group" style="margin:0px; padding:0px;">\n                                          <input type="text"  uib-datepicker-popup="dd-MM-yyyy" name="fecha{{ $index }}" ng-model="pago.datosMedio.fecha" is-open="fechas[\'fecha\'+$index]" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" required/>\n                                          <span class="input-group-btn ">\n                                                <button type="button" class="btn btn-primary" ng-click="openFecha(\'fecha\'+ $index)"><i class="glyphicon glyphicon-calendar"></i></button>\n                                          </span>\n                                    </p>\n\n                                </div>\n\n\n                                <div ng-if="pago.medio.tipo == 5 ">\n                                    <strong>Nómina de Pago:</strong>\n                                    <select  ng-if="!pago.datosMedio.nomina.id" ng-model="pago.datosMedio.nomina"  name="nomina{{ $index }}" ng-options="nomina as nomina.nomina for nomina in opciones.nominas" class="form-control form-white" required ></select>\n\n                                    <span ng-if="pago.datosMedio.nomina.id">\n                                        <br/>\n                                        {{ pago.datosMedio.nomina.nomina }}\n                                        <a href="javascript:void(0)" class="text-danger" ng-click="pago.datosMedio.nomina=\'\';">\n                                            <i class="fa fa-remove"></i>\n                                        </a>\n                                        <br/>\n                                        {{ pago.datosMedio.nomina.fecha | date:\'dd-MM-yyyy\' }}<br/>\n                                        {{ pago.datosMedio.nomina.banco }}\n                                    </span>\n\n\n                                </div>\n                            </td>\n                            <td>\n                                <input type="text" ng-model="pago.monto" class="form-control form-white" ui-money-mask="0" ng-change="sumarMontos();generarVistaComprobante();" required />\n                            </td>\n                            <td>\n                                <a href="javascript:void(0);" ng-show="objeto.pagos.length > 1" class="btn btn-danger btn-xs" ng-click="quitarMedioPago($index); sumarMontos(); generarVistaComprobante();">\n                                    <i class="fa fa-remove"></i>\n                                </a>\n                            </td>\n                        </tr>\n                        <tr>\n                            <td colspan="3"></td>\n                            <td style="text-align: right;" ng-class="{\'success\' : objeto.totalMonto == objeto.total, \'danger\' : objeto.totalMonto != objeto.total }">\n                            <strong>{{ objeto.totalMonto | currency:"$":0 }}</strong></td>\n                            <td ng-class="{\'success\' : objeto.totalMonto == objeto.total, \'danger\' : objeto.totalMonto != objeto.total }" style="text-align: center;">\n                                <i ng-show="objeto.totalMonto == objeto.total" class="fa fa-check"></i>\n                                <i ng-show="objeto.totalMonto != objeto.total" class="fa fa-remove"></i>\n                            </td>\n                        </tr>\n                    </table>\n                    <button class="btn btn-warning btn-sm" ng-click="agregarMedioPago()">\n                        <i class="fa fa-plus"></i> Agregar Medio de Pago\n                    </button>\n                </div>\n            </div>\n\n\n            <div class="panel panel-success" ng-init="colapsarVistaPrevia=true;">\n                <div class="panel-heading">\n                    Vista Previa del Comprobante\n                    <a href="javascript:void(0)" class="btn btn-xs btn-success" ng-click="colapsarVistaPrevia=true;" ng-show="!colapsarVistaPrevia">\n                        <i class="fa fa-eye-slash"></i> Ocultar\n                    </a>\n                    <a href="javascript:void(0)" class="btn btn-xs btn-success" ng-click="colapsarVistaPrevia=false;" ng-show="colapsarVistaPrevia">\n                        <i class="fa fa-eye"></i> Mostrar\n                    </a>\n                </div>\n                <div class="panel-body" ng-class="{\'collapse\' : colapsarVistaPrevia }">\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Tipo Comprobante:</label>\n                        <div class="col-sm-6">\n                            <span ng-if="objeto.tipo == 2">Egresos</span>\n                            <span ng-if="objeto.tipo == 1">Ingresos</span>\n                        </div>\n                    </div>\n\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Fecha Comprobante:</label>\n                        <div class="col-sm-6">\n                            {{ objeto.fecha | date:\'dd-MM-yyyy\' }}\n                        </div>\n                    </div>\n\n                    <div class="form-group form-group-md">\n                        <label class="col-sm-3 control-label" for="formGroupInputLarge">Número:</label>\n                        <div class="col-sm-6">\n                            Automático\n                        </div>\n                    </div>\n\n                    <table class="table table-striped table-bordered">\n                        <tr>\n                            <th class="col-xs-2">Cuenta</th>\n                            <th class="col-xs-2">Codigo</th>\n                            <th class="col-xs-4">Glosa</th>\n                            <th class="col-xs-2">Debe</th>\n                            <th class="col-xs-2">Haber</th>\n                        </tr>\n                        <tr ng-repeat="asiento in objeto.comprobanteContable">\n                            <td>{{ asiento.cuenta }}</td>\n                            <td>{{ asiento.codigo }}</td>\n                            <td>{{ asiento.glosa }}</td>\n                            <td class="text-right">{{ asiento.debe | currency:"$":0 }}</td>\n                            <td class="text-right">{{ asiento.haber | currency:"$":0 }}</td>\n                        </tr>\n                        <tr>\n                            <td colspan="3">&nbsp;</td>\n                            <td style="text-align: right;" ng-class="{\'success\' : objeto.totalDebe == objeto.totalHaber, \'danger\' : objeto.totalDebe != objeto.totalHaber }">\n                            <strong>{{ objeto.totalDebe | currency:"$":0 }}</strong></td>\n                            <td style="text-align: right;" ng-class="{\'success\' : objeto.totalDebe == objeto.totalHaber, \'danger\' : objeto.totalDebe != objeto.totalHaber }">\n                            <strong>{{ objeto.totalHaber | currency:"$":0 }}</strong></td>\n                        </tr>\n                    </table>\n                </div>\n            </div>\n        </form>\n    </div>\n    <div class="modal-footer">        \n        <button class="btn btn-default" ng-click="cancel()">Cancelar</button>\n        <button class="btn btn-primary" ng-disabled="form.$invalid || objeto.totalMonto != objeto.total" ng-click="guardar()">Guardar</button>\n    </div>\n</script>'),
a.put("views/pago-documentos.html",'<div class="header">\n    <h2>Registro de <b>Pago de Documentos</b></h2>\n</div>\n<script type="text/ng-template" id="customTemplate.html">\n    <a style="cursor: pointer;">\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\n    </a>\n</script>\n<div class="row">\n    <div class="col-md-12">     \n        <div class="row col-md-12">\n            <form class="form-horizontal" name="form" novalidate autocomplete="Off">\n                \n                <div class="panel panel-primary" ng-if="mostrarBuscador">\n                    <div class="panel-heading">\n                        Parámetros de Busqueda de Documentos\n                    </div>\n                    <div class="panel-body">\n                        <div class="form-group">\n                            <label class="col-sm-3 control-label">Tipo de Pago:</label>\n                            <div class="col-sm-9">\n                                <label>\n                                    <input type="radio" ng-model="objeto.tipoPago" ng-value="2" icheck>\n                                    Proveedores\n                                </label>\n                                &nbsp;&nbsp;&nbsp;&nbsp;\n                                <label>\n                                    <input type="radio" ng-model="objeto.tipoPago" ng-value="1" icheck>\n                                    Clientes\n                                </label>\n                                &nbsp;&nbsp;&nbsp;&nbsp;\n                                <label>\n                                    <input type="radio" ng-model="objeto.tipoPago" ng-value="3" icheck>\n                                    Boletas Honorarios\n                                </label>\n                            </div>\n                        </div>\n\n                        <div class="form-group">\n                            <label class="col-sm-3 control-label" ng-if="objeto.tipoPago==2">Proveedor:</label>\n                            <label class="col-sm-3 control-label" ng-if="objeto.tipoPago==1">Cliente:</label>\n                            <label class="col-sm-3 control-label" ng-if="objeto.tipoPago==3">Prestador de Servicios:</label>\n                            <div class="col-sm-6">\n                                <input type="text" ng-show="!objeto.proveedor.id" ng-model="objeto.proveedor" placeholder="Buscar {{ objeto.tipoPago==2? \'Proveedor\' : ( objeto.tipoPago==\'1\' ? \'Cliente\' : \'Prestador de Servicios\' ) }}" uib-typeahead="prov as prov.razonSocial for prov in getProveedores($viewValue)" typeahead-loading="proveedor" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" ng-class="{\'inputLoading\' : proveedor}">\n                                <b ng-show="objeto.proveedor.id">\n                                    {{ objeto.proveedor.razonSocial }}\n                                    <a href="javascript:void(0);" class="text-danger" ng-click="objeto.proveedor=\'\';">\n                                        <i class="fa fa-remove"></i>\n                                    </a>\n                                </b>\n                            </div>\n                            <div class="col-sm-3">\n                                * Dejar en blanco para buscar todos\n                            </div>                            \n                        </div>\n\n                        <div class="form-group">\n                            <label class="col-sm-3 control-label">Número Documento:</label>\n                            <div class="col-sm-2">\n                                 <input class="form-control form-white" type="text" ng-model="objeto.numero" ui-number-mask="0"> \n                            </div>\n                            <div class="col-sm-7">\n                                * Dejar en blanco para buscar todos\n                            </div> \n                        </div>\n\n                        <div class="form-group">\n                            <label class="col-sm-3 control-label">Establecer Periodo:</label>\n                            <div class="col-sm-5">\n                                <label>\n                                    <input type="radio" ng-model="objeto.fechas" ng-value="1" icheck>\n                                    Fecha\n                                </label>&nbsp;&nbsp;&nbsp;&nbsp;\n                                <label>\n                                    <input type="radio" ng-model="objeto.fechas" ng-value="2" icheck>\n                                    Rango Fechas\n                                </label>&nbsp;&nbsp;&nbsp;&nbsp;\n                                <label>\n                                    <input type="radio" ng-model="objeto.fechas" ng-value="3" icheck>\n                                    Mes\n                                </label>&nbsp;&nbsp;&nbsp;&nbsp;\n                                <label>\n                                    <input type="radio" ng-model="objeto.fechas" ng-value="4" icheck>\n                                    Rango Meses\n                                </label>                                \n                            </div>\n                        </div>\n                        \n\n                        <div class="form-group required" ng-if="objeto.fechas == 1">\n                            <label class="col-sm-3 control-label">Fecha:</label>\n                            <div class="col-sm-2">\n                                <p class="input-group" style="margin-bottom:0px">\n                                  <input type="text" name="fecha" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.fecha" is-open="fechas.fecha" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" regular-fecha required>\n                                  <span class="input-group-btn">\n                                    <button type="button" class="btn btn-primary" ng-click="open(\'fecha\')" style="margin-bottom:0px"><i class="glyphicon glyphicon-calendar"></i></button>\n                                  </span>\n                                </p>\n\n                            </div>\n                            <div class="col-sm-5 text-danger" ng-show="form[\'fecha\'].$error.date">\n                                Fecha no Válida\n                            </div>\n                        </div>\n\n\n\n                        <div class="form-group required" ng-if="objeto.fechas == 2">\n                            <label class="col-sm-3 control-label">Fecha Inicial:</label>\n                            <div class="col-sm-2">\n                                <p class="input-group" style="margin:0px; padding:0px">\n                                  <input type="text" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.inicio" is-open="fechas.fechaInicial" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" regular-fecha required>\n                                  <span class="input-group-btn">\n                                    <button type="button" class="btn btn-primary" ng-click="open(\'fechaInicial\')"><i class="glyphicon glyphicon-calendar"></i></button>\n                                  </span>\n                                </p>\n                            </div>\n                        </div>\n                        <div class="form-group required" ng-if="objeto.fechas == 2">\n                            <label class="col-sm-3 control-label">Fecha Final:</label>\n                            <div class="col-sm-2">\n                                <p class="input-group" style="margin:0px; padding:0px">\n                                  <input type="text" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.fin" is-open="fechas.fechaFinal" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" regular-fecha required>\n                                  <span class="input-group-btn">\n                                    <button type="button" class="btn btn-primary" ng-click="open(\'fechaFinal\')"><i class="glyphicon glyphicon-calendar"></i></button>\n                                  </span>\n                                </p>\n                            </div>\n                        </div>\n\n                        <div class="form-group required" ng-if="objeto.fechas == 3">\n                            <label class="col-sm-3 control-label">Mes:</label>\n                            <div class="col-sm-2">\n                                <select ng-model="objeto.mes" ng-options="mes as mes.mes for mes in constantes.MESES | filter:filtroMesFinal" class="form-control form-white" required>\n                                </select>\n                            </div>\n                            <div class="col-sm-1">\n                                <select ng-model="objeto.anio" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\n                                </select>\n                            </div>\n                        </div>\n\n                        <div class="form-group required" ng-if="objeto.fechas == 4">\n                            <label class="col-sm-3 control-label">Mes Inicial:</label>\n                            <div class="col-sm-2">\n                                <select ng-model="objeto.mesInicial" ng-options="mes as mes.mes for mes in constantes.MESES" class="form-control form-white" required>\n                                </select>\n                            </div>\n                            <div class="col-sm-1">\n                                <select ng-model="objeto.anioInicial" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\n                                </select>\n                            </div>\n                        </div>\n\n                        <div class="form-group required" ng-if="objeto.fechas == 4">\n                            <label class="col-sm-3 control-label">Mes Final:</label>\n                            <div class="col-sm-2">\n                                <select ng-model="objeto.mesFinal" ng-options="mes as mes.mes for mes in constantes.MESES | filter:filtroMesFinal" class="form-control form-white" required>\n                                </select>\n                            </div>\n                            <div class="col-sm-1">\n                                <select ng-model="objeto.anioFinal" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\n                                </select>\n                            </div>\n                        </div>\n\n                        <div class="form-group">\n                            <div class="col-sm-12" style="text-align:right">\n                                <button class="btn btn-default btn-md" ng-click="limpiarFormulario();">\n                                    <i class="fa fa-trash-o"></i> Limpiar\n                                </button>\n                                <button class="btn btn-primary btn-md" ng-click="buscarDocumentos();">\n                                    <i class="fa fa-search"></i> Buscar\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div ng-if="sinResultados">\n                    <div class="col-sm-12 text-danger" style="text-align: center">\n                        <big class="label label-danger" style="font-size: 15px">\n                        No se encontraron resultados con los parámetros ingresados.</big>\n\n                        <button ng-show="!mostrarBuscador" class="btn btn-default" ng-click="nuevaBusqueda();">\n                            <i class="fa fa-search"></i>\n                            Nueva Búsqueda\n                        </button>\n\n                    </div>\n                </div>\n\n                <div class="panel panel-success" ng-if="resultado.length > 0">\n                    <div class="panel-heading">\n                        <div class="row" style="margin: 0px">\n                            <div class="col-sm-8" style="margin: 0px; padding: 0px">Resultado de la Búsqueda</div>\n                            <div class="col-sm-4" style="margin: 0px; padding: 0px; text-align: right">\n                                <button class="btn btn-success btn-sm" ng-click="nuevaBusqueda();" style="margin-bottom: 0px">\n                                    <i class="fa fa-search"></i>\n                                    Nueva Búsqueda\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="panel-body">\n                        <span onclick="bajar()" class="ir-abajo icon-arrow-down"></span>\n                        <span onclick="subir()" class="ir-arriba icon-arrow-up"></span>\n\n                        <table class="table table-striped table-hover">\n                            <thead>\n                            <tr>\n                                <th>&nbsp;</th>\n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.tipoDoc" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.fecha" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.numero" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.rut" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.razonSocial" class="form-control form-white">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th style="padding: 1px">\n                                    <div class="prepend-icon col-sm-12">\n                                        <input type="text" ng-model="filtro.total" class="form-control form-white" ui-money-mask="0" ng-change="revisarFiltro(\'total\');">\n                                        <i class="fa fa-filter"></i>\n                                    </div>\n                                </th>\n                                <th>\n                                    &nbsp;\n                                </th>\n                            </tr>\n                            <tr>\n                                <th>#</th>\n                                <th class="col-sm-2">Tipo Documento</th>\n                                <th class="col-sm-1">Fecha</th>                                \n                                <th class="col-sm-1">Folio</th>\n                                <th class="col-sm-1">Rut</th>\n                                <th class="col-sm-2">\n                                    {{ objeto.tipoPago == \'3\' ? \'Nombre\' : \'Razón Social\' }}\n                                </th>                                \n                                <th class="col-sm-2">Total</th>\n                                <th class="col-sm-3">Acción</th>\n                            </tr>\n                            </thead>\n                            <tbody>\n                                <tr ng-repeat="dato in resultado | filter:filtro">\n                                    <td>{{ $index + 1 }}</td>\n                                    <td>{{ dato.tipoDoc }}</td>\n                                    <td>{{ dato.fecha | date:\'dd-MM-yyyy\' }}</td>                                    \n                                    <td>{{ dato.numero }}</td>\n                                    <td>{{ dato.rut }}</td>\n                                    <td>{{ dato.razonSocial }}</td>                                    \n                                    <td>\n                                        <span ng-if="[61,60].indexOf(dato.tipoDocCod) >= 0">-</span>\n                                        <span ng-if="dato.pagos.length == 0">{{ dato.total | currency:"$":0 }}</span>\n                                        \n                                        <div ng-if="dato.pagos.length > 0" class="bg-warning">\n                                            Monto Original:<br>\n                                            <span ng-if="dato.pagos.length > 0">{{ dato.original | currency:"$":0 }}</span>\n                                            <span><br>Abonos:</span>\n                                                <span ng-repeat="pago in dato.pagos">\n                                                    <br>{{ pago.monto | currency:"$":0 }}\n                                                </span>\n                                            <br>Total Abonos:<br>\n                                            <b>\n                                                {{ dato.totalPagos  | currency:"$":0  }}\n                                            </b>\n                                            <br>Total Pendiente:<br>\n                                            <b>\n                                                {{ dato.total  | currency:"$":0  }}\n                                            </b>\n                                        </div>                                        \n                                    </td>\n                                    <td>\n                                        <label>\n                                            <input type="radio" ng-model="dato.pagar" ng-init="!dato.pagar? dato.pagar=0 : dato.pagar = dato.pagar" ng-change="calcularTotalesOperacion(); calcularMediosPagosSeleccion();" ng-value="0" icheck>\n                                            Omitir\n                                        </label>&nbsp;&nbsp;\n                                        <label>\n                                            <input type="radio" ng-model="dato.pagar" ng-value="1" ng-change="calcularTotalesOperacion(); calcularMediosPagosSeleccion();" icheck>\n                                            Pagar\n                                        </label>&nbsp;&nbsp;\n                                        <label>\n                                            <input type="radio" ng-model="dato.pagar" ng-value="2" ng-change="calcularTotalesOperacion(); calcularMediosPagosSeleccion();" icheck>\n                                            Abonar\n                                        </label>\n                                        <div ng-if="dato.pagar==2">\n                                            <div class="form-group required">\n                                                <label class="col-sm-4 control-label">Monto:</label>\n                                                <div class="col-sm-8">\n                                                    <input type="text" ng-model="dato.abono" name="abono{{ $index }}" ui-money-mask="0" class="form-control form-white" max="dato.total-1" ng-change="calcularTotalesOperacion();">\n                                                    <span class="text-danger" ng-if="form[\'abono\'  + $index].$error.max"><strong>El monto debe ser menor al total</strong></span>\n                                                </div>\n                                            </div>                                            \n                                        </div>\n                                    </td>\n                                </tr>\n                                <tr class="warning">\n                                    <td colspan="7" style="text-align: right"><label>Marcar Todos:</label></td>\n                                    <td>\n                                        <a href="javascript:void(0);" ng-click="marcarTodos(0);">\n                                            <i class="fa fa-check"></i>Omitir\n                                        </a>&nbsp;&nbsp;\n                                        <a href="javascript:void(0);" ng-click="marcarTodos(1);">\n                                            <i class="fa fa-check"></i>Pagar\n                                        </a>&nbsp;&nbsp;\n                                        <a href="javascript:void(0);" ng-click="marcarTodos(2);">\n                                            <i class="fa fa-check"></i>Abonar\n                                        </a>\n                                    </td>\n                                </tr>\n                            </tbody>\n                        </table>\n                        <div class="form-group">\n                            <label class="col-sm-3 control-label">Total Pagar:</label>\n                            <div class="col-sm-2">\n                                <strong>\n                                {{ resumen.totalPagar | currency:"$":0 }}\n                                </strong>\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class="col-sm-3 control-label">Total Abonar:</label>\n                            <div class="col-sm-2">\n                                <strong>\n                                {{ resumen.totalAbonar | currency:"$":0 }}\n                                </strong>\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class="col-sm-3 control-label">Medio de Pago Habilitado:</label>\n                            <div class="col-sm-2">\n                                <ul>\n                                    <li ng-repeat="medio in resumen.mediosPago">{{ medio.medio }}</li>\n                                </ul>\n                            </div>\n                        </div>\n                        \n                        <button class="btn btn-default" ng-click="nuevaBusqueda();">\n                            <i class="fa fa-search"></i>\n                            Nueva Búsqueda\n                        </button>\n\n                        <button class="btn btn-primary" ng-click="openGestionPago()" id="scrollToHere">\n                            <i class="fa fa-wrench"></i> Pagar / Abonar documentos\n                        </button>\n\n                    </div>\n                </div>\n\n            </form>\n        </div>\n    </div>\n</div>\n<script type="text/javascript">\n    function bajar(){\n        $(\'html,body\').animate({\n            scrollTop: $("#scrollToHere").offset().top\n        }, 500);\n    }\n\n    function subir(){\n        $(\'html,body\').animate({\n            scrollTop: \'0px\'\n        }, 500);\n    }\n\n    $(window).scroll(function () {\n        if ($(this).scrollTop() > 200) {\n            $(\'.ir-arriba\').fadeIn();\n        }\n        else {\n            $(\'.ir-arriba\').fadeOut();\n        }\n\n        if ($(this).scrollTop() < $(document).height()-$(window).height() ) {\n            $(\'.ir-abajo\').fadeIn();\n        }\n        else {\n            $(\'.ir-abajo\').fadeOut();\n        }\n    });\n    $(\'.ir-arriba\').fadeOut();\n</script>'),a.put("views/parametros-sistema.html",'<div class="header">\n    <h2>Configuración de <b>Parámetros y Variables</b></h2>\n</div>\n\n<script type="text/ng-template" id="customTemplate.html">\n    <a style="cursor: pointer;">\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\n    </a>\n</script>\n\n\n<div class="row">\n    <div class="col-md-12">        \n        <div class="form-group">\n            <div class="form-group">\n                <ul class="nav nav-pills">\n                      <li role="presentation" ng-class="{\'active\' : panel==\'plan_cuentas\' }"><a href="javascript:void(0)" ng-click="panel=\'plan_cuentas\';">Plan de Cuentas</a></li>\n                      <li role="presentation" ng-class="{\'active\' : panel==\'control_cierre\' }"><a href="javascript:void(0)" ng-click="panel=\'control_cierre\';">Control de Cierre</a></li>\n                      <li role="presentation" ng-class="{\'active\' : panel==\'importacion_libros\' }"><a href="javascript:void(0)" ng-click="panel=\'importacion_libros\';">Importación de Libros</a></li>\n                      <li role="presentation" ng-class="{\'active\' : panel==\'tesoreria\' }"><a href="javascript:void(0)" ng-click="panel=\'tesoreria\';">Pago de Documentos</a></li>\n                      <li role="presentation" ng-class="{\'active\' : panel==\'activosFijos\' }"><a href="javascript:void(0)" ng-click="panel=\'activosFijos\';">Activos Fijos</a></li>\n                      <li role="presentation" ng-class="{\'active\' : panel==\'indicadoresEconomicos\' }"><a href="javascript:void(0)" ng-click="panel=\'indicadoresEconomicos\';">Indicadores Económicos</a></li>\n                </ul>\n            </div>\n\n            <div ng-show="panel==\'plan_cuentas\'">\n            <h3><strong>Parámetros del Plan de Cuentas</strong></h3>\n                <div class="panel panel-success">\n                    <div class="panel-heading">Plan de Cuentas</div>\n                    <div class="panel-body form-horizontal">\n                        <div class="form-group">\n                            <label class="form-label col-sm-2">Nivel de Cuentas</label>\n                            <div class="col-sm-1">\n                                <select ng-model="objeto.plan.niveles" ng-options="niv for niv in niveles" class="form-control form-white" ng-change="crearNiveles()"></select>\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class="form-label col-sm-2">Digitos de Código por Nivel</label>\n                            <div class="col-sm-{{ objeto.plan.niveles }}">\n                                <table class="table table-bordered">\n                                    <tr class="bg-primary">\n                                        <th>Nivel:</th>\n                                        <th ng-repeat="nivel in objeto.plan.codigos" style="text-align: center">{{ nivel.nivel }}</th>\n                                    </tr>\n\n                                    <tr>\n                                        <th>Digitos</th>\n                                        <td ng-repeat="nivel in objeto.plan.codigos">\n                                            <select ng-model="nivel.digitos" ng-options="dig for dig in digitos" ng-change="vistaPreviaCodigo()" class="form-control form-white"></select>\n                                        </td>\n                                    </tr>\n                                </table>\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class="form-label col-sm-2">Vista Previa Código:</label>\n                            <div class="col-sm-2">\n                                <b>\n                                {{ vista.codigo }}\n                                </b>\n                            </div>\n                        </div>\n                        <div class="col-sm-12" style="text-align: right">\n                            <button class="btn btn-success btn-md" ng-click="guardarPlanCuentas();">\n                                <i class="fa fa-floppy-o"></i> \n                                Grabar\n                            </button>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="panel panel-primary">\n                    <div class="panel-heading">Cuentas por Defecto</div>\n                    <div class="panel-body form-horizontal">\n                        <div class="col-sm-12">\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Proveedores</label>\n                                <div class="col-sm-6">\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasClienteProveedor.proveedores" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="proveedores" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="proveedores" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasClienteProveedor.proveedores.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentasClienteProveedor\', \'proveedores\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Clientes</label>\n                                <div class="col-sm-6">\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasClienteProveedor.clientes" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="clientes" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="clientes" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasClienteProveedor.clientes.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentasClienteProveedor\', \'clientes\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n\n\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Anticipo Proveedores</label>\n                                <div class="col-sm-6">\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasClienteProveedor.proveedoresAnticipo" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="proveedoresAnticipo" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="proveedoresAnticipo" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasClienteProveedor.proveedoresAnticipo.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentasClienteProveedor\', \'proveedoresAnticipo\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Anticipo Clientes</label>\n                                <div class="col-sm-6">\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasClienteProveedor.clientesAnticipo" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="clientesAnticipo" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="clientesAnticipo" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasClienteProveedor.clientesAnticipo.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentasClienteProveedor\', \'clientesAnticipo\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n                           \n                        </div>\n                        <div class="col-sm-12" style="text-align: right">\n                            <button class="btn btn-primary btn-md" ng-click="guardarCuentasClientesProveedores();">\n                                <i class="fa fa-floppy-o"></i> \n                                Grabar\n                            </button>\n                        </div>\n                    </div>\n                </div>\n\n\n                <div class="panel panel-success">\n                    <div class="panel-heading">Cuentas de Ajustes</div>\n                    <div class="panel-body form-horizontal">\n                        <div class="col-sm-12">\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Activo fijo</label>\n                                <div class="col-sm-6">\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasAjustes.activoFijo" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="activoFijo" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="activoFijo" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasAjustes.activoFijo.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentasAjustes\', \'activoFijo\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Retiros</label>\n                                <div class="col-sm-6">\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasAjustes.retiros" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="retiros" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="retiros" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasAjustes.retiros.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentasAjustes\', \'retiros\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Estado de Resultado</label>\n                                <div class="col-sm-6">\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasAjustes.estadoResultado" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estadoResult" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="estadoResult" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasAjustes.estadoResultado.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta(  \'cuentasAjustes\', \'estadoResultado\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="col-sm-12" style="text-align: right">\n                            <button class="btn btn-success btn-md" ng-click="guardarCuentasAjustes();">\n                                <i class="fa fa-floppy-o"></i> \n                                Grabar\n                            </button>\n                        </div>\n                    </div>\n                </div>\n\n            </div>\n\n\n\n            <div ng-show="panel==\'control_cierre\'">\n                <h3><strong>Control de Cierre</strong></h3>\n                <div class="panel panel-success">\n                    <div class="panel-heading">Control de Cierre Mensual</div>\n                    <div class="panel-body form-horizontal">\n                        <div class="col-sm-12">\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Año:</label>\n                                <div class="col-sm-2">\n                                    <select ng-model="objeto.controlCierres.anio" class="form-control form-white" ng-options="anio as anio for anio in anios" ng-change="cargarCierreMensual();"></select>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Control Mensual:</label>\n                                <div class="col-sm-3">\n                                    <table class="table table-striped table-bordered">\n                                        <tr>\n                                            <th class="col-sm-4">Mes</th>\n                                            <th class="col-sm-8">Estado</th>\n                                        </tr>\n                                        <tr ng-repeat="mes in constantes.MESES | limitTo:6">\n                                            <td>{{ mes.mes }} {{ objeto.controlCierres.anio }}</td>\n                                            <td>\n                                                <label class="switch switch-green">\n                                                    <input class="switch-input" ng-model="objeto.controlCierres.meses[mes.id]" type="checkbox">\n                                                    <span class="switch-label" data-on="" data-off=""></span>\n                                                    <span class="switch-handle"></span>\n                                                </label>&nbsp;\n                                                <span ng-show="objeto.controlCierres.meses[mes.id]" class="text-success"><strong>ACTIVO</strong></span>\n                                                <span ng-show="!objeto.controlCierres.meses[mes.id]" class="text-danger"><strong>BLOQUEADO</strong></span>\n                                            </td>\n                                        </tr>\n                                    </table>\n                                </div>\n\n                                <div class="col-sm-3">\n                                    <table class="table table-striped table-bordered">\n                                        <tr>\n                                            <th class="col-sm-4">Mes</th>\n                                            <th class="col-sm-8">Estado</th>\n                                        </tr>\n                                        <tr ng-repeat="mes in constantes.MESES | limitTo:-6">\n                                            <td>{{ mes.mes }} {{ objeto.controlCierres.anio }}</td>\n                                            <td>\n                                                <label class="switch switch-green">\n                                                    <input class="switch-input" ng-model="objeto.controlCierres.meses[mes.id]" type="checkbox">\n                                                    <span class="switch-label" data-on="" data-off=""></span>\n                                                    <span class="switch-handle"></span>\n                                                </label>&nbsp;\n                                                <span ng-show="objeto.controlCierres.meses[mes.id]" class="text-success"><strong>ACTIVO</strong></span>\n                                                <span ng-show="!objeto.controlCierres.meses[mes.id]" class="text-danger"><strong>BLOQUEADO</strong></span>\n                                            </td>\n                                        </tr>\n                                    </table>\n                                </div>\n                            </div>\n                            \n                            <div class="col-sm-12" style="text-align: right">\n                                <button class="btn btn-success btn-md" ng-click="guardarControlCierreMensual();">\n                                    <i class="fa fa-floppy-o"></i> \n                                    Grabar\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n\n            <div ng-show="panel==\'importacion_libros\'">\n            <h3><strong>Parámetros para la Importación de Libros</strong></h3>\n                <div class="panel panel-success">\n                    <div class="panel-heading">Cuentas por defecto en Importación de Libro de Compra</div>\n                    <div class="panel-body form-horizontal">\n                        <div class="col-sm-12">\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Monto Neto</label>\n                                <div class="col-sm-6">\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasLibroCompra.neto" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="neto" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="neto" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasLibroCompra.neto.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentasLibroCompra\', \'neto\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Monto Exento</label>\n                                <div class="col-sm-6">\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasLibroCompra.exento" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="exento" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="exento" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasLibroCompra.exento.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentasLibroCompra\', \'exento\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Monto IVA</label>\n                                <div class="col-sm-6">\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasLibroCompra.iva" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="iva" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="iva" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasLibroCompra.iva.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentasLibroCompra\', \'iva\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Monto Otros Impuestos</label>\n                                <div class="col-sm-6">\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasLibroCompra.otrosImp" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="otrosImp" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="otrosImp" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasLibroCompra.otrosImp.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentasLibroCompra\', \'otrosImp\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Monto Sin Credito</label>\n                                <div class="col-sm-6">\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasLibroCompra.sinCredito" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="sinCredito" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="sinCredito" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasLibroCompra.sinCredito.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentasLibroCompra\', \'sinCredito\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Monto Total</label>\n                                <div class="col-sm-6">\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasLibroCompra.total" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="total" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="total" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasLibroCompra.total.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentasLibroCompra\', \'total\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Cuenta de Ajuste</label>\n                                <div class="col-sm-6">\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasLibroCompra.ajuste" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="ajuste" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="ajuste" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasLibroCompra.ajuste.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentasLibroCompra\', \'ajuste\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n\n                        </div>\n                        <div class="col-sm-12" style="text-align: right">\n                            <button class="btn btn-success btn-md" ng-click="guardarCuentasLibroCompra();">\n                                <i class="fa fa-floppy-o"></i> \n                                Grabar\n                            </button>\n                        </div>\n                    </div>\n                </div>\n\n\n                <div class="panel panel-primary">\n                    <div class="panel-heading">Cuentas por defecto en Importación de Libro de Venta</div>\n                    <div class="panel-body form-horizontal">\n                        <div class="col-sm-12">\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Monto Neto</label>\n                                <div class="col-sm-6">\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasLibroVenta.neto" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="VentaNeto" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="VentaNeto" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasLibroVenta.neto.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentasLibroVenta\', \'neto\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Monto Exento</label>\n                                <div class="col-sm-6">\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasLibroVenta.exento" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="VentaExento" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="VentaExento" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasLibroVenta.exento.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentasLibroVenta\', \'exento\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Monto IVA</label>\n                                <div class="col-sm-6">\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasLibroVenta.iva" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="VentaIva" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="VentaIva" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasLibroVenta.iva.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentasLibroVenta\', \'iva\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Monto Otros Impuestos</label>\n                                <div class="col-sm-6">\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasLibroVenta.otrosImp" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="VentaOtrosImp" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="VentaOtrosImp" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasLibroVenta.otrosImp.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentasLibroVenta\', \'otrosImp\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Monto Sin Credito</label>\n                                <div class="col-sm-6">\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasLibroVenta.sinCredito" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="VentaSinCredito" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="VentaSinCredito" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasLibroVenta.sinCredito.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentasLibroVenta\', \'sinCredito\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Monto Total</label>\n                                <div class="col-sm-6">\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasLibroVenta.total" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="VentaTotal" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="VentaTotal" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasLibroVenta.total.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentasLibroVenta\', \'total\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Cuenta de Ajuste</label>\n                                <div class="col-sm-6">\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasLibroVenta.ajuste" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="VentaAjuste" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="VentaAjuste" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasLibroVenta.ajuste.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentasLibroVenta\', \'ajuste\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n\n                        </div>\n                        <div class="col-sm-12" style="text-align: right">\n                            <button class="btn btn-primary btn-md" ng-click="guardarCuentasLibroVenta();">\n                                <i class="fa fa-floppy-o"></i> \n                                Grabar\n                            </button>\n                        </div>\n                    </div>\n                </div>\n\n\n                <div class="panel panel-success">\n\n                    <div class="panel-heading">Cuentas por defecto en Importación de Libro de Boletas</div>\n                    <div class="panel-body form-horizontal">\n                        <div class="col-sm-12">\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Monto Neto</label>\n                                <div class="col-sm-6">\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasLibroBoleta.neto" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="BoletaNeto" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="BoletaNeto" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasLibroBoleta.neto.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentasLibroBoleta\', \'neto\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Monto Exento</label>\n                                <div class="col-sm-6">\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasLibroBoleta.exento" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="BoletaExento" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="BoletaExento" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasLibroBoleta.exento.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentasLibroBoleta\', \'exento\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Monto IVA</label>\n                                <div class="col-sm-6">\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasLibroBoleta.iva" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="BoletaIva" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="BoletaIva" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasLibroBoleta.iva.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentasLibroBoleta\', \'iva\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>                       \n\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Monto Total</label>\n                                <div class="col-sm-6">\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasLibroBoleta.total" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="BoletaTotal" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="BoletaTotal" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasLibroBoleta.total.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentasLibroBoleta\', \'total\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n\n\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Cuenta de Ajuste</label>\n                                <div class="col-sm-6">\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasLibroBoleta.ajuste" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="BoletaAjuste" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="BoletaAjuste" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasLibroBoleta.ajuste.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentasLibroBoleta\', \'ajuste\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n\n                        </div>\n                        <div class="col-sm-12" style="text-align: right">\n                            <button class="btn btn-success btn-md" ng-click="guardarCuentasLibroBoleta();">\n                                <i class="fa fa-floppy-o"></i> \n                                Grabar\n                            </button>\n                        </div>\n                    </div>\n                </div>\n\n\n\n                <div class="panel panel-primary">\n                    <div class="panel-heading">Cuentas por Defecto Boleta de Honorarios</div>\n                    <div class="panel-body form-horizontal">\n                        <div class="col-sm-12">\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Monto Total</label>\n                                <div class="col-sm-6">\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasBoletaHonorarios.total" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="boletaTotal" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="boletaTotal" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasBoletaHonorarios.total.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentasBoletaHonorarios\', \'total\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Retención 10%</label>\n                                <div class="col-sm-6">\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasBoletaHonorarios.retencion" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="boletaRetencion" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="boletaRetencion" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasBoletaHonorarios.retencion.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentasBoletaHonorarios\', \'retencion\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Liquido</label>\n                                <div class="col-sm-6">\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasBoletaHonorarios.liquido" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="boletaLiquido" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="boletaLiquido" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasBoletaHonorarios.liquido.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta( \'cuentasBoletaHonorarios\', \'liquido\' )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n                           \n                        </div>\n                        <div class="col-sm-12" style="text-align: right">\n                            <button class="btn btn-primary btn-md" ng-click="guardarCuentasBoletaHonorarios();">\n                                <i class="fa fa-floppy-o"></i> \n                                Grabar\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div ng-show="panel==\'tesoreria\'">\n                <h3><strong>Parámetros para el Pago de Documentos</strong></h3>\n                <div class="panel panel-success">\n                    <div class="panel-heading">Cuentas habilitadas para el Pago de Clientes y Proveedores </div>\n                    <div class="panel-body form-horizontal">\n                        <div class="col-sm-12">\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Pago de Clientes:</label>\n                                <div class="col-sm-6">\n                                    <table class="table table-striped">\n                                        <tr ng-repeat="cuentaCli in objeto.cuentasPagoClientes">\n                                            <td>\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="cuentaCli.cuenta" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="cuentaCli[$index]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="cuentaCli[$index]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="cuentaCli.cuenta.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-sm btn-primary" style="margin-right:1px" ng-click="buscarCuenta( \'cuentasPagoClientes\', $index, true )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                    <a href="javascript:void(0);" class="btn btn-danger btn-sm" style="margin-left:1px" ng-click="quitarCuenta(\'cuentasPagoClientes\', $index)">\n                                                        <i class="fa fa-remove"></i>\n                                                    </a>\n                                                </div>\n                                            </td>\n                                        </tr>\n                                    </table>\n                                    <button class="btn btn-warning btn-sm" ng-click="agregarCuenta(\'cuentasPagoClientes\')">\n                                        <i class="fa fa-plus"></i> Agregar\n                                    </button>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <div class="col-sm-12">\n                                    <hr>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Pago de Proveedores:</label>\n                                <div class="col-sm-6">\n                                    <table class="table table-striped">\n                                        <tr ng-repeat="cuentaProv in objeto.cuentasPagoProveedores">\n                                            <td>\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="cuentaProv.cuenta" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="cuentaProv[$index]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="cuentaProv[$index]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="cuentaProv.cuenta.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-sm btn-primary" style="margin-right:1px" ng-click="buscarCuenta( \'cuentasPagoProveedores\', $index, true )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n\n                                                    <a href="javascript:void(0);" class="btn btn-danger btn-sm" style="margin-left:1px" ng-click="quitarCuenta(\'cuentasPagoProveedores\', $index)">\n                                                        <i class="fa fa-remove"></i>\n                                                    </a>\n\n                                                </div>\n                                            </td>\n                                        </tr>\n                                    </table>\n                                    <button class="btn btn-warning btn-sm" ng-click="agregarCuenta(\'cuentasPagoProveedores\')">\n                                        <i class="fa fa-plus"></i> Agregar\n                                    </button>\n                                </div>\n                            </div>\n                           \n                        </div>\n                        <div class="col-sm-12" style="text-align: right">\n                            <button class="btn btn-success btn-md" ng-click="guardarCuentasPagoClienteProveedor();">\n                                <i class="fa fa-floppy-o"></i> \n                                Grabar\n                            </button>\n                        </div>\n                    </div>\n                </div>\n\n\n\n\n                <div class="panel panel-primary">\n                    <div class="panel-heading">Cuentas habilitadas para el Depósito de Cheques de Pago Clientes</div>\n                    <div class="panel-body form-horizontal">\n                        <div class="col-sm-12">\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Cuentas Depósito:</label>\n                                <div class="col-sm-6">\n                                    <table class="table table-striped">\n                                        <tr ng-repeat="cuentaCli in objeto.cuentasDepositoPagoClientes">\n                                            <td>\n                                                <div ng-show="!cuentaCli.cuenta.id">\n                                                    <div class="col-sm-9" style="padding:0px">\n                                                        <input type="text" ng-model="cuentaCli.cuenta" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="cuentaCli[$index]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                                    </div>\n                                                    <div class="col-sm-3">\n                                                        <i ng-show="cuentaCli[$index]" class="glyphicon glyphicon-refresh"></i>\n                                                        <i ng-show="cuentaCli.cuenta.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                        <button class="btn btn-sm btn-primary" style="margin-right:1px" ng-click="buscarCuenta( \'cuentasPagoClientes\', $index, true )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                        <a href="javascript:void(0);" class="btn btn-danger btn-sm" style="margin-left:1px" ng-click="quitarCuenta(\'cuentasDepositoPagoClientes\', $index)">\n                                                            <i class="fa fa-remove"></i>\n                                                        </a>\n                                                    </div>\n                                                </div>\n                                                <div ng-show="cuentaCli.cuenta.id">\n                                                    {{ cuentaCli.cuenta.codigo }} | {{ cuentaCli.cuenta.cuenta }}\n                                                    <a href="javascript:void(0);" ng-click="cuentaCli.cuenta=\'\';" class="text-danger">\n                                                        <i class="fa fa-remove"></i>\n                                                    </a>\n                                                </div>\n                                            </td>\n                                        </tr>\n                                    </table>\n                                    <button class="btn btn-warning btn-sm" ng-click="agregarCuenta(\'cuentasDepositoPagoClientes\')">\n                                        <i class="fa fa-plus"></i> Agregar\n                                    </button>\n                                </div>\n                            </div>                            \n                           \n                        </div>\n                        <div class="col-sm-12" style="text-align: right">\n                            <button class="btn btn-primary btn-md" ng-click="guardarCuentasDepositoPagoCliente();">\n                                <i class="fa fa-floppy-o"></i> \n                                Grabar\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n\n\n\n            <div ng-show="panel==\'activosFijos\'">\n                <h3><strong>Parámetros para el Ingreso y Depreciación de Activos Fijos</strong></h3>\n                <div class="panel panel-success">\n                    <div class="panel-heading">Configuración del proceso de depreciación</div>\n                    <div class="panel-body form-horizontal">\n                        <div class="col-sm-12">\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Periodo de Depreciación:</label>\n                                <div class="col-sm-6">\n                                    <label>\n                                        <input type="radio" ng-model="objeto.configuracionActivosFijos.periodo" ng-value="1" icheck> Anual\n                                    </label>&nbsp;&nbsp;&nbsp;\n\n                                    <label>\n                                        <input type="radio" ng-model="objeto.configuracionActivosFijos.periodo" ng-value="2" icheck> Mensual\n                                    </label>\n                                </div>\n                            </div>\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Método de Depreciación:</label>\n                                <div class="col-sm-6">\n                                    <label>\n                                        <input type="radio" ng-model="objeto.configuracionActivosFijos.metodo" ng-value="1" icheck> Normal\n                                    </label>&nbsp;&nbsp;&nbsp;\n\n                                    <label>\n                                        <input type="radio" ng-model="objeto.configuracionActivosFijos.metodo" ng-value="2" icheck> Acelerada\n                                    </label>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class="col-sm-12" style="text-align: right">\n                            <button class="btn btn-success btn-md" ng-click="guardarConfiguracionDepreciacion();">\n                                <i class="fa fa-floppy-o"></i> \n                                Grabar\n                            </button>\n                        </div>\n                    </div>\n                </div>\n                <div class="panel panel-primary">\n                    <div class="panel-heading">Cuentas asignadas al proceso de depreciación</div>\n                    <div class="panel-body form-horizontal">\n                        <div class="col-sm-12">\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Corrección Monetaria Saldo Deudor:</label>\n                                <div class="col-sm-6">\n                                    \n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasActivosFijos.correccionMonetariaDeudor" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="correccionMonetariaDeudor" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="correccionMonetariaDeudor" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasActivosFijos.correccionMonetariaDeudor.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" style="margin-right:1px" ng-click="buscarCuenta( \'cuentasActivosFijos\', \'correccionMonetariaDeudor\', false )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="col-sm-12">\n                            <div class="form-group">\n                                <label class="form-label col-sm-2">Corrección Monetaria Saldo Acreedor:</label>\n                                <div class="col-sm-6">\n                                    \n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input type="text" ng-model="objeto.cuentasActivosFijos.correccionMonetariaAcreedor" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="correccionMonetariaAcreedor" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                    </div>\n                                    <div class="col-sm-3">\n                                        <i ng-show="correccionMonetariaAcreedor" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="objeto.cuentasActivosFijos.correccionMonetariaAcreedor.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" style="margin-right:1px" ng-click="buscarCuenta( \'cuentasActivosFijos\', \'correccionMonetariaAcreedor\', false )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="col-sm-12" style="text-align: right">\n                            <button class="btn btn-primary btn-md" ng-click="guardarCuentasActivosFijos();">\n                                <i class="fa fa-floppy-o"></i> \n                                Grabar\n                            </button>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="panel panel-success">\n                    <div class="panel-heading">Cuentas por defecto para Ingreso de Bienes Fijos</div>\n                    <div class="panel-body form-horizontal">\n                        <div class="col-sm-12">\n                            <div class="form-group">\n                                <form name="formActivoFijo" novalidate autocomplete="Off">\n                                    <table class="table table-striped">\n                                        <tr>\n                                            <th class="col-sm-3">Clasificación Activo Fijo</th>\n                                            <th class="col-sm-3">Cuenta Activo Fijo</th>\n                                            <th class="col-sm-3">Cuenta Dep. Acumulada</th>\n                                            <th class="col-sm-3">Cuenta Dep. del Ejercicio</th>\n                                            <th></th>\n                                        </tr>\n                                        <tr ng-repeat="activoFijo in objeto.cuentasDefectoActivosFijos">\n                                            <td>\n                                                <div class="col-sm-9" style="padding:0px" ng-if="!activoFijo.activo.id">\n                                                    <input type="text" ng-model="activoFijo.activo" placeholder="Buscar Clasificación Activo Fijo" uib-typeahead="act as act.activoFijo for act in getActivosFijosTabla($viewValue)" typeahead-loading="estadosMntNeto[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-on-select="establecerAnioDep(activoFijo)" typeahead-append-to-body="true" required>\n                                                </div>\n                                                <div class="col-sm-3" ng-if="!activoFijo.activo.id">\n                                                    <i ng-show="estadosMntNeto[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                                    <button class="btn btn-xs btn-primary" ng-click="buscarActivoFijoSII($index)" tooltip="Buscar Activo Fijo en Tabla SII"><i class="fa fa-search"></i></button>\n                                                </div>\n                                                <div ng-if="activoFijo.activo.id">\n                                                    {{\n                                                        activoFijo.activo.activoFijo\n                                                    }}\n                                                    <a href="javascript:void(0);" ng-click="activoFijo.activo=\'\'" class="text-danger">\n                                                        <i class="fa fa-remove"></i>\n                                                    </a><br>\n                                                    <span class="text-primary">Vida Util Normal: <strong>{{ activoFijo.activo.vidaUtilNormal }}</strong></span><br>\n                                                    <span class="text-danger">Depreciación Acelerada: <strong>{{ activoFijo.activo.depreciacionAcelerada }}</strong></span>\n                                                </div>\n                                            </td>\n                                            <td>\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="activoFijo.cuenta" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="activoFijo[$index]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="activoFijo[$index]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="activoFijo.cuenta.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-sm btn-primary" style="margin-right:1px" ng-click="buscarCuentaBienesFijos( \'cuenta\', $index )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n\n                                                </div>\n                                            </td>\n                                            <td>\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="activoFijo.cuentaDepAcum" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="activoFijocuentaDepAcum[$index]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="activoFijocuentaDepAcum[$index]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="activoFijo.cuentaDepAcum.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-sm btn-primary" style="margin-right:1px" ng-click="buscarCuentaBienesFijos( \'cuentaDepAcum\', $index )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n\n                                                </div>\n                                            </td>\n\n                                            <td>\n                                                <div class="col-sm-9" style="padding:0px">\n                                                    <input type="text" ng-model="activoFijo.cuentaDepEjercicio" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="activoFijocuentaDepEjercicio[$index]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required>\n                                                </div>\n                                                <div class="col-sm-3">\n                                                    <i ng-show="activoFijocuentaDepEjercicio[$index]" class="glyphicon glyphicon-refresh"></i>\n                                                    <i ng-show="activoFijo.cuentaDepEjercicio.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                                    <button class="btn btn-sm btn-primary" style="margin-right:1px" ng-click="buscarCuentaBienesFijos( \'cuentaDepEjercicio\', $index )" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                                </div>\n                                            </td>\n                                            <td>\n                                                <button ng-click="quitarClasificacionBienFijo($index)" class="btn btn-acciones btn-danger"><i class="fa fa-remove"></i></button>\n                                            </td>\n                                        </tr>\n                                    </table>\n                                </form>\n                                <button class="btn btn-xs btn-warning" ng-click="agregarClasificacionBienFijo()">\n                                    <i class="fa fa-plus"></i> Agregar Clasificación                                    \n                                </button>\n                            </div>\n                        </div>\n                        <div class="col-sm-12" style="text-align: right">\n                            <button ng-disabled="formActivoFijo.$invalid" class="btn btn-success btn-md" ng-click="guardarCuentasDefectoActivosFijos();">\n                                <i class="fa fa-floppy-o"></i> \n                                Grabar\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n\n            <div ng-show="panel==\'indicadoresEconomicos\'">\n                <h3><strong>Indicadores Económicos</strong></h3>\n                <div class="panel panel-success">\n                    <div class="panel-heading">Valores del IPC</div>\n                    <div class="panel-body form-horizontal">\n                        <div class="form-group" ng-class="{ \'has-error\' : formMenu.rut.$invalid && !formMenu.rut.$pristine }">\n                            <label for="rut" class="col-sm-1 control-label">\n                                Año:\n                            </label>\n                            <div class="col-sm-2" style="padding:0px; margin:0px">\n                                <div class="col-sm-9">\n                                    <select name="anio" ng-model="objeto.indicadoresEconomicos.anio" class="form-control form-white" ng-options="opc for opc in opciones.anios" ng-change="cargarIPCMensual(objeto.indicadoresEconomicos.anio)"></select>\n                                </div>\n                            </div>\n                        </div>\n                        <br>&nbsp;<br>\n                        <div class="table-responsive col-sm-9">\n                        <!--\n                            <table class="table table-striped">\n                                <tr>\n                                    <th ng-repeat="mes in opciones.meses | limitTo:6" >{{ mes.mes }} {{ objeto.indicadoresEconomicos.anio }}</th>        \n                                </tr>\n                                <tr>\n                                    <td ng-repeat="mes in opciones.meses | limitTo:6" >                        \n                                        <input type="text" ng-model="objeto.indicadoresEconomicos.ipc[mes.id]" ui-number-mask="1" maxlength="12" class="form-control form-white" style="width:100px;" />\n                                    </td>\n                                </tr>                \n                                <tr>\n                                    <th ng-repeat="mes in opciones.meses | limitTo:-6" >{{ mes.mes }} {{ objeto.indicadoresEconomicos.anio }}</th>\n                                </tr>\n                                <tr>\n                                    <td ng-repeat="mes in opciones.meses | limitTo:-6" >                        \n                                        <input type="text" ng-model="objeto.indicadoresEconomicos.ipc[mes.id]" ui-number-mask="1" maxlength="12" class="form-control form-white" style="width:100px;" />\n                                    </td>\n                                </tr>\n                            </table>\n                            -->\n\n                            <table class="table table-striped">\n                                <tr>\n                                    <th>&nbsp;</th>\n                                    <th ng-repeat="mes in opciones.meses">\n                                        {{ mes.abrev }}<br>{{ objeto.indicadoresEconomicos.anio }}\n                                    </th>        \n                                </tr>\n                                <tr>\n                                    <td>Capital Inicial</td>\n                                    <td ng-repeat="mes in opciones.meses">\n                                        <input type="text" ng-model="objeto.indicadoresEconomicos.ipc[0][mes.id]" class="form-control form-white" ui-number-mask="1" style="width: 60px">\n                                    </td>\n                                </tr>\n                                <tr ng-repeat="mes in opciones.meses | limitTo: 11 ">\n                                    <td>{{ mes.abrev }}<br>{{ objeto.indicadoresEconomicos.anio }}</td>\n                                    <td ng-repeat="mesFinal in opciones.meses">\n                                        <div ng-if="mesFinal.id > mes.id">\n                                            <input type="text" ng-model="objeto.indicadoresEconomicos.ipc[mes.id][mesFinal.id]" class="form-control form-white" style="width: 60px" ui-number-mask="1">\n                                        </div>\n                                    </td>\n                                </tr>\n                            </table>\n                        </div>\n                        <div class="col-sm-12" style="text-align: right">\n                            <button class="btn btn-success" ng-click="grabarIPCMensual();">Grabar</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n    </div>\n</div>'),
a.put("views/perfiles.html",'<div class="header">\n    <h2>Administración de <b>Perfiles de Usuario</b></h2>\n</div>\n<!-- /.row -->\n<div class="row">\n    <div class="col-md-12">        \n        <div class="form-group">\n            <label for="orden" class="control-label col-md-1">\n                Ordenar:\n            </label>\n            <div class="col-md-3">\n                <select ng-model="orden" id="orden" class="form-control form-white">\n                    <option value="perfil">Perfil</option>\n                    <option value="descripcion">Descripción</option>\n                    <option value="asignaciones">Asignaciones</option>\n                </select>\n            </div>\n            <label for="filtro" class="col-md-1 control-label">Filtrar:</label>\n            <div class="col-md-4">\n              <input id="filtro" type="text" class="form-control form-white" ng-model="filtro">\n            </div>\n            <div class="col-md-3" style="text-align:right; padding-right:0px">\n                <button class="btn btn-primary btn-md" ng-click="open({});">\n                    <i class="fa fa-plus"></i> Nuevo\n                </button>\n\n                <div class="btn-group">\n	            	<button class="btn btn-dark btn-md" type="button" data-toggle="dropdown" aria-expanded="false">\n	                    <i class="fa fa-wrench"></i> Herramientas <span class="caret"></span>\n	                </button>\n	                <ul class="dropdown-menu dropdown-menu-sm" role="menu">\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'perfiles/exportar/excel/2007\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 2007 (.xlsx)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'perfiles/exportar/excel/97\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 97/2003 (.xls)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'perfiles/exportar/pdf\' }}">\n	                            <i class="fa fa-file-pdf-o"></i> Exportar PDF (.pdf)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a href="javascript:void(0);">\n	                            <i class="fa fa-print"></i> Imprimir\n	                        </a>\n	                    </li>\n	                </ul>\n                </div>\n            </div>\n        </div>\n        <div class="form-group">\n		    <table class="table table-striped table-nonfluid">\n                <thead>\n                    <tr>\n                        <th>#</th>\n                        <th class="col-sm-2">Perfil</th>\n                        <th class="col-sm-7">Descripción</th>\n                        <th class="col-sm-1">Asignaciones</th>\n                        <th class="col-sm-2">Acciones</th>\n                    </tr>\n                </thead>\n                <tbody>\n                  	<tr ng-repeat="dato in datos | filter:filtro | orderBy : orden">\n             			<td class="text-right">{{ $index + 1 }}</td>\n             			<td>{{ dato.perfil }}</td>\n             			<td>{{ dato.descripcion }}</td>\n                        <td>{{ dato.asignaciones }}</td>\n             			<td>\n             		        <a class="btn-acciones btn btn-default" href="javascript:void(0);" ng-click="editar(dato);" uib-tooltip-html="toolTipEdicion(dato.perfil)">\n                                <i class="fa fa-pencil"></i>\n                            </a>\n                            <a class="btn-acciones btn btn-danger" href="javascript:void(0);" confirmation-click="eliminar( dato );" confirmation-needed="El Perfil: <b>{{ dato.perfil }}</b> será eliminado.Desea continuar?">\n                                <i class="fa fa-remove"></i>\n                            </a>\n             			</td>\n             		</tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>\n\n\n<script type="text/ng-template" id="myModalPerfil.html">\n    <div class="modal-header">\n        <h3 class="modal-title">Mantención de Perfiles de Usuarios</h3>\n    </div>\n    <div class="modal-body">\n        <form class="form-horizontal" role="form" name="formMenu" ng-submit="opcionMenuSave()" novalidate>\n          \n          <div class="form-group " ng-class="{ \'has-error\' : formMenu.perfil.$invalid && !formMenu.perfil.$pristine }">\n            <label for="perfil" class="col-xs-3 control-label">\n                Perfil:\n            </label>\n            <div class="col-xs-8">\n                <input type="text" name="perfil" ng-model="objeto.perfil" class="form-control form-white" id="perfil" placeholder="Nombre del Perfil" required>\n                <div ng-show="formMenu.perfil.$invalid && !formMenu.perfil.$pristine" class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></div>\n                <span ng-show="formMenu.perfil.$invalid && !formMenu.perfil.$pristine" class="help-block">Obligatorio!.</span>\n            </div>\n          </div>\n\n          <div class="form-group " ng-class="{ \'has-error\' : formMenu.descripcion.$invalid && !formMenu.descripcion.$pristine }">\n            <label for="descripcion" class="col-xs-3 control-label">\n                Descripción:\n            </label>\n            <div class="col-xs-8">\n                <textarea name="descripcion" ng-model="objeto.descripcion" class="form-control form-white" id="descripcion" placeholder="Descripción del Perfil" required></textarea>\n                <div ng-show="formMenu.descripcion.$invalid && !formMenu.descripcion.$pristine" class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></div>\n                <span ng-show="formMenu.descripcion.$invalid && !formMenu.descripcion.$pristine" class="help-block">Obligatorio!.</span>\n            </div>\n          </div>\n\n          <div class="form-group ">\n                <label for="perfil" class="col-xs-3 control-label">\n                    Empresa:\n                </label>\n                <div class="col-xs-7">\n                    <select ng-model="objeto.empresa" ng-options="emp as emp.razonSocial for emp in empresas" class="form-control form-white">\n                        <option value=\'{{ empresaGlobal }}\'>{{ empresaGlobal.razonSocial }}</option>\n                    </select>\n                    <span ng-if="objeto.empresa.nRut==\'global\'" class="text-primary"><strong>\n                        Esta configuración permite copiar los accesos seleccionados para Todas las Empresas.\n                        </strong>\n                    </span>\n                </div>\n            </div>\n\n          <div class="panel panel-default" style="margin-top:20px;">\n                <div class="panel-heading">Accesos del Perfil </div>\n                \n                <table class="table" align="center">\n                    <thead>\n                                <tr>\n                                    <th rowspan="2">#</th>\n                                    <th rowspan="2" class="col-xs-3">Menú</th>\n                                    <th rowspan="2" class="col-xs-5">Descripción</th>\n                                    <th colspan="4" class="col-xs-4" style="text-align:center;">{{  objeto.empresa.razonSocial }}</th>\n                                </tr>\n                                <tr>\n                                    <th ng-if="!objeto.empresa.nRut" colspan="4">&nbsp;</th>\n                                    <th ng-if="objeto.empresa.nRut" class="col-xs-1" style="text-align:center;">\n                                        Crear<br/>\n                                        <input type="checkbox" ng-model="checkmasterEmpresa[ objeto.empresa.nRut ][\'crear\']" ng-change="marcarTodosEmpresa( objeto.empresa.nRut, \'crear\' );" icheck  />\n                                    </th>\n                                    <th ng-if="objeto.empresa.nRut" class="col-xs-1" style="text-align:center;">\n                                        Editar<br/>\n                                        <input type="checkbox" ng-model="checkmasterEmpresa[ objeto.empresa.nRut ][\'editar\']" ng-change="marcarTodosEmpresa( objeto.empresa.nRut, \'editar\' );" icheck  />\n                                    </th>\n                                    <th ng-if="objeto.empresa.nRut" class="col-xs-1" style="text-align:center;">\n                                        Eliminar<br/>\n                                        <input type="checkbox" ng-model="checkmasterEmpresa[ objeto.empresa.nRut ][\'eliminar\']" ng-change="marcarTodosEmpresa( objeto.empresa.nRut, \'eliminar\' );" icheck  />\n                                    </th>\n                                    <th ng-if="objeto.empresa.nRut" class="col-xs-1" style="text-align:center;">\n                                        Ver<br/>\n                                        <input type="checkbox" ng-model="checkmasterEmpresa[ objeto.empresa.nRut ][\'ver\']" ng-change="marcarTodosEmpresa( objeto.empresa.nRut, \'ver\' );" icheck  />\n                                    </th>\n                                </tr>\n                            </thead>\n                            <tbody >\n                                <tr ng-repeat="opc in menu.datos" ng-class="{ \'bg-warning\' : opc.tipo == 1 }">\n                                    <td style="text-align: right; font-size: 12px; width: 20px !important; color:#000 !important;">\n                                        {{ opc.posicion }}\n                                    </td>\n                                    <td style="font-weight: bold; font-size: 12px; color:#000 !important;">\n                                        {{ opc.menu }}\n                                    </td>\n                                    <td style="color:#000 !important; font-size: 12px;">\n                                        {{ opc.title }}\n                                    </td>                  \n                                    <td style="text-align: center;color:#fff !important;">\n                                        <input type="checkbox" ng-model="checklistEmpresa[ objeto.empresa.nRut ][ opc.sid ][\'crear\']" ng-change="seleccionarOpcion(objeto.empresa.nRut, opc.sid, \'crear\')" icheck />\n                                    </td>\n\n                                    <td style="text-align: center;color:#fff !important;">\n                                        <input type="checkbox" ng-model="checklistEmpresa[ objeto.empresa.nRut ][ opc.sid ][\'editar\']" ng-change="seleccionarOpcion(objeto.empresa.nRut, opc.sid, \'editar\')" icheck />\n                                    </td>\n\n                                    <td style="text-align: center;color:#fff !important;">\n                                        <input type="checkbox" ng-model="checklistEmpresa[ objeto.empresa.nRut ][ opc.sid ][\'eliminar\']" ng-change="seleccionarOpcion(objeto.empresa.nRut, opc.sid, \'eliminar\')" icheck />\n                                    </td>\n\n                                    <td style="text-align: center;color:#fff !important;">\n                                        <input type="checkbox" ng-model="checklistEmpresa[ objeto.empresa.nRut ][ opc.sid ][\'ver\']" ng-change="seleccionarOpcion(objeto.empresa.nRut, opc.sid, \'ver\')" icheck />\n                                    </td>\n\n                                </tr>\n                            </tbody>\n                </table> \n              </div>\n            </div>\n        </form>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" ng-click="cancel()" >Salir</button>\n        <button class="btn btn-primary" type="submit" ng-disabled="formMenu.$invalid || !comprobarSeleccion()"  ng-click="grabar(false)" >Grabar</button>\n    </div>\n</script>'),a.put("views/registro-asientos-contables.html",'<div class="header">\n    <h2>Registro de <b>Comprobantes Contables</b></h2>\n</div>\n<script type="text/ng-template" id="customTemplate.html">\n    <a style="cursor: pointer;">\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\n    </a>\n</script>\n<div class="row">\n\n    <span onclick="bajar()" class="ir-abajo icon-arrow-down"></span>\n\n    <span onclick="subir()" class="ir-arriba icon-arrow-up"></span>\n\n    <div class="col-md-12">     \n        <div class="row col-md-12">\n            <form class="form-horizontal" name="form" novalidate autocomplete="Off">\n                <div class="form-group">                    \n                    <div class="col-md-9">\n                        &nbsp;\n                    </div>\n                    <div class="col-md-3" style="text-align:right">\n                        \n                        <div class="btn-group">\n                            <button class="btn btn-dark btn-md" type="button" data-toggle="dropdown" aria-expanded="false">\n                                <i class="fa fa-wrench"></i> Herramientas <span class="caret"></span>\n                            </button>\n                            <ul class="dropdown-menu dropdown-menu-sm" role="menu">\n                                <li>\n                                    <a href="javascript:void(0);" ng-click="importarArchivo();">\n                                        <i class="fa fa-file-excel-o"></i> Importar Comprobantes (.xlsx)\n                                    </a>\n                                </li>\n                                <li>\n                                    <a ng-href="{{ constantes.URL + \'impComprobantes.xlsx\' }}">\n                                        <i class="fa fa-file-excel-o"></i> Descargar Archivo para Importación\n                                    </a>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n                <div class="panel panel-primary" ng-disabled="movimiento.estado===2">\n                    <div class="panel-heading">\n                        Datos Generales\n                    </div>\n                    <div class="panel-body">\n                        <div class="form-group">\n                            <label class="col-sm-3 control-label">Tipo de Comprobante:</label>\n                            <div class="col-sm-2">\n                                <select ng-if="!vista" ng-model="movimiento.tipoComprobante" ng-options="item as item.nombre for item in tiposComprobantes" class="form-control form-white" required></select>\n                                <span ng-if="vista">{{ movimiento.tipoComprobante.nombre }}</span>\n                            </div>\n                            <div class="col-sm-2" ng-if="!vista">\n                                <button role="button" ng-click="openBuscadorAsiento()" class="btn btn-primary btn-sm">\n                                    <i class="fa fa-search"></i> Buscar\n                                </button>\n                            </div>\n                        </div>\n\n                        <div class="form-group">\n                            <label class="col-sm-3 control-label">Número:</label>\n                            <div ng-if="!movimiento.automatico && !vista" class="col-xs-1">\n                                 <input ng-if="!vista" class="form-control form-white" type="text" ng-model="movimiento.numero" required> \n                            </div>\n                            <div class="col-sm-2" ng-if="!vista">\n                                <label for="automatico pointer">\n                                    <input type="checkbox" icheck ng-model="movimiento.automatico" id="automatico" value="1">Automático\n                                </label>\n                            </div>\n                            <div class="col-sm-2" ng-if="vista">\n                                {{ movimiento.numero }}\n                            </div>\n                            <div class="col-sm-5 text-danger" ng-if="!vista && errores.numero">\n                                <strong>{{ errores.numero[0] }}</strong>\n                            </div>\n                        </div>\n                        \n\n                        <div class="form-group">\n                            <label class="col-sm-3 control-label">Fecha:</label>\n                            <div class="col-sm-2">\n                                <p class="input-group" ng-if="!vista" style="margin: 0px">\n                                  <input type="text" name="fecha" uib-datepicker-popup="dd-MM-yyyy" ng-model="movimiento.fecha" is-open="fechas.fecha" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" ng-change="revisarFecha()" class="form-control form-white" required>\n                                  <span class="input-group-btn">\n                                    <button type="button" class="btn btn-primary" style="margin: 0px" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>\n                                  </span>\n                                </p>\n                                <span ng-if="vista">{{ movimiento.fecha | date:\'dd-MM-yyyy\' }}</span>\n                            </div>\n                            <div class="col-sm-5 text-danger" ng-show="form[\'fecha\'].$error.date">\n                                Fecha no Válida\n                            </div>\n                            <div class="col-sm-5 text-danger" ng-show="validacion.fechaFueraRango">\n                                Fecha Fuera del Año Contable Activo\n                            </div>\n                        </div>\n\n                        <div class="form-group">\n                            <label class="col-sm-3 control-label">Glosa:</label>\n                            <div class="col-sm-6">\n                                <textarea ng-if="!vista" ng-model="movimiento.glosa" id="glosa" class="form-control form-white" required></textarea>\n                                <span ng-if="vista">{{ movimiento.glosa }}</span>\n                            </div>\n                        </div>\n                        <table class="table table-bordered table-striped">\n                            <tr>\n                                <th>#</th>\n                                <th class="col-md-4">Cuenta</th>\n                                <th class="col-md-1">Código</th>\n                                <th class="col-md-3">Glosa</th>\n                                <th class="col-md-2">Debe</th>\n                                <th class="col-md-2">Haber</th>\n                                <th>&nbsp;&nbsp;</th>\n                            </tr>\n                            <tr ng-repeat="asiento in movimiento.asientos">\n                                <td>{{ $index + 1 }}</td>\n                                <td>\n                                    <div class="col-sm-9" style="padding:0px">\n                                        <input ng-if="!vista" type="text" ng-model="asiento.cuenta" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="estados[ $index ]" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" typeahead-on-select="quitarConfiguracionCta(asiento)" required>\n                                        <span ng-if="vista">{{ asiento.cuenta.cuenta }}</span>\n                                    </div>\n                                    <div class="col-sm-3" ng-if="!vista">\n                                        <i ng-show="estados[ $index ]" class="glyphicon glyphicon-refresh"></i>\n                                        <i ng-show="asiento.cuenta.codigo" class="fa fa-check" style="color: #0a0"></i>\n                                        <button class="btn btn-sm btn-primary" ng-click="buscarCuenta(asiento)" tooltip="Buscar en Plan de Cuentas" style="margin:0px">\n                                            <i class="fa fa-search"></i>\n                                        </button>\n                                        <button ng-show="asiento.cuenta.parametros.length > 0" ng-click="editarParametroAsiento(asiento)" role="button" class="btn btn-sm" style="margin:0px" ng-class="{\'btn-success\' : asiento.configuracion, \'btn-warning\' : !asiento.configuracion }">\n                                            <i class="fa fa-cogs"></i>\n                                        </button>\n                                    </div>   \n                                </td>\n                                <td>{{ asiento.cuenta.codigo }}</td>\n                                <td>\n                                    <span ng-if="vista">{{ asiento.glosa }}</span>\n                                    <div class="col-sm-10" ng-if="!vista" ng-show="asiento.glosaPersonalizada">\n                                        <textarea ng-model="asiento.glosa" class="form-control form-white" rows="2"></textarea>\n                                    </div>\n\n                                    <div class="col-sm-8" ng-if="!vista" ng-show="!asiento.glosaPersonalizada">\n                                        {{ movimiento.glosa }}\n                                    </div>\n                                    \n                                    <div class="col-sm-4" ng-if="!vista" ng-show="!asiento.glosaPersonalizada">\n                                        <button ng-click="asiento.glosaPersonalizada=true" role="button" class="btn btn-xs btn-warning">\n                                            <i class="fa fa-edit"></i>\n                                        </button>\n                                    </div>\n                                    <div class="col-sm-1" ng-if="!vista" ng-show="asiento.glosaPersonalizada">\n                                        <i ng-click="asiento.glosaPersonalizada=false" class="fa fa-trash"></i>\n                                    </div>\n                                </td>\n                                <td style="text-align: right">\n                                    <input ng-if="!vista" type="text" ng-model="asiento.debe" ng-change="sumarDebe()" ui-money-mask="0" class="form-control form-white text-right" ng-disabled="asiento.haber" ng-required="!asiento.haber">\n                                    <span ng-if="vista">{{ asiento.debe | currency:"$":0 }}</span>\n                                </td>\n                                <td style="text-align: right">\n                                    <input ng-if="!vista" type="text" ng-model="asiento.haber" ng-change="sumarHaber()" ui-money-mask="0" class="form-control form-white text-right" ng-disabled="asiento.debe" ng-required="!asiento.debe">\n                                    <span ng-if="vista">{{ asiento.haber | currency:"$":0 }}</span>\n                                </td>\n                                <td>\n                                    <i ng-if="movimiento.asientos.length > 0  && !vista" class="fa fa-trash pointer" ng-click="eliminarAsiento(asiento)"></i>\n                                </td>\n                            </tr>\n                            <tr style="background: none !important">\n                                <td colspan="4" class="text-right"><strong>Totales</strong></td>\n                                <td class="text-right" ng-class="{\'bg-success\': comprobarDebeHaber(), \'bg-danger\': !comprobarDebeHaber() }"><strong>{{ movimiento.totalDebe | currency:"$":0 }}</strong></td>\n                                <td class="text-right" ng-class="{\'bg-success\': comprobarDebeHaber(), \'bg-danger\': !comprobarDebeHaber()}"><strong>{{ movimiento.totalHaber | currency:"$":0 }}</strong></td>\n                                <td ng-class="{\'bg-success\': comprobarDebeHaber() }">\n                                    <i ng-show="comprobarDebeHaber()" class="glyphicon glyphicon-ok"></i>\n                                </td>\n                            </tr>\n                            <tr style="background: none !important">\n                                <td colspan="4" class="text-right">&nbsp;</td>\n                                <td class="text-right" ng-class="{\'bg-warning\': movimiento.diferenciaDebe > 0 }"><strong>{{ movimiento.diferenciaDebe | currency:"$":0 }}</strong></td>\n                                <td class="text-right" ng-class="{\'bg-warning\': movimiento.diferenciaHaber > 0 }"><strong>{{ movimiento.diferenciaHaber | currency:"$":0 }}</strong></td>\n                                <td>&nbsp;</td>\n                            </tr>\n                        </table>\n                        <button ng-if="!vista" role="button" ng-click="agregarAsiento()" class="btn btn-sm btn-success" style="margin-left: 0px"><i class="fa fa-plus"></i> Agregar Cuenta</button>\n                    </div>\n                    <div ng-show="!movimiento.id" class="panel-footer" style="text-align:right !important">\n                        <button ng-if="movimiento.estado === 1;" class="btn btn-primary" ng-disabled="form.$invalid || !comprobarDebeHaber() || validacion.fechaFueraRango || !revisarParametrosCuentas()" confirmation-click="guardar(false)" confirmation-needed="El Movimiento será registrado.Desea continuar?">Grabar</button>\n                        <button ng-if="movimiento.estado === 2;" class="btn btn-success" ng-click="openImprimirAsiento()">Imprimir</button>\n                        <button ng-if="movimiento.estado === 2;" class="btn btn-danger" ng-click="anularAsiento()">Anular</button>\n                        <button ng-if="movimiento.estado === 2;" class="btn btn-default" ng-click="nuevo()">Nuevo</button>\n                    </div>\n\n\n                    <div ng-show="movimiento.id && movimiento.estado != 3" class="panel-footer" style="text-align:right !important">\n                        <button class="btn btn-primary" ng-disabled="form.$invalid || !comprobarDebeHaber() || validacion.fechaFueraRango || !revisarParametrosCuentas()" confirmation-click="guardarNuevo()" confirmation-needed="El Nuevo Movimiento será registrado.Desea continuar?" ng-if="!vista">Grabar Nuevo</button>\n                        <button class="btn btn-primary" ng-disabled="form.$invalid || !comprobarDebeHaber() || validacion.fechaFueraRango || !revisarParametrosCuentas()" confirmation-click="guardar(true)" confirmation-needed="El Movimiento Actual será actualizado.Desea continuar?" ng-if="!vista">Actualizar</button>\n                        <button class="btn btn-warning" role="button" abrir-ventana="{{ constantes.URL+\'contabilidad-registro-asientos/imprimir-asiento/\' + movimiento.id }}" ventana-nombre="IMPRIMIRASIENTOCONTABLE" ventana-ancho="750" ventana-alto="600">Imprimir</button>\n                        <button class="btn btn-danger" ng-click="anularAsiento()">Anular</button>\n                        <button class="btn btn-default" ng-click="nuevo()">Nuevo</button>\n                    </div>\n\n                    <div ng-show="movimiento.id && movimiento.estado == 3" class="panel-footer" style="text-align:right !important">\n                        <button class="btn btn-warning" role="button" abrir-ventana="{{ constantes.URL+\'contabilidad-registro-asientos/imprimir-asiento/\' + movimiento.id }}" ventana-nombre="IMPRIMIRASIENTOCONTABLE" ventana-ancho="750" ventana-alto="600">Imprimir</button>\n                        <button class="btn btn-default" ng-click="nuevo()">Nuevo</button>\n                    </div>\n\n                </div>\n            </form>\n        </div>\n    </div>\n    <div class="col-sm-12" id="scrollToHere">\n        &nbsp;\n    </div>\n</div>\n\n<script type="text/javascript">\n    function bajar(){\n        $(\'html,body\').animate({\n            scrollTop: $("#scrollToHere").offset().top\n        }, 500);\n    }\n\n    function subir(){\n        $(\'html,body\').animate({\n            scrollTop: \'0px\'\n        }, 500);\n    }\n\n    $(window).scroll(function () {\n        if ($(this).scrollTop() > 200) {\n            $(\'.ir-arriba\').fadeIn();\n        }\n        else {\n            $(\'.ir-arriba\').fadeOut();\n        }\n\n        if ($(this).scrollTop() < $(document).height()-$(window).height() ) {\n            $(\'.ir-abajo\').fadeIn();\n        }\n        else {\n            $(\'.ir-abajo\').fadeOut();\n        }\n    });\n    $(\'.ir-arriba\').fadeOut();\n</script>\n\n\n\n\n<script type="text/ng-template" id="myModalImportarArchivo.html">\n    <div class="modal-header">\n        <h3 class="modal-title">Importación mediante Archivo Excel</h3>\n    </div>\n    <div class="modal-body">\n        <form class="form-horizontal" name="form">\n            <div class="panel panel-default">\n                <div class="panel-heading">Gestión de archivo</div>\n                <div class="panel-body">\n                    <div class="form-group form-group-md">\n                        <div class="col-sm-12" style="font-style: italic;">\n                            <strong>\n                            PASO 1: </strong> Seleccione el archivo que contiene el o los comprobantes debidamente separados en hojas. El sistema realizará una pre-carga de los datos que serán importados para que usted pueda confirmar el Proceso de Importación.\n                        </div>\n                    </div>\n                    <div class="form-group form-group-md">\n                        <div class="col-sm-5">\n                            <button ng-model-rejected="rejFiles" ngf-select ng-model="files" class="btn btn-primary">Seleccionar Archivo</button>\n                        </div>\n                    </div>\n                    <div class="col-sm-12" ng-show="dynamic > 0">\n                        <uib-progressbar class="progress-striped active" value="dynamic" type="success"><strong>{{ dynamic + "%" }}</strong></uib-progressbar>\n                    </div>\n                </div>\n            </div>\n            <div class="panel panel-warning" ng-if="confirmar.datos.length > 0">\n                <div class="panel-heading">Confirmación de Datos</div>\n                <div class="panel-body">\n                    <div class="form-group form-group-md">\n                        <div class="col-sm-12" style="font-style: italic;">\n                            <strong>\n                            PASO 2:</strong> Confirme los datos que se presentan a continuación. de lo contrario vuelva a seleccionar un nuevo archivo en el PASO 1\n                        </div>\n                    </div>\n                    <table class="table table-striped">\n                        <tr>\n                            <th>Hoja</th>\n                            <th>Glosa</th>\n                            <th>Tipo</th>\n                            <th>Fecha</th>\n                            <th>Numero</th>\n                            <th>Asientos</th>\n                            <th>Debe</th>\n                            <th>Haber</th>\n                        </tr>\n                        <tr ng-repeat="fila in confirmar.datos">\n                            <td>{{ fila.hoja }}</td>\n                            <td>{{ fila.glosa }}</td>\n                            <td>{{ fila.tipo }}</td>\n                            <td>{{ fila.fecha }}</td>\n                            <td>{{ fila.numero }}</td>\n                            <td>{{ fila.asientos }}</td>\n                            <td>{{ fila.debe | currency:"$":0 }}</td>\n                            <td>{{ fila.haber | currency:"$":0 }}</td>\n                        </tr>\n                    </table>\n                    <button class="btn btn-success" confirmation-click="confirmarDatos();" confirmation-needed="Los registros serán importados al sistema. Desea Continuar?">Confirmar Carga de Datos</button>\n                </div>\n            </div>\n\n            <div class="panel panel-danger" ng-if="listaErrores.length > 0">\n                <div class="panel-heading">Errores en archivo</div>\n                <div class="panel-body" style="height: 300px; overflow-y: scroll;">\n                    <div class="form-group form-group-md">\n                        <div class="col-sm-12" style="font-style: italic;">                            \n                        El proceso de importación no puede continuar debido a errores que se detallan a continuación\n                        </div>\n                    </div>\n                    <table class="table table-striped">\n                        <tr>\n                            <th>Error</th>\n                        </tr>\n                        <tr ng-repeat="fila in listaErrores">\n                            <td>{{ fila }}</td>\n                        </tr>\n                    </table>\n                </div>\n            </div>\n\n            <div class="panel panel-success" ng-if="resumen.length > 0">\n                <div class="panel-heading">Resumen de la Importación</div>\n                <div class="panel-body">\n                    <div class="form-group form-group-md">\n                        <div class="col-sm-12" style="font-style: italic;">\n                        El proceso de importación se realizó correctamente. El resumen de la importación se detalle a continuación\n                        </div>\n                    </div>\n                    <table class="table table-striped">\n                        <tr>\n                            <th>Hoja</th>\n                            <th>Glosa</th>\n                            <th>Tipo</th>\n                            <th>Fecha</th>\n                            <th>Numero</th>\n                            <th>Asientos</th>\n                            <th>Debe</th>\n                            <th>Haber</th>\n                        </tr>\n                        <tr ng-repeat="fila in resumen">\n                            <td>{{ fila.hoja }}</td>\n                            <td>{{ fila.glosa }}</td>\n                            <td>{{ fila.tipo }}</td>\n                            <td>{{ fila.fecha }}</td>\n                            <td>{{ fila.numero }}</td>\n                            <td>{{ fila.asientos }}</td>\n                            <td>{{ fila.debe }}</td>\n                            <td>{{ fila.haber }}</td>\n                        </tr>\n                    </table>\n                </div>\n            </div>\n\n        </form>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" ng-click="cancel()">Cancelar</button>\n    </div>\n</script>\n\n\n\n<script type="text/ng-template" id="myModalBuscarAsientoContable.html">\n    <div class="modal-header">\n        <h3 class="modal-title">Búsqueda de Comprobante Contable</h3>\n    </div>\n    <div class="modal-body">\n        <form class="form-horizontal" name="form" novalidate >\n            <div class="panel panel-default">\n                <div class="panel-heading">Parámetros de Búsqueda</div>\n                <div class="panel-body">\n                    <div class="form-group">\n                        <label class="col-sm-3 control-label">Tipo de Comprobante:</label>\n                        <div class="col-sm-6">\n                            <select ng-if="!vista" ng-model="objeto.tipoComprobante" ng-options="item as item.nombre for item in tiposComprobantes" class="form-control form-white" placeholder="Todos" ></select>\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label class="col-sm-3 control-label">Número:</label>\n                        <div class="col-sm-3">\n                            <input ype="text"  ng-model="objeto.numero" id="codigo" class="form-control form-white" placeholder="Todos" >                            \n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label class="col-sm-3 control-label">Fecha Inicial:</label>\n                        <div class="col-sm-4">\n                            <p class="input-group" style="margin-top:0px !important; margin-bottom: 0px !important;">\n                              <input type="text"  uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.inicio" is-open="objeto.fechaInicial" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white"  placeholder="Todos"/>\n                              <span class="input-group-btn ">\n                                <button type="button" class="btn btn-primary" style="margin-top:0px !important; margin-bottom: 0px !important;" ng-click="openFechaInicial()"><i class="glyphicon glyphicon-calendar"></i></button>\n                              </span>\n                            </p>\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label class="col-sm-3 control-label">Fecha Final:</label>\n                        <div class="col-sm-4">\n                            <p class="input-group" style="margin-top:0px !important; margin-bottom: 0px !important;">\n                              <input type="text"  uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.fin" is-open="objeto.fechaFinal" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white"  placeholder="Todos"/>\n                              <span class="input-group-btn ">\n                                <button type="button" class="btn btn-primary" style="margin-top:0px !important; margin-bottom: 0px !important;" ng-click="openFechaFinal()"><i class="glyphicon glyphicon-calendar"></i></button>\n                              </span>\n                            </p>\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label class="col-sm-3 control-label">Texto en Glosa:</label>\n                        <div class="col-sm-6">\n                            <input type="text" class="form-control form-white" ng-model="objeto.texto" placeholder="Todos" />\n                        </div>\n                    </div>\n                </div>\n                <div class="panel-footer" style="text-align: left;">\n                    <button class="btn btn-primary" ng-click="buscarDatos()">Buscar</button>\n                </div>\n            </div>\n\n            <div class="panel panel-success" ng-if="resultado.length">\n                <div class="panel-heading">Resultados de Búsqueda</div>\n                <div class="panel-body">\n                    <div style="overflow-y:scroll; height:350px;">\n                        <table class="table table-striped">\n                            <tr>\n                                <th>#</th>\n                                <th>Tipo Comprobante</th>\n                                <th>Numero</th>\n                                <th>Fecha</th>\n                                <th>Glosa</th>\n                                <th>Debe</th>\n                                <th>Haber</th>\n                                <th>Sel</th>\n                            </tr>\n                            <tr ng-repeat="registro in resultado">\n                                <td>{{ $index + 1 }}</td>\n                                <td>{{ registro.tipoComprobante }}</td>\n                                <td>{{ registro.numero }}</td>\n                                <td>{{ registro.fecha }}</td>\n                                <td>{{ registro.glosa }}</td>\n                                <td>{{ registro.debe | currency:"$":0 }}</td>\n                                <td>{{ registro.haber | currency:"$":0 }}</td>\n                                <td>\n                                    <a href="javascript:void(0);" ng-click="seleccionarAsientoContable( registro )">\n                                        <i class="fa fa-search"></i>\n                                    </a>\n                                </td>\n                            </tr>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        </form>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" ng-click="cancel()">Cerrar</button>        \n    </div>\n</script>\n\n\n\n\n<script type="text/ng-template" id="myModalAnularAsientoContable.html">\n    <div class="modal-header">\n        <h3 class="modal-title">Anulación de Comprobante Contable</h3>\n    </div>\n    <div class="modal-body">\n        <form class="form-horizontal" name="form" novalidate >\n            <div class="panel panel-default">\n                <div class="panel-heading">Datos del Comprobante Contable</div>\n                <div class="panel-body">\n                    <div class="form-group">\n                        <label class="col-sm-3 control-label">Tipo de Comprobante:</label>\n                        <div class="col-sm-6">\n                            {{ objeto.tipoComprobante.nombre }}\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label class="col-sm-3 control-label">Número:</label>\n                        <div class="col-sm-3">\n                            {{ objeto.numero }}                        \n                        </div>\n                    </div>                   \n                    <div class="form-group">\n                        <label class="col-sm-3 control-label">Fecha:</label>\n                        <div class="col-sm-3">\n                            {{ objeto.fecha | date:"dd-MM-yyyy" }}                        \n                        </div>\n                    </div>                   \n                    <div class="form-group">\n                        <label class="col-sm-3 control-label">Glosa:</label>\n                        <div class="col-sm-3">\n                            {{ objeto.glosa }}                        \n                        </div>\n                    </div>                   \n                    <div class="form-group">\n                        <label class="col-sm-3 control-label">Motivo Anulación:</label>\n                        <div class="col-sm-8">\n                            <textarea class="form-control form-white" ng-model="objeto.motivo" placeholder="Motivo de la Anulación" rows="2"></textarea>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </form>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-primary" confirmation-click="guardar()" confirmation-needed="El Movimiento será anulado.Desea continuar?">Anular</button>     \n        <button class="btn btn-default" ng-click="cancel()">Cerrar</button>\n    </div>\n</script>'),
a.put("views/reports/report-asiento-contable-vista-previa.html",'<div class="modal-header">\r\n    <h3 class="modal-title">Asiento Contable</h3>\r\n</div>\r\n<div class="modal-body" id="imprimir">\r\n    <form class="form-horizontal" name="form" novalidate>\r\n        <div class="col-sm-12" style="max-height: 500px; overflow-y: auto; overflow-x:hidden">\r\n            <div class="form-group">\r\n                <label class="col-sm-3 control-label">Tipo de Comprobante:</label>\r\n                <div class="col-sm-4">\r\n                    {{ movimiento.tipoComprobante.nombre }}\r\n                </div>\r\n            </div>\r\n\r\n            <div class="form-group">\r\n                <label class="col-sm-3 control-label">Número:</label>\r\n                <div class="col-sm-2">\r\n                    {{ movimiento.numero }}\r\n                </div>           \r\n            </div>                \r\n\r\n            <div class="form-group">\r\n                <label class="col-sm-3 control-label">Fecha:</label>\r\n                <div class="col-sm-2">\r\n                    {{ movimiento.fecha | date:\'dd-MM-yyyy\' }}\r\n                </div>\r\n            </div>\r\n\r\n            <div class="form-group">\r\n                <label class="col-sm-3 control-label" for="glosa">Glosa:</label>\r\n                <div class="col-sm-6">\r\n                    {{ movimiento.glosa }}\r\n                </div>\r\n            </div>\r\n            <table class="table table-bordered table-striped">\r\n                <tr>\r\n                    <th>#</th>\r\n                    <th class="col-sm-6">Cuenta</th>\r\n                    <th class="col-sm-2">Código</th>\r\n                    <th class="col-sm-2">Debe</th>\r\n                    <th class="col-sm-2">Haber</th>\r\n                </tr>\r\n                <tr ng-repeat="asiento in movimiento.asientos">\r\n                    <td>{{ $index + 1 }}</td>\r\n                    <td>\r\n                        {{ asiento.cuenta.cuenta }}\r\n                    </td>\r\n                    <td>{{ asiento.cuenta.codigo }}</td>\r\n                    <td class="text-right">\r\n                        {{ asiento.debe > 0 ? (asiento.debe | currency:"$":0 ) : \'\' }}\r\n                    </td>\r\n                    <td class="text-right">\r\n                        {{ asiento.haber > 0 ? (asiento.haber | currency:"$":0 ) : \'\' }}\r\n                    </td>\r\n                </tr>\r\n                <tr style="background: none !important">\r\n                    <td colspan="3" class="text-right"><strong>Totales</strong></td>\r\n                    <td><strong>{{ movimiento.totalDebe | currency:"$":0 }}</strong></td>\r\n                    <td><strong>{{ movimiento.totalHaber | currency:"$":0 }}</strong></td>\r\n                </tr>\r\n            </table>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-default" ng-click="cancel();">Cerrar</button>\r\n    <button class="btn btn-primary" abrir-ventana="{{ constantes.URL+\'contabilidad-registro-asientos/imprimir-asiento/\' + movimiento.id }}" ventana-nombre="IMPRIMIRASIENTOCONTABLE" ventana-ancho="750" ventana-alto="600">Imprimir/Exportar</button>\r\n    <button class="btn btn-success" ng-click="editar();">Editar</button>\r\n</div>'),a.put("views/reports/report-asiento-contable.html",'<div class="modal-header">\r\n    <h3 class="modal-title">Asiento Contable</h3>\r\n</div>\r\n<div class="modal-body" id="imprimir">\r\n    <form class="form-horizontal" name="form" novalidate>\r\n        <div class="panel panel-primary" ng-disabled="movimiento.estado===2">\r\n            <div class="panel-heading">Datos Generales</div>\r\n            <div class="panel-body">\r\n                <div class="form-group">\r\n                    <label class="col-sm-3 control-label">Tipo de Comprobante:</label>\r\n                    <div class="col-sm-4">\r\n                        {{ movimiento.tipo_comprobante.nombre }}\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group">\r\n                    <label class="col-sm-3 control-label">Número:</label>\r\n                    <div class="col-sm-2">\r\n                        {{ movimiento.numero }}\r\n                    </div>           \r\n                </div>                \r\n\r\n                <div class="form-group">\r\n                    <label class="col-sm-3 control-label">Fecha:</label>\r\n                    <div class="col-sm-2">\r\n                        {{ movimiento.fecha | date:\'dd-MM-yyyy\' }}\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group">\r\n                    <label class="col-sm-3 control-label" for="glosa">Glosa:</label>\r\n                    <div class="col-sm-6">\r\n                        {{ movimiento.glosa }}\r\n                    </div>\r\n                </div>\r\n                <table class="table table-bordered table-striped">\r\n                    <tr>\r\n                        <th>#</th>\r\n                        <th class="col-md-6">Cuenta</th>\r\n                        <th class="col-md-2">Código</th>\r\n                        <th class="col-md-2">Debe</th>\r\n                        <th class="col-md-2">Haber</th>\r\n                    </tr>\r\n                    <tr ng-repeat="asiento in movimiento.asientos">\r\n                        <td>{{ $index + 1 }}</td>\r\n                        <td>\r\n                            {{ asiento.cuenta.cuenta }}\r\n                        </td>\r\n                        <td>{{ asiento.cuenta.codigo }}</td>\r\n                        <td class="text-right">\r\n                            {{ asiento.debe > 0 ? (asiento.debe | currency:"$":0 ) : \'\' }}\r\n                        </td>\r\n                        <td class="text-right">\r\n                            {{ asiento.haber > 0 ? (asiento.haber | currency:"$":0 ) : \'\' }}\r\n                        </td>\r\n                    </tr>\r\n                    <tr style="background: none !important">\r\n                        <td colspan="3" class="text-right"><strong>Totales</strong></td>\r\n                        <td><strong>{{ movimiento.totalDebe | currency:"$":0 }}</strong></td>\r\n                        <td><strong>{{ movimiento.totalHaber | currency:"$":0 }}</strong></td>\r\n                    </tr>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-default" ng-click="cancel()">Cerrar</button>\r\n    <button class="btn btn-primary" ng-click="printDiv(\'imprimir\')">Imprimir</button>\r\n</div>'),a.put("views/reports/report-balance-clasificado-vista-previa.html",'<div class="modal-header">\r\n</div>\r\n<div class="modal-body">\r\n    <div class="row">\r\n        <div class="col-sm-12" style="text-align: center">\r\n            <span class="text-primary" style="font-size: 20px; font-weight: bold">\r\n                Vista Previa - Balance Clasificado\r\n            </span>\r\n        </div>\r\n    </div>\r\n    <div class="row" style="margin-bottom: 10px">\r\n        <div class="col-sm-12" style="text-align: center">\r\n            <span style="font-size: 15px; font-weight: bold">\r\n                Desde: {{ registros.inicio }} - \r\n                Hasta: {{ registros.fin }}\r\n            </span>\r\n        </div>\r\n    </div>\r\n    <div style="max-height: 500px; overflow-y: auto; overflow-x:hidden">\r\n        <table class="table table-striped table-bordered">\r\n            <tr class="success">\r\n                <th>Clasificación  /  Cuenta</th>\r\n                <th>Total</th>\r\n            </tr>\r\n\r\n        <tbody ng-repeat="cuentas in registros.cuentas" ng-if="registros.balance[cuentas.nivel]">\r\n            <tr ng-if="registros.balance[cuentas.nivel][cuentas.id]" class="textoVistaPrevia">\r\n                <td style="padding-left: {{ ( (cuentas.nivel - 1 ) * 20 ) + 5 }}px">\r\n                    <a href="javascript:void(0);" uib-tooltip-html="\'Ver Libro Mayor de la Cuenta: <b>\'+cuentas.nombre+\'</b>\'" class="enlaceVistaPrevia" ng-click="vistaPreviaLibroMayor(registros.balance[cuentas.nivel][cuentas.id].libro_mayor);" ng-if="cuentas.tipo == 3">\r\n                        {{ cuentas.nombre }}\r\n                        <span ng-if="cuentas.tipo == 3">\r\n                            {{ cuentas.codigo }}\r\n                        </span>\r\n                    </a>\r\n                    <span ng-if="cuentas.tipo != 3">\r\n                        {{ cuentas.nombre }}\r\n                    </span>\r\n                </td>\r\n                <td style="text-align: right">\r\n                    <span ng-if="cuentas.tipoCuenta==2 && cuentas.nivel==1">\r\n                        {{\r\n                            registros.balance[cuentas.nivel][cuentas.id].total + registros.ejercicioActPas | currency:"$":0\r\n                        }}\r\n                    </span>\r\n                    <span ng-if="cuentas.tipoCuenta!=2 || cuentas.nivel!=1">\r\n                        {{\r\n                            registros.balance[cuentas.nivel][cuentas.id].total | currency:"$":0\r\n                        }}\r\n                    </span>\r\n                </td>\r\n            </tr> \r\n        </tbody>\r\n                       \r\n            \r\n            <tr style="background: none !important" class="textoVistaPrevia">\r\n                <td style="text-align: right; border: none !important">\r\n                    <strong>\r\n                        <span ng-if="registros.ejercicioPerGan >= 0">Utilidad</span>\r\n                        <span ng-if="registros.ejercicioPerGan < 0">Perdida</span>\r\n                        del Ejercicio:\r\n                    </strong>\r\n                </td>               \r\n                <td style="text-align: right">\r\n                    <strong>\r\n                    {{ registros.ejercicioPerGan | currency:\'$\':0 }}\r\n                    </strong>\r\n                </td>\r\n            </tr>\r\n            \r\n        </table>\r\n    </div>\r\n</div>\r\n<div class="modal-footer">\r\n	<button class="btn btn-primary" ng-disabled="form.$invalid" abrir-ventana="{{ constantes.URL + \'contabilidad-registro-asientos/balance-clasificado/imprimir/?\'+  rutaInforme  }}" ventana-nombre="IMPRIMIRBALANCECLASIFICADO" ventana-ancho="750" ventana-alto="600">Imprimir/Exportar</button>     \r\n    <button class="btn btn-default" ng-click="cancel()">Cerrar</button>        \r\n</div>'),a.put("views/reports/report-balance-clasificado.html",'<script type="text/ng-template" id="customTemplate.html">\r\n    <a style="cursor: pointer;">\r\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\r\n    </a>\r\n</script>\r\n<div class="modal-header">\r\n    <h3 class="modal-title">Balance Clasificado</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" name="form" novalidate>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Parámetros</div>\r\n            <div class="panel-body">\r\n                <div class="form-group">\r\n                    <label class="col-sm-4 control-label">Establecer Periodo:</label>\r\n                    <div class="col-sm-8">\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="1" icheck>\r\n                            Por Fechas\r\n                        </label>&nbsp;&nbsp;&nbsp;&nbsp;\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="2" icheck>\r\n                            Por Meses\r\n                        </label>\r\n                        <label>&nbsp;&nbsp;&nbsp;&nbsp;\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="3" icheck>\r\n                            Por Año\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                <div class="form-group" ng-if="objeto.fechas === 1">\r\n                    <label class="col-sm-4 control-label">Fecha Inicial:</label>\r\n                    <div class="col-sm-5">\r\n                        <p class="input-group" style="margin:0px; padding:0px">\r\n                          <input type="text" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.inicio" is-open="objeto.fechaInicial" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" required>\r\n                          <span class="input-group-btn">\r\n                            <button type="button" class="btn btn-primary" ng-click="openFechaInicial()"><i class="glyphicon glyphicon-calendar"></i></button>\r\n                          </span>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n                <div class="form-group" ng-if="objeto.fechas === 1">\r\n                    <label class="col-sm-4 control-label">Fecha Final:</label>\r\n                    <div class="col-sm-5">\r\n                        <p class="input-group" style="margin:0px; padding:0px">\r\n                          <input type="text" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.fin" is-open="objeto.fechaFinal" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" required>\r\n                          <span class="input-group-btn">\r\n                            <button type="button" class="btn btn-primary" ng-click="openFechaFinal()"><i class="glyphicon glyphicon-calendar"></i></button>\r\n                          </span>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group" ng-if="objeto.fechas === 2">\r\n                    <label class="col-sm-4 control-label">Mes Inicial:</label>\r\n                    <div class="col-sm-4">\r\n                        <select ng-model="objeto.mesInicial" ng-options="mes as mes.mes for mes in constantes.MESES" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.anioInicial" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group" ng-if="objeto.fechas === 2">\r\n                    <label class="col-sm-4 control-label">Mes Final:</label>\r\n                    <div class="col-sm-4">\r\n                        <select ng-model="objeto.mesFinal" ng-options="mes as mes.mes for mes in constantes.MESES | filter:filtroMesFinal" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.anioFinal" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group" ng-if="objeto.fechas === 3">\r\n                    <label class="col-sm-4 control-label">Año:</label>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.anioInicial" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                \r\n                <div class="form-group">\r\n                    <label class="col-sm-4 control-label">Cuentas:</label>\r\n                    <div class="col-sm-8">\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.cuentas" ng-value="1" icheck>\r\n                            Todas\r\n                        </label>&nbsp;&nbsp;\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.cuentas" ng-value="2" icheck>\r\n                            Establecer Rango\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group" ng-if="objeto.cuentas === 2">\r\n                    <label class="col-sm-4 control-label">Cuenta Inicial:</label>\r\n                    <div class="col-sm-8">\r\n                    <!--\r\n                        <select ng-model="objeto.cuentaInicial" ng-options="cuenta as (\'&nbsp;\'.repeat( (cuenta.nivel - 1) * 5 ) + cuenta.nombre + \' | \'+ cuenta.codigo) disable when !cuenta.cuenta for cuenta in cuentas" class="form-control form-white" ng-change="omitirBlancos(\'cuentaInicial\')" required>\r\n                        </select>\r\n                    -->\r\n                        <div class="col-sm-10" ng-show="!objeto.cuentaInicial.id" style="padding: 0px">\r\n                            <input type="text" ng-show="!objeto.cuentaInicial.id" ng-model="objeto.cuentaInicial" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="cuentaInicial" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" ng-class="{\'inputLoading\' : cuentaInicial }" required>\r\n                        </div>\r\n\r\n                        <div class="col-sm-2" ng-show="!objeto.cuentaInicial.id">\r\n                            <button class="btn btn-primary btn-sm" ng-click="buscarCuenta(\'cuentaInicial\');">\r\n                                <i class="fa fa-search"></i>\r\n                            </button>\r\n                        </div>\r\n\r\n                        <span ng-show="objeto.cuentaInicial.id">\r\n                            {{ objeto.cuentaInicial.cuenta }}\r\n                            <a href="javascript:void(0);" class="text-danger" ng-click="objeto.cuentaInicial=\'\';">\r\n                                <i class="fa fa-remove"></i>\r\n                            </a>\r\n                        </span>\r\n\r\n\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group" ng-if="objeto.cuentas === 2">\r\n                    <label class="col-sm-4 control-label">Cuenta Final:</label>\r\n                    <div class="col-sm-8">\r\n                        <!--\r\n                        <select ng-model="objeto.cuentaFinal" ng-options="cuenta as (\'&nbsp;\'.repeat( (cuenta.nivel - 1) * 5 ) + cuenta.nombre + \' | \'+ cuenta.codigo) disable when !cuenta.cuenta for cuenta in cuentas | filter:filtroCuentaFinal"  ng-change="omitirBlancos(\'cuentaFinal\')" class="form-control form-white" required>\r\n                        </select>\r\n                        -->\r\n                        <div class="col-sm-10" ng-show="!objeto.cuentaFinal.id" style="padding: 0px">\r\n                            <input type="text" ng-model="objeto.cuentaFinal" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="cuentaFinal" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" ng-class="{\'inputLoading\' : cuentaFinal }" required>\r\n                        </div>\r\n                        <div class="col-sm-2" ng-show="!objeto.cuentaFinal.id">\r\n                            <button class="btn btn-primary btn-sm" ng-click="buscarCuenta(\'cuentaFinal\');">\r\n                                <i class="fa fa-search"></i>\r\n                            </button>\r\n                        </div>\r\n                        \r\n                        <span ng-show="objeto.cuentaFinal.id">\r\n                            {{ objeto.cuentaFinal.cuenta }}\r\n                            <a href="javascript:void(0);" class="text-danger" ng-click="objeto.cuentaFinal=\'\';">\r\n                                <i class="fa fa-remove"></i>\r\n                            </a>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group">\r\n                    <label class="col-sm-4 control-label">Imprimir sobre Hojas Foliadas:</label>\r\n                    <div class="col-sm-4">\r\n                        <input type="checkbox" icheck ng-model="objeto.hojas">\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group">\r\n                    <label class="col-sm-4 control-label">Incluir Pie de Firma:</label>\r\n                    <div class="col-sm-4">\r\n                        <input type="checkbox" icheck ng-model="objeto.firma">\r\n                    </div>\r\n                </div>\r\n                \r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-warning" ng-disabled="form.$invalid" ng-click="vistaPrevia()">Vista Previa</button>\r\n    <button class="btn btn-primary" ng-disabled="form.$invalid" abrir-ventana="{{ constantes.URL + \'contabilidad-registro-asientos/balance-clasificado/imprimir/?\'+  rutaInforme()  }}" ventana-nombre="IMPRIMIRLIBRODIARIO" ventana-ancho="750" ventana-alto="600">Imprimir</button>     \r\n    <button class="btn btn-default" ng-click="cancel()">Cerrar</button>        \r\n</div>'),a.put("views/reports/report-balance-tributario-vista-previa.html",'<div class="modal-header">\r\n</div>\r\n<div class="modal-body">\r\n    <div class="row">\r\n        <div class="col-sm-12" style="text-align: center">\r\n            <span class="text-success" style="font-size: 20px; font-weight: bold">\r\n                Vista Previa - Balance Tributario\r\n            </span>\r\n        </div>\r\n    </div>\r\n    <div class="row" style="margin-bottom: 10px">\r\n        <div class="col-sm-12" style="text-align: center">\r\n            <span style="font-size: 15px; font-weight: bold">\r\n                Desde: {{ registros.inicio }} - \r\n                Hasta: {{ registros.fin }}\r\n            </span>\r\n        </div>\r\n    </div>\r\n    <div style="max-height: 500px; overflow-y: auto; overflow-x:hidden">\r\n        <table class="table table-striped table-bordered">\r\n            <tr class="success">\r\n                <th colspan="2"></th>\r\n                <th colspan="2" style="text-align: center">SUMAS</th>\r\n                <th colspan="2" style="text-align: center">SALDOS</th>\r\n                <th colspan="2" style="text-align: center">INVENTARIO</th>\r\n                <th colspan="2" style="text-align: center">RESULTADOS</th>\r\n            </tr>\r\n            <tr class="bg-success">\r\n                <th>Código</th>\r\n                <th>Cuenta</th>\r\n                <th>Debitos</th>\r\n                <th>Creditos</th>\r\n                <th>Deudor</th>\r\n                <th>Acreedor</th>\r\n                <th>Activo</th>\r\n                <th>Pasivo</th>\r\n                <th>Perdidas</th>\r\n                <th>Ganancias</th>\r\n            </tr>\r\n            \r\n            <tr ng-repeat="datos in registros.balance" class="textoVistaPrevia">\r\n                <td>\r\n                    <a href="javascript:void(0);" uib-tooltip-html="\'Ver Libro Mayor de la Cuenta: <b>\'+datos.cuenta+\'</b>\'" class="enlaceVistaPrevia" ng-click="vistaPreviaLibroMayor(datos.libro_mayor);">\r\n                        {{ datos.codigo }}\r\n                    </a>\r\n                </td>\r\n                <td>\r\n                    <a href="javascript:void(0);" uib-tooltip-html="\'Ver Libro Mayor de la Cuenta: <b>\'+datos.cuenta+\'</b>\'" class="enlaceVistaPrevia" ng-click="vistaPreviaLibroMayor(datos.libro_mayor);">\r\n                        {{ datos.cuenta }}\r\n                    </a>\r\n                </td>\r\n                <td style="text-align: right">\r\n                    {{ datos.debitos | currency:\'$\':0 }}\r\n                </td>\r\n                <td style="text-align: right">\r\n                    {{ datos.creditos | currency:\'$\':0}}\r\n                </td>\r\n                <td style="text-align: right">\r\n                    {{ datos.saldoDeudor | currency:\'$\':0 }}\r\n                </td>\r\n                <td style="text-align: right">\r\n                    {{ datos.saldoAcreedor | currency:\'$\':0 }}\r\n                </td>\r\n                <td style="text-align: right">\r\n                    {{ datos.activo | currency:\'$\':0 }}\r\n                </td>\r\n                <td style="text-align: right">\r\n                    {{ datos.pasivo | currency:\'$\':0 }}\r\n                </td>\r\n                <td style="text-align: right">\r\n                    {{ datos.perdidas | currency:\'$\':0 }}\r\n                </td>\r\n                <td style="text-align: right">\r\n                    {{ datos.ganancias | currency:\'$\':0 }}\r\n                </td>\r\n            </tr>\r\n\r\n\r\n            <tr style="background: none !important" class="textoVistaPrevia">\r\n                <td style="text-align: right; border: none !important" colspan="2">\r\n                    <strong>Sub Total:</strong>\r\n                </td>\r\n                <td style="text-align: right">\r\n                    <strong>{{ registros.totalDebito | currency:\'$\':0 }}</strong>\r\n                </td>\r\n                <td style="text-align: right">\r\n                    <strong>{{ registros.totalCredito | currency:\'$\':0 }}</strong>\r\n                </td>\r\n                <td style="text-align: right">\r\n                    <strong>{{ registros.totalSaldoDeudor | currency:\'$\':0 }}</strong>\r\n                </td>\r\n                <td style="text-align: right">\r\n                    <strong>{{ registros.totalSaldoAcreedor | currency:\'$\':0 }}</strong>\r\n                </td>\r\n                <td style="text-align: right">\r\n                    <strong>{{ registros.totalActivos | currency:\'$\':0 }}</strong>\r\n                </td>\r\n                <td style="text-align: right">\r\n                    <strong>{{ registros.totalPasivos | currency:\'$\':0 }}</strong>\r\n                </td>\r\n                <td style="text-align: right">\r\n                    <strong>{{ registros.totalPerdidas | currency:\'$\':0 }}</strong>\r\n                </td>\r\n                <td style="text-align: right">\r\n                    <strong>{{ registros.totalGanancias | currency:\'$\':0 }}</strong>\r\n                </td>\r\n            </tr>\r\n            <tr style="background: none !important" class="textoVistaPrevia">\r\n                <td style="text-align: right; border: none !important" colspan="2">\r\n                    <strong>Utilidad del Ejercicio:</strong>\r\n                </td>\r\n                <td style="text-align: right"></td>\r\n                <td style="text-align: right"></td>\r\n                <td style="text-align: right"></td>\r\n                <td style="text-align: right"></td>\r\n\r\n                <td style="text-align: right">\r\n                    <strong ng-show="registros.totalActivos < registros.totalPasivos">\r\n                        {{ registros.totalPasivos - registros.totalActivos  | currency:\'$\':0 }}\r\n                    </strong>\r\n                </td>\r\n                <td style="text-align: right">\r\n                    <strong ng-show="registros.totalActivos > registros.totalPasivos">\r\n                        {{ registros.totalActivos - registros.totalPasivos  | currency:\'$\':0 }}\r\n                    </strong>\r\n                </td>\r\n\r\n                <td style="text-align: right">\r\n                    <strong ng-show="registros.totalPerdidas < registros.totalGanancias">\r\n                        {{ registros.totalGanancias - registros.totalPerdidas  | currency:\'$\':0 }}\r\n                    </strong>\r\n                </td>\r\n                <td style="text-align: right">\r\n                    <strong ng-show="registros.totalPerdidas > registros.totalGanancias">\r\n                        {{ registros.totalPerdidas - registros.totalGanancias  | currency:\'$\':0 }}\r\n                    </strong>\r\n                </td>\r\n            </tr>\r\n            <tr style="background: none !important" class="textoVistaPrevia">\r\n                <td style="text-align: right; border: none !important" colspan="2"><strong>Sub Total:</strong></td>\r\n                <td style="text-align: right"><strong>{{ registros.totalDebito | currency:\'$\':0 }}</strong></td>\r\n                <td style="text-align: right"><strong>{{ registros.totalCredito | currency:\'$\':0 }}</strong></td>\r\n\r\n                <td style="text-align: right"><strong>{{ registros.totalSaldoDeudor | currency:\'$\':0 }}</strong></td>\r\n                <td style="text-align: right"><strong>{{ registros.totalSaldoAcreedor | currency:\'$\':0 }}</strong></td>\r\n\r\n                <td style="text-align: right">\r\n                    <strong ng-show="registros.totalActivos < registros.totalPasivos">\r\n                        {{ registros.totalPasivos | currency:\'$\':0 }}\r\n                    </strong>\r\n                    <strong ng-show="registros.totalActivos >= registros.totalPasivos">\r\n                        {{ registros.totalActivos | currency:\'$\':0 }}\r\n                    </strong>\r\n                </td>\r\n                <td style="text-align: right">\r\n                    <strong ng-show="registros.totalActivos > registros.totalPasivos">\r\n                        {{ registros.totalActivos | currency:\'$\':0 }}\r\n                    </strong>\r\n                    <strong ng-show="registros.totalActivos <= registros.totalPasivos">\r\n                        {{ registros.totalPasivos | currency:\'$\':0 }}\r\n                    </strong>\r\n                </td>\r\n\r\n                <td style="text-align: right">\r\n                    <strong ng-show="registros.totalPerdidas < registros.totalGanancias">\r\n                        {{ registros.totalGanancias | currency:\'$\':0 }}\r\n                    </strong>\r\n                    <strong ng-show="registros.totalPerdidas >= registros.totalGanancias">\r\n                        {{ registros.totalPerdidas | currency:\'$\':0 }}\r\n                    </strong>\r\n                </td>\r\n                <td style="text-align: right">\r\n                    <strong ng-show="registros.totalPerdidas > registros.totalGanancias">\r\n                        {{ registros.totalPerdidas  | currency:\'$\':0}}\r\n                    </strong>\r\n                    <strong ng-show="registros.totalPerdidas <= registros.totalGanancias">\r\n                        {{ registros.totalGanancias | currency:\'$\':0 }}\r\n                    </strong>\r\n                </td>\r\n            </tr>\r\n        </table>\r\n    </div>\r\n</div>\r\n<div class="modal-footer">\r\n	<button class="btn btn-primary" ng-disabled="form.$invalid" abrir-ventana="{{ constantes.URL + \'contabilidad-registro-asientos/balance-tributario/imprimir/?\'+  rutaInforme  }}" ventana-nombre="IMPRIMIRLIBROMAYOR" ventana-ancho="750" ventana-alto="600">Imprimir/Exportar</button>     \r\n    <button class="btn btn-default" ng-click="cancel()">Cerrar</button>        \r\n</div>'),a.put("views/reports/report-balance-tributario.html",'<div class="modal-header">\r\n    <h3 class="modal-title">Balance Tributario</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" name="form" novalidate>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Parámetros</div>\r\n            <div class="panel-body">\r\n                <div class="form-group">\r\n                    <label class="col-sm-4 control-label">Nivel de Cuentas:</label>\r\n                    <div class="col-sm-2">\r\n                        <select class="form-control form-white" ng-model="objeto.nivel" ng-options="num as num for num in niveles" required></select>\r\n                    </div>\r\n                </div>\r\n                <div class="form-group">\r\n                    <label class="col-sm-4 control-label">Establecer Periodo:</label>\r\n                    <div class="col-sm-8">\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="1" icheck>\r\n                            Por Fechas\r\n                        </label>&nbsp;&nbsp;&nbsp;&nbsp;\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="2" icheck>\r\n                            Por Meses\r\n                        </label>\r\n                        <label>&nbsp;&nbsp;&nbsp;&nbsp;\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="3" icheck>\r\n                            Por Año\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                <div class="form-group" ng-if="objeto.fechas === 1">\r\n                    <label class="col-sm-4 control-label">Fecha Inicial:</label>\r\n                    <div class="col-sm-5">\r\n                        <p class="input-group" style="margin:0px; padding:0px">\r\n                          <input type="text" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.inicio" is-open="objeto.fechaInicial" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" required>\r\n                          <span class="input-group-btn">\r\n                            <button type="button" class="btn btn-md btn-primary" ng-click="openFechaInicial()"><i class="glyphicon glyphicon-calendar"></i></button>\r\n                          </span>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n                <div class="form-group" ng-if="objeto.fechas === 1">\r\n                    <label class="col-sm-4 control-label">Fecha Final:</label>\r\n                    <div class="col-sm-5">\r\n                        <p class="input-group" style="margin:0px; padding:0px">\r\n                          <input type="text" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.fin" is-open="objeto.fechaFinal" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" required>\r\n                          <span class="input-group-btn">\r\n                            <button type="button" class="btn btn-md btn-primary" ng-click="openFechaFinal()"><i class="glyphicon glyphicon-calendar"></i></button>\r\n                          </span>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group" ng-if="objeto.fechas === 2">\r\n                    <label class="col-sm-4 control-label">Mes Inicial:</label>\r\n                    <div class="col-sm-4">\r\n                        <select ng-model="objeto.mesInicial" ng-options="mes as mes.mes for mes in constantes.MESES" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.anioInicial" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group" ng-if="objeto.fechas === 2">\r\n                    <label class="col-sm-4 control-label">Mes Final:</label>\r\n                    <div class="col-sm-4">\r\n                        <select ng-model="objeto.mesFinal" ng-options="mes as mes.mes for mes in constantes.MESES | filter:filtroMesFinal" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.anioFinal" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group" ng-if="objeto.fechas === 3">\r\n                    <label class="col-sm-4 control-label">Año:</label>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.anioInicial" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group">\r\n                    <label class="col-sm-4 control-label">Imprimir sobre Hojas Foliadas:</label>\r\n                    <div class="col-sm-4">\r\n                        <input type="checkbox" icheck ng-model="objeto.hojas">\r\n                    </div>\r\n                </div>\r\n                <div class="form-group">\r\n                    <label class="col-sm-4 control-label">Incluir Pie de Firma:</label>\r\n                    <div class="col-sm-4">\r\n                        <input type="checkbox" icheck ng-model="objeto.firma">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-warning" ng-disabled="form.$invalid" ng-click="vistaPrevia()">Vista Previa</button>\r\n    <button class="btn btn-primary" ng-disabled="form.$invalid" abrir-ventana="{{ constantes.URL + \'contabilidad-registro-asientos/balance-tributario/imprimir/?\' + rutaInforme() }}" ventana-nombre="IMPRIMIRBALANCETRIBUTARIO" ventana-ancho="800" ventana-alto="600">Imprimir</button>     \r\n    <button class="btn btn-default" ng-click="cancel()">Cerrar</button>        \r\n</div>'),
a.put("views/reports/report-certificado-honorarios.html",'<script type="text/ng-template" id="customTemplate.html">\r\n    <a style="cursor: pointer;">\r\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\r\n    </a>\r\n</script>\r\n<div class="modal-header">\r\n    <h3 class="modal-title">Certificado de Honorarios</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" name="form" novalidate>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Parámetros</div>\r\n            <div class="panel-body">\r\n\r\n                <div class="form-group">\r\n                    <label class="col-sm-4 control-label">Año:</label>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.anio" ng-options="anio as anio for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group">\r\n                    <label class="col-sm-4 control-label">Proveedor:</label>\r\n                    <div class="col-sm-8">\r\n                        <div ng-if="!objeto.proveedor.id">\r\n                            <div class="col-sm-10" style="padding:0px">\r\n                                <input type="text" ng-model="objeto.proveedor" placeholder="Buscar Proveedor" uib-typeahead="prov as prov.razonSocial for prov in getProveedores($viewValue)" typeahead-loading="proveedor" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" ng-class="{\'inputLoading\' : proveedor}" required>\r\n                            </div>\r\n                            <div class="col-sm-1">\r\n                                <i ng-show="objeto.proveedor.id" class="fa fa-check" style="color: #0a0"></i>\r\n                            </div>\r\n                            \r\n                        </div>\r\n                        <div class="col-sm-12" ng-if="objeto.proveedor.id" style="padding-left: 5px">\r\n                            <strong>\r\n                            {{ objeto.proveedor.razonSocial }}&nbsp;&nbsp;\r\n                            <a href="javascript:void(0)" ng-click="objeto.proveedor=\'\'" class="btn btn-danger btn-xs">\r\n                                <i class="fa fa-remove"></i>\r\n                            </a>\r\n                            <br>\r\n                            {{ objeto.proveedor.rut }}\r\n                            </strong>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-primary" ng-disabled="form.$invalid" ng-click="vistaPreviaCertificadoHonorarios();">Visualizar</button>     \r\n    <button class="btn btn-default" ng-click="cancel()">Cerrar</button>        \r\n</div>'),a.put("views/reports/report-detalles-recepcion-orden-compra.html",'<div class="modal-header">\r\n    <h3 class="modal-title">Recepción de Productos en Bodega</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <div class="panel panel-primary">\r\n        <div class="panel-heading">Detalles de la Recepción</div>\r\n        <div class="panel-body">\r\n            <div class="form-group sinMargen">\r\n                <label class="col-sm-3 control-label">Fecha de Recepción:</label>\r\n                <div class="col-sm-9">\r\n                    {{ objeto.fecha }}\r\n                </div>\r\n            </div>\r\n            <div class="form-group sinMargen">\r\n                <label class="col-sm-3 control-label">Responsable:</label>\r\n                <div class="col-sm-9">\r\n                    {{ objeto.responsable }}\r\n                </div>\r\n            </div>\r\n\r\n            <div class="form-group">\r\n                <p>&nbsp;</p>\r\n                <table class="table table-striped table-hover">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>#</th>\r\n                            <th class="col-sm-3">Código</th>\r\n                            <th class="col-sm-6">Descripción</th>\r\n                            <th class="col-sm-1">Recepcionado</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr ng-repeat="item in objeto.detalles">\r\n                            <td>{{ $index + 1 }}</td>\r\n                            <td>{{ item.producto.codigo }}</td>\r\n                            <td>{{ item.producto.descripcion }}</td>\r\n                            <td class="text-right">{{ item.recepcionado }}</td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <div class="form-group">\r\n                <label class="col-sm-3 control-label">Observaciones:</label>\r\n                <div class="col-sm-9">\r\n                    {{ objeto.observaciones }}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-default" ng-click="cancel()">Cerrar</button>\r\n</div>'),a.put("views/reports/report-dj-1847.html",'<div class="modal-header">\r\n    <h3 class="modal-title">Declaración Jurada 1847</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" name="form" novalidate>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Parámetros</div>\r\n            <div class="panel-body">\r\n\r\n                <div class="form-group">\r\n                    <label class="col-sm-4 control-label">Año:</label>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.anioInicial" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-primary" ng-disabled="form.$invalid" abrir-ventana="{{ constantes.URL + \'sii-plan-de-cuentas/declaracion-jurada-1847/imprimir/?\' + rutaInforme() }}" ventana-nombre="IMPRIMIRBALANCETRIBUTARIO" ventana-ancho="800" ventana-alto="600">Imprimir</button>     \r\n    <button class="btn btn-default" ng-click="cancel()">Cerrar</button>        \r\n</div>'),a.put("views/reports/report-dj-1926.html",'<div class="modal-header">\r\n    <h3 class="modal-title">Declaración Jurada 1926</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" name="form" novalidate>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Parámetros</div>\r\n            <div class="panel-body">\r\n\r\n                <div class="form-group">\r\n                    <label class="col-sm-4 control-label">Año:</label>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.anioInicial" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-primary" ng-disabled="form.$invalid" abrir-ventana="{{ constantes.URL + \'sii-plan-de-cuentas/declaracion-jurada-1926/imprimir/?\' + rutaInforme() }}" ventana-nombre="IMPRIMIRDECLARACIONJURADA1926" ventana-ancho="800" ventana-alto="600">Imprimir</button>     \r\n    <button class="btn btn-default" ng-click="cancel()">Cerrar</button>        \r\n</div>'),a.put("views/reports/report-estado-resultado.html",'<script type="text/ng-template" id="customTemplate.html">\r\n    <a style="cursor: pointer;">\r\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\r\n    </a>\r\n</script>\r\n<div class="modal-header">\r\n    <h3 class="modal-title">Estado de Resultado</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" name="form" novalidate>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Parámetros</div>\r\n            <div class="panel-body">\r\n                <div class="form-group">\r\n                    <label class="col-sm-4 control-label">Establecer Periodo:</label>\r\n                    <div class="col-sm-8">\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="1" icheck>\r\n                            Por Fechas\r\n                        </label>&nbsp;&nbsp;&nbsp;&nbsp;\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="2" icheck>\r\n                            Por Meses\r\n                        </label>\r\n                        <label>&nbsp;&nbsp;&nbsp;&nbsp;\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="3" icheck>\r\n                            Por Año\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                <div class="form-group" ng-if="objeto.fechas === 1">\r\n                    <label class="col-sm-4 control-label">Fecha Inicial:</label>\r\n                    <div class="col-sm-5">\r\n                        <p class="input-group" style="margin:0px; padding:0px">\r\n                          <input type="text" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.inicio" is-open="objeto.fechaInicial" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" required>\r\n                          <span class="input-group-btn">\r\n                            <button type="button" class="btn btn-primary" ng-click="openFechaInicial()"><i class="glyphicon glyphicon-calendar"></i></button>\r\n                          </span>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n                <div class="form-group" ng-if="objeto.fechas === 1">\r\n                    <label class="col-sm-4 control-label">Fecha Final:</label>\r\n                    <div class="col-sm-5">\r\n                        <p class="input-group" style="margin:0px; padding:0px">\r\n                          <input type="text" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.fin" is-open="objeto.fechaFinal" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" required>\r\n                          <span class="input-group-btn">\r\n                            <button type="button" class="btn btn-primary" ng-click="openFechaFinal()"><i class="glyphicon glyphicon-calendar"></i></button>\r\n                          </span>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group" ng-if="objeto.fechas === 2">\r\n                    <label class="col-sm-4 control-label">Mes Inicial:</label>\r\n                    <div class="col-sm-4">\r\n                        <select ng-model="objeto.mesInicial" ng-options="mes as mes.mes for mes in constantes.MESES" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.anioInicial" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group" ng-if="objeto.fechas === 2">\r\n                    <label class="col-sm-4 control-label">Mes Final:</label>\r\n                    <div class="col-sm-4">\r\n                        <select ng-model="objeto.mesFinal" ng-options="mes as mes.mes for mes in constantes.MESES | filter:filtroMesFinal" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.anioFinal" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group" ng-if="objeto.fechas === 3">\r\n                    <label class="col-sm-4 control-label">Año:</label>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.anioInicial" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group">\r\n                    <label class="col-sm-4 control-label">Cuentas:</label>\r\n                    <div class="col-sm-8">\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.cuentas" ng-value="1" icheck>\r\n                            Todas\r\n                        </label>&nbsp;&nbsp;\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.cuentas" ng-value="2" icheck>\r\n                            Establecer Rango\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group" ng-if="objeto.cuentas === 2">\r\n                    <label class="col-sm-4 control-label">Cuenta Inicial:</label>\r\n                    <div class="col-sm-8">\r\n                    <!--\r\n                        <select ng-model="objeto.cuentaInicial" ng-options="cuenta as (\'&nbsp;\'.repeat( (cuenta.nivel - 1) * 5 ) + cuenta.nombre + \' | \'+ cuenta.codigo) disable when !cuenta.cuenta for cuenta in cuentas" class="form-control form-white" ng-change="omitirBlancos(\'cuentaInicial\')" required>\r\n                        </select>\r\n                    -->\r\n                        <div class="col-sm-10" ng-show="!objeto.cuentaInicial.id" style="padding: 0px">\r\n                            <input type="text" ng-show="!objeto.cuentaInicial.id" ng-model="objeto.cuentaInicial" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="cuentaInicial" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" ng-class="{\'inputLoading\' : cuentaInicial }" required>\r\n                        </div>\r\n\r\n                        <div class="col-sm-2" ng-show="!objeto.cuentaInicial.id">\r\n                            <button class="btn btn-primary btn-sm" ng-click="buscarCuenta(\'cuentaInicial\');">\r\n                                <i class="fa fa-search"></i>\r\n                            </button>\r\n                        </div>\r\n\r\n                        <span ng-show="objeto.cuentaInicial.id">\r\n                            {{ objeto.cuentaInicial.cuenta }}\r\n                            <a href="javascript:void(0);" class="text-danger" ng-click="objeto.cuentaInicial=\'\';">\r\n                                <i class="fa fa-remove"></i>\r\n                            </a>\r\n                        </span>\r\n\r\n\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group" ng-if="objeto.cuentas === 2">\r\n                    <label class="col-sm-4 control-label">Cuenta Final:</label>\r\n                    <div class="col-sm-8">\r\n                        <!--\r\n                        <select ng-model="objeto.cuentaFinal" ng-options="cuenta as (\'&nbsp;\'.repeat( (cuenta.nivel - 1) * 5 ) + cuenta.nombre + \' | \'+ cuenta.codigo) disable when !cuenta.cuenta for cuenta in cuentas | filter:filtroCuentaFinal"  ng-change="omitirBlancos(\'cuentaFinal\')" class="form-control form-white" required>\r\n                        </select>\r\n                        -->\r\n                        <div class="col-sm-10" ng-show="!objeto.cuentaFinal.id" style="padding: 0px">\r\n                            <input type="text" ng-model="objeto.cuentaFinal" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="cuentaFinal" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" ng-class="{\'inputLoading\' : cuentaFinal }" required>\r\n                        </div>\r\n                        <div class="col-sm-2" ng-show="!objeto.cuentaFinal.id">\r\n                            <button class="btn btn-primary btn-sm" ng-click="buscarCuenta(\'cuentaFinal\');">\r\n                                <i class="fa fa-search"></i>\r\n                            </button>\r\n                        </div>\r\n                        \r\n                        <span ng-show="objeto.cuentaFinal.id">\r\n                            {{ objeto.cuentaFinal.cuenta }}\r\n                            <a href="javascript:void(0);" class="text-danger" ng-click="objeto.cuentaFinal=\'\';">\r\n                                <i class="fa fa-remove"></i>\r\n                            </a>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group">\r\n                    <label class="col-sm-4 control-label">Imprimir sobre Hojas Foliadas:</label>\r\n                    <div class="col-sm-4">\r\n                        <input type="checkbox" icheck ng-model="objeto.hojas">\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group">\r\n                    <label class="col-sm-4 control-label">Incluir Pie de Firma:</label>\r\n                    <div class="col-sm-4">\r\n                        <input type="checkbox" icheck ng-model="objeto.firma">\r\n                    </div>\r\n                </div>\r\n                \r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-primary" ng-disabled="form.$invalid" abrir-ventana="{{ constantes.URL + \'contabilidad-registro-asientos/estado-resultado/imprimir/?\'+  rutaInforme()  }}" ventana-nombre="IMPRIMIRESTADORESULTADO" ventana-ancho="750" ventana-alto="600">Imprimir</button>     \r\n    <button class="btn btn-default" ng-click="cancel()">Cerrar</button>        \r\n</div>'),a.put("views/reports/report-informe-analisis.html",'<script type="text/ng-template" id="customTemplate.html">\r\n    <a style="cursor: pointer;">\r\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\r\n    </a>\r\n</script>\r\n<div class="modal-header">\r\n    <h3 class="modal-title">Informe de Análisis</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" name="form" novalidate>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Parámetros</div>\r\n            <div class="panel-body">\r\n                <div class="form-group">\r\n                    <label class="col-sm-3 control-label">Cuenta Análisis:</label>\r\n                    <div class="col-sm-9">\r\n                        <div class="col-sm-10" ng-show="!objeto.cuentaAnalisis.id" style="padding: 0px">\r\n                            <input type="text" ng-show="!objeto.cuentaAnalisis.id" ng-model="objeto.cuentaAnalisis" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="cuentaAnalisis" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" ng-class="{\'inputLoading\' : cuentaAnalisis }" required>\r\n                        </div>\r\n\r\n                        <div class="col-sm-2" ng-show="!objeto.cuentaAnalisis.id">\r\n                            <button class="btn btn-primary btn-sm" ng-click="buscarCuenta(\'cuentaAnalisis\');">\r\n                                <i class="fa fa-search"></i>\r\n                            </button>\r\n                        </div>\r\n\r\n                        <span ng-show="objeto.cuentaAnalisis.id">\r\n                            {{ objeto.cuentaAnalisis.cuenta }}\r\n                            <a href="javascript:void(0);" class="text-danger" ng-click="objeto.cuentaAnalisis=\'\';">\r\n                                <i class="fa fa-remove"></i>\r\n                            </a>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div class="form-group">\r\n                    <label class="col-sm-3 control-label">Cliente/Proveedor:</label>\r\n                    <div class="col-sm-6">\r\n                        <div class="col-sm-11" style="padding:0px">\r\n                            <input type="text" ng-model="objeto.proveedor" placeholder="Buscar Cliente / Proveedor" uib-typeahead="prov as prov.razonSocial for prov in getProveedores($viewValue)" typeahead-loading="proveedor" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" ng-class="{\'inputLoading\' : proveedor}">\r\n                        </div>\r\n                        <div class="col-sm-1">\r\n                            <i ng-show="objeto.proveedor.id" class="fa fa-check" style="color: #0a0"></i>\r\n                        </div>                               \r\n                    </div>\r\n                    <div class="col-sm-2">\r\n                        * Dejar en blanco para buscar todos\r\n                    </div>                            \r\n                </div>\r\n\r\n                <div class="form-group">\r\n                    <label class="col-sm-3 control-label">Tipo de Análisis:</label>\r\n                    <div class="col-sm-5">\r\n                        <select class="form-control form-white" ng-model="objeto.tipoAnalisis" ng-options="tip as tip.tipo for tip in tiposAnalisis" required></select>\r\n                    </div>\r\n                </div>\r\n\r\n\r\n                \r\n                <div class="form-group" ng-init="objeto.fechas=0;">\r\n                    <label class="col-sm-3 control-label">Periodo Análisis:</label>\r\n                    <div class="col-sm-9">\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="0" icheck>\r\n                            Todos\r\n                        </label>&nbsp;&nbsp;&nbsp;\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="1" icheck>\r\n                            Fecha\r\n                        </label>&nbsp;&nbsp;&nbsp;\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="2" icheck>\r\n                            Rango Fechas\r\n                        </label>&nbsp;&nbsp;&nbsp;\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="3" icheck>\r\n                            Mes\r\n                        </label>&nbsp;&nbsp;&nbsp;\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="4" icheck>\r\n                            Rango Meses\r\n                        </label>                                \r\n                    </div>\r\n                </div>\r\n                \r\n\r\n                <div class="form-group required" ng-if="objeto.fechas == 1">\r\n                    <label class="col-sm-3 control-label">Fecha:</label>\r\n                    <div class="col-sm-3">\r\n                        <p class="input-group" style="margin-bottom:0px">\r\n                          <input type="text" name="fecha" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.fecha" is-open="fechas.fecha" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" ng-change="revisarFecha(); cambiarFechaComprobante();" class="form-control form-white" required>\r\n                          <span class="input-group-btn">\r\n                            <button type="button" class="btn btn-primary" ng-click="open(\'fecha\')" style="margin-bottom:0px"><i class="glyphicon glyphicon-calendar"></i></button>\r\n                          </span>\r\n                        </p>\r\n                    </div>\r\n                    <div class="col-sm-5 text-danger" ng-show="form[\'fecha\'].$error.date">\r\n                        Fecha no Válida\r\n                    </div>\r\n                </div>\r\n\r\n\r\n\r\n                <div class="form-group required" ng-if="objeto.fechas == 2">\r\n                    <label class="col-sm-3 control-label">Fecha Inicial:</label>\r\n                    <div class="col-sm-3">\r\n                        <p class="input-group" style="margin:0px; padding:0px">\r\n                          <input type="text" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.inicio" is-open="fechas.fechaInicial" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" required>\r\n                          <span class="input-group-btn">\r\n                            <button type="button" class="btn btn-primary" ng-click="open(\'fechaInicial\')"><i class="glyphicon glyphicon-calendar"></i></button>\r\n                          </span>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n                <div class="form-group required" ng-if="objeto.fechas == 2">\r\n                    <label class="col-sm-3 control-label">Fecha Final:</label>\r\n                    <div class="col-sm-3">\r\n                        <p class="input-group" style="margin:0px; padding:0px">\r\n                          <input type="text" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.fin" is-open="fechas.fechaFinal" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" required>\r\n                          <span class="input-group-btn">\r\n                            <button type="button" class="btn btn-primary" ng-click="open(\'fechaFinal\')"><i class="glyphicon glyphicon-calendar"></i></button>\r\n                          </span>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group required" ng-if="objeto.fechas == 3">\r\n                    <label class="col-sm-3 control-label">Mes:</label>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.mes" ng-options="mes as mes.mes for mes in constantes.MESES | filter:filtroMesFinal" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                    <div class="col-sm-2">\r\n                        <select ng-model="objeto.anio" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group required" ng-if="objeto.fechas == 4">\r\n                    <label class="col-sm-3 control-label">Mes Inicial:</label>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.mesInicial" ng-options="mes as mes.mes for mes in constantes.MESES" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                    <div class="col-sm-2">\r\n                        <select ng-model="objeto.anioInicial" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group required" ng-if="objeto.fechas == 4">\r\n                    <label class="col-sm-3 control-label">Mes Final:</label>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.mesFinal" ng-options="mes as mes.mes for mes in constantes.MESES | filter:filtroMesFinal" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                    <div class="col-sm-2">\r\n                        <select ng-model="objeto.anioFinal" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n	<button class="btn btn-primary" ng-disabled="form.$invalid" abrir-ventana="{{ constantes.URL + \'tesoreria-informes/informe-analisis/imprimir/?\'+  rutaInforme()  }}" ventana-nombre="IMPRIMIRINFORMECOMPRAS" ventana-ancho="750" ventana-alto="600">Imprimir</button>     \r\n    <button class="btn btn-default" ng-click="cancel()">Cerrar</button>        \r\n</div>'),a.put("views/reports/report-informe-compras.html",'<script type="text/ng-template" id="customTemplate.html">\r\n    <a style="cursor: pointer;">\r\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\r\n    </a>\r\n</script>\r\n<div class="modal-header">\r\n    <h3 class="modal-title">Informe de Compras</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" name="form" novalidate>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Parámetros</div>\r\n            <div class="panel-body">\r\n                <div class="form-group">\r\n                    <label class="col-sm-3 control-label">Proveedor:</label>\r\n                    <div class="col-sm-6">\r\n                        <div class="col-sm-11" style="padding:0px">\r\n                            <input type="text" ng-model="objeto.proveedor" placeholder="Buscar Proveedor" uib-typeahead="prov as prov.razonSocial for prov in getProveedores($viewValue)" typeahead-loading="proveedor" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" ng-class="{\'inputLoading\' : proveedor}">\r\n                        </div>\r\n                        <div class="col-sm-1">\r\n                            <i ng-show="objeto.proveedor.id" class="fa fa-check" style="color: #0a0"></i>\r\n                        </div>                               \r\n                    </div>\r\n                    <div class="col-sm-2">\r\n                        * Dejar en blanco para buscar todos\r\n                    </div>                            \r\n                </div>\r\n                <div class="form-group">\r\n                    <label class="col-sm-3 control-label">Estado Documento:</label>\r\n                    <div class="col-sm-9" ng-init="objeto.tipoPago=1;">\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.tipoPago" ng-value="1" icheck>\r\n                            Todos\r\n                        </label>&nbsp;&nbsp;&nbsp;\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.tipoPago" ng-value="2" icheck>\r\n                            Pagados\r\n                        </label>&nbsp;&nbsp;&nbsp;\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.tipoPago" ng-value="3" icheck>\r\n                            Pendientes\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                \r\n                <div class="form-group" ng-init="objeto.fechas=0;">\r\n                    <label class="col-sm-3 control-label">Establecer Periodo:</label>\r\n                    <div class="col-sm-9">\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="0" checked icheck>\r\n                            Todos\r\n                        </label>&nbsp;&nbsp;&nbsp;\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="1" icheck>\r\n                            Fecha\r\n                        </label>&nbsp;&nbsp;&nbsp;\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="2" icheck>\r\n                            Rango Fechas\r\n                        </label>&nbsp;&nbsp;&nbsp;\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="3" icheck>\r\n                            Mes\r\n                        </label>&nbsp;&nbsp;&nbsp;\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="4" icheck>\r\n                            Rango Meses\r\n                        </label>                                \r\n                    </div>\r\n                </div>\r\n                \r\n\r\n                <div class="form-group required" ng-if="objeto.fechas == 1">\r\n                    <label class="col-sm-3 control-label">Fecha:</label>\r\n                    <div class="col-sm-3">\r\n                        <p class="input-group" style="margin-bottom:0px">\r\n                          <input type="text" name="fecha" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.fecha" is-open="fechas.fecha" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" ng-change="revisarFecha(); cambiarFechaComprobante();" class="form-control form-white" required>\r\n                          <span class="input-group-btn">\r\n                            <button type="button" class="btn btn-primary" ng-click="open(\'fecha\')" style="margin-bottom:0px"><i class="glyphicon glyphicon-calendar"></i></button>\r\n                          </span>\r\n                        </p>\r\n                    </div>\r\n                    <div class="col-sm-5 text-danger" ng-show="form[\'fecha\'].$error.date">\r\n                        Fecha no Válida\r\n                    </div>\r\n                </div>\r\n\r\n\r\n\r\n                <div class="form-group required" ng-if="objeto.fechas == 2">\r\n                    <label class="col-sm-3 control-label">Fecha Inicial:</label>\r\n                    <div class="col-sm-3">\r\n                        <p class="input-group" style="margin:0px; padding:0px">\r\n                          <input type="text" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.inicio" is-open="fechas.fechaInicial" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" required>\r\n                          <span class="input-group-btn">\r\n                            <button type="button" class="btn btn-primary" ng-click="open(\'fechaInicial\')"><i class="glyphicon glyphicon-calendar"></i></button>\r\n                          </span>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n                <div class="form-group required" ng-if="objeto.fechas == 2">\r\n                    <label class="col-sm-3 control-label">Fecha Final:</label>\r\n                    <div class="col-sm-3">\r\n                        <p class="input-group" style="margin:0px; padding:0px">\r\n                          <input type="text" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.fin" is-open="fechas.fechaFinal" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" required>\r\n                          <span class="input-group-btn">\r\n                            <button type="button" class="btn btn-primary" ng-click="open(\'fechaFinal\')"><i class="glyphicon glyphicon-calendar"></i></button>\r\n                          </span>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group required" ng-if="objeto.fechas == 3">\r\n                    <label class="col-sm-3 control-label">Mes:</label>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.mes" ng-options="mes as mes.mes for mes in constantes.MESES | filter:filtroMesFinal" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                    <div class="col-sm-2">\r\n                        <select ng-model="objeto.anio" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group required" ng-if="objeto.fechas == 4">\r\n                    <label class="col-sm-3 control-label">Mes Inicial:</label>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.mesInicial" ng-options="mes as mes.mes for mes in constantes.MESES" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                    <div class="col-sm-2">\r\n                        <select ng-model="objeto.anioInicial" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group required" ng-if="objeto.fechas == 4">\r\n                    <label class="col-sm-3 control-label">Mes Final:</label>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.mesFinal" ng-options="mes as mes.mes for mes in constantes.MESES | filter:filtroMesFinal" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                    <div class="col-sm-2">\r\n                        <select ng-model="objeto.anioFinal" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n	<button class="btn btn-primary" ng-disabled="form.$invalid" abrir-ventana="{{ constantes.URL + \'tesoreria-informes/informe-compras/imprimir/?\'+  rutaInforme()  }}" ventana-nombre="IMPRIMIRINFORMECOMPRAS" ventana-ancho="750" ventana-alto="600">Imprimir</button>     \r\n    <button class="btn btn-default" ng-click="cancel()">Cerrar</button>        \r\n</div>'),
a.put("views/reports/report-informe-honorarios.html",'<script type="text/ng-template" id="customTemplate.html">\r\n    <a style="cursor: pointer;">\r\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\r\n    </a>\r\n</script>\r\n<div class="modal-header">\r\n    <h3 class="modal-title">Informe de Honorarios</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" name="form" novalidate>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Parámetros</div>\r\n            <div class="panel-body">\r\n                <div class="form-group">\r\n                    <label class="col-sm-3 control-label">Prestador de Servicios:</label>\r\n                    <div class="col-sm-6">\r\n                        <div class="col-sm-11" style="padding:0px">\r\n                            <input type="text" ng-model="objeto.proveedor" placeholder="Buscar Prestador de Servicios" uib-typeahead="prov as prov.razonSocial for prov in getProveedores($viewValue)" typeahead-loading="proveedor" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" ng-class="{\'inputLoading\' : proveedor}">\r\n                        </div>\r\n                        <div class="col-sm-1">\r\n                            <i ng-show="objeto.proveedor.id" class="fa fa-check" style="color: #0a0"></i>\r\n                        </div>                               \r\n                    </div>\r\n                    <div class="col-sm-2">\r\n                        * Dejar en blanco para buscar todos\r\n                    </div>                            \r\n                </div>\r\n                <div class="form-group">\r\n                    <label class="col-sm-3 control-label">Estado Documento:</label>\r\n                    <div class="col-sm-9" ng-init="objeto.tipoPago=1;">\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.tipoPago" ng-value="1" icheck>\r\n                            Todos\r\n                        </label>&nbsp;&nbsp;&nbsp;\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.tipoPago" ng-value="2" icheck>\r\n                            Pagados\r\n                        </label>&nbsp;&nbsp;&nbsp;\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.tipoPago" ng-value="3" icheck>\r\n                            Pendientes\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                \r\n                <div class="form-group" ng-init="objeto.fechas=0;">\r\n                    <label class="col-sm-3 control-label">Establecer Periodo:</label>\r\n                    <div class="col-sm-9">\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="0" checked icheck>\r\n                            Todos\r\n                        </label>&nbsp;&nbsp;&nbsp;\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="1" icheck>\r\n                            Fecha\r\n                        </label>&nbsp;&nbsp;&nbsp;\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="2" icheck>\r\n                            Rango Fechas\r\n                        </label>&nbsp;&nbsp;&nbsp;\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="3" icheck>\r\n                            Mes\r\n                        </label>&nbsp;&nbsp;&nbsp;\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="4" icheck>\r\n                            Rango Meses\r\n                        </label>                                \r\n                    </div>\r\n                </div>\r\n                \r\n\r\n                <div class="form-group required" ng-if="objeto.fechas == 1">\r\n                    <label class="col-sm-3 control-label">Fecha:</label>\r\n                    <div class="col-sm-3">\r\n                        <p class="input-group" style="margin-bottom:0px">\r\n                          <input type="text" name="fecha" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.fecha" is-open="fechas.fecha" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" ng-change="revisarFecha(); cambiarFechaComprobante();" class="form-control form-white" required>\r\n                          <span class="input-group-btn">\r\n                            <button type="button" class="btn btn-primary" ng-click="open(\'fecha\')" style="margin-bottom:0px"><i class="glyphicon glyphicon-calendar"></i></button>\r\n                          </span>\r\n                        </p>\r\n                    </div>\r\n                    <div class="col-sm-5 text-danger" ng-show="form[\'fecha\'].$error.date">\r\n                        Fecha no Válida\r\n                    </div>\r\n                </div>\r\n\r\n\r\n\r\n                <div class="form-group required" ng-if="objeto.fechas == 2">\r\n                    <label class="col-sm-3 control-label">Fecha Inicial:</label>\r\n                    <div class="col-sm-3">\r\n                        <p class="input-group" style="margin:0px; padding:0px">\r\n                          <input type="text" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.inicio" is-open="fechas.fechaInicial" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" required>\r\n                          <span class="input-group-btn">\r\n                            <button type="button" class="btn btn-primary" ng-click="open(\'fechaInicial\')"><i class="glyphicon glyphicon-calendar"></i></button>\r\n                          </span>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n                <div class="form-group required" ng-if="objeto.fechas == 2">\r\n                    <label class="col-sm-3 control-label">Fecha Final:</label>\r\n                    <div class="col-sm-3">\r\n                        <p class="input-group" style="margin:0px; padding:0px">\r\n                          <input type="text" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.fin" is-open="fechas.fechaFinal" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" required>\r\n                          <span class="input-group-btn">\r\n                            <button type="button" class="btn btn-primary" ng-click="open(\'fechaFinal\')"><i class="glyphicon glyphicon-calendar"></i></button>\r\n                          </span>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group required" ng-if="objeto.fechas == 3">\r\n                    <label class="col-sm-3 control-label">Mes:</label>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.mes" ng-options="mes as mes.mes for mes in constantes.MESES | filter:filtroMesFinal" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                    <div class="col-sm-2">\r\n                        <select ng-model="objeto.anio" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group required" ng-if="objeto.fechas == 4">\r\n                    <label class="col-sm-3 control-label">Mes Inicial:</label>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.mesInicial" ng-options="mes as mes.mes for mes in constantes.MESES" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                    <div class="col-sm-2">\r\n                        <select ng-model="objeto.anioInicial" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group required" ng-if="objeto.fechas == 4">\r\n                    <label class="col-sm-3 control-label">Mes Final:</label>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.mesFinal" ng-options="mes as mes.mes for mes in constantes.MESES | filter:filtroMesFinal" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                    <div class="col-sm-2">\r\n                        <select ng-model="objeto.anioFinal" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n	<button class="btn btn-primary" ng-disabled="form.$invalid" abrir-ventana="{{ constantes.URL + \'tesoreria-informes/informe-honorarios/imprimir/?\'+  rutaInforme()  }}" ventana-nombre="IMPRIMIRINFORMEHONORARIOS" ventana-ancho="750" ventana-alto="600">Imprimir</button>     \r\n    <button class="btn btn-default" ng-click="cancel()">Cerrar</button>        \r\n</div>'),a.put("views/reports/report-informe-ventas.html",'<script type="text/ng-template" id="customTemplate.html">\r\n    <a style="cursor: pointer;">\r\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\r\n    </a>\r\n</script>\r\n<div class="modal-header">\r\n    <h3 class="modal-title">Informe de Ventas</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" name="form" novalidate>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Parámetros</div>\r\n            <div class="panel-body">\r\n                <div class="form-group">\r\n                    <label class="col-sm-3 control-label">Cliente:</label>\r\n                    <div class="col-sm-6">\r\n                        <div class="col-sm-11" style="padding:0px">\r\n                            <input type="text" ng-model="objeto.cliente" placeholder="Buscar Cliente" uib-typeahead="prov as prov.razonSocial for prov in getClientes($viewValue)" typeahead-loading="cliente" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" ng-class="{\'inputLoading\' : cliente}">\r\n                        </div>\r\n                        <div class="col-sm-1">\r\n                            <i ng-show="objeto.cliente.id" class="fa fa-check" style="color: #0a0"></i>\r\n                        </div>                               \r\n                    </div>\r\n                    <div class="col-sm-2">\r\n                        * Dejar en blanco para buscar todos\r\n                    </div>                            \r\n                </div>\r\n                <div class="form-group">\r\n                    <label class="col-sm-3 control-label">Estado Documento:</label>\r\n                    <div class="col-sm-9" ng-init="objeto.tipoPago=1;">\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.tipoPago" ng-value="1" icheck>\r\n                            Todos\r\n                        </label>&nbsp;&nbsp;&nbsp;\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.tipoPago" ng-value="2" icheck>\r\n                            Pagados\r\n                        </label>&nbsp;&nbsp;&nbsp;\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.tipoPago" ng-value="3" icheck>\r\n                            Pendientes\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                \r\n                <div class="form-group" ng-init="objeto.fechas=0;">\r\n                    <label class="col-sm-3 control-label">Establecer Periodo:</label>\r\n                    <div class="col-sm-9">\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="0" checked icheck>\r\n                            Todos\r\n                        </label>&nbsp;&nbsp;&nbsp;\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="1" icheck>\r\n                            Fecha\r\n                        </label>&nbsp;&nbsp;&nbsp;\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="2" icheck>\r\n                            Rango Fechas\r\n                        </label>&nbsp;&nbsp;&nbsp;\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="3" icheck>\r\n                            Mes\r\n                        </label>&nbsp;&nbsp;&nbsp;\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="4" icheck>\r\n                            Rango Meses\r\n                        </label>                                \r\n                    </div>\r\n                </div>\r\n                \r\n\r\n                <div class="form-group required" ng-if="objeto.fechas == 1">\r\n                    <label class="col-sm-3 control-label">Fecha:</label>\r\n                    <div class="col-sm-3">\r\n                        <p class="input-group" style="margin-bottom:0px">\r\n                          <input type="text" name="fecha" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.fecha" is-open="fechas.fecha" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" ng-change="revisarFecha(); cambiarFechaComprobante();" class="form-control form-white" required>\r\n                          <span class="input-group-btn">\r\n                            <button type="button" class="btn btn-primary" ng-click="open(\'fecha\')" style="margin-bottom:0px"><i class="glyphicon glyphicon-calendar"></i></button>\r\n                          </span>\r\n                        </p>\r\n                    </div>\r\n                    <div class="col-sm-5 text-danger" ng-show="form[\'fecha\'].$error.date">\r\n                        Fecha no Válida\r\n                    </div>\r\n                </div>\r\n\r\n\r\n\r\n                <div class="form-group required" ng-if="objeto.fechas == 2">\r\n                    <label class="col-sm-3 control-label">Fecha Inicial:</label>\r\n                    <div class="col-sm-3">\r\n                        <p class="input-group" style="margin:0px; padding:0px">\r\n                          <input type="text" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.inicio" is-open="fechas.fechaInicial" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" required>\r\n                          <span class="input-group-btn">\r\n                            <button type="button" class="btn btn-primary" ng-click="open(\'fechaInicial\')"><i class="glyphicon glyphicon-calendar"></i></button>\r\n                          </span>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n                <div class="form-group required" ng-if="objeto.fechas == 2">\r\n                    <label class="col-sm-3 control-label">Fecha Final:</label>\r\n                    <div class="col-sm-3">\r\n                        <p class="input-group" style="margin:0px; padding:0px">\r\n                          <input type="text" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.fin" is-open="fechas.fechaFinal" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" required>\r\n                          <span class="input-group-btn">\r\n                            <button type="button" class="btn btn-primary" ng-click="open(\'fechaFinal\')"><i class="glyphicon glyphicon-calendar"></i></button>\r\n                          </span>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group required" ng-if="objeto.fechas == 3">\r\n                    <label class="col-sm-3 control-label">Mes:</label>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.mes" ng-options="mes as mes.mes for mes in constantes.MESES | filter:filtroMesFinal" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                    <div class="col-sm-2">\r\n                        <select ng-model="objeto.anio" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group required" ng-if="objeto.fechas == 4">\r\n                    <label class="col-sm-3 control-label">Mes Inicial:</label>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.mesInicial" ng-options="mes as mes.mes for mes in constantes.MESES" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                    <div class="col-sm-2">\r\n                        <select ng-model="objeto.anioInicial" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group required" ng-if="objeto.fechas == 4">\r\n                    <label class="col-sm-3 control-label">Mes Final:</label>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.mesFinal" ng-options="mes as mes.mes for mes in constantes.MESES | filter:filtroMesFinal" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                    <div class="col-sm-2">\r\n                        <select ng-model="objeto.anioFinal" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n	<button class="btn btn-primary" ng-disabled="form.$invalid" abrir-ventana="{{ constantes.URL + \'tesoreria-informes/informe-ventas/imprimir/?\'+  rutaInforme()  }}" ventana-nombre="IMPRIMIRINFORMEVENTAS" ventana-ancho="750" ventana-alto="600">Imprimir</button>     \r\n    <button class="btn btn-default" ng-click="cancel()">Cerrar</button>        \r\n</div>'),a.put("views/reports/report-libro-boletas.html",'<div class="modal-header">\r\n    <h3 class="modal-title">Libro de Boletas</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" name="form" novalidate>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Parámetros</div>\r\n            <div class="panel-body">\r\n                <div class="form-group">\r\n                    <label class="col-sm-4 control-label">Mes:</label>\r\n                    <div class="col-sm-4">\r\n                        <select ng-model="objeto.mesInicial" ng-options="mes as mes.mes for mes in constantes.MESES" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.anioInicial" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                <div class="form-group">\r\n                    <label class="col-sm-4 control-label">Imprimir sobre Hojas Foliadas:</label>\r\n                    <div class="col-sm-4">\r\n                        <input type="checkbox" icheck ng-model="objeto.hojas">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n	<button class="btn btn-primary" ng-disabled="form.$invalid" abrir-ventana="{{ constantes.URL + \'importacion-libro-boleta/libro-boletas/imprimir/?\'+  rutaInforme()  }}" ventana-nombre="IMPRIMIRLIBROBOLETAS" ventana-ancho="750" ventana-alto="600">Imprimir</button>     \r\n    <button class="btn btn-default" ng-click="cancel()">Cerrar</button>        \r\n</div>'),a.put("views/reports/report-libro-compras.html",'<div class="modal-header">\r\n    <h3 class="modal-title">Libro de Compras</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" name="form" novalidate>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Parámetros</div>\r\n            <div class="panel-body">\r\n                <div class="form-group">\r\n                    <label class="col-sm-4 control-label">Mes:</label>\r\n                    <div class="col-sm-4">\r\n                        <select ng-model="objeto.mesInicial" ng-options="mes as mes.mes for mes in constantes.MESES" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.anioInicial" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group">\r\n                    <label class="col-sm-4 control-label">Imprimir sobre Hojas Foliadas:</label>\r\n                    <div class="col-sm-4">\r\n                        <input type="checkbox" icheck ng-model="objeto.hojas">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n	<button class="btn btn-primary" ng-disabled="form.$invalid" abrir-ventana="{{ constantes.URL + \'importacion-libro-compra/libro-compras/imprimir/?\'+  rutaInforme()  }}" ventana-nombre="IMPRIMIRLIBROCOMPRAS" ventana-ancho="750" ventana-alto="600">Imprimir</button>     \r\n    <button class="btn btn-default" ng-click="cancel()">Cerrar</button>        \r\n</div>'),a.put("views/reports/report-libro-diario.html",'<div class="modal-header">\r\n    <h3 class="modal-title">Libro Diario</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" name="form" novalidate>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Parámetros</div>\r\n            <div class="panel-body">\r\n                <div class="form-group">\r\n                    <label class="col-sm-4 control-label">Fecha Inicial:</label>\r\n                    <div class="col-sm-5">\r\n                        <p class="input-group">\r\n                          <input type="text" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.inicio" is-open="objeto.fechaInicial" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white">\r\n                          <span class="input-group-btn">\r\n                            <button type="button" class="btn btn-primary" ng-click="openFechaInicial()"><i class="glyphicon glyphicon-calendar"></i></button>\r\n                          </span>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n                <div class="form-group">\r\n                    <label class="col-sm-4 control-label">Fecha Final:</label>\r\n                    <div class="col-sm-5">\r\n                        <p class="input-group">\r\n                          <input type="text" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.fin" is-open="objeto.fechaFinal" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white">\r\n                          <span class="input-group-btn">\r\n                            <button type="button" class="btn btn-primary" ng-click="openFechaFinal()"><i class="glyphicon glyphicon-calendar"></i></button>\r\n                          </span>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n	<button class="btn btn-primary" ng-click="imprimir()" abrir-ventana="{{ constantes.URL + \'contabilidad-registro-asientos/libro-diario/imprimir/?inicio=\'+ convFecha( objeto.inicio) +\'&fin=\'+ convFecha( objeto.fin ) }}" ventana-nombre="IMPRIMIRLIBRODIARIO" ventana-ancho="800" ventana-alto="600">Imprimir</button>     \r\n    <button class="btn btn-default" ng-click="cancel()">Cerrar</button>        \r\n</div>'),a.put("views/reports/report-libro-honorarios.html",'<div class="modal-header">\r\n    <h3 class="modal-title">Libro de Honorarios</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" name="form" novalidate>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Parámetros</div>\r\n            <div class="panel-body">\r\n                <div class="form-group">\r\n                    <label class="col-sm-4 control-label">Mes:</label>\r\n                    <div class="col-sm-4">\r\n                        <select ng-model="objeto.mesInicial" ng-options="mes as mes.mes for mes in constantes.MESES" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.anioInicial" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n        </div>\r\n    </div></form>\r\n</div>\r\n<div class="modal-footer">\r\n	<button class="btn btn-primary" ng-disabled="form.$invalid" abrir-ventana="{{ constantes.URL + \'boletas-honorarios/libro-honorarios/imprimir/?\'+  rutaInforme()  }}" ventana-nombre="IMPRIMIRLIBROHONORARIOS" ventana-ancho="750" ventana-alto="600">Imprimir</button>     \r\n    <button class="btn btn-default" ng-click="cancel()">Cerrar</button>        \r\n</div>'),a.put("views/reports/report-libro-mayor-vista-previa.html",'<div class="modal-header">\r\n   \r\n</div>\r\n<div class="modal-body">\r\n    <div class="row">\r\n        <div class="col-sm-12" style="text-align: center">\r\n            <span class="text-primary" style="font-size: 20px; font-weight: bold">\r\n                Vista Previa - Libro Mayor\r\n            </span>\r\n        </div>\r\n    </div>\r\n    <div class="row" style="margin-bottom: 10px">\r\n        <div class="col-sm-12" style="text-align: center">\r\n            <span style="font-size: 15px; font-weight: bold">\r\n                Desde: {{ registros.inicio }} - \r\n                Hasta: {{ registros.fin }}\r\n            </span>\r\n        </div>\r\n    </div>\r\n    <div style="max-height: 500px; overflow-y: auto; overflow-x:hidden">\r\n        <div ng-repeat="datos in registros.cuentas">\r\n            <table class="table table-striped table-bordered" ng-init="datos.saldoContable=0;">\r\n                <tr>\r\n                    <th class="bg-primary" colspan="8" style="border: none !important">\r\n                        <div class="row form-horizontal">\r\n                            <div class="col-sm-12">\r\n                                <div class="form-group">\r\n                                    <label class="label-control col-sm-3">Cuenta Mayor:</label>\r\n                                    <div class="col-sm-8">\r\n                                        {{ datos.cuenta_mayor }}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div class="form-group">\r\n                                    <label class="label-control col-sm-3">Sub-Cuenta:</label>\r\n                                    <div class="col-sm-8">\r\n                                        <b>{{ datos.codigo }}</b> / {{ datos.cuenta }}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </th>\r\n                </tr>\r\n                <tr class="bg-primary">\r\n                    <th style="width: 40px">#</th>\r\n                    <th class="col-xs-1">Fecha</th>\r\n                    <th class="col-xs-1">Tipo</th>\r\n                    <th class="col-xs-1">N°</th>\r\n                    <th class="col-xs-6">Glosa</th>\r\n                    <th class="col-sm-1">Debito</th>\r\n                    <th class="col-sm-1">Credito</th>\r\n                    <th class="col-sm-1">Saldo</th>\r\n                </tr>\r\n                <tbody ng-repeat="(fecha, comprobantes) in datos.asientos">\r\n                    <tr ng-show="false" ng-repeat-start="( comprobante, asientos ) in comprobantes" ng-init="datos.index=0">\r\n                        <td colspan="8"></td>\r\n                    </tr>                   \r\n                    <tr ng-repeat-end ng-repeat="asiento in asientos" class="textoVistaPrevia">\r\n                        <td style="text-align: right; padding: 2px !important">\r\n                            {{ asiento.correlativo }}\r\n                        </td>\r\n                        <td class="text-center">{{ fecha | date : \'dd-MM-yyyy\' }}</td>\r\n                        <td>{{ asiento.comprobante }} </td>\r\n                        <td class="text-center">\r\n                            <a class="enlaceVistaPrevia" href="javascript:void(0);" uib-tooltip-html="\'Ver Comprobante Contable: <b>\'+asiento.comprobante+\':\'+asiento.numero+\'</b>\'" ng-click="vistaPreviaComprobante(asiento.id);">{{ asiento.numero }}</a>\r\n                        </td>\r\n                        <td>{{ asiento.glosa }}</td>\r\n                        <td style="text-align: right">\r\n                            <span ng-show="asiento.debito">{{ asiento.debito | currency:"$":0 }}</span>\r\n                        </td>\r\n                        <td style="text-align: right">\r\n                            <span ng-show="asiento.credito">{{ asiento.credito | currency:"$":0 }}</span>\r\n                        </td>\r\n                        <td style="text-align: right">\r\n                            ${{ asiento.saldo | number:0 }}\r\n                        </td>\r\n                    </tr>                   \r\n                </tbody>\r\n                <tr style="background: none !important" class="textoVistaPrevia">\r\n                    <td colspan="5" style="text-align: right; border: none !important">\r\n                        <strong>Total Cuenta:</strong>\r\n                    </td>\r\n                    <td style="text-align: right"><strong>{{ datos.totalDebito | currency:"$":0 }}</strong></td>\r\n                    <td style="text-align: right"><strong>{{ datos.totalCredito | currency:"$":0 }}</strong></td>\r\n                    <td style="text-align: right">\r\n                        <strong ng-if="datos.totalSaldo >= 0" class="text-primary">{{ datos.totalSaldo | currency:"$":0 }}</strong>\r\n                        <strong ng-if="datos.totalSaldo < 0" class="text-danger">${{ datos.totalSaldo | number:0 }}</strong>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="modal-footer">\r\n	<button class="btn btn-primary" ng-disabled="form.$invalid" abrir-ventana="{{ constantes.URL + \'contabilidad-registro-asientos/libro-mayor/imprimir/?\'+  rutaInforme  }}" ventana-nombre="IMPRIMIRLIBROMAYOR" ventana-ancho="750" ventana-alto="600">Imprimir/Exportar</button>     \r\n    <button class="btn btn-default" ng-click="cancel()">Cerrar</button>        \r\n</div>'),
a.put("views/reports/report-libro-mayor.html",'<script type="text/ng-template" id="customTemplate.html">\r\n    <a style="cursor: pointer;">\r\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\r\n    </a>\r\n</script>\r\n<div class="modal-header">\r\n    <h3 class="modal-title">Libro Mayor</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" name="form" novalidate>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Parámetros</div>\r\n            <div class="panel-body">\r\n                <div class="form-group">\r\n                    <label class="col-sm-4 control-label">Establecer Periodo:</label>\r\n                    <div class="col-sm-8">\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="1" icheck>\r\n                            Por Fechas\r\n                        </label>&nbsp;&nbsp;&nbsp;&nbsp;\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="2" icheck>\r\n                            Por Meses\r\n                        </label>\r\n                        <label>&nbsp;&nbsp;&nbsp;&nbsp;\r\n                            <input type="radio" ng-model="objeto.fechas" ng-value="3" icheck>\r\n                            Por Año\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                <div class="form-group" ng-if="objeto.fechas === 1">\r\n                    <label class="col-sm-4 control-label">Fecha Inicial:</label>\r\n                    <div class="col-sm-5">\r\n                        <p class="input-group" style="margin:0px; padding:0px">\r\n                          <input type="text" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.inicio" is-open="objeto.fechaInicial" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" required>\r\n                          <span class="input-group-btn">\r\n                            <button type="button" class="btn btn-primary" ng-click="openFechaInicial()"><i class="glyphicon glyphicon-calendar"></i></button>\r\n                          </span>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n                <div class="form-group" ng-if="objeto.fechas === 1">\r\n                    <label class="col-sm-4 control-label">Fecha Final:</label>\r\n                    <div class="col-sm-5">\r\n                        <p class="input-group" style="margin:0px; padding:0px">\r\n                          <input type="text" uib-datepicker-popup="dd-MM-yyyy" ng-model="objeto.fin" is-open="objeto.fechaFinal" datepicker-options="dateOptions" close-text="Cerrar" current-text="Hoy" clear-text="Borrar" class="form-control form-white" required>\r\n                          <span class="input-group-btn">\r\n                            <button type="button" class="btn btn-primary" ng-click="openFechaFinal()"><i class="glyphicon glyphicon-calendar"></i></button>\r\n                          </span>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group" ng-if="objeto.fechas === 2">\r\n                    <label class="col-sm-4 control-label">Mes Inicial:</label>\r\n                    <div class="col-sm-4">\r\n                        <select ng-model="objeto.mesInicial" ng-options="mes as mes.mes for mes in constantes.MESES" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.anioInicial" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group" ng-if="objeto.fechas === 2">\r\n                    <label class="col-sm-4 control-label">Mes Final:</label>\r\n                    <div class="col-sm-4">\r\n                        <select ng-model="objeto.mesFinal" ng-options="mes as mes.mes for mes in constantes.MESES | filter:filtroMesFinal" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.anioFinal" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group" ng-if="objeto.fechas === 3">\r\n                    <label class="col-sm-4 control-label">Año:</label>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.anioInicial" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group">\r\n                    <label class="col-sm-4 control-label">Cuentas:</label>\r\n                    <div class="col-sm-8">\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.cuentas" ng-value="1" icheck>\r\n                            Todas\r\n                        </label>&nbsp;&nbsp;\r\n                        <label>\r\n                            <input type="radio" ng-model="objeto.cuentas" ng-value="2" icheck>\r\n                            Establecer Rango\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group" ng-if="objeto.cuentas === 2">\r\n                    <label class="col-sm-4 control-label">Cuenta Inicial:</label>\r\n                    <div class="col-sm-8">\r\n                    <!--\r\n                        <select ng-model="objeto.cuentaInicial" ng-options="cuenta as (\'&nbsp;\'.repeat( (cuenta.nivel - 1) * 5 ) + cuenta.nombre + \' | \'+ cuenta.codigo) disable when !cuenta.cuenta for cuenta in cuentas" class="form-control form-white" ng-change="omitirBlancos(\'cuentaInicial\')" required>\r\n                        </select>\r\n                    -->\r\n                        <div class="col-sm-10" ng-show="!objeto.cuentaInicial.id" style="padding: 0px">\r\n                            <input type="text" ng-show="!objeto.cuentaInicial.id" ng-model="objeto.cuentaInicial" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="cuentaInicial" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" ng-class="{\'inputLoading\' : cuentaInicial }" required>\r\n                        </div>\r\n\r\n                        <div class="col-sm-2" ng-show="!objeto.cuentaInicial.id">\r\n                            <button class="btn btn-primary btn-sm" ng-click="buscarCuenta(\'cuentaInicial\');">\r\n                                <i class="fa fa-search"></i>\r\n                            </button>\r\n                        </div>\r\n\r\n                        <span ng-show="objeto.cuentaInicial.id">\r\n                            {{ objeto.cuentaInicial.cuenta }}\r\n                            <a href="javascript:void(0);" class="text-danger" ng-click="objeto.cuentaInicial=\'\';">\r\n                                <i class="fa fa-remove"></i>\r\n                            </a>\r\n                        </span>\r\n\r\n\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group" ng-if="objeto.cuentas === 2">\r\n                    <label class="col-sm-4 control-label">Cuenta Final:</label>\r\n                    <div class="col-sm-8">\r\n                        <!--\r\n                        <select ng-model="objeto.cuentaFinal" ng-options="cuenta as (\'&nbsp;\'.repeat( (cuenta.nivel - 1) * 5 ) + cuenta.nombre + \' | \'+ cuenta.codigo) disable when !cuenta.cuenta for cuenta in cuentas | filter:filtroCuentaFinal"  ng-change="omitirBlancos(\'cuentaFinal\')" class="form-control form-white" required>\r\n                        </select>\r\n                        -->\r\n                        <div class="col-sm-10" ng-show="!objeto.cuentaFinal.id" style="padding: 0px">\r\n                            <input type="text" ng-model="objeto.cuentaFinal" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="cuentaFinal" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" ng-class="{\'inputLoading\' : cuentaFinal }" required>\r\n                        </div>\r\n                        <div class="col-sm-2" ng-show="!objeto.cuentaFinal.id">\r\n                            <button class="btn btn-primary btn-sm" ng-click="buscarCuenta(\'cuentaFinal\');">\r\n                                <i class="fa fa-search"></i>\r\n                            </button>\r\n                        </div>\r\n                        \r\n                        <span ng-show="objeto.cuentaFinal.id">\r\n                            {{ objeto.cuentaFinal.cuenta }}\r\n                            <a href="javascript:void(0);" class="text-danger" ng-click="objeto.cuentaFinal=\'\';">\r\n                                <i class="fa fa-remove"></i>\r\n                            </a>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group">\r\n                    <label class="col-sm-4 control-label">Imprimir sobre Hojas Foliadas:</label>\r\n                    <div class="col-sm-4">\r\n                        <input type="checkbox" icheck ng-model="objeto.hojas">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n\r\n    <button class="btn btn-warning" ng-disabled="form.$invalid" ng-click="vistaPrevia()">Vista Previa</button>  \r\n\r\n	<button class="btn btn-primary" ng-disabled="form.$invalid" abrir-ventana="{{ constantes.URL + \'contabilidad-registro-asientos/libro-mayor/imprimir/?\'+  rutaInforme()  }}" ventana-nombre="IMPRIMIRLIBRODIARIO" ventana-ancho="750" ventana-alto="600">Imprimir</button>     \r\n    <button class="btn btn-default" ng-click="cancel()">Cerrar</button>        \r\n</div>'),a.put("views/reports/report-libro-ventas.html",'<div class="modal-header">\r\n    <h3 class="modal-title">Libro de Ventas</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" name="form" novalidate>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Parámetros</div>\r\n            <div class="panel-body">\r\n                <div class="form-group">\r\n                    <label class="col-sm-4 control-label">Mes:</label>\r\n                    <div class="col-sm-4">\r\n                        <select ng-model="objeto.mesInicial" ng-options="mes as mes.mes for mes in constantes.MESES" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.anioInicial" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group">\r\n                    <label class="col-sm-4 control-label">Imprimir sobre Hojas Foliadas:</label>\r\n                    <div class="col-sm-4">\r\n                        <input type="checkbox" icheck ng-model="objeto.hojas">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n	<button class="btn btn-primary" ng-disabled="form.$invalid" abrir-ventana="{{ constantes.URL + \'importacion-libro-venta/libro-ventas/imprimir/?\'+  rutaInforme()  }}" ventana-nombre="IMPRIMIRLIBROCOMPRAS" ventana-ancho="750" ventana-alto="600">Imprimir</button>     \r\n    <button class="btn btn-default" ng-click="cancel()">Cerrar</button>        \r\n</div>'),a.put("views/reports/report-recuadro-2-f22.html",'<div class="modal-header">\r\n    <h3 class="modal-title">Resumen Recuadro N°2 - F22</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form class="form-horizontal" name="form" novalidate>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">Parámetros</div>\r\n            <div class="panel-body">\r\n\r\n                <div class="form-group">\r\n                    <label class="col-sm-4 control-label">Año:</label>\r\n                    <div class="col-sm-3">\r\n                        <select ng-model="objeto.anioInicial" ng-options="anio as anio.value for anio in opciones.anios" class="form-control form-white" required>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-primary" ng-disabled="form.$invalid" abrir-ventana="{{ constantes.URL + \'sii-recuadro-f22/resumen-recuadro2-f22/imprimir/?\' + rutaInforme() }}" ventana-nombre="IMPRIMIRBALANCETRIBUTARIO" ventana-ancho="800" ventana-alto="600">Imprimir</button>     \r\n    <button class="btn btn-default" ng-click="cancel()">Cerrar</button>        \r\n</div>'),a.put("views/reports/report-vista-previa-certificado-honorarios.html",'<div class="modal-header">\r\n    <h3 class="modal-title">Vista Previa Certificado Honorario</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <div style="min-height:400px">\r\n        <div ng-if="validando">\r\n            <strong>\r\n                <span class="text-primary">\r\n                    El Certificado de Honorarios se encuentra en proceso de validación. Espere un momento..\r\n                </span>\r\n            </strong>\r\n        </div>\r\n        <iframe ng-if="url" type="text/html" id="certificado" name="certificado" width="100%" height="500" ng-src="{{ url }}" frameborder="0" onload="finCargando()"></iframe>\r\n    </div>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-default" ng-click="cancel()">Salir</button>\r\n    <button class="btn btn-success" ng-click="validar()" ng-if="sinValidar">Validar</button>\r\n    <button class="btn btn-primary" ng-click="imprimir()" ng-if="!sinValidar">Imprimir</button>\r\n    \r\n</div>'),a.put("views/sii-control-folios.html",'<div class="header">\n    <h2>Control de Folios para <b>Timbraje SII</b></h2>\n</div>\n<!-- /.row -->\n<div class="row">\n    <div class="col-md-12">        \n        <div class="form-group">\n        	<label for="orden" class="control-label col-md-1">\n                Ordenar:\n            </label>\n            <div class="col-md-3">\n                <select ng-model="orden" ng-init="orden=\'-fecha\'" id="orden" class="form-control form-white">\n                    <option value="-fecha">Fecha (Desc)</option>\n                    <option value="fecha">Fecha (Asc)</option>\n                    <option value="desde">Desde</option>\n                    <option value="hasta">Hasta</option>\n                    <option value="responsable">Responsable</option>\n                    <option value="formulario3230">Form 3230</option>\n                </select>\n            </div>\n            <label for="filtro" class="col-md-1 control-label">Filtrar:</label>\n            <div class="col-md-4">\n              <input id="filtro" type="text" class="form-control form-white" ng-model="filtro">\n            </div>\n            <div class="col-md-3" style="text-align:right; padding-right:0px">\n                <button class="btn btn-primary btn-md" ng-click="open({});">\n                    <i class="fa fa-plus"></i> Nuevo\n                </button>\n\n                <div class="btn-group">\n	            	<button class="btn btn-dark btn-md" type="button" data-toggle="dropdown" aria-expanded="false">\n	                    <i class="fa fa-wrench"></i> Herramientas <span class="caret"></span>\n	                </button>\n	                <ul class="dropdown-menu dropdown-menu-sm" role="menu">\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'sii-control-folios/exportar/excel/2007\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 2007 (.xlsx)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'sii-control-folios/exportar/excel/97\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 97/2003 (.xls)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'sii-control-folios/exportar/pdf\' }}">\n	                            <i class="fa fa-file-pdf-o"></i> Exportar PDF (.pdf)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a href="javascript:void(0);">\n	                            <i class="fa fa-print"></i> Imprimir\n	                        </a>\n	                    </li>\n	                </ul>\n                </div>\n            </div>\n        </div>\n        <div class="form-group">\n            <table class="table table-striped table-hover">\n                <thead>\n                    <tr>\n                        <th>#</th>\n                        <th class="col-sm-1">Fecha</th>\n                        <th class="col-sm-1">Desde</th>\n                        <th class="col-sm-1">Hasta</th>\n                        <th class="col-sm-4">Responsable</th>\n                        <th class="col-sm-1">Autorizado</th>\n                        <th class="col-sm-2">Form 3230</th>\n                        <th class="col-sm-2">Acciones</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="dato in datos | orderBy:orden | filter:filtro">\n                        <td>{{ $index + 1 }}</td>\n                        <td>{{ dato.fecha }}</td>\n                        <td>{{ dato.desde }}</td>\n                        <td>{{ dato.hasta }}</td>\n                        <td>{{ dato.responsable }}</td>\n                        <td>{{ dato.autorizado }}</td>\n                        <td>\n                            <a ng-if="dato.formulario" ng-href="{{ constantes.URL + dato.formulario }}" class="btn btn-sm btn-primary" target="_black">\n                                <i class="fa fa-search"></i>\n                            </a>\n                        </td>\n                        <td>\n                            <a class="btn-acciones btn btn-default" href="javascript:void(0);" ng-click="editar(dato);" uib-tooltip-html="toolTipEdicion(dato.nombre)">\n                                <i class="fa fa-pencil"></i>\n                            </a>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>'),a.put("views/sii-plan-de-cuentas.html",'<div class="header">\n    <h2>Plan de Cuentas <b>SII / DJ</b></h2>\n</div>\n<!-- /.row -->\n<div class="row">\n    <div class="col-md-12">        \n        <div class="form-group">\n\n        	<label for="orden" class="control-label col-md-1">\n                Ordenar:\n            </label>\n            <div class="col-md-3">\n                <select ng-model="orden" ng-init="orden=\'codigo\'" id="orden" class="form-control form-white">\n                    <option value="codigo">Código</option>\n                    <option value="cuenta">Cuenta</option>\n                    <option value="dj">DJ</option>\n                </select>\n            </div>\n\n\n            <label for="orden" class="control-label col-md-1">\n                Filtrar:\n            </label>\n            <div class="col-md-3">\n                <input id="filtro" type="text" class="form-control form-white" ng-model="filtro">\n            </div>      \n\n\n            <div class="col-md-4" style="text-align:right; padding-right:0px">\n                \n\n                <div class="btn-group">\n	            	<button class="btn btn-dark btn-md" type="button" data-toggle="dropdown" aria-expanded="false">\n	                    <i class="fa fa-wrench"></i> Herramientas <span class="caret"></span>\n	                </button>\n	                <ul class="dropdown-menu dropdown-menu-sm" role="menu">\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'sii-plan-de-cuentas/exportar/excel/2007\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 2007 (.xlsx)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'sii-plan-de-cuentas/exportar/excel/97\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 97/2003 (.xls)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'sii-plan-de-cuentas/exportar/pdf\' }}">\n	                            <i class="fa fa-file-pdf-o"></i> Exportar PDF (.pdf)\n	                        </a>\n	                    </li>\n	                </ul>\n                </div>\n            </div>\n        </div>\n        \n        <div class="form-group">\n            <table class="table table-striped table-hover filter-head">\n                <thead>\n                    <tr>\n                        <th class="col-md-2">Codigo</th>\n                        <th class="col-md-6">Cuenta</th>\n                        <th class="col-md-2">DJ</th>\n                        <th class="col-md-2">Acciones</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="dato in datos | orderBy:orden | filter:filtro">\n                        <td>{{ dato.codigo }}</td>\n                        <td style="padding-left:{{ (dato.nivel - 1) *15 }}px">\n                            <span ng-if="dato.nivel!=1">{{ dato.cuenta }}</span>\n                            <span ng-if="dato.nivel==1" class="text-primary"><strong>{{ dato.cuenta }}</strong></span>\n                        </td>\n                        <td>\n                            <span>{{ dato.dj }}</span>\n                        </td>\n                        <td>\n                            <span ng-show="dato.tipo==1">\n	                            <a class="btn-acciones btn btn-default" href="javascript:void(0);" ng-click="editarClasificacion(dato);" uib-tooltip-html="toolTipEdicionClasificacion(dato.nombre)">\n	                                <i class="fa fa-pencil"></i>\n	                            </a>\n	                            <a class="btn-acciones btn btn-success" href="javascript:void(0);" ng-click="agregarClasificacion(dato);" uib-tooltip-html="toolTipAgregarClasificacion(dato.nombre)">\n	                                <i class="fa fa-plus"></i>\n	                            </a>\n	                            <a class="btn-acciones btn btn-primary" href="javascript:void(0);" ng-click="agregarCuenta(dato);" uib-tooltip-html="toolTipAgregarCuenta(dato.nombre)">\n	                                <i class="fa fa-plus"></i>\n	                            </a>\n	                            <a class="btn-acciones btn btn-danger" href="javascript:void(0);" confirmation-click="eliminarClasificacion( dato );" confirmation-needed="La Clasificación de Cuenta: <b>{{ dato.nombre }}</b> y sus Sub Clasificaciones, Cuentas y Sub-Cuentas serán eliminadas.Desea continuar?">\n	                                <i class="fa fa-remove"></i>\n	                            </a>\n                            </span>\n\n\n                            <span ng-show="dato.tipo==2">\n	                            <a class="btn-acciones btn btn-default" href="javascript:void(0);" ng-click="editarCuenta(dato);" uib-tooltip-html="toolTipEdicionCuenta(dato.nombre)">\n	                                <i class="fa fa-pencil"></i>\n	                            </a>\n	                            <a class="btn-acciones btn btn-danger" href="javascript:void(0);" confirmation-click="eliminarCuenta( dato );" confirmation-needed="La Cuenta: <b>{{ dato.nombre }}</b> y sus Sub-Cuentas serán eliminadas.Desea continuar?">\n	                                <i class="fa fa-remove"></i>\n	                            </a>\n                            </span>\n\n\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>'),a.put("views/tipos-de-comprobante.html",'<div class="header">\n    <h2>Administración de <b>Tipos de Comprobante</b></h2>\n</div>\n<!-- /.row -->\n<div class="row">\n    <div class="col-md-12">        \n        <div class="form-group">\n        	<label for="orden" class="control-label col-md-1">\n                Ordenar:\n            </label>\n            <div class="col-md-3">\n                <select ng-model="orden" ng-init="orden=\'nombre\'" id="orden" class="form-control form-white">\n                    <option value="nombre">Tipo de Comprobante</option>\n                </select>\n            </div>\n            <label for="filtro" class="col-md-1 control-label">Filtrar:</label>\n            <div class="col-md-4">\n              <input id="filtro" type="text" class="form-control form-white" ng-model="filtro">\n            </div>\n            <div class="col-md-3" style="text-align:right; padding-right:0px">\n                <button class="btn btn-primary btn-md" ng-click="open({}, false);">\n                    <i class="fa fa-plus"></i> Nuevo\n                </button>\n\n                <div class="btn-group">\n	            	<button class="btn btn-dark btn-md" type="button" data-toggle="dropdown" aria-expanded="false">\n	                    <i class="fa fa-wrench"></i> Herramientas <span class="caret"></span>\n	                </button>\n	                <ul class="dropdown-menu dropdown-menu-sm" role="menu">\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'tipos-comprobante/exportar/excel/2007\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 2007 (.xlsx)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'tipos-comprobante/exportar/excel/97\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 97/2003 (.xls)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'tipos-comprobante/exportar/pdf\' }}">\n	                            <i class="fa fa-file-pdf-o"></i> Exportar PDF (.pdf)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a href="javascript:void(0);">\n	                            <i class="fa fa-print"></i> Imprimir\n	                        </a>\n	                    </li>\n	                </ul>\n                </div>\n            </div>\n        </div>\n        <div class="form-group">\n            <table class="table table-striped table-hover">\n                <thead>\n                    <tr>\n                        <th>#</th>\n                        <th class="col-sm-10">Tipo de Comprobante</th>\n                        <th class="col-sm-2">Acciones</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="dato in datos | orderBy:orden | filter:filtro">\n                        <td>{{ $index + 1 }}</td>\n                        <td>{{ dato.nombre }}</td>\n                        <td>\n                            <a class="btn-acciones btn btn-default" href="javascript:void(0);" ng-click="editar(dato);" uib-tooltip-html="toolTipEdicion(dato.nombre)">\n                                <i class="fa fa-pencil"></i>\n                            </a>\n                            <a class="btn-acciones btn btn-danger" href="javascript:void(0);" confirmation-click="eliminar( dato );" confirmation-needed="El Tipo de Comprobante: <b>{{ dato.nombre }}</b> será eliminado.Desea continuar?">\n                                <i class="fa fa-remove"></i>\n                            </a>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>\n\n<script type="text/ng-template" id="myModalFormTipoComprobante.html">\n    <div class="modal-header">\n        <h3 class="modal-title">Administración de Tipo de Comprobante</h3>\n    </div>\n    <div class="modal-body">\n        <form class="form-horizontal" name="form" novalidate >\n            <div class="panel panel-default">\n                <div class="panel-heading">Datos del Tipo de Comprobante</div>\n                <div class="panel-body">\n                    <div class="form-group" ng-class="{\'has-error\' : errores.nombre.length }">\n                        <label class="col-sm-3 control-label" for="nombre">Nombre:</label>\n                        <div class="col-sm-6">\n                            <input type="text" ng-model="objeto.nombre" id="nombre" class="form-control form-white" placeholder="Nombre del Tipo de Comprobante" />\n                        </div>\n                        <span ng-if="errores.nombre.length" class="text-danger">{{ errores.nombre[0] }}</span>\n                    </div>\n                </div>\n            </div>\n        </form>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" ng-click="cancel()">Cancelar</button>\n        <button class="btn btn-primary" ng-disabled="form.$invalid" ng-click="guardar()">Guardar</button>\n    </div>\n</script>'),a.put("views/tipos-documentos-sii.html",'<div class="header">\n    <h2>Administración de <b>Tipos de Documentos SII</b></h2>\n</div>\n<!-- /.row -->\n<div class="row">\n    <div class="col-md-12">        \n        <div class="form-group">\n            <label for="orden" class="control-label col-md-1">\n                Ordenar:\n            </label>\n            <div class="col-md-3">\n                <select ng-model="orden" ng-init="orden=\'codigo\'" id="orden" class="form-control form-white">\n                    <option value="codigo">Código</option>\n                    <option value="tipo">Tipo</option>\n                    <option value="nombre">Nombre</option>\n                </select>\n            </div>\n            <label for="filtro" class="col-md-1 control-label">Filtrar:</label>\n            <div class="col-md-4">\n              <input id="filtro" type="text" class="form-control form-white" ng-model="filtro">\n            </div>\n            <div class="col-md-3" style="text-align:right; padding-right:0px">\n                <button class="btn btn-primary btn-md" ng-click="open({}, false);">\n                    <i class="fa fa-plus"></i> Nuevo\n                </button>\n\n                <div class="btn-group">\n	            	<button class="btn btn-dark btn-md" type="button" data-toggle="dropdown" aria-expanded="false">\n	                    <i class="fa fa-wrench"></i> Herramientas <span class="caret"></span>\n	                </button>\n	                <ul class="dropdown-menu dropdown-menu-sm" role="menu">\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'tipos-documento-sii/exportar/excel/2007\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 2007 (.xlsx)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'tipos-documento-sii/exportar/excel/97\' }}">\n	                            <i class="fa fa-file-excel-o"></i> Exportar a Excel 97/2003 (.xls)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a ng-href="{{ constantes.URL + \'tipos-documento-sii/exportar/pdf\' }}">\n	                            <i class="fa fa-file-pdf-o"></i> Exportar PDF (.pdf)\n	                        </a>\n	                    </li>\n	                    <li>\n	                        <a href="javascript:void(0);">\n	                            <i class="fa fa-print"></i> Imprimir\n	                        </a>\n	                    </li>\n	                </ul>\n                </div>\n            </div>\n        </div>\n        <div class="form-group">\n            <table class="table table-striped table-hover">\n                <thead>\n                    <tr>\n                        <th>#</th>\n                        <th class="col-sm-1">Código</th>\n                        <th class="col-sm-2">Tipo</th>\n                        <th class="col-sm-6">Documento SII</th>\n                        <th class="col-sm-1">Abreviación</th>\n                        <th class="col-sm-2">Acciones</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="dato in datos | orderBy:orden | filter:filtro">\n                        <td>{{ $index + 1 }}</td>\n                        <td>{{ dato.codigo }}</td>\n                        <td>{{ dato.tipo }}</td>\n                        <td>{{ dato.nombre }}</td>\n                        <td>{{ dato.abreviacion }}</td>\n                        <td>\n                            <a class="btn-acciones btn btn-default" href="javascript:void(0);" ng-click="editar(dato);" uib-tooltip-html="toolTipEdicion(dato.nombre, dato.tipo)">\n                                <i class="fa fa-pencil"></i>\n                            </a>\n                            <a class="btn-acciones btn btn-danger" href="javascript:void(0);" confirmation-click="eliminar( dato );" confirmation-needed="El Documento del SII: <b>{{ dato.nombre }} </b> de Tipo: <b>{{ dato.tipo }}</b> será eliminado.Desea continuar?">\n                                <i class="fa fa-remove"></i>\n                            </a>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>\n\n\n<script type="text/ng-template" id="customTemplate.html">\n    <a style="cursor: pointer;">\n        <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\n    </a>\n</script>\n\n\n<script type="text/ng-template" id="myModalFormTipoDocumentoSii.html">\n    <div class="modal-header">\n        <h3 class="modal-title">Administración de Tipo de Documento SII</h3>\n    </div>\n    <div class="modal-body">\n        <form class="form-horizontal" name="form" novalidate >\n            <div class="panel panel-default">\n                <div class="panel-heading">Datos del Tipo de Documento SII</div>\n                <div class="panel-body">\n                    <div class="form-group" ng-class="{\'has-error\' : errores.nombre.length }">\n                        <label class="col-sm-3 control-label" for="nombre">Nombre:</label>\n                        <div class="col-sm-6">\n                            <input type="text" ng-model="objeto.nombre" id="nombre" class="form-control form-white" placeholder="Nombre del Tipo de Documento SII" />\n                        </div>\n                        <span ng-if="errores.nombre.length" class="text-danger">{{ errores.nombre[0] }}</span>\n                    </div>\n                    <div class="form-group" ng-class="{\'has-error\' : errores.nombre.length }">\n                        <label class="col-sm-3 control-label" for="nombre">Tipo:</label>\n                        <div class="col-sm-6  skin skin-square" >\n                        	<div class="icheck-inline">\n	                            <label><input type="radio" icheck ng-model="objeto.tipo" ng-value="1" name="radio2" data-radio="iradio_square-blue">Compra (IEC)</label>\n	                            <label><input type="radio" icheck ng-model="objeto.tipo" ng-value="2" name="radio2" checked data-radio="iradio_square-blue">Venta (IEV)</label>\n                                <label><input type="radio" icheck ng-model="objeto.tipo" ng-value="3" name="radio2" checked data-radio="iradio_square-blue">Honorarios</label>\n	                        </div>\n                        </div>\n                        \n                    </div>\n                    <div class="form-group" ng-class="{\'has-error\' : errores.codigo.length }">\n                        <label class="col-sm-3 control-label" for="codigo">Código:</label>\n                        <div class="col-sm-3">\n                            <input type="text"  ng-model="objeto.codigo" id="codigo" class="form-control form-white" placeholder="Codigo" required>                            \n                        </div>\n                        <span ng-if="errores.codigo.length" class="text-danger">{{ errores.codigo[0] }}</span>\n                    </div>\n\n                    <div class="form-group" ng-class="{\'has-error\' : errores.abreviacion.length }">\n                        <label class="col-sm-3 control-label" for="abreviacion">Abreviación:</label>\n                        <div class="col-sm-3">\n                            <input type="text" ng-model="objeto.abreviacion" id="abreviacion" class="form-control form-white" maxlength="10" placeholder="Abrev. Reportes" />\n                        </div>\n                        <span ng-if="errores.abreviacion.length" class="text-danger">{{ errores.abreviacion[0] }}</span>\n                    </div>\n                    \n\n                    <div ng-if="objeto.tipo==3" class="form-group" ng-class="{\'has-error\' : errores.codigo.length }">\n                        <label class="col-sm-3 control-label" for="codigo">Retención 10%:</label>\n                        <div class="col-sm-3">\n                            <label>\n                                <input type="checkbox" ng-model="objeto.retencion" id="retencion" icheck />\n                                Si\n                            </label>                           \n                        </div>\n                    </div>\n                    \n\n                </div>\n            </div>\n\n            <div class="panel panel-default"  ng-if="[1,2].indexOf( objeto.tipo ) >= 0">\n                <div class="panel-heading">Comportamiento Ctas Clientes / Proveedores</div>\n                <div class="panel-body">\n                    \n                    <table class="table table-striped">\n                        <tr>\n                            <th class="col-sm-2">Tipo</th>\n                            <th class="col-sm-8">Cuenta</th>\n                            <th class="col-sm-2">Destino</th>\n                        </tr>\n                        <tr ng-if="objeto.tipo==2">\n                            <td>Clientes</td>\n                            <td>\n                                <div class="col-sm-9" style="padding:0px;">\n                                    <input type="text" ng-model="objeto.cuentaCliente" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="clientes" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required  />\n                                </div>\n                                <div class="col-sm-3">\n                                    <i ng-show="clientes" class="glyphicon glyphicon-refresh"></i>\n                                    <i ng-show="objeto.cuentaCliente.codigo" class="fa fa-check" style="color: #0a0;"></i>\n                                    <button class="btn btn-sm btn-primary" ng-click="buscarCuenta(\'cuentaCliente\')" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                </div>\n                            </td>\n                            <td>\n                                <select ng-model="objeto.cuentaClienteDestino" class="form-control form-white" ng-options="opc as opc.destino for opc in opciones.destinos"></select>\n                            </td>\n                        </tr>\n\n                        <tr ng-if="objeto.tipo==1">\n                            <td>Proveedores</td>\n                            <td>\n                                <div class="col-sm-9" style="padding:0px;">\n                                    <input type="text" ng-model="objeto.cuentaProveedor" placeholder="Buscar Cuenta" uib-typeahead="cuenta as cuenta.cuenta for cuenta in getCuentas($viewValue)" typeahead-loading="proveedores" typeahead-template-url="customTemplate.html" class="form-control form-white" typeahead-editable="false" typeahead-append-to-body="true" required  />\n                                </div>\n                                <div class="col-sm-3">\n                                    <i ng-show="proveedores" class="glyphicon glyphicon-refresh"></i>\n                                    <i ng-show="objeto.cuentaProveedor.codigo" class="fa fa-check" style="color: #0a0;"></i>\n                                    <button class="btn btn-sm btn-primary" ng-click="buscarCuenta(\'cuentaProveedor\')" tooltip="Buscar en Plan de Cuentas"><i class="fa fa-search"></i></button>\n                                </div>\n                            </td>\n                            <td>\n                                <select ng-model="objeto.cuentaProveedorDestino" class="form-control form-white" ng-options="opc as opc.destino for opc in opciones.destinos"></select>\n                            </td>\n                        </tr>\n                    </table>  \n                </div>\n            </div>\n        </form>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" ng-click="cancel()">Cancelar</button>\n        <button class="btn btn-primary" ng-disabled="form.$invalid || !objeto.tipo" ng-click="guardar()">Guardar</button>\n    </div>\n</script>');
}]);